define("confluence/space-details",["document","ajs","jquery","confluence/templates"],function(t,e,a,n){"use strict";return{interface:{setUsersToAddTextField:function(e){var a=t.forms.convertspace.usersToAdd;""!=e&&(""==a.value?a.value=e:a.value=a.value+", "+e)}},initialiser:function(t){function a(a,c,o,i,s){t.ajax({url:e.contextPath()+"/spaces/"+o+"?"+t.param({contentType:c,key:e.Meta.get("space-key"),atl_token:e.Meta.get("atl-token")}),success:function(t){!0===i?a.removeClass("stop-watching").addClass("watch"):a.removeClass("watch").addClass("stop-watching"),a.html(n.SpaceDetails.watchButton({watch:i,text:s}))}})}t("nav.spacetools-nav").attr("aria-label","Space Tools Navigation"),t(".spacetools-nav-secondary").on("click",".menu-item a",function(){var a=t(this).parent(),n=a.attr("data-web-item-key"),c=a.attr("data-web-section-key"),o=e.contextPath()||"/";t.cookie("confluence.last-web-item-clicked",c+"/"+n,{path:o})}),t(".spacetools-nav").on("click","li a",function(){var a=t(this).parent(),n=a.attr("data-web-section-key"),c=a.attr("data-first-web-item-key"),o=e.contextPath()||"/";t.cookie("confluence.last-web-item-clicked",n+"/"+c,{path:o})}),t(".content-navigation.pages-collector").on("click","a.watch",function(n){n.preventDefault(),a(t(this),"","addspacenotification.action",!1,e.I18n.getText("remove.space.notification")),e.trigger("analytics",{name:"watch-space"})}),t(".content-navigation.pages-collector").on("click","a.stop-watching",function(n){n.preventDefault(),a(t(this),"","removespacenotification.action",!0,e.I18n.getText("add.space.notification")),e.trigger("analytics",{name:"unwatch-space"})}),t(".content-navigation.view-blogposts").on("click","a.watch",function(n){n.preventDefault(),a(t(this),"blogpost","addspacenotification.action",!1,e.I18n.getText("space.watches.blogs.stop")),e.trigger("analytics",{name:"watch-blogs"})}),t(".content-navigation.view-blogposts").on("click","a.stop-watching",function(n){n.preventDefault(),a(t(this),"blogpost","removespacenotification.action",!0,e.I18n.getText("space.watches.blogs.start")),e.trigger("analytics",{name:"unwatch-blogs"})})}}}),require("confluence/module-exporter").safeRequire("confluence/space-details",function(t){var e=require("ajs");e.Confluence.SpaceDetails=t.interface,e.toInit(t.initialiser)});
