(function(c){var i=/^\s*|\s*$/g,k="$1"==="B".replace(/A(.)|B/,"$1"),f={majorVersion:"3",minorVersion:"4.9-atlassian-11",releaseDate:"2012-03-06",_init:function(){function b(d){var j=/editor/.test(d);if(d&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(d)||j){/_(src|dev)\.js/g.test(d)&&(a.suffix="_src");if(-1!=(g=d.indexOf("?")))a.query=d.substring(g+1);a.baseURL=j?d.substring(0,d.indexOf("/download/")):d.substring(0,d.lastIndexOf("/"));e&&(-1==a.baseURL.indexOf("://")&&0!==a.baseURL.indexOf("/"))&&
(a.baseURL=e+a.baseURL);j&&(a.baseURL+="/download/resources/com.atlassian.plugins.editor/tinymcesource");return a.baseURL}return null}var a=this,l=document,d=navigator,h=d.userAgent,e,g,n;a.isOpera=c.opera&&opera.buildNumber;a.isWebKit=/WebKit/.test(h);a.isChrome=a.isWebKit&&/Chrome/.test(h);a.isIE11=!!(-1!=h.indexOf("Trident/")&&(-1!=h.indexOf("rv:")||-1!=d.appName.indexOf("Netscape")));a.isIE=!a.isWebKit&&!a.isOpera&&/MSIE/gi.test(h)&&/Explorer/gi.test(d.appName);a.isIE=a.isIE&&/MSIE (\w+)\./.exec(h)[1];
a.isIE=a.isIE||a.isIE11;a.isIE6=a.isIE&&/MSIE [56]/.test(h);a.isIE7=a.isIE&&/MSIE [7]/.test(h);a.isIE8=a.isIE&&/MSIE [8]/.test(h);a.isIE9=a.isIE&&/MSIE [9]/.test(h);a.isIE10=a.isIE&&/MSIE \d\d/.test(h);a.isIE10up=a.isIE&&/MSIE \d\d/.test(h)||a.isIE11;a.isGecko=!a.isWebKit&&!a.isIE11&&/Gecko/.test(h);a.isMac=-1!=h.indexOf("Mac");a.isAir=/adobeair/i.test(h);a.isIDevice=/(iPad|iPhone)/.test(h);a.isIOS5=a.isIDevice&&534<=h.match(/AppleWebKit\/(\d*)/)[1];if(c.tinyMCEPreInit)a.suffix=tinyMCEPreInit.suffix,
a.baseURL=tinyMCEPreInit.base,a.query=tinyMCEPreInit.query;else{a.suffix="";h=l.getElementsByTagName("base");for(d=0;d<h.length;d++)if(n=h[d].href)/^https?:\/\/[^\/]+$/.test(n)&&(n+="/"),e=n?n.match(/.*\//)[0]:"";e||(d=document.location,e=d.protocol+"//"+d.hostname+(d.port?":"+d.port:""));if(d=AJS.Meta.get("rte.src.url"))b(d);else{h=l.getElementsByTagName("script");for(d=0;d<h.length;d++)if(b(h[d].src))return;if(l=l.getElementsByTagName("head")[0]){h=l.getElementsByTagName("script");for(d=0;d<h.length&&
!b(h[d].src);d++);}}}},is:function(b,a){return!a?void 0!==b:"array"==a&&b.hasOwnProperty&&b instanceof Array?!0:typeof b==a},makeMap:function(b,a,l){b=b||[];"string"==typeof b&&(b=b.split(a||","));l=l||{};for(a=b.length;a--;)l[b[a]]={};return l},each:function(b,a,l){var d,h;if(!b)return 0;l=l||b;if(void 0!==b.length){d=0;for(h=b.length;d<h;d++)if(!1===a.call(l,b[d],d,b))return 0}else for(d in b)if(b.hasOwnProperty(d)&&!1===a.call(l,b[d],d,b))return 0;return 1},map:function(b,a){var l=[];f.each(b,
function(d){l.push(a(d))});return l},grep:function(b,a){var l=[];f.each(b,function(d){(!a||a(d))&&l.push(d)});return l},inArray:function(b,a){var l,d;if(b){l=0;for(d=b.length;l<d;l++)if(b[l]===a)return l}return-1},extend:function(b,a){var l,d,h=arguments;l=1;for(d=h.length;l<d;l++)a=h[l],f.each(a,function(a,g){void 0!==a&&(b[g]=a)});return b},trim:function(b){return(b?""+b:"").replace(i,"")},create:function(b,a,l){var d,h,e,g,n,c=0,b=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(b);e=b[3].match(/(^|\.)(\w+)$/i)[2];
h=this.createNS(b[3].replace(/\.\w+$/,""),l);if(!h[e])if("static"==b[2]){if(h[e]=a,this.onCreate)this.onCreate(b[2],b[3],h[e])}else if(a[e]||(a[e]=function(){},c=1),h[e]=a[e],this.extend(h[e].prototype,a),b[5]&&(d=this.resolve(b[5]).prototype,g=b[5].match(/\.(\w+)$/i)[1],n=h[e],h[e]=c?function(){return d[g].apply(this,arguments)}:function(){this.parent=d[g];return n.apply(this,arguments)},h[e].prototype[e]=h[e],this.each(d,function(a,g){h[e].prototype[g]=d[g]}),this.each(a,function(a,g){d[g]?h[e].prototype[g]=
function(){this.parent=d[g];return a.apply(this,arguments)}:g!=e&&(h[e].prototype[g]=a)})),this.each(a["static"],function(a,g){h[e][g]=a}),this.onCreate)this.onCreate(b[2],b[3],h[e].prototype)},walk:function(b,a,l,d){d=d||this;b&&(l&&(b=b[l]),f.each(b,function(b,e){if(!1===a.call(d,b,e,l))return!1;f.walk(b,a,l,d)}))},createNS:function(b,a){var l,d,a=a||c,b=b.split(".");for(l=0;l<b.length;l++)d=b[l],a[d]||(a[d]={}),a=a[d];return a},resolve:function(b,a){var l,d,a=a||c,b=b.split(".");l=0;for(d=b.length;l<
d&&!(a=a[b[l]],!a);l++);return a},addUnload:function(b,a){var l=this,b={func:b,scope:a||this};if(l.unloads)l.unloads.push(b);else{var d=function(){var a=l.unloads,g,b;if(a){for(b in a)(g=a[b])&&g.func&&g.func.call(g.scope,1);c.detachEvent?(c.detachEvent("onbeforeunload",h),c.detachEvent("onunload",d)):c.removeEventListener&&c.removeEventListener("unload",d,!1);l.unloads=w=d=0;c.CollectGarbage&&CollectGarbage()}},h=function(){var a=document;if("interactive"==a.readyState){var g=function(){a.detachEvent("onstop",
g);d&&d();a=0};a&&a.attachEvent("onstop",g);c.setTimeout(function(){a&&a.detachEvent("onstop",g)},0)}};c.attachEvent?(c.attachEvent("onunload",d),c.attachEvent("onbeforeunload",h)):c.addEventListener&&c.addEventListener("unload",d,!1);l.unloads=[b]}return b},removeUnload:function(b){var a=this.unloads,l=null;f.each(a,function(d,h){if(d&&d.func==b)return a.splice(h,1),l=b,!1});return l},explode:function(b,a){return b?f.map(b.split(a||","),f.trim):b},_addVer:function(b){var a;if(!this.query)return b;
a=(-1==b.indexOf("?")?"?":"&")+this.query;return-1==b.indexOf("#")?b+a:b.replace("#",a+"#")},_replace:function(b,a,l){return k?l.replace(b,function(){var d=a,b=arguments,e;for(e=0;e<b.length-2;e++)d=void 0===b[e]?d.replace(RegExp("\\$"+e,"g"),""):d.replace(RegExp("\\$"+e,"g"),b[e]);return d}):l.replace(b,a)}};f._init();c.tinyMCE=c.tinymce=f})(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(c){this.scope=c||this;this.listeners=[]},add:function(c,i){this.listeners.push({cb:c,scope:i||this.scope});return c},addToTop:function(c,i){this.listeners.unshift({cb:c,scope:i||this.scope});return c},remove:function(c){var i=this.listeners,k=null;tinymce.each(i,function(f,b){if(c==f.cb)return k=c,i.splice(b,1),!1});return k},dispatch:function(){var c,i=arguments,k,f=this.listeners;for(k=0;k<f.length&&!(c=f[k],
c=c.cb.apply(c.scope,0<i.length?i:[c.scope]),!1===c);k++);return c}});
(function(){var c=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(i,k){var f=this,b,i=tinymce.trim(i),k=f.settings=k||{};if(/^([\w\-]+):([^\/]{2})/i.test(i)||/^\s*#/.test(i))f.source=i;else if(0===i.indexOf("/")&&0!==i.indexOf("//")&&(i=(k.base_uri?k.base_uri.protocol||"http":"http")+"://mce_host"+i),/^[\w-]*:?\/\//.test(i)||(b=k.base_uri?k.base_uri.path:(new tinymce.util.URI(location.href)).directory,i=(k.base_uri&&k.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(b,i)),i=i.replace(/@@/g,
"(mce_at)"),i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(i),c("source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),function(a,b){var d=i[b];d&&(d=d.replace(/\(mce_at\)/g,"@@"));f[a]=d}),b=k.base_uri){f.protocol||(f.protocol=b.protocol);f.userInfo||(f.userInfo=b.userInfo);!f.port&&"mce_host"==
f.host&&(f.port=b.port);if(!f.host||"mce_host"==f.host)f.host=b.host;f.source=""}},setPath:function(c){c=/^(.*?)\/?(\w+)?$/.exec(c);this.path=c[0];this.directory=c[1];this.file=c[2];this.source="";this.getURI()},toRelative:function(c){var k;if("./"===c)return c;c=new tinymce.util.URI(c,{base_uri:this});if("mce_host"!=c.host&&this.host!=c.host&&c.host||this.port!=c.port||this.protocol!=c.protocol)return c.getURI();k=this.toRelPath(this.path,c.path);c.query&&(k+="?"+c.query);c.anchor&&(k+="#"+c.anchor);
return k},toAbsolute:function(c,k){c=new tinymce.util.URI(c,{base_uri:this});return c.getURI(this.host==c.host&&this.protocol==c.protocol?k:0)},toRelPath:function(c,k){var f,b=0,a="",l,d,c=c.substring(0,c.lastIndexOf("/")),c=c.split("/");f=k.split("/");if(c.length>=f.length){l=0;for(d=c.length;l<d;l++)if(l>=f.length||c[l]!=f[l]){b=l+1;break}}if(c.length<f.length){l=0;for(d=f.length;l<d;l++)if(l>=c.length||c[l]!=f[l]){b=l+1;break}}if(1==b)return k;l=0;for(d=c.length-(b-1);l<d;l++)a+="../";l=b-1;for(d=
f.length;l<d;l++)a=l!=b-1?a+("/"+f[l]):a+f[l];return a},toAbsPath:function(i,k){var f,b=0,a=[],l;l=/\/$/.test(k)?"/":"";i=i.split("/");k=k.split("/");c(i,function(d){d&&a.push(d)});i=a;f=k.length-1;for(a=[];0<=f;f--)0==k[f].length||"."==k[f]||(".."==k[f]?b++:0<b?b--:a.push(k[f]));f=i.length-b;f=0>=f?a.reverse().join("/"):i.slice(0,f).join("/")+"/"+a.reverse().join("/");0!==f.indexOf("/")&&(f="/"+f);l&&f.lastIndexOf("/")!==f.length-1&&(f+=l);return f},getURI:function(c){var k;if(!this.source||c)k=
"",c||(this.protocol&&(k+=this.protocol+"://"),this.userInfo&&(k+=this.userInfo+"@"),this.host&&(k+=this.host),this.port&&(k+=":"+this.port)),this.path&&(k+=this.path),this.query&&(k+="?"+this.query),this.anchor&&(k+="#"+this.anchor),this.source=k;return this.source}})})();
(function(){var c=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(i){var i=this.get(i),k;i&&c(i.split("&"),function(c){c=c.split("=");k=k||{};k[unescape(c[0])]=unescape(c[1])});return k},setHash:function(i,k,f,b,a,l){var d="";c(k,function(a,e){d+=(!d?"":"&")+escape(e)+"="+escape(a)});this.set(i,d,f,b,a,l)},get:function(c){var k=document.cookie,f=c+"=",b;if(k){b=k.indexOf("; "+f);if(-1==b){if(b=k.indexOf(f),0!=b)return null}else b+=2;c=k.indexOf(";",b);-1==c&&(c=k.length);
return unescape(k.substring(b+f.length,c))}},set:function(c,k,f,b,a,l){document.cookie=c+"="+escape(k)+(f?"; expires="+f.toGMTString():"")+(b?"; path="+escape(b):"")+(a?"; domain="+a:"")+(l?"; secure":"")},remove:function(c,k){var f=new Date;f.setTime(f.getTime()-1E3);this.set(c,"",f,k,f)}})})();
(function(){function c(i,k){var f,b,a,k=k||'"';if(null==i)return"null";a=typeof i;if("string"==a)return b="\bb\tt\nn\ff\rr\"\"''\\\\",k+i.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,d){if('"'===k&&"'"===a)return a;f=b.indexOf(d);if(f+1)return"\\"+b.charAt(f+1);a=d.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+k;if("object"==a){if(i.hasOwnProperty&&i instanceof Array){f=0;for(b="[";f<i.length;f++)b+=(0<f?",":"")+c(i[f],k);return b+"]"}b="{";for(f in i)i.hasOwnProperty(f)&&
(b+="function"!=typeof i[f]?(1<b.length?","+k:k)+f+k+":"+c(i[f],k):"");return b+"}"}return""+i}tinymce.util.JSON={serialize:c,parse:function(c){try{return eval("("+c+")")}catch(k){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(c){function i(a){k=0;try{k=new ActiveXObject(a)}catch(d){}return k}var k,f=window,b=0;c.scope=c.scope||this;c.success_scope=c.success_scope||c.scope;c.error_scope=c.error_scope||c.scope;c.async=!1===c.async?!1:!0;c.data=c.data||"";if(k=f.XMLHttpRequest?new XMLHttpRequest:i("Microsoft.XMLHTTP")||i("Msxml2.XMLHTTP")){k.overrideMimeType&&k.overrideMimeType(c.content_type);k.open(c.type||(c.data?"POST":"GET"),c.url,c.async);c.content_type&&k.setRequestHeader("Content-Type",
c.content_type);k.setRequestHeader("X-Requested-With","XMLHttpRequest");k.send(c.data);var a=function(){!c.async||4==k.readyState||1E4<b++?(c.success&&1E4>b&&200==k.status?c.success.call(c.success_scope,""+k.responseText,k,c):c.error&&c.error.call(c.error_scope,1E4<b?"TIMED_OUT":"GENERAL",k,c),k=null):f.setTimeout(a,10)};if(!c.async)return a();f.setTimeout(a,10)}}});
(function(){var c=tinymce.extend,i=tinymce.util.JSON,k=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(f){this.settings=c({},f);this.count=0},send:function(f){var b=f.error,a=f.success,f=c(this.settings,f);f.success=function(l,d){l=i.parse(l);"undefined"==typeof l&&(l={error:"JSON Parse error."});l.error?b.call(f.error_scope||f.scope,l.error,d):a.call(f.success_scope||f.scope,l.result)};f.error=function(a,d){b&&b.call(f.error_scope||f.scope,a,d)};f.data=i.serialize({id:f.id||
"c"+this.count++,method:f.method,params:f.params});f.content_type="application/json";k.send(f)},"static":{sendRPC:function(c){return(new tinymce.util.JSONRequest).send(c)}}})})();(function(c){c.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(c){return c.shiftKey||c.ctrlKey||c.altKey}}})(tinymce);
(function(c){function i(a){function g(g){var d=a.dom.create("body"),g=g.cloneContents();d.appendChild(g);return a.selection.serializer.serialize(d,{format:"html"})}a.onKeyDown.addToTop(function(b,c){var j=c.keyCode;if(j==h||j==d){var j=b.selection.getRng(!0),m;if(m=!j.collapsed)j=g(j),m=a.dom.createRng(),m.selectNode(a.getBody()),m=g(m),m=j===m;m&&(b.setContent("",{format:"raw"}),b.nodeChanged(),c.preventDefault())}})}function k(a){a.onKeyDown.add(function(a,e){if(e.keyCode===d&&a.selection.isCollapsed()&&
0===a.selection.getRng(!0).startOffset){var b=a.selection.getNode().previousSibling;b&&(b.nodeName&&"hr"===b.nodeName.toLowerCase())&&(a.dom.remove(b),c.dom.Event.cancel(e))}})}function f(a){function g(a,e,g){var d=/^&nbsp;$|^<br>$/,g=g||e,g=g.parentNode?g.parentNode.childNodes||[]:[],b=!0,n=/TABLE|TH|TD/;return(b=(b=(b=!n.test(e.nodeName))&&e.previousSibling?!n.test(e.previousSibling.nodeName):b)&&e.nextSibling?!n.test(e.nextSibling.nodeName):b)&&(d.test(a)||1<g.length&&"BR"==g[0].nodeName)}function b(a){return a&&
a.innerHTML&&(a.innerHTML.replace(/\uFEFF|\u200B/g,"")||"&nbsp;")}a.onKeyDown.add(function(a,e){var m=a.selection.getNode(),l=m.nextSibling,o;if(a.selection.isCollapsed()&&m!=a.dom.getRoot())if(e.keyCode===d)0===a.selection.getRng(!0).startOffset&&(l=m.previousSibling,o=b(l),l&&g(o,m,l)&&(a.dom.remove(l),c.dom.Event.cancel(e)));else if(e.keyCode==h&&(o=b(m),!(1>=(m.parentNode?m.parentNode.childNodes||[]:[]).length||1<m.childNodes.length)&&l&&g(o,m,l)))a.dom.remove(m),c.dom.Event.cancel(e),m=a.selection,
o=m.getRng(!0),a.focus(),l.focus(),o.setStart(l,0),o.setEnd(l,0),m.setRng(o)})}function b(a){a.onClick.add(function(a,e){e=e.target;/^(IMG|HR)$/.test(e.nodeName)&&a.selection.getSel().setBaseAndExtent(e,0,e,1);"A"==e.nodeName&&a.dom.hasClass(e,"mceItemAnchor")&&a.selection.select(e);a.nodeChanged()})}function b(a){a.onClick.add(function(a,e){e=e.target;/^(IMG|HR)$/.test(e.nodeName)&&a.selection.getSel().setBaseAndExtent(e,0,e,1);"A"==e.nodeName&&a.dom.hasClass(e,"mceItemAnchor")&&a.selection.select(e);
a.nodeChanged()})}function a(){document.body.setAttribute("role","application")}function a(){document.body.setAttribute("role","application")}var l=c.VK,d=l.BACKSPACE,h=l.DELETE;c.create("tinymce.util.Quirks",{Quirks:function(e){if(c.isWebKit){if(c.isChrome){var g=function(a,e){"[object Array]"===toString.call(a)?c.each(a,function(a){a?n.setAttrib(n.select(".non-editable",a),"contenteditable",e):n.setAttrib(c.DOM.select(".non-editable"),"contenteditable",e)}):n.setAttrib(n.select(".non-editable",
a),"contenteditable",e)},n=e.dom,r=e.selection;e.onKeyDown.add(function(a,e){var j,b,m,f=function(){var a=[],e=!1;c.each(b,function(g){g?a=a.concat(n.select("span",g)):e||(a=a.concat(c.DOM.select("span")),e=!0)});return a};if(((m=e.keyCode==h)||e.keyCode==d)&&!l.modifierPressed(e)){e.preventDefault();j=r.getRng();var k;k=n.getParent(j.startContainer,n.isBlock);b=m?[k,n.getNext(k,n.isBlock)]:[n.getPrev(k,n.isBlock),k];c.each(f(),function(a){a.setAttribute("data-mce-mark","1")});(j=!m&&b[1]&&AJS.EditorUtils.isCursorAtStartOf(b[1],
j)||m&&b[0]&&AJS.EditorUtils.isCursorAtEndOf(b[0],j))&&g(b[1],!0);a.getDoc().execCommand(m?"ForwardDelete":"Delete",!1,null);j&&g(b,!1);c.each(f(),function(a){a.getAttribute("data-mce-mark")?a.removeAttribute("data-mce-mark"):a.style.color?n.setAttrib(a,"style","color: "+a.style.color):n.remove(a,!0)})}})}i(e);e.dom.bind(e.getDoc(),"focusin",function(){setTimeout(function(){e&&!e.destroyed&&e.selection.setRng(e.selection.getRng())},0)});b(e);if(c.isIDevice){var j,m;e.dom.bind(e.getDoc(),"selectionchange",
function(){m&&(clearTimeout(m),m=0);m=window.setTimeout(function(){var a=e.selection.getRng();if(!j||!c.dom.RangeUtils.compareRanges(a,j)){e.nodeChanged();j=a}},50)})}f(e)}c.isIE&&(k(e),i(e),a(e),e.onKeyDown.add(function(a,e){var g;if(g=e.keyCode===l.ENTER)if(g=!l.modifierPressed(e))g=a.selection.getNode(),g=a.dom.is(g,"h1,h2,h3,h4,h5,h6")||null!==a.dom.getParent(g,"h1,h2,h3,h4,h5,h6");g&&setTimeout(function(){var e=a.selection.getNode();a.dom.is(e,"p")&&(a.dom.setAttrib(e,"style",null),a.execCommand("mceCleanup"))},
0)}),f(e));c.isGecko&&(k(e),f(e),Range.prototype.getClientRects||e.onMouseDown.add(function(a,e){if(e.target.nodeName==="HTML"){var g=a.getBody();g.blur();setTimeout(function(){g.focus()},0)}}))}})})(tinymce);
(function(c){function i(a,e){var b,j,d,l={};if(a){a=a.split(",");e=e||10;for(b=0;b<a.length;b+=2)j=String.fromCharCode(parseInt(a[b],e)),f[j]||(d="&"+a[b+1]+";",l[j]=d,l[d]=j);return l}}var k,f,b,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\"\']/g,h=/&(#x|#)?([\w]+);/g,e={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",
148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};f={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};b={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};k=i("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);c.html=c.html||{};c.html.Entities={encodeRaw:function(e,b){return e.replace(b?a:l,function(a){return f[a]||a})},encodeAllRaw:function(a){return(""+a).replace(d,function(a){return f[a]||a})},encodeNumeric:function(e,b){return e.replace(b?a:l,function(a){return 1<a.length?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":f[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(e,b,d){d=d||k;return e.replace(b?a:l,function(a){return f[a]||d[a]||a})},getEncodeFunc:function(e,b){function d(e,
g){return e.replace(g?a:l,function(a){return f[a]||b[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,e){return m.encodeNamed(a,e,b)}var m=c.html.Entities,b=i(b)||k,e=c.makeMap(e.replace(/\+/g,","));return e.named&&e.numeric?d:e.named?b?j:m.encodeNamed:e.numeric?m.encodeNumeric:m.encodeRaw},decode:function(a){return a.replace(h,function(a,g,j){if(g)return j=parseInt(j,2===g.length?16:10),65535<j?(j-=65536,String.fromCharCode(55296+(j>>10),56320+(j&1023))):e[j]||String.fromCharCode(j);if(!(g=b[a]))if(!(g=
k[a]))g=document.createElement("div"),g.innerHTML=a,g=g.textContent||g.innerText||a;return g})}}})(tinymce);
tinymce.html.Styles=function(c,i){function k(a,e,b,j){function d(a){a=parseInt(a).toString(16);return 1<a.length?a:"0"+a}return"#"+d(e)+d(b)+d(j)}var f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,b=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,d,h={},e,c=c||{};e="\\\" \\' \\; \\: ; : ﻿".split(" ");for(d=0;d<e.length;d++)h[e[d]]="﻿"+d,h["﻿"+d]=e[d];return{toHex:function(a){return a.replace(f,
k)},parse:function(e){function d(a,e){var g,j;if(g=p[a+"-top"+e])j=p[a+"-right"+e],g==j&&(g=p[a+"-bottom"+e],j==g&&(j=p[a+"-left"+e],g==j&&(p[a+e]=j,delete p[a+"-top"+e],delete p[a+"-right"+e],delete p[a+"-bottom"+e],delete p[a+"-left"+e])))}function r(a){var e=p[a],g;if(e&&!(0>e.indexOf(" "))){e=e.split(" ");for(g=e.length;g--;)if(e[g]!==e[0])return!1;p[a]=e[0];return!0}}function j(a){B=!0;return h[a]}function m(a,e){B&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return h[a]}));e||(a=a.replace(/\\([\'\";:])/g,
"$1"));return a}var p={},o,t,q,B,i=c.url_converter,y=c.url_converter_scope||this;if(e){for(e=e.replace(/\\[\"\';:\uFEFF]/g,j).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,j)});o=a.exec(e);){t=o[1].replace(l,"").toLowerCase();q=o[2].replace(l,"");if(t&&0<q.length){if("font-weight"===t&&"700"===q)q="bold";else if("color"===t||"background-color"===t)q=q.toLowerCase();q=q.replace(f,k);q=q.replace(b,function(a,e,g,j,b,d){if(b=b||d)return b=m(b),"'"+b.replace(/\'/g,"\\'")+"'";e=
m(e||g||j);i&&(e=i.call(y,e,"style"));return"url('"+e.replace(/\'/g,"\\'")+"')"});p[t]=B?m(q,!0):q}a.lastIndex=o.index+o[0].length}d("border","");d("border","-width");d("border","-color");d("border","-style");d("padding","");d("margin","");r("border-width")&&(r("border-style")&&r("border-color"))&&(p.border=p["border-width"]+" "+p["border-style"]+" "+p["border-color"],delete p["border-width"],delete p["border-style"],delete p["border-color"]);"medium none"===p.border&&delete p.border}return p},serialize:function(a,
e){function b(e){var d,m,l,c;if(d=i.styles[e]){m=0;for(l=d.length;m<l;m++)e=d[m],c=a[e],void 0!==c&&0<c.length&&(j+=(0<j.length?" ":"")+e+": "+c+";")}}var j="",d,l;if(e&&i&&i.styles)b("*"),b(e);else for(d in a)l=a[d],void 0!==l&&0<l.length&&(j+=(0<j.length?" ":"")+d+": "+l+";");return j}}};
(function(c){function i(a,e){return a.split(e||",")}var k={},f,b,a,l,d={},h,e,g=c.makeMap,n=c.each;b="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";b=g(b,",",g(b.toUpperCase()));var r={Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",
ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",
E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},j=function(a){return a.replace(/[A-Z]+/g,function(a){return j(r[a])})},m,p={};for(m in r)r.hasOwnProperty(m)&&(r[m]=j(r[m]));j("script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]").replace(/#/g,
"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,e,j,b){j=i(j,"|");p[e]={attributes:g(j),attributesOrder:j,children:g(b,"|",{"#comment":{}})}});k=p;f=g("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls");a=g("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");l=c.extend(g("td,th,iframe,video,audio,object"),a);h=g("pre,script,style,textarea,code");e=g("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");
c.html.Schema=function(j){function m(a){var e,j,b,d,l,n,h,t,f,q,o,B,k,r,p,x,y,u,s=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,A=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,M=/[*?+]/;if(a){a=i(a);v["@"]&&(x=v["@"].attributes,y=v["@"].attributesOrder);e=0;for(j=a.length;e<j;e++)if(l=s.exec(a[e])){r=l[1];f=l[2];p=l[3];t=l[4];B={};k=[];n={attributes:B,attributesOrder:k};"#"===r&&(n.paddEmpty=!0);"-"===r&&(n.removeEmpty=!0);if(x){for(u in x)B[u]=x[u];k.push.apply(k,y)}if(t){t=i(t,"|");b=
0;for(d=t.length;b<d;b++)if(l=A.exec(t[b]))if(h={},o=l[1],q=l[2].replace(/::/g,":"),r=l[3],l=l[4],"!"===o&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(q),h.required=!0),"-"===o)delete B[q],k.splice(c.inArray(k,q),1);else{if(r&&("="===r&&(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:q,value:l}),h.defaultValue=l),":"===r&&(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:q,value:l}),h.forcedValue=l),"<"===r))h.validValues=
g(l,"?");M.test(q)?(n.attributePatterns=n.attributePatterns||[],h.pattern=RegExp("^"+q.replace(/([?+*])/g,".$1")+"$"),n.attributePatterns.push(h)):(B[q]||k.push(q),B[q]=h)}}!x&&"@"==f&&(x=B,y=k);p&&(n.outputName=f,v[p]=n);M.test(f)?(n.pattern=RegExp("^"+f.replace(/([?+*])/g,".$1")+"$"),z.push(n)):v[f]=n}}}function q(a){v={};z=[];m(a);n(k,function(a,e){u[e]=a.children})}function B(a){var e=/^(~)?(.+)$/;a&&n(i(a),function(a){var a=e.exec(a),j="~"===a[1],g=j?"span":"div",m=a[2];u[m]=u[g];d[m]=g;j||(b[m]=
{});n(u,function(a){a[g]&&(a[m]=a[g])})})}function r(a){var e=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&n(i(a),function(a){var a=e.exec(a),j,g;a&&(j=(g=a[1])?u[a[2]]:u[a[2]]={"#comment":{}},j=u[a[2]],n(i(a[3],"|"),function(a){"-"===g?delete j[a]:j[a]={}}))})}function p(a){var e=v[a],j;if(e)return e;for(j=z.length;j--;)if(e=z[j],e.pattern.test(a))return e}var v={},u={},z=[],s,A,j=j||{};!1===j.verify_html&&(j.valid_elements="*[*]");j.valid_styles&&(s={},n(j.valid_styles,function(a,e){s[e]=c.explode(a)}));A=
j.whitespace_elements?g(j.whitespace_elements):h;j.valid_elements?q(j.valid_elements):(n(k,function(a,e){v[e]={attributes:a.attributes,attributesOrder:a.attributesOrder};u[e]=a.children}),n(i("strong/b,em/i"),function(a){a=i(a,"/");v[a[1]].outputName=a[0]}),v.img.attributesDefault=[{name:"alt",value:""}],n(i("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){v[a].removeEmpty=true}),n(i("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){v[a].paddEmpty=true}));B(j.custom_elements);
r(j.valid_children);m(j.extended_valid_elements);r("+ol[ul|ol],+ul[ul|ol]");p("span")||m("span[!data-mce-type|*]");j.invalid_elements&&c.each(c.explode(j.invalid_elements),function(a){v[a]&&delete v[a]});this.children=u;this.styles=s;this.getBoolAttrs=function(){return f};this.getBlockElements=function(){return b};this.getShortEndedElements=function(){return a};this.getSelfClosingElements=function(){return e};this.getNonEmptyElements=function(){return l};this.getWhiteSpaceElements=function(){return A};
this.isValidChild=function(a,e){var j=u[a];return!(!j||!j[e])};this.getElementRule=p;this.getCustomElements=function(){return d};this.addValidElements=m;this.setValidElements=q;this.addCustomElements=B;this.addValidChildren=r};c.html.Schema.boolAttrMap=f;c.html.Schema.blockElementsMap=b})(tinymce);
(function(c){c.html.SaxParser=function(i,k){var f=this,b=function(){},i=i||{};f.schema=k=k||new c.html.Schema;!1!==i.fix_self_closing&&(i.fix_self_closing=!0);c.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(f[a]=i[a]||b)});f.parse=function(a){function b(a){var e,j;for(e=f.length;e--;)if(f[e].name===a)break;if(e>=0){for(j=f.length-1;j>=e;j--){a=f[j];a.valid&&d.end(a.name)}f.length=e}}var d=this,h,e=0,g,n,f=[],j,m,p,o,t,q,B,x,y,v,u,z,s,A,E,I,C,D,J,F,K,L,H=0,G=c.html.Entities.decode,
N,O;F=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g");K=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;L={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};q=k.getShortEndedElements();J=k.getSelfClosingElements();B=k.getBoolAttrs();
x=i.validate;t=i.remove_internals;N=i.fix_self_closing;O=c.isIE;for(s=/^:/;h=F.exec(a);){e<h.index&&d.text(G(a.substr(e,h.index-e)));if(g=h[6]){g=g.toLowerCase();O&&s.test(g)&&(g=g.substr(1));b(g)}else if(g=h[7]){g=g.toLowerCase();O&&s.test(g)&&(g=g.substr(1));e=g in q;N&&(J[g]&&f.length>0&&f[f.length-1].name===g)&&b(g);if(!x||(y=k.getElementRule(g))){v=true;if(x){A=y.attributes;E=y.attributePatterns}if(z=h[8]){(o=z.indexOf("data-mce-type")!==-1)&&t&&(v=false);j=[];j.map={};z.replace(K,function(a,
e,g,b,d){e=e.toLowerCase();g=e in B?e:G(g||b||d||"");if(x&&!o&&e.indexOf("data-")!==0){a=A[e];if(!a&&E){for(b=E.length;b--;){a=E[b];if(a.pattern.test(e))break}b===-1&&(a=null)}if(!a||a.validValues&&!(g in a.validValues))return}j.map[e]=g;j.push({name:e,value:g})})}else{j=[];j.map={}}if(x&&!o){I=y.attributesRequired;C=y.attributesDefault;if(D=y.attributesForced)for(n=D.length;n--;){u=D[n];p=u.name;u=u.value;u==="{$uid}"&&(u="mce_"+H++);j.map[p]=u;j.push({name:p,value:u})}if(C)for(n=C.length;n--;){u=
C[n];p=u.name;if(!(p in j.map)){u=u.value;u==="{$uid}"&&(u="mce_"+H++);j.map[p]=u;j.push({name:p,value:u})}}if(I){for(n=I.length;n--;)if(I[n]in j.map)break;n===-1&&(v=false)}j.map["data-mce-bogus"]&&(v=false)}v&&d.start(g,j,e)}else v=false;if(n=L[g]){n.lastIndex=e=h.index+h[0].length;if(h=n.exec(a)){v&&(m=a.substr(e,h.index-e));e=h.index+h[0].length}else{m=a.substr(e);e=a.length}v&&m.length>0&&d.text(m,true);v&&d.end(g);F.lastIndex=e;continue}e||(!z||z.indexOf("/")!=z.length-1?f.push({name:g,valid:v}):
v&&d.end(g))}else(g=h[1])?d.comment(g):(g=h[2])?d.cdata(g):(g=h[3])?d.doctype(g):(g=h[4])&&d.pi(g,h[5]);e=h.index+h[0].length}e<a.length&&d.text(G(a.substr(e)));for(n=f.length-1;n>=0;n--){g=f[n];g.valid&&d.end(g.name)}}}})(tinymce);
(function(c){function i(a,b,d){var c;c=d?"lastChild":"firstChild";d=d?"prev":"next";if(a[c])return a[c];if(a!==b){if(c=a[d])return c;for(a=a.parent;a&&a!==b;a=a.parent)if(c=a[d])return c}}function k(a,b){this.name=a;this.type=b;1===b&&(this.attributes=[],this.attributes.map={})}var f=/^[ \t\r\n]*$/,b={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};c.extend(k.prototype,{replace:function(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this},attr:function(a,
b){var d,c;if("string"!==typeof a){for(c in a)this.attr(c,a[c]);return this}if(d=this.attributes){if(void 0!==b){if(null===b){if(a in d.map){delete d.map[a];for(c=d.length;c--;)if(d[c].name===a){d.splice(c,1);break}}return this}if(a in d.map)for(c=d.length;c--;){if(d[c].name===a){d[c].value=b;break}}else d.push({name:a,value:b});d.map[a]=b;return this}return d.map[a]}},clone:function(){var a=new k(this.name,this.type),b,d,c,e,g;if(c=this.attributes){g=[];g.map={};b=0;for(d=c.length;b<d;b++)e=c[b],
"id"!==e.name&&(g[g.length]={name:e.name,value:e.value},g.map[e.name]=e.value);a.attributes=g}a.value=this.value;a.shortEnded=this.shortEnded;return a},wrap:function(a){this.parent.insert(a,this);a.append(this);return this},unwrap:function(){var a,b;for(a=this.firstChild;a;)b=a.next,this.insert(a,this,!0),a=b;this.remove()},remove:function(){var a=this.parent,b=this.next,d=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=b)b.prev=null}else d.next=b;if(a.lastChild===this){if(a.lastChild=d)d.next=
null}else b.prev=d;this.parent=this.next=this.prev=null}return this},append:function(a){var b;a.parent&&a.remove();(b=this.lastChild)?(b.next=a,a.prev=b,this.lastChild=a):this.lastChild=this.firstChild=a;a.parent=this;return a},insert:function(a,b,d){var c;a.parent&&a.remove();c=b.parent||this;d?(b===c.firstChild?c.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===c.lastChild?c.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a);a.parent=c;return a},getAll:function(a){var b,
d=[];for(b=this.firstChild;b;b=i(b,this))b.name===a&&d.push(b);return d},empty:function(){var a,b,d;if(this.firstChild){a=[];for(d=this.firstChild;d;d=i(d,this))a.push(d);for(b=a.length;b--;)d=a[b],d.parent=d.firstChild=d.lastChild=d.next=d.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(a){var a=a||new c.html.Schema,b=this.firstChild,d,h=a.getNonEmptyElements(),e=a.getWhiteSpaceElements();if(b){do{if(1===b.type){if(b.attributes.map["data-mce-bogus"])continue;if(h[b.name])return!1;
for(a=b.attributes.length;a--;)if(d=b.attributes[a].name,"name"===d||0===d.indexOf("data-"))return!1}if(8===b.type||3===b.type&&(!f.test(b.value)||e[this.name]&&b.value&&0<b.value.length&&f.test(b.value)))return!1}while(b=i(b,this))}return!0},walk:function(a){return i(this,null,a)}});c.extend(k,{create:function(a,c){var d,h;d=new k(a,b[a]||1);if(c)for(h in c)d.attr(h,c[h]);return d}});c.html.Node=k})(tinymce);
(function(c){var i=c.html.Node;c.html.DomParser=function(k,f){var b=this,a={},l=[],d={},h={},k=k||{};k.validate="validate"in k?k.validate:!0;k.root_name=k.root_name||"body";b.schema=f=f||new c.html.Schema;b.filterNode=function(e){var b,c,f;c in a&&((f=d[c])?f.push(e):d[c]=[e]);for(b=l.length;b--;)c=l[b].name,c in e.attributes.map&&((f=h[c])?f.push(e):h[c]=[e]);return e};b.addNodeFilter=function(e,b){c.each(c.explode(e),function(e){var d=a[e];d||(a[e]=d=[]);d.push(b)})};b.addAttributeFilter=function(a,
b){c.each(c.explode(a),function(a){var e;for(e=0;e<l.length;e++)if(l[e].name===a){l[e].callbacks.push(b);return}l.push({name:a,callbacks:[b]})})};b.parse=function(e,g){function n(e,j){var b=new i(e,j),g;e in a&&((g=d[e])?g.push(b):d[e]=[b]);return b}function r(a){for(var e,a=a.prev;a&&3===a.type;)e=a.value.replace(s,""),0<e.length?(a.value=e,a=a.prev):(e=a.prev,a.remove(),a=e)}var j,m,p,o,t,q,B,x,y,v,u,z=[],s,A,E,I,g=g||{};d={};h={};v=c.extend(c.makeMap("script,style,head,html,body,title,meta,param"),
f.getBlockElements());f.getNonEmptyElements();I=f.children;y=k.validate;o="forced_root_block"in g?g.forced_root_block:k.forced_root_block;E=f.getWhiteSpaceElements();u=/^[ \t\r\n]+/;s=/[ \t\r\n]+$/;A=/[ \t\r\n]+/g;j=new c.html.SaxParser({validate:y,fix_self_closing:!y,cdata:function(a){p.append(n("#cdata",4)).value=a},text:function(a,e){var j;E[p.name]||(a=a.replace(A," "),p.lastChild&&v[p.lastChild.name]&&(a=a.replace(u,"")));0!==a.length&&(j=n("#text",3),j.raw=!!e,p.append(j).value=a)},comment:function(a){p.append(n("#comment",
8)).value=a},pi:function(a,e){p.append(n(a,7)).value=e;r(p)},doctype:function(a){p.append(n("#doctype",10)).value=a;r(p)},start:function(a,e,j){var b,g,d;if(b=y?f.getElementRule(a):{}){b=n(b.outputName||a,1);b.attributes=e;b.shortEnded=j;p.append(b);(g=I[p.name])&&(I[b.name]&&!g[b.name])&&z.push(b);for(g=l.length;g--;)d=l[g].name,d in e.map&&((x=h[d])?x.push(b):h[d]=[b]);v[a]&&r(b);j||(p=b)}},end:function(a){var e,b;if(e=y?f.getElementRule(a):{}){if(v[a]&&!E[p.name]){for(a=p.firstChild;a&&3===a.type;)b=
a.value.replace(u,""),0<b.length?(a.value=b,a=a.next):(b=a.next,a.remove(),a=b);for(a=p.lastChild;a&&3===a.type;)b=a.value.replace(s,""),0<b.length?(a.value=b,a=a.prev):(b=a.prev,a.remove(),a=b)}if((e.removeEmpty||e.paddEmpty)&&p.isEmpty(f))if(e.paddEmpty)p.empty().append(new c.html.Node("br",1)).shortEnded=!0;else if(!p.attributes.map.name){e=p.parent;p.empty().remove();p=e;return}p=p.parent}}},f);m=p=new i(g.context||k.root_name,11);j.parse(e);if(y&&z.length)if(g.context)g.invalid=!0;else{var C,
D,J,F,K,L,H,G;H=c.makeMap("tr,td,th,tbody,thead,tfoot,table");f.getNonEmptyElements();for(j=0;j<z.length;j++)if(q=z[j],q.parent){D=[q];for(C=q.parent;C&&!f.isValidChild(C.name,q.name)&&!H[C.name];C=C.parent)D.push(C);if(C&&1<D.length){D.reverse();J=F=b.filterNode(D[0].clone());for(L=0;L<D.length-1;L++){f.isValidChild(F.name,D[L].name)?(K=b.filterNode(D[L].clone()),F.append(K)):K=F;for(F=D[L].firstChild;F&&F!=D[L+1];)G=F.next,K.append(F),F=G;F=K}J.isEmpty(f)?C.insert(q,D[0],!0):(C.insert(J,D[0],!0),
C.insert(q,J));C=D[0];(C.isEmpty(f)||C.firstChild===C.lastChild&&"br"===C.firstChild.name)&&C.empty().remove()}else q.parent&&("li"===q.name?(C=q.prev)&&("ul"===C.name||"ul"===C.name)?C.append(q):(C=q.next)&&("ul"===C.name||"ul"===C.name)?C.insert(q,C.firstChild,!0):q.wrap(b.filterNode(new i("ul",1))):f.isValidChild(q.parent.name,"div")&&f.isValidChild("div",q.name)?q.wrap(b.filterNode(new i("div",1))):"style"===q.name||"script"===q.name?q.empty().remove():q.unwrap())}}if(o&&"body"==m.name)for(j=
m.firstChild;j;)q=j.next,3==j.type||1==j.type&&"p"!==j.name&&!v[j.name]&&!j.attr("data-mce-type")?(t||(t=n(o,1),m.insert(t,j)),t.append(j)):t=null,j=q;if(!g.invalid){for(B in d){x=a[B];o=d[B];for(q=o.length;q--;)o[q].parent||o.splice(q,1);t=0;for(j=x.length;t<j;t++)x[t](o,B,g)}t=0;for(j=l.length;t<j;t++)if(x=l[t],x.name in h){o=h[x.name];for(q=o.length;q--;)o[q].parent||o.splice(q,1);q=0;for(B=x.callbacks.length;q<B;q++)x.callbacks[q](o,x.name,g)}}return m};k.remove_trailing_brs&&b.addNodeFilter("br",
function(a){var b,d=a.length,l,j=f.getBlockElements();f.getNonEmptyElements();var m,h,o;j.body=1;for(b=0;b<d;b++)if(l=a[b],m=l.parent,j[l.parent.name]&&l===m.lastChild){for(h=l.prev;h;){o=h.name;if("span"!==o||"bookmark"!==h.attr("data-mce-type")){if("br"!==o)break;if("br"===o){l=null;break}}h=h.prev}if(l&&(l.remove(),m.isEmpty(f)&&(elementRule=f.getElementRule(m.name))))elementRule.removeEmpty?m.remove():elementRule.paddEmpty&&(m.empty().append(new c.html.Node("br",1)).shortEnded=!0)}})}})(tinymce);
tinymce.html.Writer=function(c){var i=[],k,f,b,a,l,c=c||{};k=c.indent;f=tinymce.makeMap(c.indent_before||"");b=tinymce.makeMap(c.indent_after||"");a=tinymce.html.Entities.getEncodeFunc(c.entity_encoding||"raw",c.entities);l="html"==c.element_format;return{start:function(d,c,e){var g,n,r;k&&(f[d]&&0<i.length)&&(g=i[i.length-1],0<g.length&&"\n"!==g&&i.push("\n"));i.push("<",d);if(c){g=0;for(n=c.length;g<n;g++)r=c[g],i.push(" ",r.name,'="',a(r.value,!0),'"')}i[i.length]=!e||l?">":" />";e&&(k&&b[d]&&
0<i.length)&&(g=i[i.length-1],0<g.length&&"\n"!==g&&i.push("\n"))},end:function(a){i.push("</",a,">");k&&(b[a]&&0<i.length)&&(a=i[i.length-1],0<a.length&&"\n"!==a&&i.push("\n"))},text:function(b,c){0<b.length&&(i[i.length]=c?b:a(b))},cdata:function(a){i.push("<![CDATA[",a,"]]\>")},comment:function(a){i.push("<\!--",a,"--\>")},pi:function(a,b){b?i.push("<?",a," ",b,"?>"):i.push("<?",a,"?>");k&&i.push("\n")},doctype:function(a){i.push("<!DOCTYPE",a,">",k?"\n":"")},reset:function(){i.length=0},getContent:function(){return i.join("").replace(/\n$/,
"")}}};
(function(c){c.html.Serializer=function(i,k){var f=new c.html.Writer(i),i=i||{};i.validate="validate"in i?i.validate:!0;this.schema=k=k||new c.html.Schema;this.writer=f;this.serialize=function(b){function a(b){var e=c[b.type],g,n,r,j,m,i,o,t;if(e)e(b);else{e=b.name;g=b.shortEnded;n=b.attributes;if(d&&n&&1<n.length){m=[];m.map={};t=k.getElementRule(b.name);i=0;for(o=t.attributesOrder.length;i<o;i++)r=t.attributesOrder[i],r in n.map&&(j=n.map[r],m.map[r]=j,m.push({name:r,value:j}));i=0;for(o=n.length;i<
o;i++)r=n[i].name,r in m.map||(j=n.map[r],m.map[r]=j,m.push({name:r,value:j}));n=m}f.start(b.name,n,g);if(!g){if(b=b.firstChild){do a(b);while(b=b.next)}f.end(e)}}}var c,d;d=i.validate;c={3:function(a){f.text(a.value,a.raw)},8:function(a){f.comment(a.value)},7:function(a){f.pi(a.name,a.value)},10:function(a){f.doctype(a.value)},4:function(a){f.cdata(a.value)},11:function(b){if(b=b.firstChild){do a(b);while(b=b.next)}}};f.reset();if(1==b.type&&!i.inner)a(b);else c[11](b);return f.getContent()}}})(tinymce);
(function(c){var i=c.each,k=c.is,f=c.isWebKit,b=c.isIE,a=c.html.Entities,l=/^([a-z0-9],?)+$/i,d=c.html.Schema.blockElementsMap,h=/^[ \t\r\n]*$/;c.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(a,
g){var d;this.doc=a;this.win=window;this.files={};this.cssFlicker=!1;this.counter=0;this.stdMode=!c.isIE||8<=a.documentMode;this.boxModel=!c.isIE||"CSS1Compat"==a.compatMode||this.stdMode;this.hasOuterHTML="outerHTML"in a.createElement("a");this.settings=g=c.extend({keep_values:!1,hex_colors:1},g);this.schema=g.schema;this.styles=new c.html.Styles({url_converter:g.url_converter,url_converter_scope:g.url_converter_scope},g.schema);if(c.isIE6)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(l){this.cssFlicker=
!0}if(b&&g.schema)for(d in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(b){a.createElement(b)}),g.schema.getCustomElements())a.createElement(d);c.addUnload(this.destroy,this)},getRoot:function(){var a=this.settings;return a&&this.get(a.root_element)||this.doc.body},getViewPort:function(a){var b,a=!a?this.win:a;b=a.document;b=this.boxModel?b.documentElement:b.body;return{x:a.pageXOffset||
b.scrollLeft,y:a.pageYOffset||b.scrollTop,w:a.innerWidth||b.clientWidth,h:a.innerHeight||b.clientHeight}},getRect:function(a){var b,a=this.get(a);b=this.getPos(a);a=this.getSize(a);return{x:b.x,y:b.y,w:a.w,h:a.h}},getSize:function(a){var b,d,a=this.get(a);b=this.getStyle(a,"width");d=this.getStyle(a,"height");-1===b.indexOf("px")&&(b=0);-1===d.indexOf("px")&&(d=0);return{w:parseInt(b)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,d){return this.getParents(a,
b,d,!1)},getParents:function(a,b,d,c){var j=this,m,l=j.settings,h=[],a=j.get(a),c=void 0===c;l.strict_root&&(d=d||j.getRoot());k(b,"string")&&(m=b,b="*"===b?function(a){return 1==a.nodeType}:function(a){return j.is(a,m)});for(;a&&!(a==d||!a.nodeType||9===a.nodeType);){if(!b||b(a))if(c)h.push(a);else return a;a=a.parentNode}return c?h:null},get:function(a){var b;return a&&(this.doc&&"string"==typeof a)&&(b=a,(a=this.doc.getElementById(a))&&a.id!==b)?this.doc.getElementsByName(b)[1]:a},getNext:function(a,
b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(a,b){return c.dom.Sizzle(a,this.get(b)||this.get(this.settings.root_element)||this.doc,[])},is:function(a,b){var d;if(void 0===a.length){if("*"===b)return 1==a.nodeType;if(l.test(b)){b=b.toLowerCase().split(/,/);a=a.nodeName.toLowerCase();for(d=b.length-1;0<=d;d--)if(b[d]==a)return!0;return!1}}return 0<c.dom.Sizzle.matches(b,a.nodeType?[a]:a).length},add:function(a,b,d,c,
j){var m=this;return this.run(a,function(a){var e;e=k(b,"string")?m.doc.createElement(b):b;m.setAttribs(e,d);c&&(c.nodeType?e.appendChild(c):m.setHTML(e,c));return!j?a.appendChild(e):e})},create:function(a,b,d){return this.add(this.doc.createElement(a),a,b,d,1)},createHTML:function(a,b,d){var c,j;c="<"+a;for(j in b)b.hasOwnProperty(j)&&(c+=" "+j+'="'+this.encode(b[j])+'"');return"undefined"!=typeof d?c+">"+d+"</"+a+">":c+" />"},remove:function(a,b){return this.run(a,function(a){var e,j=a.parentNode;
if(!j)return null;if(b)for(;e=a.firstChild;)!c.isIE||3!==e.nodeType||e.nodeValue?j.insertBefore(e,a):a.removeChild(e);return j.removeChild(a)})},setStyle:function(a,d,l){var h=this;return h.run(a,function(j){var m;m=j.style;d=d.replace(/-(\D)/g,function(a,e){return e.toUpperCase()});if(h.pixelStyles.test(d)&&(c.is(l,"number")||/^[\-0-9\.]+$/.test(l)))l+="px";switch(d){case "opacity":if(b&&(m.filter=""===l?"":"alpha(opacity="+100*l+")",!a.currentStyle||!a.currentStyle.hasLayout))m.display="inline-block";
m[d]=m["-moz-opacity"]=m["-khtml-opacity"]=l||"";break;case "float":b?m.styleFloat=l:m.cssFloat=l;break;default:m[d]=l||""}h.settings.update_styles&&h.setAttrib(j,"data-mce-style")})},getStyle:function(a,d,c){if(a=this.get(a)){if(this.doc.defaultView&&c){d=d.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(d)}catch(l){return null}}d=d.replace(/-(\D)/g,function(a,e){return e.toUpperCase()});"float"==d&&(d=b?"styleFloat":"cssFloat");
return a.currentStyle&&c?a.currentStyle[d]:a.style?a.style[d]:void 0}},setStyles:function(a,b){var d=this,c=d.settings,j;j=c.update_styles;c.update_styles=0;i(b,function(b,j){d.setStyle(a,j,b)});c.update_styles=j;c.update_styles&&d.setAttrib(a,c.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var e,b=a.attributes;for(e=b.length-1;0<=e;e--)a.removeAttributeNode(b.item(e))})},setAttrib:function(a,b,d){var c=this;if(a&&b)return c.settings.strict&&(b=b.toLowerCase()),this.run(a,function(a){var e=
c.settings,l=a.getAttribute(b);if(null!==d)switch(b){case "style":if(!k(d,"string")){i(d,function(e,b){c.setStyle(a,b,e)});return}e.keep_values&&(d&&!c._isRes(d)?a.setAttribute("data-mce-style",d,2):a.removeAttribute("data-mce-style",2));a.style.cssText=d;break;case "class":a.className=d||"";break;case "src":case "href":e.keep_values&&(e.url_converter&&(d=e.url_converter.call(e.url_converter_scope||c,d,b,a)),c.setAttrib(a,"data-mce-"+b,d,2));break;case "shape":a.setAttribute("data-mce-style",d)}k(d)&&
null!==d&&0!==d.length?a.setAttribute(b,""+d,2):a.removeAttribute(b,2);tinyMCE.activeEditor&&l!=d&&(e=tinyMCE.activeEditor,e.onSetAttrib.dispatch(e,a,b,d))})},setAttribs:function(a,b){var d=this;return this.run(a,function(a){i(b,function(e,b){d.setAttrib(a,b,e)})})},getAttrib:function(a,d,l){var h,a=this.get(a);if(!a||1!==a.nodeType)return void 0===l?!1:l;k(l)||(l="");if(/^(src|href|style|coords|shape)$/.test(d)&&(h=a.getAttribute("data-mce-"+d)))return h;b&&this.props[d]&&(h=(h=a[this.props[d]])&&
h.nodeValue?h.nodeValue:h);h||(h=a.getAttribute(d,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(d))return!0===a[this.props[d]]&&""===h?d:h?d:"";if("FORM"===a.nodeName&&a.getAttributeNode(d))return a.getAttributeNode(d).nodeValue;if("style"===d&&(h=h||a.style.cssText))h=this.serializeStyle(this.parseStyle(h),a.nodeName),this.settings.keep_values&&!this._isRes(h)&&a.setAttribute("data-mce-style",h);f&&("class"===d&&h)&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,
""));if(b)switch(d){case "rowspan":case "colspan":1===h&&(h="");break;case "size":if("+0"===h||20===h||0===h)h="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":0===h&&(h="");break;case "hspace":-1===h&&(h="");break;case "maxlength":case "tabindex":if(32768===h||2147483647===h||"32768"===h)h="";break;case "multiple":case "compact":case "noshade":case "nowrap":return 65535===h?d:l;case "shape":h=h.toLowerCase();break;default:0===d.indexOf("on")&&h&&(h=
c._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return void 0!==h&&null!==h&&""!==h?""+h:l},getPos:function(a,b){var d=0,c=0,j=this.doc,a=this.get(a),b=b||j.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),c=this.boxModel?j.documentElement:j.body,d=a.left+(j.documentElement.scrollLeft||j.body.scrollLeft)-c.clientTop,c=a.top+(j.documentElement.scrollTop||j.body.scrollTop)-c.clientLeft,{x:d,y:c};for(j=a;j&&j!=b&&j.nodeType;)d+=j.offsetLeft||0,c+=j.offsetTop||0,
j=j.offsetParent;for(j=a.parentNode;j&&j!=b&&j.nodeType;)d-=j.scrollLeft||0,c-=j.scrollTop||0,j=j.parentNode}return{x:d,y:c}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(a){var d=this,l=d.doc,h;a||(a="");h=d.select("head")[0];i(a.split(","),function(a){var e;d.files[a]||(d.files[a]=!0,e=d.create("link",{rel:"stylesheet",href:c._addVer(a)}),b&&(l.documentMode&&l.recalc)&&(e.onload=function(){l.recalc&&l.recalc();
e.onload=null}),h.appendChild(e))})},addClass:function(a,b){return this.run(a,function(a){var e;if(!b)return 0;if(this.hasClass(a,b))return a.className;e=this.removeClass(a,b);return a.className=(""!=e?e+" ":"")+b})},removeClass:function(a,b){var d=this,l;return d.run(a,function(a){var e;return d.hasClass(a,b)?(l||(l=RegExp("(^|\\s+)"+b+"(\\s+|$)","g")),e=a.className.replace(l," "),e=c.trim(" "!=e?e:""),a.className=e,e||(a.removeAttribute("class"),a.removeAttribute("className")),e):a.className})},
hasClass:function(a,b){a=this.get(a);return!a||!b?!1:-1!==(" "+a.className+" ").indexOf(" "+b+" ")},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){a=this.get(a);return!a||"none"==a.style.display||"none"==this.getStyle(a,"display")},uniqueId:function(a){return(!a?"mce_":a)+this.counter++},setHTML:function(a,d){var c=this;return c.run(a,function(a){if(b){for(;a.firstChild;)a.removeChild(a.firstChild);try{a.innerHTML=
"<br />"+d,a.removeChild(a.firstChild)}catch(e){a=c.create("div"),a.innerHTML="<br />"+d,i(a.childNodes,function(b,e){e&&a.appendChild(b)})}}else a.innerHTML=d;return d})},getOuterHTML:function(a){var b,a=this.get(a);if(!a)return null;if(1===a.nodeType&&this.hasOuterHTML)return a.outerHTML;b=(a.ownerDocument||this.doc).createElement("body");b.appendChild(a.cloneNode(!0));return b.innerHTML},setOuterHTML:function(a,d,c){function l(a,b,e){e=e.createElement("body");e.innerHTML=b;for(b=e.lastChild;b;)j.insertAfter(b.cloneNode(!0),
a),b=b.previousSibling;j.remove(a)}var j=this;return this.run(a,function(a){a=j.get(a);if(1==a.nodeType)if(c=c||a.ownerDocument||j.doc,b)try{b&&1==a.nodeType?a.outerHTML=d:l(a,d,c)}catch(e){l(a,d,c)}else l(a,d,c)})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(a,b){b=this.get(b);return this.run(a,function(a){var e,d;e=b.parentNode;(d=b.nextSibling)?e.insertBefore(a,d):e.appendChild(a);return a})},isBlock:function(a){var b=a.nodeType;return b?!!(1===b&&d[a.nodeName]):!!d[a]},replace:function(a,
b,d){k(b,"array")&&(a=a.cloneNode(!0));return this.run(b,function(b){d&&i(c.grep(b.childNodes),function(b){a.appendChild(b)});return b.parentNode.replaceChild(a,b)})},rename:function(a,b){var d=this,c;a.nodeName!=b.toUpperCase()&&(c=d.create(b),i(d.getAttribs(a),function(b){d.setAttrib(c,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(c,a,1));return c||a},findCommonAncestor:function(a,b){for(var d=a,c;d;){for(c=b;c&&d!=c;)c=c.parentNode;if(d==c)break;d=d.parentNode}return!d&&a.ownerDocument?a.ownerDocument.documentElement:
d},toHex:function(a){function b(a){a=parseInt(a).toString(16);return 1<a.length?a:"0"+a}var d=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);d&&(a="#"+b(d[1])+b(d[2])+b(d[3]));return a},getClasses:function(){function a(m){i(m.imports,function(b){a(b)});i(m.cssRules||m.rules,function(m){switch(m.type||1){case 1:m.selectorText&&i(m.selectorText.split(","),function(a){a=a.replace(/^\s*|\s*$|^\s\./g,"");if(!/\.mce/.test(a)&&/\.[\w\-]+$/.test(a)&&(j=a,a=c._replace(/.*\.([a-z0-9_\-]+).*/i,
"$1",a),(!l||(a=l(a,j)))&&!d[a]))b.push({"class":a}),d[a]=1});break;case 3:a(m.styleSheet)}})}var b=[],d={},l=this.settings.class_filter,j;if(this.classes)return this.classes;try{i(this.doc.styleSheets,a)}catch(m){}0<b.length&&(this.classes=b);return b},run:function(a,b,d){var c=this,j;c.doc&&"string"===typeof a&&(a=c.get(a));if(!a)return!1;d=d||this;return!a.nodeType&&(a.length||0===a.length)?(j=[],i(a,function(a,e){a&&("string"==typeof a&&(a=c.doc.getElementById(a)),j.push(b.call(d,a,e)))}),j):
b.call(d,a)},getAttribs:function(a){var d,a=this.get(a);if(!a)return[];if(b){d=[];if("OBJECT"==a.nodeName)return a.attributes;"OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&d.push({specified:1,nodeName:"selected"});a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){d.push({specified:1,nodeName:a})});return d}return a.attributes},isEmpty:function(a,b){var d,l,j,m;if(a=a.firstChild){j=new c.dom.TreeWalker(a);b=b||this.schema?
this.schema.getNonEmptyElements():null;do{l=a.nodeType;if(1===l){if(a.getAttribute("data-mce-bogus"))continue;m=a.nodeName.toLowerCase();if(b&&b[m]){d=a.parentNode;if("br"===m&&this.isBlock(d)&&d.firstChild===a&&d.lastChild===a)continue;return!1}this.getAttribs(a);for(d=a.attributes.length;d--;)if(m=a.attributes[d].nodeName.toLowerCase(),"name"===m||"data-mce-bookmark"===m||"contenteditable"===m&&"true"===a.attributes[d].value)return!1}if(8==l||3===l&&!h.test(a.nodeValue))return!1}while(a=j.next())}return!0},
destroy:function(a){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;a||c.removeUnload(this.destroy)},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new c.dom.Range(this)},nodeIndex:function(a,b){var d=0,c,j;if(a){c=a.nodeType;for(a=a.previousSibling;a;a=a.previousSibling)if(j=a.nodeType,!(b&&3==j)||j!=c&&a.nodeValue.length)d++,c=j}return d},split:function(a,b,d){function l(a){var b,d=a.childNodes,e=a.nodeType;if(!(1==e&&"bookmark"==a.getAttribute("data-mce-type"))){for(b=
d.length-1;0<=b;b--)l(d[b]);if(9!=e){if(3==e&&0<a.nodeValue.length){b=c.trim(a.nodeValue).length;if(!(d=!j.isBlock(a.parentNode)))if(!(d=0<b)){if(b=0==b)b=a.nextSibling&&"SPAN"==a.nextSibling.nodeName,b=a.previousSibling&&"SPAN"==a.previousSibling.nodeName&&b;d=b}if(d)return}else if(1==e&&(d=a.childNodes,1==d.length&&(d[0]&&1==d[0].nodeType&&"bookmark"==d[0].getAttribute("data-mce-type"))&&a.parentNode.insertBefore(d[0],a),d.length||/^(br|hr|input|img)$/i.test(a.nodeName)))return;j.remove(a)}return a}}
var j=this,m=j.createRng(),h,f;if(a&&b)return m.setStart(a.parentNode,j.nodeIndex(a)),m.setEnd(b.parentNode,j.nodeIndex(b)),h=m.extractContents(),m=j.createRng(),m.setStart(b.parentNode,j.nodeIndex(b)+1),m.setEnd(a.parentNode,j.nodeIndex(a)+1),m=m.extractContents(),f=a.parentNode,f.insertBefore(l(h),a),d?f.replaceChild(d,b):f.insertBefore(b,a),f.insertBefore(l(m),a),j.remove(a),d||b},bind:function(a,b,d,l){this.events||(this.events=new c.dom.EventUtils);return this.events.add(a,b,d,l||this)},unbind:function(a,
b,d){this.events||(this.events=new c.dom.EventUtils);return this.events.remove(a,b,d)},dumpRng:function(a){return"startContainer: "+a.startContainer.nodeName+", startOffset: "+a.startOffset+", endContainer: "+a.endContainer.nodeName+", endOffset: "+a.endOffset},_findSib:function(a,b,d){var c=this,j=b;if(a){k(j,"string")&&(j=function(a){return c.is(a,b)});for(a=a[d];a;a=a[d])if(j(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});
c.DOM=new c.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(c){function i(c){function f(a,b){e(x,a,b)}function b(a,b){e(y,a,b)}function a(a){f(a.parentNode,E(a))}function l(a){b(a.parentNode,E(a)+1)}function d(a,b){var d;if(3==a.nodeType||0>b)return a;for(d=a.firstChild;d&&0<b;)--b,d=d.nextSibling;return d?d:a}function h(a,b,d,e){var j,m;if(a==d)return b==e?0:b<e?-1:1;for(j=d;j&&j.parentNode!=a;)j=j.parentNode;if(j){m=0;for(d=a.firstChild;d!=j&&m<b;)m++,d=d.nextSibling;return b<=m?-1:1}for(j=a;j&&j.parentNode!=d;)j=j.parentNode;if(j){m=0;for(d=d.firstChild;d!=
j&&m<e;)m++,d=d.nextSibling;return m<e?-1:1}for(b=c.findCommonAncestor(a,d);a&&a.parentNode!=b;)a=a.parentNode;a||(a=b);for(e=d;e&&e.parentNode!=b;)e=e.parentNode;e||(e=b);if(a==e)return 0;for(d=b.firstChild;d;){if(d==a)return-1;if(d==e)return 1;d=d.nextSibling}}function e(a,b,d){a?(o[u]=b,o[v]=d):(o[z]=b,o[s]=d);for(b=o[z];b.parentNode;)b=b.parentNode;for(d=o[u];d.parentNode;)d=d.parentNode;d==b?0<h(o[u],o[v],o[z],o[s])&&o.collapse(a):o.collapse(a);o.collapsed=o[u]==o[z]&&o[v]==o[s];o.commonAncestorContainer=
c.findCommonAncestor(o[u],o[z])}function g(a){var b,d=0,e=0,c;if(o[u]==o[z])return n(a);b=o[z];for(c=b.parentNode;c;b=c,c=c.parentNode){if(c==o[u]){var m=b;c=e=d=d=c=b=void 0;a!=B&&(b=t.createDocumentFragment());c=r(m,a);b&&b.appendChild(c);d=E(m);d-=o[v];if(!(0>=d))for(c=m.previousSibling;0<d;)e=c.previousSibling,c=p(c,a),b&&b.insertBefore(c,b.firstChild),--d,c=e;a!=q&&(o.setEndBefore(m),o.collapse(y));a=b;return a}++d}b=o[u];for(c=b.parentNode;c;b=c,c=c.parentNode){if(c==o[z]){m=b;c=e=d=c=d=b=void 0;
a!=B&&(b=t.createDocumentFragment());c=j(m,a);b&&b.appendChild(c);d=E(m);++d;d=o[s]-d;for(c=m.nextSibling;0<d;)e=c.nextSibling,c=p(c,a),b&&b.appendChild(c),--d,c=e;a!=q&&(o.setStartAfter(m),o.collapse(x));return b}++e}e-=d;for(b=o[u];0<e;)b=b.parentNode,e--;for(d=o[z];0>e;)d=d.parentNode,e++;e=b.parentNode;for(c=d.parentNode;e!=c;e=e.parentNode,c=c.parentNode)b=e,d=c;var l;a!=B&&(m=t.createDocumentFragment());l=j(b,a);m&&m.appendChild(l);e=E(b);c=E(d);++e;e=c-e;for(l=b.nextSibling;0<e;)c=l.nextSibling,
l=p(l,a),m&&m.appendChild(l),l=c,--e;l=r(d,a);m&&m.appendChild(l);a!=q&&(o.setStartAfter(b),o.collapse(x));return m}function n(a){var b,e,j,c;a!=B&&(b=t.createDocumentFragment());if(o[v]==o[s])return b;if(3==o[u].nodeType){e=o[u].nodeValue;e=e.substring(o[v],o[s]);a!=q&&(o[u].deleteData(o[v],o[s]-o[v]),o.collapse(x));if(a==B)return;b.appendChild(t.createTextNode(e));return b}j=d(o[u],o[v]);for(e=o[s]-o[v];0<e;)c=j.nextSibling,j=p(j,a),b&&b.appendChild(j),--e,j=c;a!=q&&o.collapse(x);return b}function r(a,
b){var e=d(o[z],o[s]-1),j,c,l,g=e!=o[z];if(e==a)return m(e,g,y,b);j=e.parentNode;for(c=m(j,y,y,b);j;){for(;e;)l=e.previousSibling,e=m(e,g,y,b),b!=B&&c.insertBefore(e,c.firstChild),g=x,e=l;if(j==a)return c;e=j.previousSibling;j=j.parentNode;l=m(j,y,y,b);b!=B&&l.appendChild(c);c=l}}function j(a,b){var e=d(o[u],o[v]),j=e!=o[u],c,l,g;if(e==a)return m(e,j,x,b);c=e.parentNode;for(l=m(c,y,x,b);c;){for(;e;)g=e.nextSibling,e=m(e,j,x,b),b!=B&&l.appendChild(e),j=x,e=g;if(c==a)return l;e=c.nextSibling;c=c.parentNode;
g=m(c,y,x,b);b!=B&&g.appendChild(l);l=g}}function m(a,b,d,e){var j;if(b)return p(a,e);if(3==a.nodeType){b=a.nodeValue;d?(j=o[v],d=b.substring(j),b=b.substring(0,j)):(j=o[s],d=b.substring(0,j),b=b.substring(j));e!=q&&(a.nodeValue=b);if(e==B)return;a=a.cloneNode(y);a.nodeValue=d;return a}if(e!=B)return a.cloneNode(y)}function p(a,b){if(b!=B)return b==q?a.cloneNode(x):a;a.parentNode.removeChild(a)}var o=this,t=c.doc,q=1,B=2,x=!0,y=!1,v="startOffset",u="startContainer",z="endContainer",s="endOffset",
A=tinymce.extend,E=c.nodeIndex;A(o,{startContainer:t,startOffset:0,endContainer:t,endOffset:0,collapsed:x,commonAncestorContainer:t,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:f,setEnd:b,setStartBefore:a,setStartAfter:function(a){f(a.parentNode,E(a)+1)},setEndBefore:function(a){b(a.parentNode,E(a))},setEndAfter:l,collapse:function(a){a?(o[z]=o[u],o[s]=o[v]):(o[u]=o[z],o[v]=o[s]);o.collapsed=x},selectNode:function(b){a(b);l(b)},selectNodeContents:function(a){f(a,0);b(a,1===
a.nodeType?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a,b){var d=o[u],e=o[v],j=o[z],c=o[s],m=b.startContainer,l=b.startOffset,g=b.endContainer,f=b.endOffset;if(0===a)return h(d,e,m,l);if(1===a)return h(j,c,m,l);if(2===a)return h(j,c,g,f);if(3===a)return h(d,e,g,f)},deleteContents:function(){g(B)},extractContents:function(){return g(0)},cloneContents:function(){return g(q)},insertNode:function(a){var b=this[u],d=this[v],e;(3===b.nodeType||4===b.nodeType)&&b.nodeValue?d?
d>=b.nodeValue.length?c.insertAfter(a,b):(d=b.splitText(d),b.parentNode.insertBefore(a,d)):b.parentNode.insertBefore(a,b):(0<b.childNodes.length&&(e=b.childNodes[d]),e?b.insertBefore(a,e):b.appendChild(a))},surroundContents:function(a){var b=o.extractContents();o.insertNode(a);a.appendChild(b);o.selectNode(a)},cloneRange:function(){return A(new i(c),{startContainer:o[u],startOffset:o[v],endContainer:o[z],endOffset:o[s],collapsed:o.collapsed,commonAncestorContainer:o.commonAncestorContainer})}})}c.Range=
i})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(c){function i(a,b){var d,h=0,e,g,f,k,j,m,i=-1,o;d=a.duplicate();d.collapse(b);o=d.parentElement();if(o.ownerDocument===c.dom.doc){for(;"false"===o.contentEditable;)o=o.parentNode;if(!o.hasChildNodes())return{node:o,inside:1};f=o.children;for(e=f.length-1;h<=e;)if(m=Math.floor((h+e)/2),k=f[m],d.moveToElementText(k),i=d.compareEndPoints(b?"StartToStart":"EndToEnd",a),0<i)e=m-1;else if(0>i)h=m+1;else return{node:k};if(0>i){k?d.collapse(!1):(d.moveToElementText(o),
d.collapse(!0),k=o,g=!0);d.setEndPoint(b?"EndToStart":"EndToEnd",a);if(0<d.compareEndPoints(b?"StartToStart":"StartToEnd",a)){d=a.duplicate();d.collapse(b);for(j=-1;o==d.parentElement()&&0!=d.move("character",-1);)j++}j=j||d.text.replace("\r\n"," ").length}else d.collapse(!0),d.setEndPoint(b?"StartToStart":"StartToEnd",a),j=d.text.replace("\r\n"," ").length;return{node:k,position:i,offset:j,inside:g}}}var k=this,f=c.dom,b=!0;this.getBookmark=function(a){function b(a){var d,e,j,c,l=[];d=a.parentNode;
for(e=f.doc.body.parentNode;d!=e&&9!==d.nodeType;){j=d.children;for(c=j.length;c--;)if(a===j[c]){l.push(c);break}a=d;d=d.parentNode}return l}function d(a){if(a=i(h,a))return{position:a.position,offset:a.offset,indexes:b(a.node),inside:a.inside}}var h=c.getRng(),e={};2===a&&(h.item?e.start={ctrl:!0,indexes:b(h.item(0))}:(e.start=d(!0),c.isCollapsed()||(e.end=d())));return e};this.moveToBookmark=function(a){function b(a){var d,e,j,c;d=f.doc.body;for(e=a.length-1;0<=e;e--)c=d.children,j=a[e],j<=c.length-
1&&(d=c[j]);return d}function d(d){var f=a[d?"start":"end"],k,j;f&&(k=0<f.position,j=e.createTextRange(),j.moveToElementText(b(f.indexes)),offset=f.offset,void 0!==offset?(j.collapse(f.inside||k),j.moveStart("character",k?-offset:offset)):j.collapse(d),c.setEndPoint(d?"StartToStart":"EndToStart",j),d&&c.collapse(!0))}var c,e=f.doc.body;a.start&&(a.start.ctrl?(c=e.createControlRange(),c.addElement(b(a.start.indexes))):(c=e.createTextRange(),d(!0),d()),c.select())};this.addRange=function(a){function l(a){var c,
l,h,p,y;h=f.create("a");c=a?e:k;l=a?g:i;p=d.duplicate();if(c==j||c==j.documentElement)c=m,l=0;3==c.nodeType?(c.parentNode.insertBefore(h,c),p.moveToElementText(h),p.moveStart("character",l),f.remove(h),d.setEndPoint(a?"StartToStart":"EndToEnd",p)):(y=c.childNodes,y.length?(l>=y.length?f.insertAfter(h,y[y.length-1]):c.insertBefore(h,y[l]),p.moveToElementText(h)):(h=j.createTextNode("﻿"),c.appendChild(h),p.moveToElementText(h.parentNode),p.collapse(b)),d.setEndPoint(a?"StartToStart":"EndToEnd",p),f.remove(h))}
var d,h,e,g,k,i,j=c.dom.doc,m=j.body;e=a.startContainer;g=a.startOffset;k=a.endContainer;i=a.endOffset;d=m.createTextRange();if(e==k&&(1==e.nodeType&&g==i-1)&&g==i-1)try{h=m.createControlRange();h.addElement(e.childNodes[g]);h.select();return}catch(p){}l(!0);l();d.select()};this.getRangeAt=function(){function a(a){var e=i(b,a),c,g,h=0,f;c=e.node;g=e.offset;if(e.inside&&!c.hasChildNodes())d[a?"setStart":"setEnd"](c,0);else if(void 0===g)d[a?"setStartBefore":"setEndAfter"](c);else{if(0>e.position){e=
e.inside?c.firstChild:c.nextSibling;if(!e){d[a?"setStartAfter":"setEndAfter"](c);return}if(!g){if(3==e.nodeType)d[a?"setStart":"setEnd"](e,0);else d[a?"setStartBefore":"setEndBefore"](e);return}for(;e;){f=e.nodeValue;h+=f.length;if(h>=g){c=e;h-=g;h=f.length-h;break}e=e.nextSibling}}else{e=c.previousSibling;if(!e)return d[a?"setStartBefore":"setEndBefore"](c);if(!g){if(3==c.nodeType)d[a?"setStart":"setEnd"](e,c.nodeValue.length);else d[a?"setStartAfter":"setEndAfter"](e);return}for(;e;){h+=e.nodeValue.length;
if(h>=g){c=e;h-=g;break}e=e.previousSibling}}d[a?"setStart":"setEnd"](c,h)}}var b=c.getRng(),d=f.createRng(),h,e,g,n;h=b.item?b.item(0):b.parentElement();if(h.ownerDocument!=f.doc)return d;e=c.isCollapsed();if(b.item)return d.setStart(h.parentNode,f.nodeIndex(h)),d.setEnd(d.startContainer,d.startOffset+1),d;try{a(!0),e||a()}catch(r){if(-2147024809==r.number)n=k.getBookmark(2),g=b.duplicate(),g.collapse(!0),h=g.parentElement(),e||(g=b.duplicate(),g.collapse(!1),g=g.parentElement(),g.innerHTML=g.innerHTML),
h.innerHTML=h.innerHTML,k.moveToBookmark(n),b=c.getRng(),a(!0),e||a();else throw r;}return d}}})();
(function(){function c(a,b,d,e,c,j){for(var c=0,l=e.length;c<l;c++){var m=e[c];if(m){for(var m=m[a],h=!1;m;){if(m.sizcache===d){h=e[m.sizset];break}1===m.nodeType&&!j&&(m.sizcache=d,m.sizset=c);if(m.nodeName.toLowerCase()===b){h=m;break}m=m[a]}e[c]=h}}}function i(a,b,e,c,j,m){for(var j=0,l=c.length;j<l;j++){var h=c[j];if(h){for(var h=h[a],g=!1;h;){if(h.sizcache===e){g=c[h.sizset];break}if(1===h.nodeType)if(m||(h.sizcache=e,h.sizset=j),"string"!==typeof b){if(h===b){g=!0;break}}else if(0<d.filter(b,
[h]).length){g=h;break}h=h[a]}c[j]=g}}}var k=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f=0,b=Object.prototype.toString,a=!1,l=!0;[0,0].sort(function(){l=!1;return 0});var d=function(a,c,j,m){var j=j||[],l=c=c||document;if(1!==c.nodeType&&9!==c.nodeType)return[];if(!a||"string"!==typeof a)return j;var g=[],f,t,n,i,o=!0,p=d.isXML(c),J=a,F;do if(k.exec(""),f=k.exec(J))if(J=f[3],g.push(f[1]),f[2]){i=f[3];break}while(f);
if(1<g.length&&e.exec(a))if(2===g.length&&h.relative[g[0]])t=q(g[0]+g[1],c);else for(t=h.relative[g[0]]?[c]:d(g.shift(),c);g.length;)a=g.shift(),h.relative[a]&&(a+=g.shift()),t=q(a,t);else if(!m&&(1<g.length&&9===c.nodeType&&!p&&h.match.ID.test(g[0])&&!h.match.ID.test(g[g.length-1]))&&(f=d.find(g.shift(),c,p),c=f.expr?d.filter(f.expr,f.set)[0]:f.set[0]),c){f=m?{expr:g.pop(),set:r(m)}:d.find(g.pop(),1===g.length&&("~"===g[0]||"+"===g[0])&&c.parentNode?c.parentNode:c,p);t=f.expr?d.filter(f.expr,f.set):
f.set;for(0<g.length?n=r(t):o=!1;g.length;)f=F=g.pop(),h.relative[F]?f=g.pop():F="",null==f&&(f=c),h.relative[F](n,f,p)}else n=[];n||(n=t);n||d.error(F||a);if("[object Array]"===b.call(n))if(o)if(c&&1===c.nodeType)for(a=0;null!=n[a];a++)n[a]&&(!0===n[a]||1===n[a].nodeType&&d.contains(c,n[a]))&&j.push(t[a]);else for(a=0;null!=n[a];a++)n[a]&&1===n[a].nodeType&&j.push(t[a]);else j.push.apply(j,n);else r(n,j);i&&(d(i,l,j,m),d.uniqueSort(j));return j};d.uniqueSort=function(b){if(m&&(a=l,b.sort(m),a))for(var d=
1;d<b.length;d++)b[d]===b[d-1]&&b.splice(d--,1);return b};d.matches=function(a,b){return d(a,null,null,b)};d.find=function(a,b,d){var e;if(!a)return[];for(var c=0,j=h.order.length;c<j;c++){var m=h.order[c],l;if(l=h.leftMatch[m].exec(a)){var g=l[1];l.splice(1,1);if("\\"!==g.substr(g.length-1)&&(l[1]=(l[1]||"").replace(/\\/g,""),e=h.find[m](l,b,d),null!=e)){a=a.replace(h.match[m],"");break}}}e||(e=b.getElementsByTagName("*"));return{set:e,expr:a}};d.filter=function(a,b,e,c){for(var j=a,m=[],l=b,g,f,
k=b&&b[0]&&d.isXML(b[0]);a&&b.length;){for(var t in h.filter)if(null!=(g=h.leftMatch[t].exec(a))&&g[2]){var q=h.filter[t],n,i;i=g[1];f=!1;g.splice(1,1);if("\\"!==i.substr(i.length-1)){l===m&&(m=[]);if(h.preFilter[t])if(g=h.preFilter[t](g,l,e,m,c,k)){if(!0===g)continue}else f=n=!0;if(g)for(var o=0;null!=(i=l[o]);o++)if(i){n=q(i,g,o,l);var p=c^!!n;e&&null!=n?p?f=!0:l[o]=!1:p&&(m.push(i),f=!0)}if(void 0!==n){e||(l=m);a=a.replace(h.match[t],"");if(!f)return[];break}}}if(a===j)if(null==f)d.error(a);else break;
j=a}return l};d.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var h=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var e="string"===typeof b,c=e&&!/\W/.test(b),e=e&&!c;c&&(b=b.toLowerCase());for(var c=0,j=a.length,m;c<j;c++)if(m=a[c]){for(;(m=m.previousSibling)&&1!==m.nodeType;);a[c]=e||m&&m.nodeName.toLowerCase()===b?m||!1:m===b}e&&d.filter(b,a,!0)},">":function(a,b){var e="string"===
typeof b,c,j=0,m=a.length;if(e&&!/\W/.test(b))for(b=b.toLowerCase();j<m;j++){if(c=a[j])e=c.parentNode,a[j]=e.nodeName.toLowerCase()===b?e:!1}else{for(;j<m;j++)(c=a[j])&&(a[j]=e?c.parentNode:c.parentNode===b);e&&d.filter(b,a,!0)}},"":function(a,b,d){var e=f++,j=i,m;"string"===typeof b&&!/\W/.test(b)&&(m=b=b.toLowerCase(),j=c);j("parentNode",b,e,a,m,d)},"~":function(a,b,d){var e=f++,j=i,m;"string"===typeof b&&!/\W/.test(b)&&(m=b=b.toLowerCase(),j=c);j("previousSibling",b,e,a,m,d)}},find:{ID:function(a,
b,d){if("undefined"!==typeof b.getElementById&&!d)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var d=[],e=b.getElementsByName(a[1]),c=0,j=e.length;c<j;c++)e[c].getAttribute("name")===a[1]&&d.push(e[c]);return 0===d.length?null:d}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,d,e,c,j){a=" "+a[1].replace(/\\/g,"")+" ";if(j)return a;for(var j=0,m;null!=(m=b[j]);j++)m&&(c^(m.className&&0<=(" "+m.className+
" ").replace(/[\t\n]/g," ").indexOf(a))?d||e.push(m):d&&(b[j]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if("nth"===a[1]){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=f++;return a},ATTR:function(a,b,d,e,c,j){b=a[1].replace(/\\/g,"");!j&&h.attrMap[b]&&(a[1]=h.attrMap[b]);"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},
PSEUDO:function(a,b,e,c,j){if("not"===a[1])if(1<(k.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=d(a[3],null,null,b);else return a=d.filter(a[3],b,e,1^j),e||c.push.apply(c,a),!1;else if(h.match.POS.test(a[0])||h.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode.selectedIndex;return!0===
a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,e){return!!d(e[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===
a.type},button:function(a){return"button"===a.type||"button"===a.nodeName.toLowerCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,d,e){return b===e.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,d){return b<d[3]-0},gt:function(a,b,d){return b>d[3]-0},nth:function(a,b,d){return d[3]-0===b},eq:function(a,b,d){return d[3]-0===b}},filter:{PSEUDO:function(a,
b,e,c){var j=b[1],m=h.filters[j];if(m)return m(a,e,b,c);if("contains"===j)return 0<=(a.textContent||a.innerText||d.getText([a])||"").indexOf(b[3]);if("not"===j){b=b[3];e=0;for(c=b.length;e<c;e++)if(b[e]===a)return!1;return!0}d.error("Syntax error, unrecognized expression: "+j)},CHILD:function(a,b){var d=b[1],e=a;switch(d){case "only":case "first":for(;e=e.previousSibling;)if(1===e.nodeType)return!1;if("first"===d)return!0;e=a;case "last":for(;e=e.nextSibling;)if(1===e.nodeType)return!1;return!0;case "nth":var d=
b[2],c=b[3];if(1===d&&0===c)return!0;var j=b[0],m=a.parentNode;if(m&&(m.sizcache!==j||!a.nodeIndex)){for(var l=0,e=m.firstChild;e;e=e.nextSibling)1===e.nodeType&&(e.nodeIndex=++l);m.sizcache=j}e=a.nodeIndex-c;return 0===d?0===e:0===e%d&&0<=e/d}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var d=
b[1],d=h.attrHandle[d]?h.attrHandle[d](a):null!=a[d]?a[d]:a.getAttribute(d),e=d+"",c=b[2],j=b[4];return null==d?"!="===c:"="===c?e===j:"*="===c?0<=e.indexOf(j):"~="===c?0<=(" "+e+" ").indexOf(j):!j?e&&!1!==d:"!="===c?e!==j:"^="===c?0===e.indexOf(j):"$="===c?e.substr(e.length-j.length)===j:"|="===c?e===j||e.substr(0,j.length+1)===j+"-":!1},POS:function(a,b,d,e){var c=h.setFilters[b[2]];if(c)return c(a,d,b,e)}}},e=h.match.POS,g=function(a,b){return"\\"+(b-0+1)},n;for(n in h.match)h.match[n]=RegExp(h.match[n].source+
/(?![^\[]*\])(?![^\(]*\))/.source),h.leftMatch[n]=RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[n].source.replace(/\\(\d+)/g,g));var r=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(j){r=function(a,d){var e=d||[],c=0;if("[object Array]"===b.call(a))Array.prototype.push.apply(e,a);else if("number"===typeof a.length)for(var j=a.length;c<j;c++)e.push(a[c]);else for(;a[c];c++)e.push(a[c]);
return e}}var m;document.documentElement.compareDocumentPosition?m=function(b,d){if(!b.compareDocumentPosition||!d.compareDocumentPosition)return b==d&&(a=!0),b.compareDocumentPosition?-1:1;var e=b.compareDocumentPosition(d)&4?-1:b===d?0:1;0===e&&(a=!0);return e}:"sourceIndex"in document.documentElement?m=function(b,d){if(!b.sourceIndex||!d.sourceIndex)return b==d&&(a=!0),b.sourceIndex?-1:1;var e=b.sourceIndex-d.sourceIndex;0===e&&(a=!0);return e}:document.createRange&&(m=function(b,d){if(!b.ownerDocument||
!d.ownerDocument)return b==d&&(a=!0),b.ownerDocument?-1:1;var e=b.ownerDocument.createRange(),c=d.ownerDocument.createRange();e.setStart(b,0);e.setEnd(b,0);c.setStart(d,0);c.setEnd(d,0);e=e.compareBoundaryPoints(Range.START_TO_END,c);0===e&&(a=!0);return e});d.getText=function(a){for(var b="",e,c=0;a[c];c++)e=a[c],3===e.nodeType||4===e.nodeType?b+=e.nodeValue:8!==e.nodeType&&(b+=d.getText(e.childNodes));return b};g=document.createElement("div");n="script"+(new Date).getTime();g.innerHTML="<a name='"+
n+"'/>";var p=document.documentElement;p.insertBefore(g,p.firstChild);document.getElementById(n)&&(h.find.ID=function(a,b,d){if("undefined"!==typeof b.getElementById&&!d)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},h.filter.ID=function(a,b){var d="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&d&&d.nodeValue===b});p.removeChild(g);p=g=null;g=document.createElement("div");
g.appendChild(document.createComment(""));0<g.getElementsByTagName("*").length&&(h.find.TAG=function(a,b){var d=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var e=[],c=0;d[c];c++)d[c].nodeType===1&&e.push(d[c]);d=e}return d});g.innerHTML="<a href='#'></a>";g.firstChild&&("undefined"!==typeof g.firstChild.getAttribute&&"#"!==g.firstChild.getAttribute("href"))&&(h.attrHandle.href=function(a){return a.getAttribute("href",2)});g=null;if(document.querySelectorAll){var o=d,g=document.createElement("div");
g.innerHTML="<p class='TEST'></p>";if(!(g.querySelectorAll&&0===g.querySelectorAll(".TEST").length)){var d=function(a,b,e,c){b=b||document;if(!c&&b.nodeType===9&&!d.isXML(b))try{return r(b.querySelectorAll(a),e)}catch(j){}return o(a,b,e,c)},t;for(t in o)d[t]=o[t];g=null}}t=document.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>";t.getElementsByClassName&&0!==t.getElementsByClassName("e").length&&(t.lastChild.className="e",1!==t.getElementsByClassName("e").length&&
(h.order.splice(1,0,"CLASS"),h.find.CLASS=function(a,b,d){if(typeof b.getElementsByClassName!=="undefined"&&!d)return b.getElementsByClassName(a[1])},t=null));d.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};d.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var q=function(a,b){for(var e=[],c="",j,m=b.nodeType?[b]:b;j=h.match.PSEUDO.exec(a);){c=
c+j[0];a=a.replace(h.match.PSEUDO,"")}a=h.relative[a]?a+"*":a;j=0;for(var l=m.length;j<l;j++)d(a,m[j],e);return d.filter(c,e)};window.tinymce.dom.Sizzle=d})();
(function(c){var i=c.each,k=c.DOM,f=c.isIE,b;c.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,b,d,h){var e,g=this,n=g.events,r;if(b instanceof Array)return r=[],i(b,function(b){r.push(g.add(a,b,d,h))}),r;if(a&&a.hasOwnProperty&&a instanceof Array)return r=[],i(a,function(a){a=k.get(a);r.push(g.add(a,b,d,h))}),r;if(a=k.get(a)){e=function(a){if(!g.disabled&&(!c.activeEditor||!a||!("keydown"===a.type||"keypress"===a.type)||!(0===c.activeEditor.selection.getSel().rangeCount&&
(!(c.isMac?a.metaKey:a.ctrlKey)||!(83===a.keyCode||69===a.keyCode&&a.shiftKey))))){if((a=a||window.event)&&f&&!c.isIE11)a.target||(a.target=a.srcElement),c.extend(a,g._stoppers);return!h?d(a):d.call(h,a)}};if("unload"==b)return c.unloads.unshift({func:e}),e;if("init"==b)return g.domLoaded?e():g.inits.push(e),e;n.push({obj:a,name:b,func:d,cfunc:e,scope:h});g._add(a,b,e);return d}},remove:function(a,b,d){var c=this,e=c.events,g=!1,f;if(a&&a.hasOwnProperty&&a instanceof Array)return f=[],i(a,function(a){a=
k.get(a);f.push(c.remove(a,b,d))}),f;a=k.get(a);i(e,function(f,j){if(f.obj==a&&f.name==b&&(!d||f.func==d||f.cfunc==d))return e.splice(j,1),c._remove(a,b,f.cfunc),g=!0,!1});return g},clear:function(a){var b=this.events,d,c;if(a){a=k.get(a);for(d=b.length-1;0<=d;d--)c=b[d],c.obj===a&&(this._remove(c.obj,c.name,c.cfunc),c.obj=c.cfunc=null,b.splice(d,1))}},cancel:function(a){if(!a)return!1;this.stop(a);return this.prevent(a)},stop:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return!1},
prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},destroy:function(){var a=this;i(a.events,function(b){a._remove(b.obj,b.name,b.cfunc);b.obj=b.cfunc=null});a.events=[];a=null},_add:function(a,b,d){a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener?a.addEventListener(b,d,!1):a["on"+b]=d},_remove:function(a,b,d){if(a)try{a.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener?a.removeEventListener(b,d,!1):a["on"+b]=null}catch(c){}},_pageInit:function(){this.domLoaded||
(this.domLoaded=!0,i(this.inits,function(a){a()}),this.inits=[])},_wait:function(a){var b=this,d=a.document;a.tinyMCE_GZ&&tinyMCE_GZ.loaded?b.domLoaded=1:"complete"===d.readyState?b._pageInit(a):(d.attachEvent?(d.attachEvent("onreadystatechange",function(){"complete"===d.readyState&&(d.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),d.documentElement.doScroll&&a==a.top&&function(){if(!b.domLoaded){try{d.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);
return}b._pageInit(a)}}()):d.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)}))},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}});b=c.dom.Event=new c.dom.EventUtils;b._wait(window);c.addUnload(function(){b.destroy()})})(tinymce);
(function(c){c.dom.Element=function(i,k){var f=this,b;f.settings=k=k||{};f.id=i;f.dom=b=k.dom||c.DOM;c.isIE||b.get(f.id);c.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){f[a]=function(){var c=[i],d;for(d=0;d<arguments.length;d++)c.push(arguments[d]);c=b[a].apply(b,c);f.update(a);return c}});c.extend(f,{on:function(a,b,d){return c.dom.Event.add(f.id,
a,b,d)},getXY:function(){return{x:parseInt(f.getStyle("left")),y:parseInt(f.getStyle("top"))}},getSize:function(){var a=b.get(f.id);return{w:parseInt(f.getStyle("width")||a.clientWidth),h:parseInt(f.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){f.setStyles({left:a,top:b})},moveBy:function(a,b){var d=f.getXY();f.moveTo(d.x+a,d.y+b)},resizeTo:function(a,b){f.setStyles({width:a,height:b})},resizeBy:function(a,b){var d=f.getSize();f.resizeTo(d.w+a,d.h+b)},update:function(a){c.isIE6&&k.blocker&&
(a=a||"",0===a.indexOf("get")||(0===a.indexOf("has")||0===a.indexOf("is"))||("remove"==a?b.remove(f.blocker):(f.blocker?a=b.get(f.blocker):(f.blocker=b.uniqueId(),a=b.add(k.container||b.getRoot(),"iframe",{id:f.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),b.setStyle(a,"opacity",0)),b.setStyles(a,{left:f.getStyle("left",1),top:f.getStyle("top",1),width:f.getStyle("width",1),height:f.getStyle("height",1),display:f.getStyle("display",1),zIndex:parseInt(f.getStyle("zIndex",1)||
0)-1}))))}})}})(tinymce);
(function(c){var i=c.is,k=c.isIE,f=c.each;c.create("tinymce.dom.Selection",{Selection:function(b,a,l){var d=this;d.dom=b;d.win=a;d.serializer=l;f(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(a){d[a]=new c.util.Dispatcher(d)});d.win.getSelection||(d.tridentSel=new c.dom.TridentSelection(d));c.isIE&&b.boxModel&&this._fixIESelection();c.addUnload(d.destroy,d)},setCursorLocation:function(b,a){var c=this.dom.createRng();c.setStart(b,a);c.setEnd(b,a);this.setRng(c);
this.collapse(!1)},getContent:function(b){var a=this.getRng(),c=this.dom.create("body"),d=this.getSel(),h,e,b=b||{};h=e="";b.get=!0;b.format=b.format||"html";b.forced_root_block="";this.onBeforeGetContent.dispatch(this,b);if("text"==b.format)return this.isCollapsed()?"":a.text||(d.toString?d.toString():"");a.cloneContents?(a=a.cloneContents())&&c.appendChild(a):i(a.item)||i(a.htmlText)?(c.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),c.removeChild(c.firstChild)):c.innerHTML=a.toString();
/^\s/.test(c.innerHTML)&&(h=" ");/\s+$/.test(c.innerHTML)&&(e=" ");b.getInner=!0;b.content=this.isCollapsed()?"":h+this.serializer.serialize(c,b)+e;this.onGetContent.dispatch(this,b);return b.content},setContent:function(b,a){var c=this.getRng(),d,h=this.win.document,e,g,a=a||{format:"html"};a.set=!0;a.content=b;a.no_events||this.onBeforeSetContent.dispatch(this,a);b=a.content;if(c.insertNode){b+='<span id="__caret">_</span>';if(c.startContainer==h&&c.endContainer==h)h.body.innerHTML=b;else if(c.deleteContents(),
0==h.body.childNodes.length)h.body.innerHTML=b;else if(c.createContextualFragment)try{c.insertNode(c.createContextualFragment(b))}catch(f){if(0===c.startOffset&&0===c.endOffset&&0===c.startContainer.children.length){e=h.createDocumentFragment();g=h.createElement("div");g.innerHTML=b;g=g.children[0];for(e.appendChild(g.cloneNode());g=g.nextSibling;)e.appendChild(g.cloneNode());c.startContainer.parentNode.insertBefore(e,c.startContainer)}else throw f;}else e=h.createDocumentFragment(),g=h.createElement("div"),
e.appendChild(g),g.outerHTML=b,c.insertNode(e);try{d=this.dom.get("__caret"),c=h.createRange(),c.setStartBefore(d),c.setEndBefore(d),this.setRng(c),this.dom.remove("__caret"),this.setRng(c)}catch(k){AJS.logError("Exception occurred at tinymce setContent(): "+k)}}else(c.item&&(h.execCommand("Delete",!1,null),c=this.getRng()),/^\s+/.test(b))?(c.pasteHTML('<span id="__mce_tmp">_</span>'+b),this.dom.remove("__mce_tmp")):c.pasteHTML(b);a.no_events||this.onSetContent.dispatch(this,a)},getStart:function(){var b=
this.getRng(),a,c;if(b.duplicate||b.item){if(b.item)return b.item(0);a=b.duplicate();a.collapse(1);a=a.parentElement();for(b=c=b.parentElement();c=c.parentNode;)if(c==a){a=b;break}return a}a=b.startContainer;1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[Math.min(a.childNodes.length-1,b.startOffset)]);return a&&3==a.nodeType?a.parentNode:a},getEnd:function(){var b=this.getRng(),a;if(b.duplicate||b.item){if(b.item)return b.item(0);b=b.duplicate();b.collapse(0);return(a=b.parentElement())&&"BODY"==
a.nodeName?a.lastChild||a:a}a=b.endContainer;b=b.endOffset;1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[0<b?b-1:b]);return a&&3==a.nodeType?a.parentNode:a},getBookmark:function(b,a){function c(a,b){var d=0;f(h.select(a),function(a,e){a==b&&(d=e)});return d}var d=this,h=d.dom,e,g,k,i,j;if(2==b){if(d.tridentSel)return d.tridentSel.getBookmark(b);e=function(b,e){var c=b[e?"startContainer":"endContainer"],j=b[e?"startOffset":"endOffset"],g=[],h,l=0;if(3==c.nodeType){if(a)for(h=c.previousSibling;h&&
3==h.nodeType;h=h.previousSibling)j+=h.nodeValue.length;g.push(j)}else h=c.childNodes,j>=h.length&&h.length&&(l=1,j=Math.max(0,h.length-1)),g.push(d.dom.nodeIndex(h[j],a)+l);for(;c&&c!=m;c=c.parentNode)g.push(d.dom.nodeIndex(c,a));return g};k=d.getRng(!0);var m=h.doc.body;i={};i.start=e(k,!0);d.isCollapsed()||(i.end=e(k));return i}if(b)return{rng:d.getRng()};e=d.getRng();k=h.uniqueId();i=tinyMCE.activeEditor.selection.isCollapsed();if(e.duplicate||e.item){if(e.item)return j=e.item(0),g=j.nodeName,
{name:g,index:c(g,j)};g=e.duplicate();try{e.collapse(),e.pasteHTML('<span data-mce-type="bookmark" id="'+k+'_start" style="overflow:hidden;line-height:0px">﻿</span>'),i||(g.collapse(!1),e.moveToElementText(g.parentElement()),0==e.compareEndPoints("StartToEnd",g)&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+k+'_end" style="overflow:hidden;line-height:0px">﻿</span>'))}catch(p){return null}}else{j=d.getNode();g=j.nodeName;if("IMG"==g)return{name:g,index:c(g,j)};g=e.cloneRange();
i||(g.collapse(!1),g.insertNode(h.create("span",{"data-mce-type":"bookmark",id:k+"_end",style:"overflow:hidden;line-height:0px"},"﻿")));e.collapse(!0);e.insertNode(h.create("span",{"data-mce-type":"bookmark",id:k+"_start",style:"overflow:hidden;line-height:0px"},"﻿"))}d.moveToBookmark({id:k,keep:1});return{id:k}},moveToBookmark:function(b){var a=this.dom,l,d,h,e,g,i;if(b)if(b.start){l=a.createRng();d=a.doc.body;var r=function(a){var e=b[a?"start":"end"],c,j,g;if(e){g=e[0];j=d;for(c=e.length-1;1<=
c;c--){j=j.childNodes;if(e[c]>j.length-1)return;j=j[e[c]]}3===j.nodeType&&(g=Math.min(e[0],j.nodeValue.length));1===j.nodeType&&(g=Math.min(e[0],j.childNodes.length));a?l.setStart(j,g):l.setEnd(j,g)}return!0};if(this.tridentSel)return this.tridentSel.moveToBookmark(b);r(!0)&&r()&&this.setRng(l)}else if(b.id){var r=function(d){var j=a.get(b.id+"_"+d),l,k,q;q=b.keep;if(j&&(l=j.parentNode,"start"==d?(q?(l=j.firstChild,k=1):k=a.nodeIndex(j),h=e=l,g=i=k):(q?(l=j.firstChild,k=1):k=a.nodeIndex(j),e=l,i=
k),!q)){q=j.previousSibling;l=j.nextSibling;for(f(c.grep(j.childNodes),function(a){if(a.nodeType==3)a.nodeValue=a.nodeValue.replace(/\uFEFF/g,"")});j=a.get(b.id+"_"+d);)a.remove(j,1);q&&(l&&q.nodeType==l.nodeType&&3==q.nodeType&&!c.isOpera)&&(k=q.nodeValue.length,q.appendData(l.nodeValue),a.remove(l),"start"==d?(h=e=q,g=i=k):(e=q,i=k))}},j=function(b){a.isBlock(b)&&!b.innerHTML&&(b.innerHTML=!k?'<br data-mce-bogus="1" />':" ");return b};r("start");r("end");h&&(l=a.createRng(),l.setStart(j(h),g),l.setEnd(j(e),
i),this.setRng(l))}else b.name?this.select(a.select(b.name)[b.index]):b.rng&&this.setRng(b.rng)},select:function(b,a){var l=this.dom,d=l.createRng();b&&(l=l.nodeIndex(b),d.setStart(b.parentNode,l),d.setEnd(b.parentNode,l+1),a&&(l=function(a,b){var g=new c.dom.TreeWalker(a,a);try{do{if(3==a.nodeType&&0!=c.trim(a.nodeValue).length){b?d.setStart(a,0):d.setEnd(a,a.nodeValue.length);break}if("BR"==a.nodeName){b?d.setStartBefore(a):d.setEndBefore(a);break}}while(a=b?g.next():g.prev())}catch(l){AJS.log("Error in Selection.js: select : setPoint: "+
l)}},l(b,1),l(b)),this.setRng(d));return b},isCollapsed:function(){var b=this.getRng(),a=this.getSel();return!b||b.item?!1:b.compareEndPoints?0===b.compareEndPoints("StartToEnd",b):!a||b.collapsed},collapse:function(b){var a=this.getRng(),c;a.item&&(c=a.item(0),a=this.win.document.body.createTextRange(),a.moveToElementText(c));a.collapse(!!b);this.setRng(a)},getSel:function(){var b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){function a(a,b,d){try{return b.compareBoundaryPoints(a,
d)}catch(e){return-1}}var l,d,h,e=this.win.document;if(b&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(l=this.getSel())d=0<l.rangeCount?l.getRangeAt(0):l.createRange?l.createRange():e.createRange()}catch(g){}try{c.isIE&&(d&&d.setStart&&e.selection&&e.selection.createRange().item)&&(h=e.selection.createRange().item(0),d=e.createRange(),d.setStartBefore(h),d.setEndAfter(h))}catch(f){}d||(d=e.createRange?e.createRange():e.body.createTextRange());this.selectedRange&&this.explicitRange&&
(0===a(d.START_TO_START,d,this.selectedRange)&&0===a(d.END_TO_END,d,this.selectedRange)?d=this.explicitRange:this.explicitRange=this.selectedRange=null);return d},setRng:function(b){var a;if(this.tridentSel){if(b.cloneRange)try{this.tridentSel.addRange(b);return}catch(c){AJS.logError("Exception occurred at tinymce setRng() - tridentSel.addRange(): "+c)}try{b.select()}catch(d){AJS.logError("Exception occurred at tinymce setRng() - select(): "+d)}}else if(a=this.getSel()){this.explicitRange=b;try{a.removeAllRanges()}catch(h){AJS.logError("Exception occurred at tinymce setRng() - removeAllRanges(): "+
h)}try{a.addRange(b)}catch(e){AJS.logError("Exception occurred at tinymce setRng() - addRange(): "+e)}this.selectedRange=0<a.rangeCount?a.getRangeAt(0):null}},setNode:function(b){this.setContent(this.dom.getOuterHTML(b));return b},getNode:function(){var b=this.getRng();this.getSel();var a,c=b.startContainer,d=b.endContainer;if(!b)return this.dom.getRoot();if(b.setStart){a=b.commonAncestorContainer;if(!b.collapsed&&(b.startContainer==b.endContainer&&2>b.endOffset-b.startOffset&&b.startContainer.hasChildNodes()&&
(a=b.startContainer.childNodes[b.startOffset]),3===c.nodeType&&3===d.nodeType)){var h=function(a,b){for(var d=a;a&&3===a.nodeType&&0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||d},c=c.length===b.startOffset?h(c.nextSibling,!0):c.parentNode,d=0===b.endOffset?h(d.previousSibling,!1):d.parentNode;if(c&&c===d)return c}return a&&3==a.nodeType?a.parentNode:a}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,a){var l=this.dom,d,h,e,g=[];d=l.getParent(b||this.getStart(),
l.isBlock);h=l.getParent(a||this.getEnd(),l.isBlock);d&&g.push(d);if(d&&h&&d!=h){e=d;for(var f=new c.dom.TreeWalker(d,l.getRoot());(e=f.next())&&e!=h;)l.isBlock(e)&&g.push(e)}h&&d!=h&&g.push(h);return g},normalize:function(){function b(b){var e,g,f,k=a.dom;f=k.getRoot();var j;e=l[(b?"start":"end")+"Container"];g=l[(b?"start":"end")+"Offset"];9===e.nodeType&&(e=e.body,g=0);if(e===f&&e.hasChildNodes()){e=e.childNodes[Math.min(!b&&0<g?g-1:g,e.childNodes.length-1)];g=0;if("TABLE"===e.nodeName)return;
if(e.hasChildNodes()){j=e;f=new c.dom.TreeWalker(e,f);do{if(3===j.nodeType){g=b?0:j.nodeValue.length-1;e=j;d=!0;break}if(/^(BR|IMG)$/.test(j.nodeName)){g=k.nodeIndex(j);e=j.parentNode;"IMG"==j.nodeName&&!b&&g++;d=!0;break}}while(j=b?f.next():f.prev())}}if(d)l["set"+(b?"Start":"End")](e,g)}var a=this,l,d;c.isIE||(l=a.getRng(),b(!0),l.collapsed&&d&&b(),d&&a.setRng(l))},destroy:function(b){this.win=null;b||c.removeUnload(this.destroy)},_fixIESelection:function(){function b(a,b){var d=e.createTextRange();
try{d.moveToPoint(a,b)}catch(c){d=null}return d}function a(a){if(a.button){if(a=b(a.x,a.y))0<a.compareEndPoints("StartToStart",f)?a.setEndPoint("StartToStart",f):a.setEndPoint("EndToEnd",f),a.select()}else c()}function c(){var b=h.selection?h.selection.createRange():tinyMCE.activeEditor.getBody().createTextRange();f&&(!b.item&&0===b.compareEndPoints("StartToEnd",b))&&f.select();d.unbind(h,"mouseup",c);d.unbind(h,"mousemove",a);f=g=0}var d=this.dom,h=d.doc,e=h.body,g,f,k;h.documentElement.unselectable=
!0;d.bind(h,["mousedown","contextmenu"],function(e){if("HTML"===e.target.nodeName&&(g&&c(),k=h.documentElement,!(k.scrollHeight>k.clientHeight)&&(g=1,f=b(e.x,e.y))))d.bind(h,"mouseup",c),d.bind(h,"mousemove",a),d.win.focus(),f.select()})}})})(tinymce);
(function(c){c.dom.Serializer=function(i,k,f){var b,a,l=c.each,d;i.apply_source_formatting||(i.indent=!1);k=k||c.DOM;f=f||new c.html.Schema(i);i.entity_encoding=i.entity_encoding||"named";i.remove_trailing_brs="remove_trailing_brs"in i?i.remove_trailing_brs:!0;b=new c.util.Dispatcher(self);a=new c.util.Dispatcher(self);d=new c.html.DomParser(i,f);d.addAttributeFilter("src,href,style",function(a,b){for(var d=a.length,c,l,j="data-mce-"+b,m=i.url_converter,f=i.url_converter_scope;d--;){c=a[d];l=c.attributes.map[j];
if(l!==void 0){c.attr(b,l.length>0?l:null);c.attr(j,null)}else{l=c.attributes.map[b];b==="style"?l=k.serializeStyle(k.parseStyle(l),c.name):m&&(l=m.call(f,l,b,c.name));c.attr(b,l.length>0?l:null)}}});d.addAttributeFilter("class",function(a){for(var b=a.length,d,c;b--;){d=a[b];c=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");d.attr("class",c.length>0?c:null)}});d.addAttributeFilter("data-mce-type",function(a,b,d){for(var b=a.length,c;b--;){c=a[b];c.attributes.map["data-mce-type"]==="bookmark"&&
!d.cleanup&&c.remove()}});d.addNodeFilter("script,style",function(a,b){function d(a){return a.replace(/(<\!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<\!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<\!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<\!--|\/\*\s*<\!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\>)?|\s*\/\/\s*\]\]>(--\>)?|\/\/\s*(--\>)?|\]\]>|\/\*\s*--\>\s*\*\/|\s*--\>\s*)\s*$/g,"")}for(var c=a.length,l,j;c--;){l=a[c];j=l.firstChild?l.firstChild.value:
"";if(b==="script"){l.attr("type",(l.attr("type")||"text/javascript").replace(/^mce\-/,""));if(j.length>0)l.firstChild.value="// <![CDATA[\n"+d(j)+"\n// ]]\>"}else if(j.length>0)l.firstChild.value="<\!--\n"+d(j)+"\n--\>"}});d.addNodeFilter("#comment",function(a){for(var b=a.length,d;b--;){d=a[b];if(d.value.indexOf("[CDATA[")===0){d.name="#cdata";d.type=4;d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(d.value.indexOf("mce:protected ")===0){d.name="#text";d.type=3;d.raw=true;d.value=unescape(d.value).substr(14)}}});
d.addNodeFilter("xml:namespace,input",function(a,b){for(var d=a.length,c;d--;){c=a[d];c.type===7?c.remove():c.type===1&&b==="input"&&!("type"in c.attributes.map)&&c.attr("type","text")}});i.fix_list_elements&&d.addNodeFilter("ul,ol",function(a){for(var b=a.length,d,c;b--;){d=a[b];c=d.parent;(c.name==="ul"||c.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}});d.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){for(var d=a.length;d--;)a[d].attr(b,null)});return{schema:f,
addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,onPreProcess:b,onPostProcess:a,serialize:function(h,e){var g,n,r,h=h.cloneNode(true);g=h.ownerDocument.implementation;if(g.createHTMLDocument){n=g.createHTMLDocument("");l(h.nodeName=="BODY"?h.childNodes:[h],function(a){n.body.appendChild(n.importNode(a,true))});h=h.nodeName!="BODY"?n.body.firstChild:n.body;r=k.doc;k.doc=n}e=e||{};e.format=e.format||"html";if(!e.no_events){e.node=h;b.dispatch(self,e)}g=new c.html.Serializer(i,f);
e.content=g.serialize(d.parse(e.getInner?h.innerHTML:c.trim(k.getOuterHTML(h),e),e));if(!e.cleanup)e.content=e.content.replace(/\uFEFF|\u200B/g,"");e.no_events||a.dispatch(self,e);if(r)k.doc=r;e.node=null;return e.content},addRules:function(a){f.addValidElements(a)},setRules:function(a){f.setValidElements(a)}}}})(tinymce);
(function(c){c.dom.ScriptLoader=function(){var i={},k=[],f={},b=[],a=0;this.isDone=function(a){return 2==i[a]};this.markDone=function(a){i[a]=2};this.add=this.load=function(a,b,c){void 0==i[a]&&(k.push(a),i[a]=0);b&&(f[a]||(f[a]=[]),f[a].push({func:b,scope:c||this}))};this.loadQueue=function(a,b){this.loadScripts(k,a,b)};this.loadScripts=function(l,d,h){function e(a){c.each(f[a],function(a){a.func.call(a.scope)});f[a]=void 0}var g;b.push({func:d,scope:h||this});g=function(){var d=c.grep(l);l.length=
0;c.each(d,function(b){if(2==i[b])e(b);else if(1!=i[b]){i[b]=1;a++;a:{var d=function(){l.remove(n);h&&(h.onreadystatechange=h.onload=h=null);i[b]=2;a--;e(b);g()},m=function(){AJS.log("Failed to load: "+b)},l=c.DOM,h,f,k,n;n=l.uniqueId();if(c.isIE6&&(f=new c.util.URI(b),k=location,f.host==k.hostname&&f.port==k.port&&f.protocol+":"==k.protocol&&"file"!=f.protocol.toLowerCase())){c.util.XHR.send({url:c._addVer(f.getURI()),success:function(a){var b=l.create("script",{type:"text/javascript"});b.text=a;
document.getElementsByTagName("head")[0].appendChild(b);l.remove(b);d()},error:m});break a}h=l.create("script",{id:n,type:"text/javascript",src:c._addVer(b)});c.isIE||(h.onload=d);h.onerror=m;c.isOpera||(h.onreadystatechange=function(){var a=h.readyState;(a=="complete"||a=="loaded")&&d()});(document.getElementsByTagName("head")[0]||document.body).appendChild(h)}}});a||(c.each(b,function(a){a.func.call(a.scope)}),b.length=0)};g()}};c.ScriptLoader=new c.dom.ScriptLoader})(tinymce);
tinymce.dom.TreeWalker=function(c,i){function k(b,a,c,d){if(b){if(!d&&b[a])return b[a];if(b!=i){if(a=b[c])return a;for(b=b.parentNode;b&&b!=i;b=b.parentNode)if(a=b[c])return a}}}var f=c;this.current=function(){return f};this.next=function(b){return f=k(f,"firstChild","nextSibling",b)};this.prev=function(b){return f=k(f,"lastChild","previousSibling",b)}};
(function(c){c.dom.RangeUtils=function(i){this.walk=function(k,f){function b(a){var b;b=a[0];3===b.nodeType&&(b===h&&e>=b.nodeValue.length)&&a.splice(0,1);b=a[a.length-1];0===n&&(0<a.length&&b===g&&3===b.nodeType)&&a.splice(a.length-1,1);return a}function a(a,b,d){for(var c=[];a&&a!=d;a=a[b])c.push(a);return c}function l(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function d(d,c,e){var j=e?"nextSibling":"previousSibling";m=d;for(p=m.parentNode;m&&m!=c;m=p)p=m.parentNode,o=a(m==d?m:
m[j],j),o.length&&(e||o.reverse(),f(b(o)))}var h=k.startContainer,e=k.startOffset,g=k.endContainer,n=k.endOffset,r,j,m,p,o;j=i.select("td.mceSelected,th.mceSelected");if(0<j.length)c.each(j,function(a){f([a])});else{1==h.nodeType&&h.hasChildNodes()&&(h=h.childNodes[e]);1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[Math.min(n-1,g.childNodes.length-1)]);if(h==g)return f(b([h]));r=i.findCommonAncestor(h,g);for(m=h;m;m=m.parentNode){if(m===g)return d(h,r,!0);if(m===r)break}for(m=g;m;m=m.parentNode){if(m===
h)return d(g,r);if(m===r)break}j=l(h,r)||h;r=l(g,r)||g;d(h,j,!0);o=a(j==h?j:j.nextSibling,"nextSibling",r==g?r.nextSibling:r);o.length&&f(b(o));d(g,r)}};this.split=function(c){var f=c.startContainer,b=c.startOffset,a=c.endContainer,c=c.endOffset;if(f==a&&3==f.nodeType)0<b&&b<f.nodeValue.length&&(a=f.splitText(b),f=a.previousSibling,c>b?(f=a=a.splitText(c-b).previousSibling,c=a.nodeValue.length,b=0):c=0);else if(3==f.nodeType&&(0<b&&b<f.nodeValue.length)&&(f=f.splitText(b),b=0),3==a.nodeType&&0<c&&
c<a.nodeValue.length)a=a.splitText(c).previousSibling,c=a.nodeValue.length;return{startContainer:f,startOffset:b,endContainer:a,endOffset:c}}};c.dom.RangeUtils.compareRanges=function(c,k){if(c&&k)if(c.item||c.duplicate){if(c.item&&k.item&&c.item(0)===k.item(0)||c.isEqual&&k.isEqual&&k.isEqual(c))return!0}else return c.startContainer==k.startContainer&&c.startOffset==k.startOffset;return!1}})(tinymce);
(function(c){var i=c.dom.Event,k=c.each;c.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(f,b){var a=this,l=f.root,d=f.items,h=f.enableUpDown,e=f.enableLeftRight||!f.enableUpDown,g=f.excludeFromTabOrder,n,r,j,m,p,b=b||c.DOM;n=function(a){p=a.target.id};r=function(a){b.setAttrib(a.target.id,"tabindex","-1")};m=function(){var a=b.get(p);b.setAttrib(a,"tabindex","0");a.focus()};a.focus=function(){b.get(p).focus()};a.destroy=function(){k(d,function(a){b.unbind(b.get(a.id),"focus",
n);b.unbind(b.get(a.id),"blur",r)});b.unbind(b.get(l),"focus",m);b.unbind(b.get(l),"keydown",j);d=b=l=a.focus=n=r=j=m=null;a.destroy=function(){}};a.moveFocus=function(a,c){var e=-1,j;if(p){k(d,function(a,b){if(a.id===p)return e=b,!1});e+=a;0>e?e=d.length-1:e>=d.length&&(e=0);j=d[e];b.setAttrib(p,"tabindex","-1");b.setAttrib(j.id,"tabindex","0");b.get(j.id).focus();if(f.actOnFocus)f.onAction(j.id);c&&i.cancel(c)}};j=function(b){switch(b.keyCode){case 37:e&&a.moveFocus(-1);break;case 39:e&&a.moveFocus(1);
break;case 38:h&&a.moveFocus(-1);break;case 40:h&&a.moveFocus(1);break;case 27:f.onCancel&&(f.onCancel(),i.cancel(b));break;case 14:case 13:case 32:f.onAction&&(f.onAction(p),i.cancel(b))}};k(d,function(a,d){var c;a.id||(a.id=b.uniqueId("_mce_item_"));g?(b.bind(a.id,"blur",r),c="-1"):c=0===d?"0":"-1";b.setAttrib(a.id,"tabindex",c);b.bind(b.get(a.id),"focus",n)});d[0]&&(p=d[0].id);b.setAttrib(l,"tabindex","-1");b.bind(b.get(l),"focus",m);b.bind(b.get(l),"keydown",j)}})})(tinymce);
(function(c){var i=c.DOM,k=c.is;c.create("tinymce.ui.Control",{Control:function(f,b,a){this.id=f;this.settings=b=b||{};this.rendered=!1;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.active=this.disabled=0;this.editor=a},setAriaProperty:function(c,b){var a=i.get(this.id+"_aria")||i.get(this.id);a&&i.setAttrib(a,"aria-"+c,!!b)},focus:function(){i.get(this.id).focus()},setDisabled:function(c){c!=this.disabled&&(this.setAriaProperty("disabled",c),this.setState("Disabled",
c),this.setState("Enabled",!c),this.disabled=c)},isDisabled:function(){return this.disabled},setActive:function(c){c!=this.active&&(this.setState("Active",c),this.active=c,this.setAriaProperty("pressed",c))},isActive:function(){return this.active},setState:function(c,b){var a=i.get(this.id),c=this.classPrefix+c;b?i.addClass(a,c):i.removeClass(a,c)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(c){i.setHTML(c,this.renderHTML())},postRender:function(){var c;k(this.disabled)&&
(c=this.disabled,this.disabled=-1,this.setDisabled(c));k(this.active)&&(c=this.active,this.active=-1,this.setActive(c))},remove:function(){i.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,i,k){this.parent(c,i,k);this.controls=[];this.lookup={}},add:function(c){this.lookup[c.id]=c;this.controls.push(c);return c},get:function(c){return this.lookup[c]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(c,i){this.parent(c,i);this.classPrefix="mceSeparator";this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
(function(c){var i=c.is;c.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(c,f){this.parent(c,f);this.classPrefix="mceMenuItem"},setSelected:function(c){this.setState("Selected",c);this.setAriaProperty("checked",!!c);this.selected=c},isSelected:function(){return this.selected},postRender:function(){this.parent();i(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(c){var i=c.DOM,k=c.walk;c.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(f,b){this.parent(f,b);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new c.util.Dispatcher(this)},expand:function(c){c&&k(this,function(b){b.expand&&b.expand()},"items",this);this.collapsed=!1},collapse:function(c){c&&k(this,function(b){b.collapse&&b.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(f){f.settings||(f=new c.ui.MenuItem(f.id||
i.uniqueId(),f));this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:!0})},addMenu:function(c){c.collapse||(c=this.createMenu(c));this.menuCount++;return this.add(c)},hasMenus:function(){return 0!==this.menuCount},remove:function(c){delete this.items[c.id]},removeAll:function(){k(this,function(c){c.removeAll?c.removeAll():c.remove();c.destroy()},"items",this);this.items={}},createMenu:function(f){f=new c.ui.Menu(f.id||i.uniqueId(),f);f.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return f}})})(tinymce);
(function(c){var i=c.is,k=c.DOM,f=c.each,b=c.dom.Event,a=c.dom.Element;c.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||k.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;i(b.icons)&&!b.icons&&(b["class"]+=" mceNoIcons");this.parent(a,b);this.onShowMenu=new c.util.Dispatcher(this);this.onHideMenu=new c.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var b=
this.settings;a.container=a.container||b.container;a.parent=this;a.constrain=a.constrain||b.constrain;a["class"]=a["class"]||b["class"];a.vp_offset_x=a.vp_offset_x||b.vp_offset_x;a.vp_offset_y=a.vp_offset_y||b.vp_offset_y;a.keyboard_focus=b.keyboard_focus;a=new c.ui.DropMenu(a.id||k.uniqueId(),a);a.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return a},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var a=this.settings,b=k.get("menu_"+this.id+"_tbl"),c=k.get("menu_"+
this.id+"_co"),e,g;e=a.max_width?Math.min(b.clientWidth,a.max_width):b.clientWidth;g=a.max_height?Math.min(b.clientHeight,a.max_height):b.clientHeight;k.boxModel?this.element.setStyles({width:e,height:g}):this.element.setStyles({width:e+2,height:g+2});a.max_width&&k.setStyle(c,"width",e);a.max_height&&(k.setStyle(c,"height",g),b.clientHeight<a.max_height&&k.setStyle(c,"overflow","hidden"))},showMenu:function(l,d,h){var e=this,g=e.settings,i,r=k.getViewPort(),j,m,p,o,t=e.classPrefix;e.collapse(1);
e.isMenuVisible||(e.rendered?i=k.get("menu_"+e.id):(i=k.add(e.settings.container,e.renderNode()),f(e.items,function(a){a.postRender()}),e.element=new a("menu_"+e.id,{blocker:1,container:g.container})),c.isOpera||k.setStyles(i,{left:-65535,top:-65535}),k.show(i),e.update(),l+=g.offset_x||0,d+=g.offset_y||0,r.w-=4,r.h-=4,g.constrain&&(j=i.clientWidth-2,m=i.clientHeight-2,p=r.x+r.w,r=r.y+r.h,l+g.vp_offset_x+j>p&&(l=h?h-j:Math.max(0,p-g.vp_offset_x-j)),d+g.vp_offset_y+m>r&&(d=Math.max(0,r-g.vp_offset_y-
m))),k.setStyles(i,{left:l,top:d}),e.element.update(),e.isMenuVisible=1,e.mouseClickFunc=b.add(i,"click",function(a){var c;if((a=a.target)&&(a=k.getParent(a,"tr"))&&!k.hasClass(a,t+"ItemSub")){c=e.items[a.id];if(!c.isDisabled()){for(o=e;o;){o.hideMenu&&o.hideMenu();o=o.settings.parent}if(c.settings.onclick)c.settings.onclick(a);return b.cancel(a)}}}),e.hasMenus()&&(e.mouseOverFunc=b.add(i,"mouseover",function(a){var b;if((a=a.target)&&(a=k.getParent(a,"tr"))){b=e.items[a.id];e.lastMenu&&e.lastMenu.collapse(1);
if(!b.isDisabled()&&a&&k.hasClass(a,t+"ItemSub")){a=k.getRect(a);b.showMenu(a.x+a.w-2,a.y-2,a.x);e.lastMenu=b;k.addClass(k.get(b.id).firstChild,t+"ItemActive")}}})),b.add(i,"keydown",e._keyHandler,e),e.onShowMenu.dispatch(e),g.keyboard_focus&&e._setupKeyboardNav())},hideMenu:function(a){var c=k.get("menu_"+this.id),h;this.isMenuVisible&&(this.keyboardNav&&this.keyboardNav.destroy(),b.remove(c,"mouseover",this.mouseOverFunc),b.remove(c,"click",this.mouseClickFunc),b.remove(c,"keydown",this._keyHandler),
k.hide(c),this.isMenuVisible=0,a||this.collapse(1),this.element&&this.element.hide(),(h=k.get(this.id))&&k.removeClass(h.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this))},add:function(a){var b,a=this.parent(a);this.isRendered&&(b=k.get("menu_"+this.id))&&this._add(k.select("tbody",b)[0],a);return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){k.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var a=k.get("menu_"+this.id);this.keyboardNav&&
this.keyboardNav.destroy();b.remove(a,"mouseover",this.mouseOverFunc);b.remove(k.select("a",a),"focus",this.mouseOverFunc);b.remove(a,"click",this.mouseClickFunc);b.remove(a,"keydown",this._keyHandler);this.element&&this.element.remove();k.remove(a)},renderNode:function(){var b=this,c=b.settings,h,e,g;g=k.create("div",{role:"listbox",id:"menu_"+b.id,"class":c["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});b.settings.parent&&k.setAttrib(g,"aria-parent","menu_"+b.settings.parent.id);
e=k.add(g,"div",{role:"presentation",id:"menu_"+b.id+"_co","class":b.classPrefix+(c["class"]?" "+c["class"]:"")});b.element=new a("menu_"+b.id,{blocker:1,container:c.container});c.menu_line&&k.add(e,"span",{"class":b.classPrefix+"Line"});c=k.add(e,"table",{role:"presentation",id:"menu_"+b.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=k.add(c,"tbody");f(b.items,function(a){b._add(h,a)});b.rendered=!0;return g},_setupKeyboardNav:function(){var a,b,h=this;a=k.get("menu_"+h.id);b=k.select("a[role=option]",
"menu_"+h.id);b.splice(0,0,a);h.keyboardNav=new c.ui.KeyboardNavigation({root:"menu_"+h.id,items:b,onCancel:function(){h.hideMenu()},enableUpDown:!0});a.focus()},_keyHandler:function(a){switch(a.keyCode){case 37:this.settings.parent&&(this.hideMenu(),this.settings.parent.focus(),b.cancel(a));break;case 39:this.mouseOverFunc&&this.mouseOverFunc(a)}},_add:function(a,b){var c,e=b.settings,g,f,i,j=this.classPrefix;e.separator?(f=k.add(a,"tr",{id:b.id,"class":j+"ItemSeparator"}),k.add(f,"td",{"class":j+
"ItemSeparator"}),(c=f.previousSibling)&&k.addClass(c,"mceLast")):(c=f=k.add(a,"tr",{id:b.id,"class":j+"Item "+j+"ItemEnabled"}),c=i=k.add(c,e.titleItem?"th":"td"),c=g=k.add(c,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(k.setAttrib(g,"aria-haspopup","true"),k.setAttrib(g,"aria-owns","menu_"+b.id)),k.addClass(i,e["class"]),g=k.add(c,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&
k.add(g,"img",{src:e.icon_src}),c=k.add(c,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&k.setAttrib(c,"style",b.settings.style),1==a.childNodes.length&&k.addClass(f,"mceFirst"),(c=f.previousSibling)&&k.hasClass(c,j+"ItemSeparator")&&k.addClass(f,"mceFirst"),b.collapse&&k.addClass(f,j+"ItemSub"),(c=f.previousSibling)&&k.removeClass(c,"mceLast"),k.addClass(f,"mceLast"))}})})(tinymce);
(function(c){var i=c.DOM;c.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(c,f,b){this.parent(c,f,b);this.classPrefix="mceButton"},renderHTML:function(){var c=this.classPrefix,f=this.settings,b,a;a=i.encode(f.label||"");b='<a role="button" id="'+this.id+'" href="javascript:;" class="'+c+" "+c+"Enabled "+f["class"]+(a?" "+c+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+i.encode(f.title)+'">';b=f.image&&(!this.editor||
!this.editor.forcedHighContrastMode)?b+('<img class="mceIcon" src="'+f.image+'" alt="'+i.encode(f.title)+'" />'+a):b+('<span class="mceIcon '+f["class"]+'"></span>'+(a?'<span class="'+c+'Label">'+a+"</span>":""));b+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+f.title+"</span>";return b+"</a>"},postRender:function(){var k=this,f=k.settings,b;c.isIE&&k.editor&&c.dom.Event.add(k.id,"mousedown",function(){b="IMG"===k.editor.selection.getNode().nodeName?k.editor.selection.getBookmark():
null});c.dom.Event.add(k.id,"click",function(a){if(!k.isDisabled())return c.isIE&&(k.editor&&null!==b)&&k.editor.selection.moveToBookmark(b),f.onclick.call(f.scope,a)});c.dom.Event.add(k.id,"keyup",function(a){if(!k.isDisabled()&&a.keyCode==c.VK.SPACEBAR)return f.onclick.call(f.scope,a)})}})})(tinymce);
(function(c){var i=c.DOM,k=c.dom.Event,f=c.each,b=c.util.Dispatcher;c.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,f,d){this.parent(a,f,d);this.items=[];this.onChange=new b(this);this.onPostRender=new b(this);this.onAdd=new b(this);this.onRenderMenu=new c.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var b=this,c,h;if(void 0==a)return b.selectByIndex(-1);h=a&&"function"==typeof a?a:function(b){return b==a};a!=b.selectedValue&&(f(b.items,function(a,g){if(h(a.value))return c=
1,b.selectByIndex(g),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var b,c,h;a!=this.selectedIndex&&(b=i.get(this.id+"_text"),h=i.get(this.id+"_voiceDesc"),(c=this.items[a])?(this.selectedValue=c.value,this.selectedIndex=a,i.setHTML(b,i.encode(c.title)),i.setHTML(h,this.settings.title+" - "+c.title),i.removeClass(b,"mceTitle"),i.setAttrib(this.id,"aria-valuenow",c.title)):(i.setHTML(b,i.encode(this.settings.title)),i.setHTML(h,i.encode(this.settings.title)),i.addClass(b,"mceTitle"),this.selectedValue=
this.selectedIndex=null,i.setAttrib(this.id,"aria-valuenow",this.settings.title)))},add:function(a,b,d){d=d||{};d=c.extend(d,{title:a,value:b});this.items.push(d);this.onAdd.dispatch(this,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",a=this.settings,b=this.classPrefix,a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+this.id+'_voiceDesc" aria-describedby="'+this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+
b+" "+b+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>',a=a+("<td>"+i.createHTML("span",{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title)),a=a+(i.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},i.encode(this.settings.title))+"</td>"),a=a+("<td>"+i.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},
'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>");return a+"</tr></tbody></table></span>"},showMenu:function(){var a=this,b,d=i.get(this.id),h;if(!(a.isDisabled()||0==a.items.length)){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);b=i.getPos(d);h=a.menu;h.settings.offset_x=b.x;h.settings.offset_y=b.y;h.settings.keyboard_focus=!c.isOpera;a.oldID&&h.items[a.oldID].setSelected(0);f(a.items,
function(b){if(b.value===a.selectedValue){h.items[b.id].setSelected(1);a.oldID=b.id}});h.showMenu(0,d.clientHeight);k.add(i.doc,"mousedown",a.hideMenu,a);i.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible&&(i.removeClass(this.id,this.classPrefix+"Selected"),!a||!("mousedown"==a.type&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open"))))if(!a||!i.getParent(a.target,".mceMenu"))i.removeClass(this.id,this.classPrefix+"Selected"),k.remove(i.doc,
"mousedown",this.hideMenu,this),this.menu.hideMenu()},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});b.onHideMenu.add(function(){a.hideMenu();a.focus()});b.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){!1!==a.settings.onselect("")&&a.select("")}});f(a.items,function(c){void 0===c.value?b.add({title:c.title,role:"option","class":"mceMenuItemTitle",
onclick:function(){!1!==a.settings.onselect("")&&a.select("")}}):(c.id=i.uniqueId(),c.role="option",c.onclick=function(){!1!==a.settings.onselect(c.value)&&a.select(c.value)},b.add(c))});a.onRenderMenu.dispatch(a,b);a.menu=b},postRender:function(){var a=this,b=a.classPrefix;k.add(a.id,"click",a.showMenu,a);k.add(a.id,"keydown",function(b){32==b.keyCode&&(a.showMenu(b),k.cancel(b))});k.add(a.id,"focus",function(){a._focused||(a.keyDownHandler=k.add(a.id,"keydown",function(b){40==b.keyCode&&(a.showMenu(),
k.cancel(b))}),a.keyPressHandler=k.add(a.id,"keypress",function(b){var c;13==b.keyCode&&(c=a.selectedValue,a.selectedValue=null,k.cancel(b),a.settings.onselect(c))}));a._focused=1});k.add(a.id,"blur",function(){k.remove(a.id,"keydown",a.keyDownHandler);k.remove(a.id,"keypress",a.keyPressHandler);a._focused=0});if(c.isIE6||!i.boxModel)k.add(a.id,"mouseover",function(){i.hasClass(a.id,b+"Disabled")||i.addClass(a.id,b+"Hover")}),k.add(a.id,"mouseout",function(){i.hasClass(a.id,b+"Disabled")||i.removeClass(a.id,
b+"Hover")});a.onPostRender.dispatch(a,i.get(a.id))},destroy:function(){this.parent();k.clear(this.id+"_text");k.clear(this.id+"_open")}})})(tinymce);
(function(c){var i=c.DOM,k=c.dom.Event,f=c.each;c.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(b,a){this.parent(b,a);this.classPrefix="mceNativeListBox"},setDisabled:function(b){i.get(this.id).disabled=b;this.setAriaProperty("disabled",b)},isDisabled:function(){return i.get(this.id).disabled},select:function(b){var a=this,c,d;if(void 0==b)return a.selectByIndex(-1);d=b&&"function"==typeof b?b:function(a){return a==b};b!=a.selectedValue&&(f(a.items,function(b,e){if(d(b.value))return c=
1,a.selectByIndex(e),!1}),c||a.selectByIndex(-1))},selectByIndex:function(b){i.get(this.id).selectedIndex=b+1;this.selectedValue=this.items[b]?this.items[b].value:null},add:function(b,a,c){c=c||{};c.value=a;this.isRendered()&&i.add(i.get(this.id),"option",c,b);b={title:b,value:a,attribs:c};this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var b;b=i.createHTML("option",{value:""},"-- "+this.settings.title+" --");f(this.items,function(a){b+=
i.createHTML("option",{value:a.value},a.title)});b=i.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},b);return b+=i.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title)},postRender:function(){function b(b){if((b=a.items[b.target.selectedIndex-1])&&(b=b.value))if(a.onChange.dispatch(a,b),a.settings.onselect)a.settings.onselect(b)}var a=this,f=!0;a.rendered=!0;k.add(a.id,"change",b);k.add(a.id,"keydown",function(d){var h;k.remove(a.id,
"change",void 0);f=!1;h=k.add(a.id,"blur",function(){f||(f=!0,k.add(a.id,"change",b),k.remove(a.id,"blur",h))});if(c.isWebKit&&(37==d.keyCode||39==d.keyCode))return k.prevent(d);if(13==d.keyCode||32==d.keyCode)return b(d),k.cancel(d)});a.onPostRender.dispatch(a,i.get(a.id))}})})(tinymce);
(function(c){var i=c.DOM,k=c.dom.Event;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(f,b,a){this.parent(f,b,a);this.onRenderMenu=new c.util.Dispatcher(this);b.menu_container=b.menu_container||i.doc.body},showMenu:function(){var c,b=i.get(this.id),a;if(!this.isDisabled()){this.isMenuRendered||(this.renderMenu(),this.isMenuRendered=!0);if(this.isMenuVisible)return this.hideMenu();i.getPos(this.settings.menu_container);c=i.getPos(b);a=this.menu;a.settings.offset_x=c.x;a.settings.offset_y=
c.y;a.settings.vp_offset_x=c.x;a.settings.vp_offset_y=c.y;a.settings.keyboard_focus=this._focused;a.showMenu(0,b.clientHeight);k.add(i.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var c=this,b;b=c.settings.control_manager.createDropMenu(c.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:c.settings.icons});b.onHideMenu.add(function(){c.hideMenu();c.focus()});c.onRenderMenu.dispatch(c,b);c.menu=b},hideMenu:function(c){var b=
this;if(!c||!("mousedown"==c.type&&i.getParent(c.target,function(a){return a.id===b.id||a.id===b.id+"_open"}))){if(!c||!i.getParent(c.target,".mceMenu"))b.setState("Selected",0),k.remove(i.doc,"mousedown",b.hideMenu,b),b.menu&&b.menu.hideMenu();b.isMenuVisible=0}},postRender:function(){var c=this,b=c.settings;k.add(c.id,"click",function(){if(!c.isDisabled()){if(b.onclick)b.onclick(c.value);c.showMenu()}})}})})(tinymce);
(function(c){var i=c.DOM,k=c.dom.Event;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(c,b,a){this.parent(c,b,a);this.classPrefix="mceSplitButton"},renderHTML:function(){var c,b=this.settings,a;c="<tbody><tr>";a=b.image?i.createHTML("img ",{src:b.image,role:"presentation","class":"mceAction "+b["class"]}):i.createHTML("span",{"class":"mceAction "+b["class"]},"");a+=i.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},b.title);
c+="<td >"+i.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},a)+"</td>";a=i.createHTML("span",{"class":"mceOpen "+b["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>');c+="<td >"+i.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+b["class"],onclick:"return false;",onmousedown:"return false;",
title:b.title},a)+"</td>";c=i.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+b["class"],cellpadding:"0",cellspacing:"0",title:b.title},c+"</tr></tbody>");return i.createHTML("div",{id:this.id,role:"button",tabindex:"0","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},c)},postRender:function(){var f=this,b=f.settings,a;b.onclick&&(a=function(a){f.isDisabled()||(b.onclick(f.value),k.cancel(a))},k.add(f.id+"_action","click",a),k.add(f.id,["click","keydown"],
function(b){if((32===b.keyCode||13===b.keyCode||14===b.keyCode)&&!b.altKey&&!b.ctrlKey&&!b.metaKey)a(),k.cancel(b);else if("click"===b.type||40===b.keyCode)f.showMenu(),k.cancel(b)}));k.add(f.id+"_open","click",function(a){f.showMenu();k.cancel(a)});k.add([f.id,f.id+"_open"],"focus",function(){f._focused=1});k.add([f.id,f.id+"_open"],"blur",function(){f._focused=0});if(c.isIE6||!i.boxModel)k.add(f.id,"mouseover",function(){i.hasClass(f.id,"mceSplitButtonDisabled")||i.addClass(f.id,"mceSplitButtonHover")}),
k.add(f.id,"mouseout",function(){i.hasClass(f.id,"mceSplitButtonDisabled")||i.removeClass(f.id,"mceSplitButtonHover")})},destroy:function(){this.parent();k.clear(this.id+"_action");k.clear(this.id+"_open");k.clear(this.id)}})})(tinymce);
(function(c){var i=c.DOM,k=c.dom.Event,f=c.is,b=c.each;c.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b,d){this.parent(a,b,d);this.settings=b=c.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new c.util.Dispatcher(this);this.onHideMenu=new c.util.Dispatcher(this);this.value=b.default_color},showMenu:function(){var a=this,b,c;if(!a.isDisabled()){a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();b=i.get(a.id);i.show(a.id+"_menu");i.addClass(b,"mceSplitButtonSelected");c=i.getPos(b);i.setStyles(a.id+"_menu",{left:c.x,top:c.y+b.clientHeight,zIndex:2E5});b=0;k.add(i.doc,"mousedown",a.hideMenu,a);a.onShowMenu.dispatch(a);
a._focused&&(a._keyHandler=k.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),i.select("a",a.id+"_menu")[0].focus());a.isMenuVisible=1}},hideMenu:function(a){var b=this;if(b.isMenuVisible&&(!a||!("mousedown"==a.type&&i.getParent(a.target,function(a){return a.id===b.id+"_open"})))){if(!a||!i.getParent(a.target,".mceSplitButtonMenu"))i.removeClass(b.id,"mceSplitButtonSelected"),k.remove(i.doc,"mousedown",b.hideMenu,b),k.remove(b.id+"_menu","keydown",b._keyHandler),i.hide(b.id+"_menu");
b.isMenuVisible=0;b.onHideMenu.dispatch()}},renderMenu:function(){var a=this,l,d=0,h=a.settings,e,g,n,r,j;r=i.add(h.menu_container,"div",{role:"listbox",id:a.id+"_menu","class":h.menu_class+" "+h["class"],style:"position:absolute;left:0;top:-1000px;"});l=i.add(r,"div",{"class":h["class"]+" mceSplitButtonMenu"});i.add(l,"span",{"class":"mceMenuLine"});e=i.add(l,"table",{role:"presentation","class":"mceColorSplitMenu"});g=i.add(e,"tbody");d=0;b(f(h.colors,"array")?h.colors:h.colors.split(","),function(b){b=
b.replace(/^#/,"");d--||(n=i.add(g,"tr"),d=h.grid_width-1);e=i.add(n,"td");var f={href:"javascript:;",style:{backgroundColor:"#"+b},title:a.editor.getLang("colors."+b,b),"data-mce-color":"#"+b};c.isIE||(f.role="option");e=i.add(e,"a",f);a.editor.forcedHighContrastMode&&(e=i.add(e,"canvas",{width:16,height:16,"aria-hidden":"true"}),e.getContext&&(j=e.getContext("2d"))?(j.fillStyle="#"+b,j.fillRect(0,0,16,16)):i.remove(e))});h.more_colors_func&&(e=i.add(g,"tr"),e=i.add(e,"td",{colspan:h.grid_width,
"class":"mceMoreColors"}),e=i.add(e,"a",{role:"option",id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},h.more_colors_title),k.add(e,"click",function(a){h.more_colors_func.call(h.more_colors_scope||this);return k.cancel(a)}));i.addClass(l,"mceColorSplitMenu");new c.ui.KeyboardNavigation({root:a.id+"_menu",items:i.select("a",a.id+"_menu"),onCancel:function(){a.hideMenu();a.focus()}});k.add(a.id+"_menu","mousedown",function(a){return k.cancel(a)});k.add(a.id+"_menu",
"click",function(b){var c;(b=i.getParent(b.target,"a",g))&&(b.nodeName.toLowerCase()=="a"&&(c=b.getAttribute("data-mce-color")))&&a.setColor(c);return k.cancel(b)});return r},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){i.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();i.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});i.setStyle(this.id+"_preview","backgroundColor",
this.value)},destroy:function(){this.parent();k.clear(this.id+"_menu");k.clear(this.id+"_more");i.remove(this.id+"_menu")}})})(tinymce);
(function(c){var i=c.DOM,k=c.each,f=c.dom.Event;c.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var b=[],a=this.controls,f=c.each,d=this.settings;b.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">');b.push("<span role='application'>");b.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+i.encode(d.name)+"</span>");f(a,function(a){b.push(a.renderHTML())});b.push("</span>");b.push("</div>");return b.join("")},
focus:function(){i.get(this.id).focus()},postRender:function(){var b=this,a=[];k(b.controls,function(b){k(b.controls,function(b){b.id&&a.push(b)})});b.keyNav=new c.ui.KeyboardNavigation({root:b.id,items:a,onCancel:function(){c.isWebKit&&i.get(b.editor.id+"_ifr").focus();b.editor.focus()},excludeFromTabOrder:!b.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();f.clear(this.id)}})})(tinymce);
(function(c){var i=c.DOM;c.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var c="",f,b,a=this.settings,l,d,h,e;e=this.controls;for(l=0;l<e.length;l++){b=e[l];d=e[l-1];h=e[l+1];0===l&&(f="mceToolbarStart",b.Button?f+=" mceToolbarStartButton":b.SplitButton?f+=" mceToolbarStartSplitButton":b.ListBox&&(f+=" mceToolbarStartListBox"),c+=i.createHTML("td",{"class":f},i.createHTML("span",null,"<\!-- IE --\>")));if(d&&b.ListBox&&(d.Button||d.SplitButton))c+=i.createHTML("td",{"class":"mceToolbarEnd"},
i.createHTML("span",null,"<\!-- IE --\>"));c=i.stdMode?c+('<td style="position: relative">'+b.renderHTML()+"</td>"):c+("<td>"+b.renderHTML()+"</td>");if(h&&b.ListBox&&(h.Button||h.SplitButton))c+=i.createHTML("td",{"class":"mceToolbarStart"},i.createHTML("span",null,"<\!-- IE --\>"))}f="mceToolbarEnd";b.Button?f+=" mceToolbarEndButton":b.SplitButton?f+=" mceToolbarEndSplitButton":b.ListBox&&(f+=" mceToolbarEndListBox");c+=i.createHTML("td",{"class":f},i.createHTML("span",null,"<\!-- IE --\>"));return i.createHTML("table",
{id:this.id,"class":"mceToolbar"+(a["class"]?" "+a["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})})(tinymce);
(function(c){var i=c.util.Dispatcher;c.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new i(this)},get:function(c){if(this.lookup[c])return this.lookup[c].instance},dependencies:function(c){var f;this.lookup[c]&&(f=this.lookup[c].dependencies);return f||[]},requireLangPack:function(i){var f=c.settings;f&&(f.language&&!1!==f.language_load)&&c.ScriptLoader.add(this.urls[i]+"/langs/"+f.language+".js")},add:function(c,f,b){this.items.push(f);
this.lookup[c]={instance:f,dependencies:b};this.onAdd.dispatch(this,c,f);return f},createUrl:function(c,f){return"object"===typeof f?f:{prefix:c.prefix,resource:f,suffix:c.suffix}},addComponents:function(i,f){var b=this.urls[i];c.each(f,function(a){c.ScriptLoader.add(b+"/"+a)})},load:function(i,f,b,a){function l(){var e=d.dependencies(i);c.each(e,function(a){a=d.createUrl(f,a);d.load(a.resource,a,void 0,void 0)});b&&(a?b.call(a):b.call(c.ScriptLoader))}var d=this,h=f;d.urls[i]||("object"===typeof f&&
(h=f.prefix+f.resource+f.suffix),0!=h.indexOf("/")&&-1==h.indexOf("://")&&(h=c.baseURL+"/"+h),d.urls[i]=h.substring(0,h.lastIndexOf("/")),c.settings.atlassian||(d.lookup[i]?l():c.ScriptLoader.add(h,l,a)))}});c.PluginManager=new c.AddOnManager;c.ThemeManager=new c.AddOnManager})(tinymce);
(function(c){var i=c.each,k=c.extend,f=c.DOM,b=c.dom.Event,a=c.explode,l=c.util.Dispatcher,d=0;c.documentBaseURL=c.baseURL;AJS.log("tinymce.documentBaseURL = "+c.documentBaseURL);/[\/\\]$/.test(c.documentBaseURL)||(c.documentBaseURL+="/");c.baseURL=(new c.util.URI(c.documentBaseURL)).toAbsolute(c.baseURL);c.baseURI=new c.util.URI(c.baseURL);c.onBeforeUnload=new l(c);b.add(window,"beforeunload",function(a){c.onBeforeUnload.dispatch(c,a)});c.onAddEditor=new l(c);c.onRemoveEditor=new l(c);c.EditorManager=
k(c,{editors:[],i18n:{},activeEditor:null,init:function(h){function e(a,b,e){var d=a[b];if(d){if(c.is(d,"string")){e=(e=d.replace(/\.\w+$/,""))?c.resolve(e):0;d=c.resolve(d)}return d.apply(e||this,Array.prototype.slice.call(arguments,2))}}function g(){var b,g;e(h,"onpageload");switch(h.mode){case "exact":b=h.elements||"";b.length>0&&i(a(b),function(a){if(f.get(a)){m=new c.Editor(a,h);j.push(m);m.render(1)}else i(document.forms,function(b){i(b.elements,function(b){if(b.name===a){a="mce_editor_"+d++;
f.setAttrib(b,"id",a);m=new c.Editor(a,h);j.push(m);m.render(1)}})})});break;case "textareas":case "specific_textareas":i(f.select("textarea"),function(a){if(!h.editor_deselector||!(h.editor_deselector.constructor===RegExp?h.editor_deselector.test(a.className):f.hasClass(a,h.editor_deselector)))if(!h.editor_selector||(h.editor_selector.constructor===RegExp?h.editor_selector.test(a.className):f.hasClass(a,h.editor_selector))){r=f.get(a.name);if(!a.id&&!r)a.id=a.name;if(!a.id||l.get(a.id))a.id=f.uniqueId();
m=new c.Editor(a.id,h);j.push(m);m.render(1)}})}if(h.oninit){b=g=0;i(j,function(a){g++;a.initialized?b++:a.onInit.add(function(){b++;b==g&&e(h,"oninit")});b==g&&e(h,"oninit")})}}var l=this,r,j=[],m,h=k({theme:"simple",language:"en"},h);l.settings=h;h.atlassian?g():b.add(document,"init",g)},get:function(a){return a===void 0?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this.editors;b[a.id]=a;b.push(a);this._setActive(a);this.onAddEditor.dispatch(this,
a);c.adapter&&c.adapter.patchEditor(a);return a},remove:function(a){var b,c=this.editors;if(!c[a.id])return null;delete c[a.id];for(b=0;b<c.length;b++)if(c[b]==a){c.splice(b,1);break}this.activeEditor==a&&this._setActive(c[0]);a.destroy();this.onRemoveEditor.dispatch(this,a);return a},execCommand:function(a,b,d){var f=this.get(d),i;switch(a){case "mceFocus":f.focus();return true;case "mceAddEditor":case "mceAddControl":this.get(d)||(new c.Editor(d,this.settings)).render();return true;case "mceAddFrameControl":i=
d.window;i.tinyMCE=tinyMCE;i.tinymce=c;c.DOM.doc=i.document;c.DOM.win=i;f=new c.Editor(d.element_id,d);f.render();if(c.isIE){var j=function(){f.destroy();i.detachEvent("onunload",j);i=i.tinyMCE=i.tinymce=null};i.attachEvent("onunload",j)}d.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":f&&f.remove();return true;case "mceToggleEditor":if(!f){this.execCommand("mceAddControl",0,d);return true}f.isHidden()?f.show():f.hide();return true}return this.activeEditor?this.activeEditor.execCommand(a,
b,d):false},execInstanceCommand:function(a,b,c,d){return(a=this.get(a))?a.execCommand(b,c,d):false},triggerSave:function(){i(this.editors,function(a){a.save()})},addI18n:function(a,b){var d=this.i18n;c.is(a,"string")?i(b,function(b,c){d[a+"."+c]=b}):i(a,function(a,b){i(a,function(a,c){i(a,function(a,e){c==="common"?d[b+"."+e]=a:d[b+"."+c+"."+e]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);
(function(c){var i=c.DOM,k=c.dom.Event,f=c.extend,b=c.util.Dispatcher,a=c.each,l=c.isGecko,d=c.isIE,h=c.is,e=c.ThemeManager,g=c.PluginManager,n=c.explode,r=c.VK;c.create("tinymce.Editor",{Editor:function(d,e){var g=this;g.id=g.editorId=d;g.execCommands={};g.queryStateCommands={};g.queryValueCommands={};g.isNotDirty=!1;g.plugins={};a("onPreInit onBeforeRenderUI onPostRender onLoad onInit onRemove onActivate onDeactivate onClick onEvent onMouseUp onMouseDown onDblClick onKeyDown onKeyUp onKeyPress onContextMenu onSubmit onReset onPaste onPreProcess onPostProcess onBeforeSetContent onBeforeGetContent onSetContent onGetContent onLoadContent onSaveContent onNodeChange onChange onBeforeExecCommand onExecCommand onUndo onRedo onVisualAid onSetProgressState onSetAttrib".split(" "),
function(a){g[a]=new b(g)});g.settings=e=f({id:d,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:c.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,
doctype:c.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE html>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,
convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},e);g.documentBaseURI=new c.util.URI(e.document_base_url||c.documentBaseURL,{base_uri:tinyMCE.baseURI});g.baseURI=c.baseURI;g.contentCSS=
[];g.execCallback("setup",g)},render:function(){var b=this,d=b.settings,f=b.id,h=c.ScriptLoader;if(!d.atlassian&&!k.domLoaded)k.add(document,"init",function(){b.render()});else if(tinyMCE.settings=d,b.getElement()&&(!c.isIDevice||c.isIOS5))!/TEXTAREA|INPUT/i.test(b.getElement().nodeName)&&(d.hidden_input&&i.getParent(f,"form"))&&i.insertAfter(i.create("input",{type:"hidden",name:f}),f),c.WindowManager&&(b.windowManager=new c.WindowManager(b)),"xml"==d.encoding&&b.onGetContent.add(function(a,b){if(b.save)b.content=
i.encode(b.content)}),d.add_form_submit_trigger&&b.onSubmit.addToTop(function(){if(b.initialized){b.save();b.isNotDirty=1}}),d.add_unload_trigger&&(b._beforeUnload=tinyMCE.onBeforeUnload.add(function(){b.initialized&&(!b.destroyed&&!b.isHidden())&&b.save({format:"raw",no_events:true})})),c.addUnload(b.destroy,b),d.submit_patch&&b.onBeforeRenderUI.add(function(){var a=b.getElement().form;if(a&&!a._mceOldSubmit){if(!a.submit.nodeType&&!a.submit.length){b.formElement=a;a._mceOldSubmit=a.submit;a.submit=
function(){c.triggerSave();b.isNotDirty=1;return b.formElement._mceOldSubmit(b.formElement)}}a=null}}),f=function(){b.removed||b.init()},d.theme&&("-"!=d.theme.charAt(0)&&!e.urls[d.theme])&&e.load(d.theme,"themes/"+d.theme+"/editor_template"+c.suffix+".js"),a(n(d.plugins),function(b){if(b&&!g.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);b=g.dependencies(b);a(b,function(a){a=g.createUrl({prefix:"plugins/",resource:a,suffix:"/editor_plugin"+c.suffix+".js"},a);g.load(a.resource,a)})}else b!="safari"&&
g.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+c.suffix+".js"})}),d.atlassian?f():h.loadQueue(f)},init:function(){function b(d){var e=g.get(d),h=g.urls[d]||c.documentBaseURL.replace(/\/$/,"");e&&-1===c.inArray(v,d)&&(a(g.dependencies(d),function(a){b(a)}),e=new e(m,h),m.plugins[d]=e,e.init&&(e.init(m,h),v.push(d)),AJS.log("initPlugin: "+d+" initialised"))}var m=this,h=m.settings,k,t,q=m.getElement(),r,x,y,v=[];c.add(m);h.aria_label=h.aria_label||i.getAttrib(q,"aria-label",m.getLang("aria.rich_text_area"));
h.theme&&(h.theme=h.theme.replace(/-/,""),r=e.get(h.theme),m.theme=new r,m.theme.init&&h.init_theme&&m.theme.init(m,e.urls[h.theme]||c.documentBaseURL.replace(/\/$/,"")));a(n(h.plugins.replace(/\-/g,"")),b);!1!==h.popup_css&&(h.popup_css=h.popup_css?m.documentBaseURI.toAbsolute(h.popup_css):m.baseURI.toAbsolute("themes/"+h.theme+"/skins/"+h.skin+"/dialog.css"));h.popup_css_add&&(h.popup_css+=","+m.documentBaseURI.toAbsolute(h.popup_css_add));m.controlManager=new c.ControlManager(m);h.custom_undo_redo&&
(m.onBeforeExecCommand.add(function(a,b,c,d,e){b!="Undo"&&(b!="Redo"&&b!="mceRepaint"&&(!e||!e.skip_undo))&&m.undoManager.beforeChange()}),m.onExecCommand.add(function(a,b,c,d,e){b!="Undo"&&(b!="Redo"&&b!="mceRepaint"&&(!e||!e.skip_undo))&&m.undoManager.add()}));m.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||m.nodeChanged()});l&&(y=function(a,b){(!b||!b.initial)&&m.execCommand("mceRepaint")},m.onUndo.add(y),m.onRedo.add(y),m.onSetContent.add(y));m.onBeforeRenderUI.dispatch(m,m.controlManager);
h.render_ui&&(k=h.width||q.style.width||q.offsetWidth,t=h.height||q.style.height||q.offsetHeight,m.orgDisplay=q.style.display,y=/^[0-9\.]+(|px)$/i,y.test(""+k)&&(k=Math.max(parseInt(k)+(r.deltaWidth||0),100)),y.test(""+t)&&(t=Math.max(parseInt(t)+(r.deltaHeight||0),100)),r=m.theme.renderUI({targetNode:q,width:k,height:t,deltaWidth:h.delta_width,deltaHeight:h.delta_height}),m.editorContainer=r.editorContainer);if(h.content_editable)return q=r=null,m.setupContentEditable();document.domain&&location.hostname!=
document.domain&&(c.relaxedDomain=document.domain);i.setStyles(r.sizeContainer||r.editorContainer,{width:k,height:t});h.content_css&&c.each(n(h.content_css),function(a){m.contentCSS.push(m.documentBaseURI.toAbsolute(a))});100>t&&(t=100);m.iframeHTML=h.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';m.iframeHTML=h.ie7_compat?m.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=7" />':m.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=edge" />';m.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';
for(k=0;k<m.contentCSS.length;k++)m.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+m.contentCSS[k]+'" />';h.contentCssTags&&(m.iframeHTML+=h.contentCssTags);m.contentCSS=[];k=h.body_id||"tinymce";-1!=k.indexOf("=")&&(k=m.getParam("body_id","","hash"),k=k[m.id]||k);q=h.body_class||"";-1!=q.indexOf("=")&&(q=m.getParam("body_class","","hash"),q=q[m.id]||"");m.iframeHTML+='</head><body id="'+k+'" class="mceContentBody aui-theme-default '+q+'" onload="window.parent.tinyMCE.get(\''+m.id+"').onLoad.dispatch();\"><br></body></html>";
if(c.relaxedDomain&&(d||c.isOpera&&11>parseFloat(opera.version())))x='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+m.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';h.iframe_attr=h.iframe_attr||{};h.iframe_attr=f(h.iframe_attr,{id:m.id+"_ifr",src:x||'javascript:""',frameBorder:"0",allowTransparency:"true",title:h.aria_label,style:{width:"100%",height:t,display:"block"}});i.add(r.iframeContainer,"iframe",
h.iframe_attr);m.contentAreaContainer=r.iframeContainer;i.get(r.editorContainer).style.display=m.orgDisplay;i.get(m.id).style.display="none";i.setAttrib(m.id,"aria-hidden",!0);(!c.relaxedDomain||!x)&&m.setupIframe();q=r=null},setupIframe:function(){var b=this,e=b.settings;i.get(b.id);var g=b.getDoc();if(!d||!c.relaxedDomain)g.open(),g.write(b.iframeHTML),g.close(),c.relaxedDomain&&(g.domain=c.relaxedDomain);g=b.getBody();g.disabled=!0;e.readonly||(g.contentEditable=!0);g.disabled=!1;b.schema=new c.html.Schema(e);
b.dom=new c.dom.DOMUtils(b.getDoc(),{keep_values:!0,url_converter:b.convertURL,url_converter_scope:b,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:b.schema});b.parser=new c.html.DomParser(e,b.schema);b.settings.allow_html_in_named_anchor||b.parser.addAttributeFilter("name",function(a){for(var b=a.length,c,d,e,j;b--;){j=a[b];if(j.name==="a"&&j.firstChild){e=j.parent;c=j.lastChild;do{d=c.prev;e.insert(c,j);c=d}while(c)}}});b.parser.addAttributeFilter("src,href,style",
function(a,c){for(var d=a.length,e,g=b.dom,m,h;d--;){e=a[d];m=e.attr(c);h="data-mce-"+c;e.attributes.map[h]||(c==="style"?e.attr(h,g.serializeStyle(g.parseStyle(m),e.name)):e.attr(h,b.convertURL(m,c,e.name)))}});b.parser.addNodeFilter("script",function(a){for(var b=a.length,c;b--;){c=a[b];c.attr("type","mce-"+(c.attr("type")||"text/javascript"))}});b.parser.addNodeFilter("#cdata",function(a){for(var b=a.length,c;b--;){c=a[b];c.type=8;c.name="#comment";c.value="[CDATA["+c.value+"]]"}});b.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",
function(a){var e=a.length,d;for(b.schema.getNonEmptyElements();e--;){d=a[e];if(d.isEmpty(b.schema))d.empty().append(new c.html.Node("br",1)).shortEnded=true}});b.serializer=new c.dom.Serializer(e,b.dom,b.schema);b.selection=new c.dom.Selection(b.dom,b.getWin(),b.serializer);b.formatter=new c.Formatter(this);b.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img.confluence-embedded-image",classes:"image-left"},{selector:"img,table",
collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img.confluence-embedded-image",classes:"image-center"},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img.confluence-embedded-image",classes:"image-right"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",
styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"s",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},
wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return true},onformat:function(c,d,e){a(e,function(a,e){b.dom.setAttrib(c,e,a)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",
remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){b.formatter.register(a,{block:a,remove:"all"})});b.formatter.register(b.settings.formats);b.undoManager=new c.UndoManager(b);b.undoManager.onAdd.add(function(a,c){if(a.hasUndo())return b.onChange.dispatch(b,
c,a)});b.undoManager.onUndo.add(function(a,c){return b.onUndo.dispatch(b,c,a)});b.undoManager.onRedo.add(function(a,c){return b.onRedo.dispatch(b,c,a)});b.forceBlocks=new c.ForceBlocks(b,{forced_root_block:e.forced_root_block});b.editorCommands=new c.EditorCommands(b);b.serializer.onPreProcess.add(function(a,c){return b.onPreProcess.dispatch(b,c,a)});b.serializer.onPostProcess.add(function(a,c){return b.onPostProcess.dispatch(b,c,a)});AJS.log("Editor:setupIframe: dispatch onPreInit");b.onPreInit.dispatch(b);
e.gecko_spellcheck||(b.getBody().spellcheck=0);e.readonly||b._addEvents();AJS.log("Editor:setupIframe: dispatch controlManager onPostRender");b.controlManager.onPostRender.dispatch(b,b.controlManager);AJS.log("Editor:setupIframe: dispatch onPostRender");b.onPostRender.dispatch(b);b.quirks=new c.util.Quirks(this);e.directionality&&(b.getBody().dir=e.directionality);e.nowrap&&(b.getBody().style.whiteSpace="nowrap");e.handle_node_change_callback&&b.onNodeChange.add(function(a,c,e){b.execCallback("handle_node_change_callback",
b.id,e,-1,-1,true,b.selection.isCollapsed())});e.save_callback&&b.onSaveContent.add(function(a,c){var e=b.execCallback("save_callback",b.id,c.content,b.getBody());if(e)c.content=e});e.onchange_callback&&b.onChange.add(function(a,c){b.execCallback("onchange_callback",b,c)});e.protect&&b.onBeforeSetContent.add(function(b,c){e.protect&&a(e.protect,function(a){c.content=c.content.replace(a,function(a){return"<\!--mce:protected "+escape(a)+"--\>"})})});e.convert_newlines_to_brs&&b.onBeforeSetContent.add(function(a,
b){if(b.initial)b.content=b.content.replace(/\r?\n/g,"<br />")});e.preformatted&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,"");b.content=b.content.replace(/<\/pre>\s*$/,"");if(b.set)b.content='<pre class="mceItemHidden">'+b.content+"</pre>"});e.verify_css_classes&&(b.serializer.attribValueFilter=function(c,e){var d,g;if(c=="class"){if(!b.classesRE){g=b.dom.getClasses();if(g.length>0){d="";a(g,function(a){d=d+((d?"|":"")+a["class"])});b.classesRE=RegExp("("+d+")",
"gi")}}return!b.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(e)||b.classesRE.test(e)?e:""}return e});e.cleanup_callback&&(b.onBeforeSetContent.add(function(a,c){c.content=b.execCallback("cleanup_callback","insert_to_editor",c.content,c)}),b.onPreProcess.add(function(a,c){c.set&&b.execCallback("cleanup_callback","insert_to_editor_dom",c.node,c);c.get&&b.execCallback("cleanup_callback","get_from_editor_dom",c.node,c)}),b.onPostProcess.add(function(a,c){if(c.set)c.content=b.execCallback("cleanup_callback",
"insert_to_editor",c.content,c);if(c.get)c.content=b.execCallback("cleanup_callback","get_from_editor",c.content,c)}));e.save_callback&&b.onGetContent.add(function(a,c){if(c.save)c.content=b.execCallback("save_callback",b.id,c.content,b.getBody())});e.handle_event_callback&&b.onEvent.add(function(a,c,e){b.execCallback("handle_event_callback",c,a,e)===false&&k.cancel(c)});b.onSetContent.add(function(){b.addVisual(b.getBody())});e.padd_empty_editor&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,
"")});if(l){var h=function(b){a(b.dom.select("a"),function(a){var c=a.parentNode;b.dom.isBlock(c)&&c.lastChild===a&&b.dom.add(c,"br",{"data-mce-bogus":1})})};b.onExecCommand.add(function(a,b){b==="CreateLink"&&h(a)});b.onSetContent.add(b.selection.onSetContent.add(h))}b.load({initial:!0,format:"html"});b.startContent=b.getContent({format:"raw"});b.undoManager.add();b.initialized=!0;AJS.log("Editor:setupIframe: dispatch onInit");b.onInit.dispatch(b);AJS.log("Editor:setupIframe: Callback setupcontent_callback");
b.execCallback("setupcontent_callback",b.id,b.getBody(),b.getDoc());AJS.log("Editor:setupIframe: Completed setupcontent_callback");AJS.log("Editor:setupIframe: Callback init_instance_callback");b.execCallback("init_instance_callback",b);AJS.log("Editor:setupIframe: Completed init_instance_callback");b.focus(!0);b.nodeChanged({initial:1});a(b.contentCSS,function(a){b.dom.loadCSS(a)});e.auto_focus&&setTimeout(function(){var a=c.get(e.auto_focus);a.selection.select(a.getBody(),1);a.selection.collapse(1);
a.getBody().focus();a.getWin().focus()},100)},setupContentEditable:function(){var b=this,e=b.settings,g=b.getElement();b.contentDocument=e.content_document||document;b.contentWindow=e.content_window||window;b.bodyElement=g;e.content_document=e.content_window=null;i.hide(g);g.contentEditable=b.getParam("content_editable_state",!0);i.show(g);e.gecko_spellcheck||(b.getDoc().body.spellcheck=0);b.dom=new c.dom.DOMUtils(b.getDoc(),{keep_values:!0,url_converter:b.convertURL,url_converter_scope:b,hex_colors:e.force_hex_style_colors,
class_filter:e.class_filter,root_element:b.id,fix_ie_paragraphs:1,update_styles:1});b.serializer=new c.dom.Serializer(e,b.dom,schema);b.selection=new c.dom.Selection(b.dom,b.getWin(),b.serializer);b.forceBlocks=new c.ForceBlocks(b,{forced_root_block:e.forced_root_block});b.editorCommands=new c.EditorCommands(b);b.serializer.onPreProcess.add(function(a,c){return b.onPreProcess.dispatch(b,c,a)});b.serializer.onPostProcess.add(function(a,c){return b.onPostProcess.dispatch(b,c,a)});b.onPreInit.dispatch(b);
b._addEvents();b.controlManager.onPostRender.dispatch(b,b.controlManager);b.onPostRender.dispatch(b);b.onSetContent.add(function(){b.addVisual(b.getBody())});b.startContent=b.getContent({format:"raw"});b.undoManager.add({initial:!0});b.initialized=!0;b.onInit.dispatch(b);b.focus(!0);b.nodeChanged({initial:1});e.content_css&&a(n(e.content_css),function(a){b.dom.loadCSS(b.documentBaseURI.toAbsolute(a))});d&&(b.dom.bind(b.getElement(),"beforedeactivate",function(){b.lastSelectionBookmark=b.selection.getBookmark(1)}),
b.onBeforeExecCommand.add(function(a,b,c,e,d){if(!i.getParent(a.selection.getStart(),function(b){return b==a.getBody()}))d.terminate=1;if(!i.getParent(a.selection.getEnd(),function(b){return b==a.getBody()}))d.terminate=1}));g=null},focus:function(a){var b,e=this.selection,d=this.settings.content_editable,g,h=this.getDoc(),f,k;if(!a){a=e.getRng();a.item&&(g=a.item(0));this._refreshContentEditable();if(!d)if(c.isIE)try{f=this.getWin(),k=i.getViewPort(f),this.dom.getRoot().focus(),f.scrollTo(k.x,k.y)}catch(l){}else this.getWin().focus();
c.isGecko&&this.getBody().focus();g&&g.ownerDocument==h&&(a=h.body.createControlRange(),a.addElement(g),a.select());d&&(c.isWebKit?this.getWin().focus():c.isIE?this.getElement().setActive():this.getElement().focus())}c.activeEditor!=this&&(null!=(b=c.activeEditor)&&b.onDeactivate.dispatch(b,this),this.onActivate.dispatch(this,b));c._setActive(this)},execCallback:function(a){var b=this.settings[a],e;if(b){if(this.callbackLookup&&(e=this.callbackLookup[a]))b=e.func,e=e.scope;h(b,"string")&&(e=(e=b.replace(/\.\w+$/,
""))?c.resolve(e):0,b=c.resolve(b),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:b,scope:e});return b.apply(e||this,Array.prototype.slice.call(arguments,1))}},translate:function(a){var b=this.settings.language||"en",e=c.i18n;return!a?"":e[b+"."+a]||a.replace(/{\#([^}]+)\}/g,function(a,c){return e[b+"."+c]||"{#"+c+"}"})},getLang:function(a,b){return c.i18n[(this.settings.language||"en")+"."+a]||(h(b)?b:"{#"+a+"}")},getParam:function(b,e,d){var g=c.trim,b=h(this.settings[b])?
this.settings[b]:e,f;return"hash"===d?(f={},h(b,"string")?a(0<b.indexOf("=")?b.split(/[;,](?![^=;,]*(?:[;,]|$))/):b.split(","),function(a){a=a.split("=");1<a.length?f[g(a[0])]=g(a[1]):f[g(a[0])]=g(a)}):f=b,f):b},nodeChanged:function(a){var b=this.selection,c=b.getStart()||this.getBody();this.initialized&&(a=a||{},c=d&&c.ownerDocument!=this.getDoc()?this.getBody():c,a.parents=[],this.dom.getParent(c,function(b){if("BODY"==b.nodeName)return!0;a.parents.push(b)}),this.onNodeChange.dispatch(this,a?a.controlManager||
this.controlManager:this.controlManager,c,b.isCollapsed(),a))},addButton:function(a,b){this.buttons=this.buttons||{};this.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(b,c,e,d){var g=this,f;if(!g.settings.custom_shortcuts)return!1;g.shortcuts=g.shortcuts||{};h(e,"string")&&
(f=e,e=function(){g.execCommand(f,!1,null)});h(e,"object")&&(f=e,e=function(){g.execCommand(f[0],f[1],f[2])});a(n(b),function(b){var j={func:e,scope:d||this,desc:c,alt:false,ctrl:false,shift:false};a(n(b,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":j[a]=true;break;default:j.charCode=a.charCodeAt(0);j.keyCode=a.toUpperCase().charCodeAt(0)}});g.shortcuts[(j.ctrl?"ctrl":"")+","+(j.alt?"alt":"")+","+(j.shift?"shift":"")+","+j.keyCode]=j});return!0},execCommand:function(b,c,e,d){var g=
this,h=0,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(b)&&(!d||!d.skip_focus)&&g.focus();d=f({},d);g.onBeforeExecCommand.dispatch(g,b,c,e,d);if(d.terminate)return!1;if(g.execCallback("execcommand_callback",g.id,g.selection.getNode(),b,c,e))return g.onExecCommand.dispatch(g,b,c,e,d),!0;if(i=g.execCommands[b])if(i=i.func.call(i.scope,c,e),!0!==i)return g.onExecCommand.dispatch(g,b,c,e,d),i;a(g.plugins,function(a){if(a.execCommand&&a.execCommand(b,c,e))return g.onExecCommand.dispatch(g,
b,c,e,d),h=1,!1});if(h)return!0;if(g.theme&&g.theme.execCommand&&g.theme.execCommand(b,c,e)||g.editorCommands.execCommand(b,c,e))return g.onExecCommand.dispatch(g,b,c,e,d),!0;g.getDoc().execCommand(b,c,e);g.onExecCommand.dispatch(g,b,c,e,d)},queryCommandState:function(a){var b;if(!this._isHidden()){if(b=this.queryStateCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandState(a);if(-1!==b)return b;try{return this.getDoc().queryCommandState(a)}catch(c){}}},queryCommandValue:function(a){var b;
if(!this._isHidden()){if(b=this.queryValueCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandValue(a);if(h(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(c){}}},show:function(){i.show(this.getContainer());i.hide(this.id);this.load()},hide:function(){var a=this.getDoc();d&&a&&a.execCommand("SelectAll");this.save();i.hide(this.getContainer());i.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!i.isHidden(this.id)},setProgressState:function(a,
b,c){this.onSetProgressState.dispatch(this,a,b,c);return a},load:function(a){var b=this.getElement(),c;if(b)return a=a||{},a.load=!0,c=this.setContent(h(b.value)?b.value:b.innerHTML,a),a.element=b,a.no_events||this.onLoadContent.dispatch(this,a),a.element=null,c},save:function(b){var c=this,e=c.getElement(),d,g;if(e&&c.initialized){b=b||{};b.save=!0;try{b.no_events||(c.undoManager.typing=!1,c.undoManager.add())}catch(h){AJS.logError("editor.save() : "+h)}b.element=e;d=b.content=c.getContent(b);b.no_events||
c.onSaveContent.dispatch(c,b);d=b.content;/TEXTAREA|INPUT/i.test(e.nodeName)?e.value=d:(e.innerHTML=d,(g=i.getParent(c.id,"form"))&&a(g.elements,function(a){if(a.name==c.id)return a.value=d,!1}));b.element=e=null;return d}},setContent:function(a,b){var e=this.getBody(),d,b=b||{};b.format=b.format||"html";b.set=!0;b.content=a;b.no_events||this.onBeforeSetContent.dispatch(this,b);a=b.content;if(!c.isIE&&(0===a.length||/^\s+$/.test(a)))a=(d=this.settings.forced_root_block)?"<"+d+'><br data-mce-bogus="1"></'+
d+">":'<br data-mce-bogus="1">',e.innerHTML=a,this.selection.select(e,!0),this.selection.collapse(!0);"raw"!==b.format&&(a=(new c.html.Serializer({},this.schema)).serialize(this.parser.parse(a)));b.content=c.trim(a);this.dom.setHTML(e,b.content);b.no_events||this.onSetContent.dispatch(this,b);this.selection.normalize();return b.content},getContent:function(a){var b,a=a||{};a.format=a.format||"html";a.get=!0;a.no_events||this.onBeforeGetContent.dispatch(this,a);b="raw"==a.format?this.getBody().innerHTML:
this.serializer.serialize(this.getBody(),a);a.content=c.trim(b);a.no_events||this.onGetContent.dispatch(this,a);return a.content},isDirty:function(){return c.trim(this.startContent)!=c.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},setDirty:function(a){this.isNotDirty=a?0:1},getContainer:function(){this.container||(this.container=i.get(this.editorContainer||this.id+"_parent"));return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return i.get(this.settings.content_element||
this.id)},getWin:function(){var a;if(!this.contentWindow&&(a=i.get(this.id+"_ifr")))this.contentWindow=a.contentWindow;return this.contentWindow},getDoc:function(){var a;if(!this.contentDocument&&(a=this.getWin()))this.contentDocument=a.document;return this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var e=this.settings;return e.urlconverter_callback?this.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&"LINK"==c.nodeName||
0===a.indexOf("file:")?a:e.relative_urls?this.documentBaseURI.toRelative(a):a=this.documentBaseURI.toAbsolute(a,e.remove_script_host)},addVisual:function(b){var c=this,e=c.settings,b=b||c.getBody();h(c.hasVisual)||(c.hasVisual=e.visual);a(c.dom.select("table,a",b),function(a){var b;switch(a.nodeName){case "TABLE":b=c.dom.getAttrib(a,"border");if(!b||b=="0")c.hasVisual?c.dom.addClass(a,e.visual_table_class):c.dom.removeClass(a,e.visual_table_class);break;case "A":(b=c.dom.getAttrib(a,"name"))&&(c.hasVisual?
c.dom.addClass(a,"mceItemAnchor"):c.dom.removeClass(a,"mceItemAnchor"))}});c.onVisualAid.dispatch(c,b,c.hasVisual)},remove:function(){var a=this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];c.remove(this);i.remove(a)},destroy:function(a){this.destroyed||(a||(c.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),this.theme&&this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),
this.selection.destroy(),this.dom.destroy(),this.settings.content_editable||(k.clear(this.getWin()),k.clear(this.getDoc())),k.clear(this.getBody()),k.clear(this.formElement)),this.formElement&&(this.formElement.submit=this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null),this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null,this.selection&&(this.selection=this.selection.win=this.selection.dom=
this.selection.dom.doc=null),this.destroyed=1)},_addEvents:function(){function b(a,c){e.removed||!1!==e.onEvent.dispatch(e,a,c)&&e[h[a.fakeType||a.type]].dispatch(e,a,c)}var e=this,d=e.settings,g=e.dom,h={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};a(h,function(a,c){switch(c){case "contextmenu":g.bind(e.getDoc(),c,b);break;case "paste":g.bind(e.getBody(),
c,function(a){b(a)});break;case "submit":case "reset":g.bind(e.getElement().form||i.getParent(e.id,"form"),c,b);break;default:g.bind(d.content_editable?e.getBody():e.getDoc(),c,b)}});g.bind(d.content_editable?e.getBody():l?e.getDoc():e.getWin(),"focus",function(){e.focus(!0)});if(d.content_editable&&c.isOpera){var f=function(){e.focus(!0)};g.bind(e.getBody(),"click",f);g.bind(e.getBody(),"keydown",f)}c.isGecko&&g.bind(e.getDoc(),"DOMNodeInserted",function(a){var b,a=a.target;if(1===a.nodeType&&"IMG"===
a.nodeName&&(b=a.getAttribute("data-mce-src")))a.src=e.documentBaseURI.toAbsolute(b)});l&&(f=function(){var a=this.getDoc(),b=this.settings;if(l&&!b.readonly){this._refreshContentEditable();try{a.execCommand("styleWithCSS",0,!1)}catch(c){if(!this._isHidden())try{a.execCommand("useCSS",0,!0)}catch(e){}}if(!b.table_inline_editing)try{a.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!b.object_resizing)try{a.execCommand("enableObjectResizing",!1,!1)}catch(g){}}},e.onBeforeExecCommand.add(f),
e.onMouseDown.add(f));e.onMouseUp.add(e.nodeChanged);e.onKeyUp.add(function(a,b){var d=b.keyCode;(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45||d==46||d==8||c.isMac&&(d==91||d==93)||b.ctrlKey)&&e.nodeChanged()});e.onKeyDown.add(function(a,b){if(b.keyCode==r.BACKSPACE){var c=a.selection.getRng(true);if(c.collapsed){for(var e=c.startContainer,d=c.startOffset;e&&e.nodeType&&e.nodeType!=1&&e.parentNode;)e=e.parentNode;if(e&&e.parentNode&&e.parentNode.tagName==="BLOCKQUOTE"&&e.parentNode.firstChild==e&&d===
0){a.formatter.toggle("blockquote",null,e.parentNode);c.setStart(e,0);c.setEnd(e,0);a.selection.setRng(c);a.selection.collapse(false)}}}});e.onReset.add(function(){e.setContent(e.startContent,{format:"raw"})});if(d.custom_shortcuts){d.custom_undo_redo_keyboard_shortcuts&&(e.addShortcut("ctrl+z",e.getLang("undo_desc"),"Undo"),e.addShortcut("ctrl+y",e.getLang("redo_desc"),"Redo"));e.addShortcut("ctrl+b",e.getLang("bold_desc"),"Bold");e.addShortcut("ctrl+i",e.getLang("italic_desc"),"Italic");e.addShortcut("ctrl+u",
e.getLang("underline_desc"),"Underline");var n=function(b){var d=null;if(!b.altKey&&!b.ctrlKey&&!b.metaKey)return d;a(e.shortcuts,function(a){if(!(c.isMac&&a.ctrl!=b.metaKey)&&(c.isMac||a.ctrl==b.ctrlKey)&&a.alt==b.altKey&&a.shift==b.shiftKey)if(b.keyCode==a.keyCode||b.charCode&&b.charCode==a.charCode){d=a;return false}});return d};e.onKeyUp.add(function(a,b){if(n(b))return k.cancel(b)});e.onKeyPress.add(function(a,b){if(n(b))return k.cancel(b)});e.onKeyDown.add(function(a,b){var c=n(b);if(c){c.func.call(c.scope);
return k.cancel(b)}})}c.isIE&&g.bind(e.getDoc(),"controlselect",function(a){var b=e.resizeInfo,a=a.target;if(a.nodeName==="IMG"){b&&g.unbind(b.node,b.ev,b.cb);if(g.hasClass(a,"mceItemNoResize")){ev="resizestart";b=g.bind(a,"resizestart",k.cancel,k)}else{ev="resizeend";b=g.bind(a,ev,function(a){var b,a=a.target;if(b=g.getStyle(a,"width")){g.setAttrib(a,"width",b.replace(/[^0-9%]+/g,""));g.setStyle(a,"width","")}if(b=g.getStyle(a,"height")){g.setAttrib(a,"height",b.replace(/[^0-9%]+/g,""));g.setStyle(a,
"height","")}})}b=e.resizeInfo={node:a,ev:ev,cb:b}}});c.isOpera&&e.onClick.add(function(a,b){k.prevent(b)});if(d.custom_undo_redo){var x=function(){e.undoManager.typing=false;e.undoManager.add()},f=c.isGecko?"blur":"focusout";g.bind(e.getDoc(),f,function(){!e.removed&&e.undoManager.typing&&x()});e.dom.bind(e.dom.getRoot(),"dragend",function(){x()});e.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&x()});e.onKeyDown.add(function(a,b){var d=b.keyCode,
g;if(d==8)if((g=e.getDoc().selection)&&g.createRange&&g.createRange().item){e.undoManager.beforeChange();a.dom.remove(g.createRange().item(0));x();return k.cancel(b)}if(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45){c.isIE&&d==13&&e.undoManager.beforeChange();e.undoManager.typing&&x()}else if((d<16||d>20)&&d!=224&&d!=91&&!e.undoManager.typing){e.undoManager.beforeChange();e.undoManager.typing=true;e.undoManager.add()}});e.onMouseDown.add(function(){e.undoManager.typing&&x()})}if(c.isGecko){var y=function(){var b=
e.dom.getAttribs(e.selection.getStart().cloneNode(false));return function(){var c=e.selection.getStart();if(c!==e.getBody()){e.dom.setAttrib(c,"style",null);a(b,function(a){c.setAttributeNode(a.cloneNode(true))})}}},v=function(){var a=e.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()};e.onKeyPress.add(function(a,b){var c;if((b.keyCode==8||b.keyCode==46)&&v()){c=y();e.getDoc().execCommand("delete",false,null);c();return k.cancel(b)}});e.dom.bind(e.getDoc(),"cut",function(){var a;if(v()){a=
y();e.onKeyUp.addToTop(k.cancel,k);setTimeout(function(){a();e.onKeyUp.remove(k.cancel,k)},0)}})}},_refreshContentEditable:function(){var a,b;this._isHidden()&&(a=this.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;if(!l)return 0;a=this.selection.getSel();return!a||!a.rangeCount||0==a.rangeCount}})})(tinymce);
(function(c){var i=c.each,k=!0,f=!1;c.EditorCommands=function(b){function a(a,b,c){var e,a=a.toLowerCase();return(e=r.exec[a])?(e(a,b,c),k):f}function l(a){var b,a=a.toLowerCase();return(b=r.state[a])?b(a):-1}function d(a,b){b=b||"exec";i(a,function(a,c){i(c.toLowerCase().split(","),function(c){r[b][c]=a})})}function h(a,c,e){void 0===c&&(c=f);void 0===e&&(e=null);return b.getDoc().execCommand(a,c,e)}function e(a,b){m.toggle(a,b?{value:b}:void 0)}var g=b.dom,n=b.selection,r={state:{},exec:{},value:{}},
j=b.settings,m=b.formatter,p;c.extend(this,{execCommand:a,queryCommandState:l,queryCommandValue:function(a){var b,a=a.toLowerCase();return(b=r.value[a])?b(a):f},addCommands:d});d({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){b.undoManager.add()},"Cut,Copy,Paste":function(a){var e=b.getDoc(),d;try{h(a)}catch(g){d=k}if(d||!e.queryCommandSupported(a))c.isGecko?b.windowManager.confirm(b.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html",
"_blank")}):b.windowManager.alert(b.getLang("clipboard_no_support"))},unlink:function(a){n.isCollapsed()&&n.select(n.getNode());h(a);n.collapse(f)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(c){var d=c.substring(7);b.undoManager.add();var g=n.getRng(),h=n.getNode();i(["left","center","right","full"],function(a){d!=a&&m.remove("align"+a);!tinyMCE.isIE&&("IMG"==h.nodeName&&("#document"==n.getRng().startContainer.nodeName||"#text"==n.getRng().startContainer.nodeName))&&n.setRng(g)});
e("align"+d);a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b;h(a);if(a=g.getParent(n.getNode(),"ol,ul"))b=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(b.nodeName)&&(p=n.getBookmark(void 0),g.split(b,a),n.moveToBookmark(p))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){e(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){e(a,c)},FontSize:function(a,b,d){var g;1<=d&&7>=d&&(g=c.explode(j.font_size_style_values),d=(b=c.explode(j.font_size_classes))?
b[d-1]||d:g[d-1]||d);e(a,d)},RemoveFormat:function(a){m.remove(a)},mceBlockQuote:function(){e("blockquote")},FormatBlock:function(a,b,c){return e(c||"p")},mceCleanup:function(){var a=n.getBookmark();b.setContent(b.getContent({cleanup:k}),{cleanup:k});n.moveToBookmark(a)},mceRemoveNode:function(a,c,e){a=e||n.getNode();a!=b.getBody()&&(p=n.getBookmark(void 0),b.dom.remove(a,k),n.moveToBookmark(p))},mceSelectNodeDepth:function(a,c,e){var d=0;g.getParent(n.getNode(),function(a){if(1==a.nodeType&&d++==
e)return n.select(a),f},b.getBody())},mceSelectNode:function(a,b,c){n.select(c)},mceInsertContent:function(a,e,d){var h,j,f,i,k;h=b.parser;j=new c.html.Serializer({},b.schema);a={content:d,format:"html"};n.onBeforeSetContent.dispatch(n,a);d=a.content;-1==d.indexOf("{$caret}")&&(d+="{$caret}");d=d.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">﻿</span>');!n.isCollapsed()&&n.getContent().length&&b.execCommand("mceDelete",!1,null,{skip_undo:!0});f=n.getNode();a={context:f.nodeName.toLowerCase()};
k=h.parse(d,a);e=k.lastChild;if("mce_marker"==e.attr("id")){d=e;for(e=e.prev;e;e=e.walk(!0))if(3==e.type||!g.isBlock(e.name)){e.parent.insert(d,e,"br"===e.name);break}}if(a.invalid){n.setContent('<span id="mce_marker" data-mce-type="bookmark">﻿</span>');f=b.selection.getNode();i=b.getBody();for(9==f.nodeType?f=e=i:e=f;e!==i;)f=e,e=e.parentNode;d=f==i?i.innerHTML:g.getOuterHTML(f);d=j.serialize(h.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return j.serialize(k)})));
f==i?g.setHTML(i,d):g.setOuterHTML(f,d)}else d=j.serialize(k),e=f.firstChild,h=f.lastChild,!e||e===h&&"BR"===e.nodeName?g.setHTML(f,d):n.setContent(d);d=g.get("mce_marker");e=g.getRect(d);f=g.getViewPort(b.getWin());if(e.y+e.h>f.y+f.h||e.y<f.y||e.x>f.x+f.w||e.x<f.x)h=c.isIE?b.getDoc().documentElement:b.getBody(),h.scrollLeft=e.x,h.scrollTop=e.y-f.h+25;f=g.createRng();(e=d.previousSibling)&&3==e.nodeType?f.setStart(e,e.nodeValue.length):(f.setStartBefore(d),f.setEndBefore(d));g.remove(d);n.setRng(f);
n.onSetContent.dispatch(n,a);b.addVisual()},mceInsertRawHTML:function(a,c,e){n.setContent("tiny_mce_marker");b.setContent(b.getContent().replace(/tiny_mce_marker/g,function(){return e}))},mceSetContent:function(a,c,e){b.setContent(e)},"Indent,Outdent":function(a){var b,c,e;b=j.indentation;c=/[a-z%]+$/i.exec(b);b=parseInt(b);!l("InsertUnorderedList")&&!l("InsertOrderedList")&&!l("InsertInlineTaskList")?i(n.getSelectedBlocks(),function(d){"outdent"==a?(e=Math.max(0,parseInt(d.style.paddingLeft||0)-
b),g.setStyle(d,"paddingLeft",e?e+c:"")):g.setStyle(d,"paddingLeft",parseInt(d.style.paddingLeft||0)+b+c)}):h(a)},mceRepaint:function(){if(c.isGecko)try{p=n.getBookmark(k),n.getSel()&&n.getSel().selectAllChildren(b.getBody()),n.collapse(k),n.moveToBookmark(p)}catch(a){}},mceToggleFormat:function(a,b,c){m.toggle(c)},InsertHorizontalRule:function(){b.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){b.hasVisual=!b.hasVisual;b.addVisual()},mceReplaceContent:function(a,c,e){b.execCommand("mceInsertContent",
!1,e.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(a,b,c){"string"==typeof c&&(c={href:c});a=g.getParent(n.getNode(),"a");c.href=c.href.replace(" ","%20");(!a||!c.href)&&m.remove("link");c.href&&m.apply("link",c,a)},selectAll:function(){var a=g.getRoot(),c=g.createRng();c.setStart(a,0);c.setEnd(a,a.childNodes.length);b.selection.setRng(c)}});d({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var b="align"+a.substring(7),a=n.isCollapsed()?[n.getNode()]:
n.getSelectedBlocks(),a=c.map(a,function(a){return!!m.matchNode(a,b)});return-1!==c.inArray(a,k)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return m.match(a)},mceBlockQuote:function(){return m.match("blockquote")},Outdent:function(){var a;return j.inline_styles&&((a=g.getParent(n.getStart(),g.isBlock))&&0<parseInt(a.style.paddingLeft)||(a=g.getParent(n.getEnd(),g.isBlock))&&0<parseInt(a.style.paddingLeft))?k:l("InsertUnorderedList")||l("InsertOrderedList")||l("InsertInlineTaskList")||
!j.inline_styles&&!!g.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList,InsertInlineTaskList":function(a){var b=g.getParent(n.getNode(),"ul,ol"),c;if(!b)return!1;c=b.tagName;return"OL"===c&&"insertorderedlist"===a||"UL"===c&&!g.hasClass(b,"inline-task-list")&&"insertunorderedlist"===a||"UL"===c&&g.hasClass(b,"inline-task-list")&&"insertinlinetasklist"===a}},"state");d({"FontSize,FontName":function(a){var b=0,c;if(c=g.getParent(n.getNode(),"span"))b="fontsize"==a?c.style.fontSize:
c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value");j.custom_undo_redo&&d({Undo:function(){b.undoManager.undo()},Redo:function(){b.undoManager.redo()}})}})(tinymce);
(function(c){var i=c.util.Dispatcher;c.UndoManager=function(k){var f,b=0,a=[],l;return f={typing:!1,onAdd:new i(f),onUndo:new i(f),onRedo:new i(f),beforeChange:function(){l=k.selection.getBookmark(2,!0)},add:function(d){var h;h=k.settings;var e,d=d||{};d.content=c.trim(k.getContent({format:"raw",no_events:1}));if((e=a[b])&&e.content==d.content)return null;a[b]&&(a[b].beforeBookmark=l);if(h.custom_undo_redo_levels&&a.length>h.custom_undo_redo_levels){for(h=0;h<a.length-1;h++)a[h]=a[h+1];a.length--;
b=a.length}d.bookmark=k.selection.getBookmark(2,!0);b<a.length-1&&(a.length=b+1);a.push(d);b=a.length-1;f.onAdd.dispatch(f,d);k.isNotDirty=0;return d},undo:function(){var c;f.typing&&(f.add(),f.typing=!1);0<b&&(c=a[--b],k.setContent(c.content,{format:"raw"}),k.selection.moveToBookmark(c.beforeBookmark),f.onUndo.dispatch(f,c));return c},redo:function(){var c;b<a.length-1&&(c=a[++b],k.setContent(c.content,{format:"raw"}),k.selection.moveToBookmark(c.bookmark),f.onRedo.dispatch(f,c));return c},clear:function(){a=
[];b=0;f.typing=!1},hasUndo:function(){return 0<b||this.typing},hasRedo:function(){return b<a.length-1&&!this.typing},ignore:function(b,c){var e=a.slice();b.call(c||k);a=e}}}})(tinymce);
(function(c){var i=c.dom.Event,k=c.isIE,f=c.isGecko,b=c.isOpera,a=c.each,l=!1;c.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=a.settings,c;this.editor=a;this.dom=a.dom;c=(b.forced_root_block||"p").toLowerCase();b.element=c.toUpperCase();a.onPreInit.add(this.setup,this)},setup:function(){var a=this,b=a.editor,e=b.settings,g=b.dom,l=b.selection,r=b.schema.getBlockElements();if(e.forced_root_block){var j=function(){var a=l.getStart(),c=g.getRoot(),d=b.getDoc().body,f,j,i,k,y,v;if(a&&1===
a.nodeType){for(;a!=c;)if(a&&1===a.nodeType){if(r[a.nodeName])return;a=a.parentNode}else return;f=l.getRng();if(f.setStart)j=f.startContainer,i=f.startOffset,k=f.endContainer,y=f.endOffset;else if(f.item&&(f=b.getDoc().body.createTextRange(),f.moveToElementText(f.item(0))),tmpRng=f.duplicate(),tmpRng.collapse(!0),i=-1*tmpRng.move("character",-16777215),!tmpRng.collapsed)tmpRng=f.duplicate(),tmpRng.collapse(!1),y=-1*tmpRng.move("character",-16777215)-i;for(a=c.firstChild;a;a)3===a.nodeType||1==a.nodeType&&
!r[a.nodeName]?(v||(v=g.create(e.forced_root_block),a.parentNode.insertBefore(v,a)),c=a,a=a.nextSibling,v.appendChild(c)):(v=null,a=a.nextSibling);if(f.setStart)f.setStart(j,i),f.setEnd(k,y),l.setRng(f);else try{f=d.createTextRange(),f.moveToElementText(d),f.move("character",-16777215),f.collapse(!0),f.moveStart("character",i),0<y&&f.moveEnd("character",y),f.select()}catch(u){}b.nodeChanged()}};b.onKeyUp.add(j);b.onKeyDown.add(j);b.onClick.add(j)}e.force_br_newlines&&k&&b.onKeyPress.add(function(a,
b){var c;if(13==b.keyCode&&"LI"!=l.getNode().nodeName)return l.setContent('<br id="__" /> ',{format:"raw"}),c=g.get("__"),c.removeAttribute("id"),l.select(c),l.collapse(),i.cancel(b)});e.force_p_newlines&&(k||b.onKeyPress.add(function(b,c){13==c.keyCode&&(!c.shiftKey&&!a.insertPara(c))&&i.cancel(c)}),f&&b.onKeyDown.add(function(b,c){(8==c.keyCode||46==c.keyCode)&&!c.shiftKey&&a.backspaceDelete(c,8==c.keyCode)}));c.isWebKit&&b.onKeyPress.add(function(a,b){if(b.keyCode==13&&(b.shiftKey||e.force_br_newlines&&
!g.getParent(l.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))){var c=l.getRng(),d,f=g.create("div",null," "),h=g.getViewPort(a.getWin());c.insertNode(d=g.create("br"));c.setStartAfter(d);c.setEndAfter(d);l.setRng(c);if(l.getSel().focusNode==d.previousSibling){l.select(g.insertAfter(g.doc.createTextNode(" "),d));l.collapse(true)}g.insertAfter(f,d);c=g.getPos(f).y;d=g.getSize(f).h;g.remove(f);f=c+d;f>h.y+h.h&&a.getWin().scrollTo(0,f-h.h);i.cancel(b)}});k&&"P"!=e.element&&(b.onKeyPress.add(function(){a.lastElm=
l.getNode().nodeName}),b.onKeyUp.add(function(b,c){var f;f=l.getNode();if(b.getBody().childNodes.length===1&&f.nodeName=="P"){f=g.rename(f,e.element);l.select(f);l.collapse();b.nodeChanged()}else if(c.keyCode==13&&!c.shiftKey&&a.lastElm!="P")if(f=g.getParent(f,"p")){g.rename(f,e.element);b.nodeChanged()}}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(){function d(a,c){var d=[],g,f;a.innerHTML="";if(i.keep_styles){f=c;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(f.nodeName)&&
(g=f.cloneNode(l),e.setAttrib(g,"id",""),d.push(g));while(f=f.parentNode)}if(0<d.length){f=d.length-1;for(g=a;0<=f;f--)g=g.appendChild(d[f]);d[0].innerHTML=b?" ":"<br />";return d[0]}a.innerHTML=b?" ":"<br />"}var f=this.editor,e=f.dom,g=f.getDoc(),i=f.settings,k=f.selection.getSel(),j=k.getRangeAt(0),m=g.body,p,o,t,q,B,x,y,v,u,z,s,A=e.getViewPort(f.getWin());f.undoManager.beforeChange();p=g.createRange();p.setStart(k.anchorNode,k.anchorOffset);p.collapse(!0);o=g.createRange();o.setStart(k.focusNode,
k.focusOffset);o.collapse(!0);q=(t=0>p.compareBoundaryPoints(p.START_TO_END,o))?k.anchorNode:k.focusNode;B=t?k.anchorOffset:k.focusOffset;x=t?k.focusNode:k.anchorNode;k=t?k.focusOffset:k.anchorOffset;if(c.isWebKit&&q===x&&1===q.nodeType&&0<q.childNodes.length&&f.dom.is(u=q.childNodes[0<B?B-1:0],"table"))return g=e.create("p",0,'<br data-mce-bogus="1" />'),e.insertAfter(g,u),j.setStart(g,0),f.selection.setRng(j),g=f.dom.getPos(g).y,g>A.y&&f.getWin().scrollTo(0,g),f.undoManager.add(),l;if(q===x&&/^(TD|TH)$/.test(q.nodeName)){"BR"==
q.firstChild.nodeName&&e.remove(q.firstChild);if(0==q.childNodes.length)f.dom.add(q,i.element,null,"<br />"),v=f.dom.add(q,i.element,null,"<br />");else{var E=!1;a(q.childNodes,function(a){if(f.dom.isBlock(a))return E=!0,!1});E?(j=f.selection.getRng(),j.insertNode(f.dom.create(i.element,null,"<br />"))):(s=q.innerHTML,q.innerHTML="",f.dom.add(q,i.element,null,s),v=f.dom.add(q,i.element,null,"<br />"))}v&&(j=g.createRange(),j.selectNodeContents(v),j.collapse(1),f.selection.setRng(j));return l}q==m&&
(x==m&&m.firstChild&&f.dom.isBlock(m.firstChild))&&(q=x=q.firstChild,B=k=0,p=g.createRange(),p.setStart(q,0),o=g.createRange(),o.setStart(x,0));g.body.hasChildNodes()||g.body.appendChild(e.create("br"));q="HTML"==q.nodeName?g.body:q;q="BODY"==q.nodeName?q.firstChild:q;x="HTML"==x.nodeName?g.body:x;x="BODY"==x.nodeName?x.firstChild:x;v=f.dom.getRoot();q===v&&(q=q.firstChild,B=0);x===v&&(x=x.firstChild,k=0);y=this.getParentBlock(q);v=this.getParentBlock(x);u=y?y.nodeName:i.element;if(s=this.dom.getParent(y,
"li,pre"))return"LI"==s.nodeName?(A=f.selection,g=this.dom,m=s,g.isEmpty(m)?(p=g.getParent(m,"ul,ol"),g.getParent(p.parentNode,"ul,ol")||(g.split(p,m),p=g.create("p",0,'<br data-mce-bogus="1" />'),g.replace(p,m),A.select(p,1)),AJS.Rte.showSelection(),A=l):A=!0,A):!0;if(y&&("CAPTION"==y.nodeName||/absolute|relative|fixed/gi.test(e.getStyle(y,"position",1))))u=i.element,y=null;if(v&&("CAPTION"==v.nodeName||/absolute|relative|fixed/gi.test(e.getStyle(y,"position",1))))u=i.element,v=null;if(/(TD|TABLE|TH|CAPTION)/.test(u)||
y&&"DIV"==u&&/left|right/gi.test(e.getStyle(y,"float",1)))u=i.element,y=v=null;t=y&&y.nodeName==u?y.cloneNode(0):f.dom.create(u);v=v&&v.nodeName==u?v.cloneNode(0):f.dom.create(u);v.removeAttribute("id");if(s=/^(H[1-6])$/.test(u))s=y,y=s.ownerDocument.createRange(),y.setStart(j.endContainer,j.endOffset),y.setEndAfter(s),s=0==y.cloneContents().textContent.length;s&&(v=f.dom.create(i.element));s=y=q;do{if(s==m||9==s.nodeType||this.dom.isBlock(s)||/(TD|TABLE|TH|CAPTION)/.test(s.nodeName))break;y=s}while(s=
s.previousSibling?s.previousSibling:s.parentNode);s=z=x;do{if(s==m||9==s.nodeType||this.dom.isBlock(s)||/(TD|TABLE|TH|CAPTION)/.test(s.nodeName))break;z=s}while(s=s.nextSibling?s.nextSibling:s.parentNode);y.nodeName==u?p.setStart(y,0):p.setStartBefore(y);p.setEnd(q,B);t.appendChild(p.cloneContents()||g.createTextNode(""));try{o.setEndAfter(z)}catch(I){}o.setStart(x,k);v.appendChild(o.cloneContents()||g.createTextNode(""));j=g.createRange();!y.previousSibling&&y.parentNode.nodeName==u?j.setStartBefore(y.parentNode):
p.startContainer.nodeName==u&&0==p.startOffset?j.setStartBefore(p.startContainer):j.setStart(p.startContainer,p.startOffset);!z.nextSibling&&z.parentNode.nodeName==u?j.setEndAfter(z.parentNode):j.setEnd(o.endContainer,o.endOffset);j.deleteContents();b&&f.getWin().scrollTo(0,A.y);t.firstChild&&t.firstChild.nodeName==u&&(t.innerHTML=t.firstChild.innerHTML);v.firstChild&&v.firstChild.nodeName==u&&(v.innerHTML=v.firstChild.innerHTML);e.isEmpty(t)&&d(t,q);e.isEmpty(v)&&d(v,x);this.dom.removeClass(v,"auto-cursor-target");
b&&9.5>parseFloat(opera.version())?(j.insertNode(t),j.insertNode(v)):(j.insertNode(v),j.insertNode(t));v.normalize();t.normalize();f.selection.select(v,!0);f.selection.collapse(!0);g=f.dom.getPos(v).y;if(g<A.y||g+25>A.y+A.h)f.getWin().scrollTo(0,g<A.y?g:g-A.h+25);f.undoManager.add();return l},backspaceDelete:function(a,b){var e=this.editor,g=e.getBody(),f,k=e.selection,j=k.getRng(),m=j.startContainer,p;if(!(a.getPreventDefault?a.getPreventDefault():a.defaultPrevented)){if(!b&&j.collapsed&&1==m.nodeType&&
j.startOffset==m.childNodes.length){p=new c.dom.TreeWalker(m.lastChild,m);for(f=m.lastChild;f;f=p.prev())if(3==f.nodeType){j.setStart(f,f.nodeValue.length);j.collapse(!0);k.setRng(j);return}}if(m&&(e.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&b)&&(0==m.childNodes.length||1==m.childNodes.length&&"BR"==m.firstChild.nodeName)){for(f=m;(f=f.previousSibling)&&!e.dom.isBlock(f););if(f){if(m!=g.firstChild){for(g=e.dom.doc.createTreeWalker(f,NodeFilter.SHOW_TEXT,null,l);j=g.nextNode();)f=j;j=e.getDoc().createRange();
j.setStart(f,f.nodeValue?f.nodeValue.length:0);j.setEnd(f,f.nodeValue?f.nodeValue.length:0);k.setRng(j);e.dom.remove(m)}return i.cancel(a)}}if(!b&&j.collapsed&&/^(BODY)$/.test(m.nodeName)&&(m=m.childNodes[j.startOffset])&&(e.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName))&&(0==m.childNodes.length||1==m.childNodes.length&&"BR"==m.firstChild.nodeName)){f=m;for(var o;f=f.nextSibling;)if(e.dom.isBlock(f)){o=f;break}if(o&&m!=g.lastChild)return g=e.dom.doc.createTreeWalker(o,NodeFilter.SHOW_TEXT,null,l),
o=g.nextNode(),j=e.getDoc().createRange(),j.setStart(o,0),j.setEnd(o,0),k.setRng(j),e.dom.remove(m),i.cancel(a)}}}})})(tinymce);
(function(c){var i=c.dom.Event,k=c.each,f=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(b,a){var f=this,a=a||{};f.editor=b;f.controls={};f.onAdd=new c.util.Dispatcher(f);f.onPostRender=new c.util.Dispatcher(f);f.prefix=a.prefix||b.id+"_";f._cls={};f.onPostRender.add(function(){k(f.controls,function(a){a.postRender()})})},get:function(b){return this.controls[this.prefix+b]||this.controls[b]},setActive:function(b,a){var c=null;(c=this.get(b))&&c.setActive(a);return c},setDisabled:function(b,
a){var c=null;(c=this.get(b))&&c.setDisabled(a);return c},add:function(b){b&&(this.controls[b.id]=b,this.onAdd.dispatch(b,this));return b},createControl:function(b){var a,c=this,d=c.editor;k(d.plugins,function(d){if(d.createControl&&(a=d.createControl(b,c)))return!1});switch(b){case "|":case "separator":return c.createSeparator()}return!a&&d.buttons&&(a=d.buttons[b])?c.createButton(b,a):c.add(a)},createDropMenu:function(b,a,i){var d=this.editor,h,e,g,a=f({"class":"mceDropDown",constrain:d.settings.constrain_menus},
a);a["class"]=a["class"]+" "+d.getParam("skin")+"Skin";if(g=d.getParam("skin_variant"))a["class"]+=" "+d.getParam("skin")+"Skin"+g.substring(0,1).toUpperCase()+g.substring(1);b=this.prefix+b;h=this.controls[b]=new (i||this._cls.dropmenu||c.ui.DropMenu)(b,a);h.onAddItem.add(function(a,b){var c=b.settings;c.title=d.getLang(c.title,c.title);c.onclick||(c.onclick=function(){c.cmd&&d.execCommand(c.cmd,c.ui||!1,c.value)})});d.onRemove.add(function(){h.destroy()});c.isIE&&(h.onShowMenu.add(function(){d.focus();
e=d.selection.getBookmark(1)}),h.onHideMenu.add(function(){e&&(d.selection.moveToBookmark(e),e=0)}));return this.add(h)},createListBox:function(b,a,k){var d=this.editor;if(this.get(b))return null;a.title=d.translate(a.title);a.scope=a.scope||d;a.onselect||(a.onselect=function(b){d.execCommand(a.cmd,a.ui||!1,b||a.value)});a=f({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;d.settings.use_native_selects||d.settings.use_accessible_selects&&!c.isGecko?k=new c.ui.NativeListBox(b,
a):(k=k||this._cls.listbox||c.ui.ListBox,k=new k(b,a,d));this.controls[b]=k;c.isWebKit&&k.onPostRender.add(function(a,b){i.add(b,"mousedown",function(){d.bookmark=d.selection.getBookmark(1)});i.add(b,"focus",function(){d.selection.moveToBookmark(d.bookmark);d.bookmark=null})});k.hideMenu&&d.onMouseDown.add(k.hideMenu,k);return this.add(k)},createButton:function(b,a,i){var d=this.editor;if(this.get(b))return null;a.title=d.translate(a.title);a.label=d.translate(a.label);a.scope=a.scope||d;!a.onclick&&
!a.menu_button&&(a.onclick=function(){d.execCommand(a.cmd,a.ui||!1,a.value)});a=f({title:a.title,"class":"mce_"+b,unavailable_prefix:d.getLang("unavailable",""),scope:a.scope,control_manager:this},a);b=this.prefix+b;a.menu_button?(i=i||this._cls.menubutton||c.ui.MenuButton,b=new i(b,a,d),d.onMouseDown.add(b.hideMenu,b)):(i=this._cls.button||c.ui.Button,b=new i(b,a,d));return this.add(b)},createMenuButton:function(b,a,c){a=a||{};a.menu_button=1;return this.createButton(b,a,c)},createSplitButton:function(b,
a,i){var d=this.editor;if(this.get(b))return null;a.title=d.translate(a.title);a.scope=a.scope||d;a.onclick||(a.onclick=function(b){d.execCommand(a.cmd,a.ui||!1,b||a.value)});a.onselect||(a.onselect=function(b){d.execCommand(a.cmd,a.ui||false,b||a.value)});a=f({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;b=this.add(new (i||this._cls.splitbutton||c.ui.SplitButton)(b,a,d));d.onMouseDown.add(b.hideMenu,b);return b},createColorSplitButton:function(b,a,i){var d=
this.editor,h,e;if(this.get(b))return null;a.title=d.translate(a.title);a.scope=a.scope||d;a.onclick||(a.onclick=function(b){c.isIE&&(e=d.selection.getBookmark(1));d.execCommand(a.cmd,a.ui||!1,b||a.value)});a.onselect||(a.onselect=function(b){d.execCommand(a.cmd,a.ui||false,b||a.value)});a=f({title:a.title,"class":"mce_"+b,menu_class:d.getParam("skin")+"Skin",scope:a.scope,more_colors_title:d.getLang("more_colors")},a);b=this.prefix+b;h=new (i||this._cls.colorsplitbutton||c.ui.ColorSplitButton)(b,
a,d);d.onMouseDown.add(h.hideMenu,h);d.onRemove.add(function(){h.destroy()});c.isIE&&(h.onShowMenu.add(function(){d.focus();e=d.selection.getBookmark(1)}),h.onHideMenu.add(function(){if(e){d.selection.moveToBookmark(e);e=0}}));return this.add(h)},createToolbar:function(b,a,f){b=this.prefix+b;a=new (f||this._cls.toolbar||c.ui.Toolbar)(b,a,this.editor);return this.get(b)?null:this.add(a)},createToolbarGroup:function(b,a,f){b=this.prefix+b;a=new (f||this._cls.toolbarGroup||c.ui.ToolbarGroup)(b,a,this.editor);
return this.get(b)?null:this.add(a)},createSeparator:function(b){return new (b||this._cls.separator||c.ui.Separator)},setControlType:function(b,a){return this._cls[b.toLowerCase()]=a},destroy:function(){k(this.controls,function(b){b.destroy()});this.controls=null}})})(tinymce);
(function(c){var i=c.util.Dispatcher,k=c.each,f=c.isIE,b=c.isOpera;c.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new i(this);this.onClose=new i(this);this.params={};this.features={}},open:function(a,i){var d="",h="modal"==this.editor.settings.dialog_type,e,g,n;n=c.DOM.getViewPort();a=a||{};i=i||{};g=b?n.w:screen.width;n=b?n.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=!0;
a.left=a.left||parseInt(g/2)-a.width/2;a.top=a.top||parseInt(n/2)-a.height/2;i.inline=!1;i.mce_width=a.width;i.mce_height=a.height;i.mce_auto_focus=a.auto_focus;h&&f&&(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1);k(a,function(a,b){c.is(a,"boolean")&&(a=a?"yes":"no");/^(name|url)$/.test(b)||(d=f&&h?d+((d?";":"")+b+":"+a):d+((d?",":"")+b+"="+a))});this.features=a;this.params=i;this.onOpen.dispatch(this,a,i);g=a.url||a.file;g=c._addVer(g);try{f&&
h?(e=1,window.showModalDialog(g,window,d)):e=window.open(g,a.name,d)}catch(r){}e||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,b,d,f,e,g){return new (c.resolve(a))(b,d,f,e,g)},confirm:function(a,b,c,f){f=f||window;b.call(c||this,f.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,f){f=f||window;f.alert(this._decode(this.editor.getLang(a,a)));b&&b.call(c||this)},resizeBy:function(a,b,c){c.resizeBy(a,
b)},_decode:function(a){return c.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
(function(c){c.Formatter=function(i){function k(a){return 1===a.nodeType&&"_mce_caret"===a.id}function f(a){return a?u[a]:u}function b(a,c){a&&("string"!==typeof a?z(a,function(a,c){b(c,a)}):(c=c.length?c:[c],z(c,function(a){a.deep===N&&(a.deep=!a.selector);a.split===N&&(a.split=!a.selector||a.inline);a.remove===N&&(a.selector&&!a.inline)&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"===typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),u[a]=c))}function a(a,
b,h){function l(a,c){c=c||u;if(a){if(c.onformat)c.onformat(a,c,b,h);z(c.styles,function(c,e){s.setStyle(a,e,r(c,b))});z(c.attributes,function(c,e){s.setAttrib(a,e,r(c,b))});z(c.classes,function(c){c=r(c,b);s.hasClass(a,c)||s.addClass(a,c)})}}function m(){var a=i.selection.getRng(),b=a.startContainer,c=a.endContainer;if(b!=c&&0==a.endOffset){a:{c=new E(c);for(h=c.current();h;h=c.prev())if(1<h.childNodes.length||h==b){b=h;break a}b=void 0}a.setEnd(b,3==b.nodeType?b.length:b.childNodes.length)}return a}
function n(f,h,i){var m=[],r,p;r=u.inline||u.block;p=s.create(r);l(p);I.walk(f,function(e){function f(e){var h=e.nodeName.toLowerCase(),n=e.parentNode.nodeName.toLowerCase(),q;if(g(h,"br"))j=0,u.block&&s.remove(e);else if(u.wrapper&&d(e,a,b))j=0;else if(u.block&&!u.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(h))e=s.rename(e,r),l(e),m.push(e),j=0;else{if(u.selector&&(z(x,function(a){!("collapsed"in a&&a.collapsed!==Q)&&(s.is(e,a.selector)&&!k(e))&&(l(e,a),q=!0)}),!u.inline||q)){j=0;return}C(r,
h)&&C(n,r)&&(i||!(3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)))&&!k(e)?(j||(j=p.cloneNode(H),e.parentNode.insertBefore(j,e),m.push(j)),j.appendChild(e)):(j=0,z(c.grep(e.childNodes),f),j=0)}}var j;z(e,f)});!1===u.wrap_links&&z(m,function(a){function b(a){var e,d,g;if("A"===a.nodeName){d=p.cloneNode(H);m.push(d);g=c.grep(a.childNodes);for(e=0;e<g.length;e++)d.appendChild(g[e]);a.appendChild(d)}z(c.grep(a.childNodes),b)}b(a)});z(m,function(c){var g,f=0;z(c.childNodes,function(a){!j(a)&&
!q(a)&&f++});g=f;if((1<m.length||!D(c))&&0===g)s.remove(c,1);else if(u.inline||u.wrapper){if(!u.exact&&1===g){g=c;var h,i;z(g.childNodes,function(a){if(1==a.nodeType&&!q(a)&&!k(a))return h=a,H});h&&e(h,u)&&(i=h.cloneNode(H),l(i),s.replace(i,g,G),s.remove(h,1));c=i||g}z(x,function(a){z(s.select(a.inline,c),function(c){var e;if(!1===a.wrap_links){e=c.parentNode;do if("A"===e.nodeName)return;while(e=e.parentNode)}o(a,b,c,a.exact?c:null)})});if(d(c.parentNode,a,b))return s.remove(c,1),c=0,G;u.merge_with_parents&&
s.getParent(c.parentNode,function(e){if(d(e,a,b))return s.remove(c,1),c=0,G});c&&!1!==u.merge_siblings&&(c=B(t(c),c),c=B(c,t(c,G)))}})}var x=f(a),u=x[0],M,Q=A.isCollapsed();if(u)if(h)h.nodeType?(M=s.createRng(),M.setStartBefore(h),M.setEndAfter(h),n(p(M,x),null,!0)):n(h,null,!0);else if(!Q||!u.inline||s.select("td.mceSelected,th.mceSelected").length){if(!s.select("td.mceSelected.numberingColumn").length){var R=i.selection.getNode();i.selection.setRng(m());M=A.getBookmark();n(p(A.getRng(G),x),M);if(u.styles&&
(u.styles.color||u.styles.textDecoration))c.walk(R,P,"childNodes"),P(R);A.moveToBookmark(M);v(A.getRng(G));i.nodeChanged()}}else y("apply",a,b)}function l(a,b,e){function g(a){var e,d,f;e=c.grep(a.childNodes);d=0;for(f=r.length;d<f&&!o(r[d],b,a,a);d++);if(t.deep){d=0;for(f=e.length;d<f;d++)g(e[d])}}function j(c){var e;z(s.getParents(c.parentNode,void 0,s.getRoot()).reverse(),function(c){var g;!e&&"_start"!=c.id&&"_end"!=c.id&&(g=d(c,a,b))&&!1!==g.split&&(e=c)});return e}function k(a,c,e,d){var g,
f,j,h,i,l;if(a){l=a.parentNode;for(g=c.parentNode;g&&g!=l;g=g.parentNode){f=g.cloneNode(H);for(i=0;i<r.length;i++)if(o(r[i],b,f,f)){f=0;break}f&&(j&&f.appendChild(j),h||(h=f),j=f)}if(d&&(!t.mixed||!D(a)))c=s.split(a,c);j&&(e.parentNode.insertBefore(j,e),h.appendChild(e))}return c}function l(a){var b=s.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];q(c)&&(c=c[a?"firstChild":"lastChild"]);s.remove(b,!0);return c}function n(a){var b,c,e,a=p(a,r,G);t.split&&(b=x(a,G),c=x(a),b!=c?(e=b.firstChild,
"TD"==b.nodeName&&e&&(b=e),b=m(b,"span",{id:"_start","data-mce-type":"bookmark"}),c=m(c,"span",{id:"_end","data-mce-type":"bookmark"}),k(j(b),b,b,!0),k(j(c),c,c,!0),b=l(G),c=l()):b=c=k(j(b),b,b,!0),a.startContainer=b.parentNode,a.startOffset=F(b),a.endContainer=c.parentNode,a.endOffset=F(c)+1);I.walk(a,function(a){z(a,function(a){g(a);a.nodeType===1&&(i.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&O(a.parentNode)==="underline")&&o({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},
null,a)})})}var r=f(a),t=r[0],u;e?e.nodeType?(u=s.createRng(),u.setStartBefore(e),u.setEndAfter(e),n(u)):n(e):!A.isCollapsed()||!t.inline||s.select("td.mceSelected,th.mceSelected").length?s.select("td.mceSelected.numberingColumn").length||(e=A.getBookmark(),n(A.getRng(G)),A.moveToBookmark(e),t.inline&&h(a,b,A.getStart())&&v(A.getRng(!0)),i.nodeChanged()):y("remove",a,b)}function d(a,b,c,d){function j(a,b,e){var f,h,i=b[e];if(b.onmatch)return b.onmatch(a,b,e);if(i)if(i.length===N)for(f in i){if(i.hasOwnProperty(f)&&
(h="attributes"===e?s.getAttrib(a,f):n(a,f),d&&!h&&!b.exact||(!d||b.exact)&&!g(h,r(i[f],c))))return}else for(f=0;f<i.length&&!("attributes"===e?s.getAttrib(a,i[f]):n(a,i[f]));f++);return b}var h=f(b),i;if(h&&a)for(i=0;i<h.length;i++)if(b=h[i],e(a,b)&&j(a,b,"attributes")&&j(a,b,"styles")){if(h=b.classes)for(i=0;i<h.length;i++)if(!s.hasClass(a,h[i]))return;return b}}function h(a,b,c){function e(c){c=s.getParent(c,function(c){return!!d(c,a,b,!0)});return d(c,a,b)}var f;if(c)return e(c);c=A.getNode();
if(e(c))return G;f=A.getStart();return f!=c&&e(f)?G:H}function e(a,b){if(g(a,b.inline)||g(a,b.block))return G;if(b.selector)return s.is(a,b.selector)}function g(a,b){a=a||"";b=b||"";a=""+(a.nodeName||a);b=""+(b.nodeName||b);return a.toLowerCase()==b.toLowerCase()}function n(a,b){var c=s.getStyle(a,b);if("color"==b||"backgroundColor"==b)c=s.toHex(c);"fontWeight"==b&&700==c&&(c="bold");return""+c}function r(a,b){"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a}));return a}
function j(a){return a&&3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function m(a,b,c){b=s.create(b,c);a.parentNode.insertBefore(b,a);b.appendChild(a);return b}function p(a,b,c){function e(a){var c,d,g;c=d=a?f:k;g=a?"previousSibling":"nextSibling";root=s.getRoot();if(3==c.nodeType&&!j(c)&&(a?0<h:l<c.nodeValue.length))return c;for(;;){if(!b[0].block_expand&&D(d))return d;for(a=d[g];a;a=a[g])if(!q(a)&&!j(a))return d;if(d.parentNode==root){c=d;break}d=d.parentNode}return c}function d(a,b){for(b===
N&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}}var f=a.startContainer,h=a.startOffset,k=a.endContainer,l=a.endOffset,m;1==f.nodeType&&f.hasChildNodes()&&(m=f.childNodes.length-1,f=f.childNodes[h>m?m:h],3==f.nodeType&&(h=0));1==k.nodeType&&k.hasChildNodes()&&(m=k.childNodes.length-1,k=k.childNodes[l>m?m:l-1],3==k.nodeType&&(l=k.nodeValue.length));if(q(f.parentNode)||q(f))f=q(f)?f:
f.parentNode,f=f.nextSibling||f,3==f.nodeType&&(h=0);if(q(k.parentNode)||q(k))k=q(k)?k:k.parentNode,k=k.previousSibling||k,3==k.nodeType&&(l=k.length);if(b[0].inline){if(a.collapsed){var n=function(a,b,e){function d(a,b){var f,g;g=a.nodeValue;typeof b=="undefined"&&(b=e?g.length:0);if(e){f=g.lastIndexOf(" ",b);g=g.lastIndexOf(" ",b);f=f>g?f:g;f!==-1&&!c&&f++}else{f=g.indexOf(" ",b);g=g.indexOf(" ",b);f=f!==-1&&(g===-1||f<g)?f:g}return f}var f,g;if(a.nodeType===3){b=d(a,b);if(b!==-1)return{container:a,
offset:b};g=a}for(a=new E(a,s.getParent(a,D)||i.getBody());f=a[e?"prev":"next"]();)if(f.nodeType===3){g=f;b=d(f);if(b!==-1)return{container:f,offset:b}}else if(D(f))break;if(g){b=e?0:g.length;return{container:g,offset:b}}};if(m=n(f,h,!0))f=m.container,h=m.offset;if(m=n(k,l))k=m.container,l=m.offset}m=d(k,l);if(m.node){for(;m.node&&0===m.offset&&m.node.previousSibling;)m=d(m.node.previousSibling);m.node&&(0<m.offset&&3===m.node.nodeType&&" "===m.node.nodeValue.charAt(m.offset-1))&&1<m.offset&&(k=m.node,
k.splitText(m.offset-1))}}if(b[0].inline||b[0].block_expand){if(!b[0].inline||3!=f.nodeType||0===h)f=e(!0);if(!b[0].inline||3!=k.nodeType||l===k.nodeValue.length)k=e()}b[0].selector&&(b[0].expand!==H&&!b[0].inline)&&(m=function(c,e){var d,f,g,j;c.nodeType==3&&(c.nodeValue.length==0&&c[e])&&(c=c[e]);d=s.getParents(c,void 0,s.getRoot());for(f=0;f<d.length;f++)for(g=0;g<b.length;g++){j=b[g];if(!("collapsed"in j&&j.collapsed!==a.collapsed)&&s.is(d[f],j.selector))return d[f]}return c},f=m(f,"previousSibling"),
k=m(k,"nextSibling"));if(b[0].block||b[0].selector)m=function(a,c){var e;if(a==s.getRoot())return a;b[0].wrapper||(e=s.getParent(a,b[0].block));e||(e=s.getParent(a.nodeType==3?a.parentNode:a,D));e&&b[0].wrapper&&(e=s.getParents(e,"ul,ol",s.getRoot()).reverse()[0]||e);if(!e)for(e=a;e[c]&&!D(e[c]);){e=e[c];if(g(e,"br"))break}return e||a},f=m(f,"previousSibling"),k=m(k,"nextSibling"),b[0].block&&(D(f)||(f=e(!0)),D(k)||(k=e()));1==f.nodeType&&(h=F(f),f=f.parentNode);1==k.nodeType&&(l=F(k)+1,k=k.parentNode);
return{startContainer:f,startOffset:h,endContainer:k,endOffset:l}}function o(a,b,d,f){var j,h,i;if(!e(d,a))return H;if("all"!=a.remove){z(a.styles,function(a,c){a=r(a,b);"number"===typeof c&&(c=a,f=0);(!f||g(n(f,c),a))&&s.setStyle(d,c,"");i=1});i&&""==s.getAttrib(d,"style")&&(d.removeAttribute("style"),d.removeAttribute("data-mce-style"));z(a.attributes,function(a,c){var e,a=r(a,b);if(typeof c==="number"){c=a;f=0}if(!f||g(s.getAttrib(f,c),a)){if(c=="class")if(a=s.getAttrib(d,c)){e="";z(a.split(/\s+/),
function(a){/mce\w+/.test(a)&&(e=e+((e?" ":"")+a))});if(e){s.setAttrib(d,c,e);return}}c=="class"&&d.removeAttribute("className");L.test(c)&&d.removeAttribute("data-mce-"+c);d.removeAttribute(c)}});z(a.classes,function(a){a=r(a,b);(!f||s.hasClass(f,a))&&s.removeClass(d,a)});h=s.getAttribs(d);for(j=0;j<h.length;j++)if(0!==h[j].nodeName.indexOf("_"))return H}if("none"!=a.remove){j=d.parentNode;var k;a.block&&(J?j==s.getRoot()&&(!a.list_block||!g(d,a.list_block))&&z(c.grep(d.childNodes),function(a){C(J,
a.nodeName.toLowerCase())?k?k.appendChild(a):k=m(a,J):k=0}):(h=function(a,b,c){a=t(a,b,c);return!a||"BR"==a.nodeName||D(a)},D(d)&&!D(j)&&(!h(d,H)&&!h(d.firstChild,G,1)&&d.insertBefore(s.create("br"),d.firstChild),!h(d,G)&&!h(d.lastChild,H,1)&&d.appendChild(s.create("br")))));(!a.selector||!a.inline||g(a.inline,d))&&s.remove(d,1);return G}}function t(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(1==a.nodeType||!j(a))return a}}function q(a){return a&&1==a.nodeType&&"bookmark"==
a.getAttribute("data-mce-type")}function B(a,b){var e,d;if(a&&b){d=function(a,b){for(e=a;e&&!(3==e.nodeType&&0!==e.nodeValue.length);e=e[b])if(1==e.nodeType&&!q(e))return e;return a};a=d(a,"previousSibling");b=d(b,"nextSibling");d=a;var f=b,g=function(a){var b={};z(s.getAttribs(a),function(c){c=c.nodeName.toLowerCase();0!==c.indexOf("_")&&"style"!==c&&(b[c]=s.getAttrib(a,c))});return b},j=function(a,b){var c,e;for(e in a)if(a.hasOwnProperty(e)){c=b[e];if(c===N||a[e]!=c)return H;delete b[e]}for(e in b)if(b.hasOwnProperty(e))return H;
return G};if(d.nodeName!=f.nodeName||!j(g(d),g(f))||!j(s.parseStyle(s.getAttrib(d,"style")),s.parseStyle(s.getAttrib(f,"style")))?H:G){for(e=a.nextSibling;e&&e!=b;)d=e,e=e.nextSibling,a.appendChild(d);s.remove(b);z(c.grep(b.childNodes),function(b){a.appendChild(b)});return a}}return b}function x(a,b){var c,e,d;c=a[b?"startContainer":"endContainer"];e=a[b?"startOffset":"endOffset"];1==c.nodeType&&(d=c.childNodes.length-1,!b&&e&&e--,c=c.childNodes[e>d?d:e]);3===c.nodeType&&(b&&e>=c.nodeValue.length)&&
(c=(new E(c,i.getBody())).next()||c);3===c.nodeType&&(!b&&0==e)&&(c=(new E(c,i.getBody())).prev()||c);return c}function y(b,e,g){function j(a){var b=s.create("span",{id:r,"data-mce-bogus":!0,style:o?"color:red":""});a&&b.appendChild(i.getDoc().createTextNode(q));return b}function h(a,b){for(;a;){if(3===a.nodeType&&a.nodeValue!==q||1<a.childNodes.length)return!1;b&&1===a.nodeType&&b.push(a);a=a.firstChild}return!0}function k(a){for(;a;){if(a.id===r)return a;a=a.parentNode}}function m(a){var b;if(a){b=
new E(a,a);for(a=b.current();a;a=b.next())if(3===a.nodeType)return a}}function n(a,b){var c,e;if(a)e=A.getRng(!0),h(a)?(!1!==b&&(e.setStartBefore(a),e.setEndBefore(a)),s.remove(a)):(c=m(a),c.nodeValue.charAt(0)===K&&c.deleteData(0,1),s.remove(a,1)),A.setRng(e);else if(a=k(A.getStart()),!a)for(;a=s.get(r);)n(a,!1)}var q,r="_mce_caret",o=i.settings.caret_debug;q=c.isGecko?"​":K;self._hasCaretEvents||(i.onBeforeGetContent.addToTop(function(){var a=[],b;if(h(k(A.getStart()),a))for(b=a.length;b--;)s.setAttrib(a[b],
"data-mce-bogus","1")}),c.each(["onMouseUp","onKeyUp"],function(a){i[a].addToTop(function(){n()})}),i.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(8==c||37==c||39==c)&&n(k(A.getStart()))}),self._hasCaretEvents=!0);if("apply"==b){var t,u,x,v;t=A.getRng(!0);b=t.startOffset;v=t.startContainer.nodeValue;(u=k(A.getStart()))&&(x=m(u));if(v&&0<b&&b<v.length&&/\w/.test(v.charAt(b))&&/\w/.test(v.charAt(b-1)))u=A.getBookmark(),t.collapse(!0),t=p(t,f(e)),t=I.split(t),a(e,g,t),A.moveToBookmark(u);else{if(!u||
x.nodeValue!==q)u=j(!0),x=u.firstChild,t.insertNode(u),b=1;a(e,g,u);A.setCursorLocation(x,b)}}else{v=A.getRng(!0);var y,B,b=[];y=v.startContainer;B=v.startOffset;x=y;if(3==y.nodeType){if(B!=y.nodeValue.length||y.nodeValue===q)u=!0;x=x.parentNode}for(;x;){if(d(x,e,g)){t=x;break}x.nextSibling&&(u=!0);b.push(x);x=x.parentNode}if(t)if(u)t=A.getBookmark(),v.collapse(!0),v=p(v,f(e),!0),v=I.split(v),l(e,g,v),A.moveToBookmark(t);else{x=g=j();for(e=b.length-1;0<=e;e--)x.appendChild(b[e].cloneNode(!1)),x=x.firstChild;
x.appendChild(s.doc.createTextNode(q));x=x.firstChild;s.insertAfter(g,t);A.setCursorLocation(x,1)}}}function v(a){var b=a.startContainer,c=a.startOffset,e;3==b.nodeType&&c>=b.nodeValue.length&&(b=b.parentNode,c=F(b)+1);if(1==b.nodeType){e=b.childNodes;b=e[Math.min(c,e.length-1)];b=new E(b,s.getParent(b,s.isBlock));c>e.length-1&&b.next();for(c=b.current();c;c=b.next())if(3==c.nodeType&&!j(c)){b=s.create("a",null,K);c.parentNode.insertBefore(b,c);a.setStart(c,0);A.setRng(a);s.remove(b);break}}}var u=
{},z=c.each,s=i.dom,A=i.selection,E=c.dom.TreeWalker,I=new c.dom.RangeUtils(s),C=i.schema.isValidChild,D=s.isBlock,J=i.settings.forced_root_block,F=s.nodeIndex,K="﻿",L=/^(src|href|style)$/,H=!1,G=!0,N,O=function(a){var b;i.dom.getParent(a,function(a){return(b=i.dom.getStyle(a,"text-decoration"))&&"none"!==b});return b},P=function(a){var b;1===a.nodeType&&(a.parentNode&&1===a.parentNode.nodeType)&&(b=O(a.parentNode),i.dom.getStyle(a,"color")&&b?i.dom.setStyle(a,"text-decoration",b):i.dom.getStyle(a,
"textdecoration")===b&&i.dom.setStyle(a,"text-decoration",null))};c.extend(this,{get:f,register:b,apply:a,remove:l,toggle:function(b,c,e){var d=f(b);h(b,c,e)&&(!("toggle"in d[0])||d[0].toggle)?l(b,c,e):a(b,c,e)},match:h,matchAll:function(a,b){var c,e=[],f={};c=A.getStart();s.getParent(c,function(c){var g,j;for(g=0;g<a.length;g++)j=a[g],!f[j]&&d(c,j,b)&&(f[j]=!0,e.push(j))});return e},matchNode:d,canApply:function(a){var a=f(a),b,c,e,d;if(a){b=A.getStart();b=s.getParents(b,void 0,s.getRoot());for(e=
a.length-1;0<=e;e--){d=a[e].selector;if(!d)return G;for(c=b.length-1;0<=c;c--)if(s.is(b[c],d))return G}}return H}})}})(tinymce);
tinymce.onAddEditor.add(function(c,i){var k,f,b,a=i.settings;if(a.inline_styles){f=c.explode(a.font_size_legacy_values);var l=function(a,e){c.each(e,function(c,e){c&&b.setStyle(a,e,c)});b.rename(a,"span")};k={font:function(a,b){l(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:f[parseInt(b.size)-1]})},strike:function(a,b){l(b,{textDecoration:"line-through"})}};var d=function(d,e){b=d.dom;a.convert_fonts_to_spans&&c.each(b.select("font,strike",e.node),function(a){k[a.nodeName.toLowerCase()](i.dom,
a)})};i.onPreProcess.add(d);i.onSetContent.add(d);i.onInit.add(function(){i.selection.onSetContent.add(d)})}});
define("atlassian-editor-plugins/paste/repairer-util",function(c,i){i.getBrAndContents=function(c){return $("<br>").add(c.contents())};i.isEmptyLine=function(c){return""===c.text()};i.isNodeContainingText=function(c){return(c.nodeType===Node.ELEMENT_NODE||c.nodeType===Node.TEXT_NODE)&&$.trim(c.textContent)};i.isFirstTextContentInParent=function(c){var f=!1;c.parent().contents().each(function(){if(i.isNodeContainingText(this))return this===c[0]&&(f=!0),!1});return f};i.replaceWithP=function(c){var f=
c.attr("style"),b=$("<p></p>").append(c.contents());f&&b.attr("style",f);c.replaceWith(b)};i.appendContentsToPreviousContentOrP=function(c){var f=c.prev("p");f.length?(f.append(i.getBrAndContents(c)),c.remove()):i.isFirstTextContentInParent(c)?i.replaceWithP(c):c.replaceWith(i.getBrAndContents(c))};i.createMacro=function(c,f){var b=$('<table class="wysiwyg-macro" data-macro-name="'+c+'" data-macro-body-type="RICH_TEXT"><tbody><tr><td class="wysiwyg-macro-body"></td></tr></tbody></table>');b.find(".wysiwyg-macro-body").append(f);
return b}});
define("atlassian-editor-plugins/paste/repairer",["atlassian-editor-plugins/paste/repairer-util"],function(c){var i=[function(i){i.find(".expand-container").replaceWith(function(){var f=$(this).find(".expand-content").first().contents();return f.length?c.createMacro("expand",f):""})},function(c){c.find("span:empty").remove()},function(c){c.find("p + br").remove()},function(i){var f=!1;i.find("div:not(.content-wrapper)").each(function(){var b=$(this);c.isEmptyLine(b)?(b.remove(),f=!0):b.find("div, p, pre").length?
b.replaceWith(b.contents()):(f?c.replaceWithP(b):c.appendContentsToPreviousContentOrP(b),f=!1)})}];return{repair:function(c){var f=$("<div></div>").html(c);i.forEach(function(b){b(f)});return f.html()}}});
(function(c){function i(b,c){return b.getParam(c,a[c])}function k(a,b){a.is("ul.inline-task-list")?b.each(function(){var a=c(this);a.attr("data-inline-task-id")||a.attr("data-inline-task-id","")}):b.removeAttr("data-inline-task-id").removeAttr("data-pasted-task")}function f(a){var b=a.filter("ol,ul").length;return a.length===b}var b=tinymce.each,a={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",
paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!1,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]},l,d=function(a,b){if(!b.collapsed||0!=b.startOffset)return!1;
var d=c(b.startContainer).closest("ol, ul",a.getBody());if(0===d.length)return!1;d=(new tinymce.dom.TreeWalker(b.startContainer,d[0])).prev(!0);return void 0===d||c(d).is("li")},h=function(a){a=3===a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer;return tinymce.isIE?"LI"===a.nodeName&&0===a.childNodes.length:"LI"===a.nodeName&&1===a.childNodes.length&&"BR"===a.firstChild.nodeName};tinymce.create("tinymce.plugins.AtlassianEditorPaste",{init:function(a,d){function f(b,c){var d=
a.dom,g;k.onPreProcess.dispatch(k,b);o&&(b.content=o.repair(b.content));b.node=d.create("div",0,b.content);tinymce.isGecko&&(g=a.selection.getRng(!0),g.startContainer==g.endContainer&&3===g.startContainer.nodeType&&1===b.node.childNodes.length&&(/^(p|h[1-6]|pre)$/i.test(b.node.firstChild.nodeName)&&-1===b.content.indexOf("__MCE_ITEM__"))&&d.remove(b.node.firstChild,!0));k.onPostProcess.dispatch(k,b);b.content=a.serializer.serialize(b.node,{getInner:1,forced_root_block:""});!c&&a.pasteAsPlainText?
(k._insertPlainText(b.content),i(a,"paste_text_sticky")||(a.pasteAsPlainText=!1,a.controlManager.setActive("pastetext",!1))):k._insert(b.content);tinymce.isGecko&&a.dom.getRoot().focus()}function h(c){if(c){var d=c.firstChild;d&&("DIV"===d.nodeName&&d.style.marginTop&&d.style.backgroundColor)&&a.dom.remove(d,1);tinymce.isWebKit&&b(a.dom.select("span.Apple-style-span",c),function(b){a.dom.removeClass(b,"Apple-style-span")});tinymce.isWebKit&&b(a.dom.select("br.Apple-interchange-newline",c),function(b){a.dom.remove(b)});
b(a.dom.select("br[data-mce-bogus]",c),function(b){a.dom.remove(b)});b(a.dom.select("meta[charset]",c),function(b){a.dom.remove(b)})}}function j(d){var g,j,i,l,o=a.selection,p=a.dom;i=a.getBody();var z,s;a.undoManager.add();if(function(b){if(!b.clipboardData||-1==c.inArray("text/html",b.clipboardData.types||[]))return!1;var b=b.clipboardData.getData("text/html"),d;if(!b||!c.browser.webkit)return!1;d=k.repair(b);if(d==b)return!1;b=k.parse(d,a.getDoc());d=c("<div></div>");d.append(b);h(d[0]);f({content:d.html()});
return!0}(d))c.Event(d).preventDefault();else{if(d.clipboardData||p.doc.dataTransfer)if(z=(d.clipboardData||p.doc.dataTransfer).getData("Text"),a.pasteAsPlainText){d.preventDefault();f({content:p.encode(z).replace(/\r?\n/g,"<br />")});return}if(!p.get("_mcePaste"))if(s=c(a.selection.getStart()).closest("[data-macro-body-type='PLAIN_TEXT']").length,l=i,"true"!=i.contentEditable&&(l=p.getParent(a.selection.getStart(),'[contenteditable="true"]',i)),g=p.add(l,"div",{id:"_mcePaste","class":"mcePaste",
"data-mce-bogus":"1"},"﻿﻿"),i!=a.getDoc().body?i=p.getPos(a.selection.getStart(),i).y:(i=p.getViewPort(a.getWin()),i=i.y+parseInt(i.h/2,10)),p.setStyles(g,{position:"absolute",left:tinymce.isGecko?-40:0,top:i-25,width:1,height:1,overflow:"hidden"}),tinymce.isIE)if(l=o.getRng(),i=p.doc.body.createTextRange(),i.moveToElementText(g),i.execCommand("Paste"),p.remove(g),"﻿﻿"===g.innerHTML)a.execCommand("mcePasteWord"),d.preventDefault();else return o.setRng(l),o.setContent(""),setTimeout(function(){f({content:g.innerHTML})},
0),tinymce.dom.Event.cancel(d);else{var A=function(a){a.preventDefault()};p.bind(a.getDoc(),"mousedown",A);p.bind(a.getDoc(),"keydown",A);j=o.getBookmark();g=g.firstChild;i=a.getDoc().createRange();i.setStart(g,0);i.setEnd(g,2);o.setRng(i);window.setTimeout(function(){var c="",d;if(p.select("div.mcePaste > div.mcePaste").length)c=s?"<p>"+p.encode(z).replace(/\r?\n/g,"<br />")+"</p>":"<p>"+p.encode(z).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>";else{d=p.select("div.mcePaste");
b(d,function(a){h(a);a.parentNode.className!="mcePaste"&&(c=c+a.innerHTML)})}b(p.select("div.mcePaste"),function(a){p.remove(a)});j&&o.moveToBookmark(j);f({content:c});p.unbind(a.getDoc(),"mousedown",A);p.unbind(a.getDoc(),"keydown",A)},0)}}}var k=this;k.editor=a;k.url=d;k.onPreProcess=new tinymce.util.Dispatcher(k);k.onPostProcess=new tinymce.util.Dispatcher(k);k.onPreProcess.add(k._preProcess);k.onPostProcess.add(k._postProcess);k.onPreProcess.add(function(b,c){a.execCallback("paste_preprocess",
b,c)});k.onPostProcess.add(function(b,c){a.execCallback("paste_postprocess",b,c)});l=[{repair:function(a){var b=/<meta charset='utf-8'>(<td.*<\/td>)<br class="Apple-interchange-newline">/.exec(a);return b?'<table class="confluenceTable"><tbody><tr>'+b[1]+"</tr></tbody></table>":a}},{repair:function(a){var b=/<meta charset='utf-8'>(<tr.*<\/tr>)<br class="Apple-interchange-newline">/.exec(a);return b?'<table class="confluenceTable"><tbody>'+b[1]+"</tbody></table>":a}}];var p=function(a,b){if((tinymce.isMac?
b.metaKey:b.ctrlKey)&&!b.shiftKey&&86===b.keyCode||b.shiftKey&&45===b.keyCode)return!1};a.onKeyDown.addToTop(p);a.onKeyUp.addToTop(p);a.pasteAsPlainText=i(a,"paste_text_sticky_default");var o=null;AJS&&(AJS.DarkFeatures&&!AJS.DarkFeatures.isEnabled("editor.advanced.paste.disable"))&&require(["atlassian-editor-plugins/paste/repairer"],function(a){o=a});a.addCommand("mceInsertClipboardContent",function(a,b){f(b,!0)});i(a,"paste_text_use_dialog")||a.addCommand("mcePasteText",function(){var b=tinymce.util.Cookie;
a.pasteAsPlainText=!a.pasteAsPlainText;a.controlManager.setActive("pastetext",a.pasteAsPlainText);a.pasteAsPlainText&&!b.get("tinymcePasteText")&&(i(a,"paste_text_sticky")?a.windowManager.alert(a.translate("paste.plaintext_mode_sticky")):a.windowManager.alert(a.translate("paste.plaintext_mode")),i(a,"paste_text_notifyalways")||b.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))});a.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});a.addButton("selectall",
{title:"paste.selectall_desc",cmd:"selectall"});i(a,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?a.onKeyDown.addToTop(function(a,b){((tinymce.isMac?b.metaKey:b.ctrlKey)&&86===b.keyCode||b.shiftKey&&45===b.keyCode)&&j(b)}):a.onPaste.addToTop(function(a,b){return j(b)}));a.onInit.add(function(){a.controlManager.setActive("pastetext",a.pasteAsPlainText);i(a,"paste_block_drop")&&a.dom.bind(a.getBody(),"dragend dragover draggesture dragdrop drop drag".split(" "),
function(a){a.preventDefault();a.stopPropagation();return false})});a.onSaveContent.add(function(a,b){var e=c("<div/>").html(b.content);c('ul.inline-task-list > li[data-pasted-task="true"]',e).each(function(){var a=c(this),b=a.attr("data-inline-task-id");b&&1<e.find('ul.inline-task-list > li[data-inline-task-id="'+b+'"]').size()&&a.attr("data-inline-task-id","")});b.content=e.html()});k._legacySupport()},getInfo:function(){return{longname:"AtlassianEditorPaste",author:"Atlassian",authorurl:"http://www.atlassian.com",
infourl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(a,c){function d(a){b(a,function(a){j=a.constructor==RegExp?j.replace(a,""):j.replace(a[0],a[1])})}var f=this.editor,j=c.content,h=tinymce.grep,k=tinymce.explode,l=tinymce.trim,t,q;if(!1!=f.settings.paste_enable_default_filters){tinymce.isIE&&9<=document.documentMode&&(d([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,
"$1"]]),d([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]));if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(j)||c.wordContent){c.wordContent=!0;d([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);i(f,"paste_convert_headers_to_strong")&&(j=j.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>"));i(f,"paste_convert_middot_lists")&&d([[/<\!--\[if !supportLists\]--\>/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],
[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]);d([/<\!--[\s\S]+?--\>/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "]]);do t=j.length,j=j.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(t!=j.length);0===i(f,"paste_retain_style_properties").replace(/^none$/i,"").length?j=j.replace(/<\/?span[^>]*>/gi,""):d([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,
function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join(" "):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(a,c,e){var d=[],f=0,a=k(l(e).replace(/&quot;/gi,"'"),";");b(a,function(a){function b(a){return a+(a!=="0"&&/\d$/.test(a))?"px":""}var c,e=k(a,":");if(e.length===2){a=e[0].toLowerCase();c=e[1].toLowerCase();switch(a){case "mso-padding-alt":case "mso-padding-top-alt":case "mso-padding-right-alt":case "mso-padding-bottom-alt":case "mso-padding-left-alt":case "mso-margin-alt":case "mso-margin-top-alt":case "mso-margin-right-alt":case "mso-margin-bottom-alt":case "mso-margin-left-alt":case "mso-table-layout-alt":case "mso-height":case "mso-width":case "mso-vertical-align-alt":d[f++]=
a.replace(/^mso-|-alt$/g,"")+":"+b(c);return;case "horiz-align":d[f++]="text-align:"+c;return;case "vert-align":d[f++]="vertical-align:"+c;return;case "font-color":case "mso-foreground":d[f++]="color:"+c;return;case "mso-background":case "mso-highlight":d[f++]="background:"+c;return;case "mso-default-height":d[f++]="min-height:"+b(c);return;case "mso-default-width":d[f++]="min-width:"+b(c);return;case "mso-padding-between-alt":d[f++]="border-collapse:separate;border-spacing:"+b(c);return;case "text-line-through":if(c==
"single"||c=="double")d[f++]="text-decoration:line-through";return;case "mso-zero-height":c=="yes"&&(d[f++]="display:none");return}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(a)||(d[f++]=a+":"+e[1])}});return f>0?c+' style="'+d.join(";")+'"':c}]])}i(f,"paste_convert_headers_to_strong")&&d([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]);
d([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);q=i(f,"paste_strip_class_attributes");"none"!==q&&(t=function(a,b){if(q==="all")return"";var c=h(k(b.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return c.length?' class="'+c.join(" ")+'"':""},j=j.replace(/ class="([^"]+)"/gi,t),j=j.replace(/ class=([\-\w]+)/gi,t));i(f,"paste_remove_spans")&&(j=j.replace(/<\/?span[^>]*>/gi,""));c.content=j}},_postProcess:function(a,c){var d=
this.editor,f=d.dom,j;if(!1!=d.settings.paste_enable_default_filters){c.wordContent&&(b(f.select("a",c.node),function(a){(!a.href||-1!==a.href.indexOf("#_Toc"))&&f.remove(a,1)}),i(d,"paste_convert_middot_lists")&&this._convertLists(a,c),j=i(d,"paste_retain_style_properties"),tinymce.is(j,"string")&&("all"!==j&&"*"!==j)&&(j=tinymce.explode(j.replace(/^none$/i,"")),b(f.select("*",c.node),function(a){var b={},c=0,e,d,g;if(j)for(e=0;e<j.length;e++)if(d=j[e],g=f.getStyle(a,d))b[d]=g,c++;f.setAttrib(a,
"style","");j&&0<c?f.setStyles(a,b):"SPAN"===a.nodeName&&!a.className&&f.remove(a,!0)})));i(d,"paste_remove_styles")||i(d,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?b(f.select("*[style]",c.node),function(a){a.removeAttribute("style");a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&b(f.select("*",c.node),function(a){a.removeAttribute("data-mce-style")});var h=AJS.Meta.get("base-url");b(f.select("a:not([data-base-url='"+h+"'])[data-base-url]",c.node),function(a){for(var b=a.attributes.href?
a.attributes.href.value:h;a.attributes.length>0;)a.removeAttribute(a.attributes[0].name);a.setAttribute("href",b)})}},_convertLists:function(a,c){var d=a.editor.dom,f,j,h=-1,i,k=[],l,q;b(d.select("p",c.node),function(a){var c,e="",g;for(c=a.firstChild;c&&3===c.nodeType;c=c.nextSibling)e+=c.nodeValue;e=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," ");/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(e)&&(g="ul");/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(e)&&(g="ol");g?
(i=parseFloat(a.style.marginLeft||0),i>h&&k.push(i),!f||g!=l?(f=d.create(g),d.insertAfter(f,a)):i>h?f=j.appendChild(d.create(g)):i<h&&(c=tinymce.inArray(k,i),e=d.getParents(f.parentNode,g),f=e[e.length-1-c]||f),b(d.select("span",a),function(a){var b=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");g=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(b)?d.remove(a):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(b)&&d.remove(a)}),c=a.innerHTML,c="ul"==g?a.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,
""):a.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,""),j=f.appendChild(d.create("li",0,c)),d.remove(a),h=i,l=g):f=h=0});q=c.node.innerHTML;-1!==q.indexOf("__MCE_ITEM__")&&(c.node.innerHTML=q.replace(/__MCE_ITEM__/g,""))},_insert:function(a,b){var c=this.editor,d=c.selection.getRng(!0),f,h,a=this._applyOnBeforeSetContentListeners(c,a);h=this.parse(a,c.getDoc());if(f=this._getClipboardInserter(c,d,h))f.insert(c,d,h),c.selection.onSetContent.dispatch(c.selection,{content:a,
format:"html"}),c.addVisual();else{!c.selection.isCollapsed()&&d.startContainer!=d.endContainer&&c.execCommand("mceDelete",!1,null,{skip_undo:!0});if(tinymce.isIE)for(d=0;d<h.length;d++)if("img"===h[d].nodeName.toLowerCase()){b=!0;break}c.execCommand("mceInsertContent",!1,a,{skip_undo:b})}},_getClipboardInserter:function(a,b,d){var f;c.each(this.clipboardInserters,function(c,h){if(h.shouldInsert(a,b,d))return f=h,!1});return f},clipboardInserters:[{shouldInsert:function(a,b,c){return(a=(a=h(b))&&
f(c))&&0<c.children("li").length},insert:function(a,b,d){b=c(3===b.startContainer.nodeType?b.startContainer.parentNode:b.startContainer);d=d.children();a.undoManager.beforeChange();a.undoManager.add();k(b.parent(),d);b.replaceWith(d);a.selection.select(d.last()[0],!0);a.selection.collapse();a.undoManager.add()}},{shouldInsert:function(a,b,c){return(a=(a=d(a,b))&&f(c))&&0<c.children("li").length},insert:function(a,b,d){b=c(b.startContainer).closest("li",a.getBody());d=d.children();a.undoManager.beforeChange();
a.undoManager.add();k(b.parent(),d);b.before(d);a.selection.select(b[0],!0);a.selection.collapse(!0);a.undoManager.add()}},{shouldInsert:function(a,b,d){!b.collapsed||3===b.startContainer.nodeType&&b.startOffset!=b.startContainer.nodeValue.length||1===b.startContainer.nodeType&&b.startOffset!=b.startContainer.childNodes.length?b=!1:(a=c(b.startContainer).closest("ol, ul",a.getBody()),0===a.length?b=!1:(b=(new tinymce.dom.TreeWalker(b.startContainer,a[0])).next(!0),b=void 0===b||c(b).is("li")));return b&&
d.length===d.filter("ol,ul").length&&0<d.children("li").length},insert:function(a,b,d){b=c(b.startContainer).closest("li",a.getBody());d=d.children();a.undoManager.beforeChange();a.undoManager.add();k(b.parent(),d);b.after(d);a.selection.select(d.last()[0],!0);a.selection.collapse(!1);a.undoManager.add()}},{shouldInsert:function(a,b,c){var f=1<c.length;if(a=f=(f=f&&!h(b))&&d(a,b))a=c.filter("ol,ul"),c=c[c.length-1],a=1===a.length&&a[0]===c;return a},insert:function(a,b,d){b=c(b.startContainer).closest("li",
a.getBody());a.undoManager.beforeChange();a.undoManager.add();k(b.parent(),d.children("li"));d=c("<li></li>").append(d);b.before(d);a.undoManager.add()}},{shouldInsert:function(a,b,d){return b.collapsed||!c(b.commonAncestorContainer).is("table.confluenceTable > tbody, table.confluenceTable > tbody > tr")?!1:d.is("table:not(.wysiwyg-macro)")},insert:function(a,b,d){function f(a,b){for(var d=a.shift(),e=b.shift();d&&e;d=a.shift(),e=b.shift())c(e).html(c(d).html())}var j=0<d.children("tbody").length?
d.children("tbody").children("tr"):d.children("tr"),h=j.children("td, th"),i=c(".mceSelected",a.getDoc()),d=i.parent();a.undoManager.beforeChange();a.undoManager.add();if(1===d.length)f(c.makeArray(h),c.makeArray(i));else{j=c.makeArray(j);d=c.makeArray(d);h=j.shift();for(i=d.shift();h&&i;h=j.shift(),i=d.shift())f(c.makeArray(c(h).children()),c.makeArray(c(i).children()))}a.selection.setRng(b);a.undoManager.add()}},{shouldInsert:function(a,b,d){a=c(b.startContainer).closest("td.confluenceTd, th.confluenceTh",
".mceContent");if(0===a.length)return!1;a=a.closest("table.confluenceTable",".mceContent");if(!(0===a.length||0===a.children("tbody").length)){if(!d.is("table:not(.wysiwyg-macro)"))return!1;var f=!1;a.find("*[colspan], *[rowspan]").each(function(a,b){if(1<c(b).attr("rowspan")||1<c(b).attr("colspan"))return f=!0,!1});return!f}},insert:function(a,b,d){var b=c(b.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent"),f=b.closest("table.confluenceTable",".mceContent"),d=0<d.children("tbody").length?
d.children("tbody").children("tr"):d.children("tr"),h=f.children("tbody").children("tr"),i=d.length,k=d.first().children("td, th").length,l=h.length,t=h.first().children("td, th").length,q=b.parent().index(),B=b.index();a.undoManager.beforeChange();a.undoManager.add();var x=B+k-t,i=q+i-l,x=0>x?0:x,i=0>i?0:i;h.each(function(a,b){for(var d=c(b),e=d.children().last(),f=0;f<x;f++)d.append(e.clone().html(tinymce.isIE?"":"<br/>"))});k=h.last();for(h=0;h<i;h++){k=c("<tr></tr>").insertAfter(k);for(l=0;l<
t+x;l++)k.append('<td class="confluenceTd">'+(tinymce.isIE?"":"<br/>")+"</td>")}var y=[];f.children("tbody").children("tr").slice(q).each(function(a,b){y.push(c.makeArray(c(b).children("th, td").slice(B)))});var v=[];d.each(function(a,b){v.push(c.makeArray(c(b).children("th, td")))});f=v.shift();for(d=y.shift();f&&d;f=v.shift(),d=y.shift()){t=f.shift();for(q=d.shift();t&&q;t=f.shift(),q=d.shift())c(q).html(c(t).html())}a.selection.select(b[0],1);a.selection.collapse(!0);a.undoManager.add()}}],_applyOnBeforeSetContentListeners:function(a,
b){var c={content:b,format:"html"};a.selection.onBeforeSetContent.dispatch(a.selection,c);return c.content},_insertPlainText:function(a){function c(d){b(d,function(b){a=b.constructor==RegExp?a.replace(b,""):a.replace(b[0],b[1])})}var d=this.editor,f=i(d,"paste_text_linebreaktype"),h=i(d,"paste_text_replacements"),k=tinymce.is;"string"===typeof a&&0<a.length&&(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(a)?c([/[\n\r]+/g]):c([/\r+/g]),c([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,
"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]),a=d.dom.decode(tinymce.html.Entities.encodeRaw(a)),k(h,"array")?c(h):k(h,"string")&&c(RegExp(h,"gi")),"none"==f?c([[/\n+/g," "]]):"br"==f?c([[/\n/g,"<br />"]]):"p"==f?c([[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]):c([[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),d.execCommand("mceInsertContent",!1,
a))},_legacySupport:function(){var a=this,b=a.editor;b.addCommand("mcePasteWord",function(){b.windowManager.open({file:a.url+"/pasteword.htm",width:parseInt(i(b,"paste_dialog_width")),height:parseInt(i(b,"paste_dialog_height")),inline:1})});i(b,"paste_text_use_dialog")&&b.addCommand("mcePasteText",function(){b.windowManager.open({file:a.url+"/pastetext.htm",width:parseInt(i(b,"paste_dialog_width")),height:parseInt(i(b,"paste_dialog_height")),inline:1})});b.addButton("pasteword",{title:"paste.paste_word_desc",
cmd:"mcePasteWord"})},parse:function(a,b){return"<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?c(a,b||document):c("<div>"+a+"</div>",b||document).contents()},repair:function(a){if(!a)return a;c.each(l,function(b,c){a=c.repair(a)});return a}});tinymce.PluginManager.add("aePaste",tinymce.plugins.AtlassianEditorPaste)})($);