("undefined"===typeof window?global:window).__4f7eb6cf60845d0cd685bf4d782df3ea=function(){function g(a){return a&&a.__esModule?a:{"default":a}}var f={};"use strict";Object.defineProperty(f,"__esModule",{value:!0});var e=g(__59c1c30030f41c99b6757d449d9a3a7b),h=g(__320e4ec293ac29d49b959aa9d46df68f),j=g(__28c84e7bb75f6c3b0ba124d57bd69571),i=h.default.Collection.extend({initialize:function(a,b){b||(b={});b.matcher&&(this.matcher=b.matcher);b.model&&(this.model=b.model);this._idAttribute=(new this.model).idAttribute;
this._maxResults=b.maxResults||5;this._queryData=b.queryData||{};this._queryParamKey=b.queryParamKey||"q";this._queryEndpoint=b.queryEndpoint||"";this.value=null;this.queryCache={};this.activeQueryCount=0;e.default.bindAll(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(a){var b=this,c,d;this.value=a;d=this.getFilteredResults(a);this.respond(a,d);a&&(this._queryEndpoint&&!this.hasQueryCache(a)&&this.shouldGetMoreResults(d))&&(c=this.fetch(a),this.activeQueryCount++,
this.trigger("activity",{activity:!0}),c.always(function(){b.activeQueryCount--;b.trigger("activity",{activity:!!b.activeQueryCount})}),c.done(function(c,d,e){b.addQueryCache(a,c,e)}),c.done(function(){a=b.value;d=b.getFilteredResults(a);b.respond(a,d)}))},getQueryData:function(a){var b=e.default.isFunction(this._queryData)?this._queryData(a):this._queryData,b=e.default.extend({},b);b[this._queryParamKey]=a;return b},fetch:function(a){a={add:!0,update:!0,remove:!1,data:this.getQueryData(a)};return h.default.Collection.prototype.fetch.call(this,
a)},respond:function(a,b){this.trigger("respond",{query:a,results:b});return b},matcher:function(){},getFilteredResults:function(a){var b=[];if(!a)return b;b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&(b=e.default.first(b,this._maxResults));return b},addQueryCache:function(a,b,c){var d=this.queryCache,b=this.parse(b,c);d[a]=e.default.pluck(b,this._idAttribute)},hasQueryCache:function(a){return this.queryCache.hasOwnProperty(a)},findQueryCache:function(a){return this.queryCache[a]},
shouldGetMoreResults:function(a){return a.length<this._maxResults},setMaxResults:function(a){this._maxResults=a;this.value&&this.respond(this.value,this.getFilteredResults(this.value))}});(0,j.default)("ProgressiveDataSet",i);f.default=i;return f=f["default"]}.call(this);