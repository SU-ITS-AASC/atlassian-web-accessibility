define("confluence-page-banner/page-banner",["ajs","jquery","confluence/templates","confluence/legacy","skate"],function(e,t,a,n,i){function s(){var e=t("#system-content-items");0==e.children(":not(.hidden)").length?e.addClass("hidden"):e.removeClass("hidden")}function o(){t("#page-metadata-banner").hide()}function c(e){t(e).tooltip({live:!0,gravity:"n",title:"title",delayIn:500})}function r(e){if(t(".tipsy").remove(),e){var a=t(e).data("tipsy");a&&(a.hoverState="out")}}var d=function(a,n){var i=t("#content-metadata-page-restrictions"),o="";i.removeClass("aui-iconfont-locked aui-iconfont-unlocked restricted");var r=n.hasRestrictions&&!(n.hasExplicitRestrictions||n.hasInheritedRestrictions);n.hasExplicitRestrictions||r?(i.addClass("aui-icon aui-icon-small aui-iconfont-locked restricted"),o=e.I18n.getText("page.restrictions.apply")):n.hasInheritedRestrictions?(i.addClass("aui-icon aui-icon-small aui-iconfont-unlocked restricted"),o=e.I18n.getText("page.restrictions.apply")):(i.addClass("aui-icon aui-icon-small aui-iconfont-unlocked"),o=n.hasAnyExplicitRestrictions?e.I18n.getText("page.restrictions.apply"):e.I18n.getText("page.restrictions.none")),i.attr("title",o),i.attr("aria-label",o),c(i),s()};t("#content-metadata-page-restrictions").append('<span class="assistive">Page Restrictions</span>');var l=function(){var a;s(),e.bind("system-content-metadata.toggled-restrictions",d),e.bind("breadcrumbs.expanded",o),t("#page-metadata-banner").css("visibility","visible"),c(a=t("#system-content-items a:not(.tipsy-disabled),.page-metadata-item a:not(.tipsy-disabled),.page-metadata-modification-info a.last-modified:not(tipsy-disabled),#draft-status-lozenge")),a.click(function(e){r(t(e.target).closest("a"))}),t(window).on("click scroll resize",r)},p=function(){e.unbind("system-content-metadata.toggled-restrictions",d),e.unbind("breadcrumbs.expanded",o)};i("system-metadata-restrictions",{type:i.types.CLASS,events:{click:function(t,a){a.preventDefault(),e.trigger("system-content-metadata.open-restrictions-dialog")}},attached:l,detached:p})}),require("confluence/module-exporter").safeRequire("confluence-page-banner/page-banner");