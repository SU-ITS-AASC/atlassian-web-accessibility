!function(d){var h=/^\s*|\s*$/g,l="$1"==="B".replace(/A(.)|B/,"$1"),i={majorVersion:"3",minorVersion:"4.9-atlassian-11",releaseDate:"2012-03-06",_init:function(){function b(a){var j=/editor/.test(a);return a&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a)||j?(/_(src|dev)\.js/g.test(a)&&(m.suffix="_src"),-1!=(c=a.indexOf("?"))&&(m.query=a.substring(c+1)),j?m.baseURL=a.substring(0,a.indexOf("/download/")):m.baseURL=a.substring(0,a.lastIndexOf("/")),g&&-1==m.baseURL.indexOf("://")&&
0!==m.baseURL.indexOf("/")&&(m.baseURL=g+m.baseURL),j&&(m.baseURL+="/download/resources/com.atlassian.plugins.editor/tinymcesource"),m.baseURL):null}var a,e,f,g,c,j,m=this;f=document;a=navigator;e=a.userAgent;if(m.isOpera=d.opera&&opera.buildNumber,m.isWebKit=/WebKit/.test(e),m.isChrome=m.isWebKit&&/Chrome/.test(e),m.isIE11=!(-1==e.indexOf("Trident/")||-1==e.indexOf("rv:")&&-1==a.appName.indexOf("Netscape")),m.isIE=!m.isWebKit&&!m.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(a.appName),m.isIE=m.isIE&&
/MSIE (\w+)\./.exec(e)[1],m.isIE=m.isIE||m.isIE11,m.isIE6=m.isIE&&/MSIE [56]/.test(e),m.isIE7=m.isIE&&/MSIE [7]/.test(e),m.isIE8=m.isIE&&/MSIE [8]/.test(e),m.isIE9=m.isIE&&/MSIE [9]/.test(e),m.isIE10=m.isIE&&/MSIE \d\d/.test(e),m.isIE10up=m.isIE&&/MSIE \d\d/.test(e)||m.isIE11,m.isGecko=!m.isWebKit&&!m.isIE11&&/Gecko/.test(e),m.isMac=-1!=e.indexOf("Mac"),m.isAir=/adobeair/i.test(e),m.isIDevice=/(iPad|iPhone)/.test(e),m.isIOS5=m.isIDevice&&534<=e.match(/AppleWebKit\/(\d*)/)[1],d.tinyMCEPreInit)return m.suffix=
tinyMCEPreInit.suffix,m.baseURL=tinyMCEPreInit.base,void(m.query=tinyMCEPreInit.query);m.suffix="";e=f.getElementsByTagName("base");for(a=0;a<e.length;a++)(j=e[a].href)&&(/^https?:\/\/[^\/]+$/.test(j)&&(j+="/"),g=j?j.match(/.*\//)[0]:"");g||(j=document.location,g=j.protocol+"//"+j.hostname+(j.port?":"+j.port:""));if(j=AJS.Meta.get("rte.src.url"))b(j);else{e=f.getElementsByTagName("script");for(a=0;a<e.length;a++)if(b(e[a].src))return;if(f=f.getElementsByTagName("head")[0]){e=f.getElementsByTagName("script");
for(a=0;a<e.length&&!b(e[a].src);a++);}}},is:function(b,a){return a?!!("array"==a&&b.hasOwnProperty&&b instanceof Array)||typeof b==a:void 0!==b},makeMap:function(b,a,e){b=b||[];"string"==typeof b&&(b=b.split(a||","));e=e||{};for(a=b.length;a--;)e[b[a]]={};return e},each:function(b,a,e){var f,g;if(!b)return 0;if(e=e||b,void 0!==b.length){f=0;for(g=b.length;f<g;f++)if(!1===a.call(e,b[f],f,b))return 0}else for(f in b)if(b.hasOwnProperty(f)&&!1===a.call(e,b[f],f,b))return 0;return 1},map:function(b,
a){var e=[];return i.each(b,function(b){e.push(a(b))}),e},grep:function(b,a){var e=[];return i.each(b,function(b){a&&!a(b)||e.push(b)}),e},inArray:function(b,a){var e,f;if(b){e=0;for(f=b.length;e<f;e++)if(b[e]===a)return e}return-1},extend:function(b,a){var e,f,g=arguments;e=1;for(f=g.length;e<f;e++)a=g[e],i.each(a,function(c,a){void 0!==c&&(b[a]=c)});return b},trim:function(b){return(b?""+b:"").replace(h,"")},create:function(b,a,e){var f,g,c,j,m,d=0;if(b=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(b),
c=b[3].match(/(^|\.)(\w+)$/i)[2],g=this.createNS(b[3].replace(/\.\w+$/,""),e),!g[c]){if("static"==b[2])return g[c]=a,void(this.onCreate&&this.onCreate(b[2],b[3],g[c]));a[c]||(a[c]=function(){},d=1);g[c]=a[c];this.extend(g[c].prototype,a);b[5]&&(f=this.resolve(b[5]).prototype,j=b[5].match(/\.(\w+)$/i)[1],m=g[c],d?g[c]=function(){return f[j].apply(this,arguments)}:g[c]=function(){return this.parent=f[j],m.apply(this,arguments)},g[c].prototype[c]=g[c],this.each(f,function(a,j){g[c].prototype[j]=f[j]}),
this.each(a,function(a,j){f[j]?g[c].prototype[j]=function(){return this.parent=f[j],a.apply(this,arguments)}:j!=c&&(g[c].prototype[j]=a)}));this.each(a["static"],function(a,j){g[c][j]=a});this.onCreate&&this.onCreate(b[2],b[3],g[c].prototype)}},walk:function(b,a,e,f){f=f||this;b&&(e&&(b=b[e]),i.each(b,function(b,c){return!1!==a.call(f,b,c,e)&&void i.walk(b,a,e,f)}))},createNS:function(b,a){var e,f,a=a||d,b=b.split(".");for(e=0;e<b.length;e++)f=b[e],a[f]||(a[f]={}),a=a[f];return a},resolve:function(b,
a){var e,f,a=a||d,b=b.split(".");e=0;for(f=b.length;e<f&&(a=a[b[e]],a);e++);return a},addUnload:function(b,a){function e(){var c,a,m=g.unloads;if(m){for(a in m)(c=m[a])&&c.func&&c.func.call(c.scope,1);d.detachEvent?(d.detachEvent("onbeforeunload",f),d.detachEvent("onunload",e)):d.removeEventListener&&d.removeEventListener("unload",e,!1);g.unloads=w=e=0;d.CollectGarbage&&CollectGarbage()}}function f(){function c(){a.detachEvent("onstop",c);e&&e();a=0}var a=document;"interactive"==a.readyState&&(a&&
a.attachEvent("onstop",c),d.setTimeout(function(){a&&a.detachEvent("onstop",c)},0))}var g=this;return b={func:b,scope:a||this},g.unloads?g.unloads.push(b):(d.attachEvent?(d.attachEvent("onunload",e),d.attachEvent("onbeforeunload",f)):d.addEventListener&&d.addEventListener("unload",e,!1),g.unloads=[b]),b},removeUnload:function(b){var a=this.unloads,e=null;return i.each(a,function(f,g){if(f&&f.func==b)return a.splice(g,1),e=b,!1}),e},explode:function(b,a){return b?i.map(b.split(a||","),i.trim):b},_addVer:function(b){var a;
return this.query?(a=(-1==b.indexOf("?")?"?":"&")+this.query,-1==b.indexOf("#")?b+a:b.replace("#",a+"#")):b},_replace:function(b,a,e){return l?e.replace(b,function(){var b,e=a,c=arguments;for(b=0;b<c.length-2;b++)e=void 0===c[b]?e.replace(RegExp("\\$"+b,"g"),""):e.replace(RegExp("\\$"+b,"g"),c[b]);return e}):e.replace(b,a)}};i._init();d.tinyMCE=d.tinymce=i}(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(d){this.scope=d||this;this.listeners=[]},add:function(d,h){return this.listeners.push({cb:d,scope:h||this.scope}),d},addToTop:function(d,h){return this.listeners.unshift({cb:d,scope:h||this.scope}),d},remove:function(d){var h=this.listeners,l=null;return tinymce.each(h,function(i,b){if(d==i.cb)return l=d,h.splice(b,1),!1}),l},dispatch:function(){var d,h,l,i=arguments,b=this.listeners;for(h=0;h<b.length&&(l=b[h],
d=l.cb.apply(l.scope,0<i.length?i:[l.scope]),!1!==d);h++);return d}});
(function(){var d=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(h,l){var i,b,a=this;return h=tinymce.trim(h),l=a.settings=l||{},/^([\w\-]+):([^\/]{2})/i.test(h)||/^\s*#/.test(h)?void(a.source=h):(0===h.indexOf("/")&&0!==h.indexOf("//")&&(h=(l.base_uri?l.base_uri.protocol||"http":"http")+"://mce_host"+h),/^[\w-]*:?\/\//.test(h)||(b=l.base_uri?l.base_uri.path:(new tinymce.util.URI(location.href)).directory,h=(l.base_uri&&l.base_uri.protocol||"http")+"://mce_host"+a.toAbsPath(b,h)),h=
h.replace(/@@/g,"(mce_at)"),h=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(h),d("source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),function(b,f){var g=h[f];g&&(g=g.replace(/\(mce_at\)/g,"@@"));a[b]=g}),void((i=l.base_uri)&&(a.protocol||(a.protocol=i.protocol),a.userInfo||(a.userInfo=
i.userInfo),a.port||"mce_host"!=a.host||(a.port=i.port),a.host&&"mce_host"!=a.host||(a.host=i.host),a.source="")))},setPath:function(d){d=/^(.*?)\/?(\w+)?$/.exec(d);this.path=d[0];this.directory=d[1];this.file=d[2];this.source="";this.getURI()},toRelative:function(d){var l;return"./"===d?d:(d=new tinymce.util.URI(d,{base_uri:this}),"mce_host"!=d.host&&this.host!=d.host&&d.host||this.port!=d.port||this.protocol!=d.protocol?d.getURI():(l=this.toRelPath(this.path,d.path),d.query&&(l+="?"+d.query),d.anchor&&
(l+="#"+d.anchor),l))},toAbsolute:function(d,l){d=new tinymce.util.URI(d,{base_uri:this});return d.getURI(this.host==d.host&&this.protocol==d.protocol?l:0)},toRelPath:function(d,l){var i,b,a,e=0,f="";if(d=d.substring(0,d.lastIndexOf("/")),d=d.split("/"),i=l.split("/"),d.length>=i.length){b=0;for(a=d.length;b<a;b++)if(b>=i.length||d[b]!=i[b]){e=b+1;break}}if(d.length<i.length){b=0;for(a=i.length;b<a;b++)if(b>=d.length||d[b]!=i[b]){e=b+1;break}}if(1==e)return l;b=0;for(a=d.length-(e-1);b<a;b++)f+="../";
b=e-1;for(a=i.length;b<a;b++)f+=b!=e-1?"/"+i[b]:i[b];return f},toAbsPath:function(h,l){var i,b,a,e=0,f=[];b=/\/$/.test(l)?"/":"";h=h.split("/");l=l.split("/");d(h,function(a){a&&f.push(a)});h=f;i=l.length-1;for(f=[];0<=i;i--)0!=l[i].length&&"."!=l[i]&&(".."!=l[i]?0<e?e--:f.push(l[i]):e++);return i=h.length-e,a=0>=i?f.reverse().join("/"):h.slice(0,i).join("/")+"/"+f.reverse().join("/"),0!==a.indexOf("/")&&(a="/"+a),b&&a.lastIndexOf("/")!==a.length-1&&(a+=b),a},getURI:function(d){var l;return this.source&&
!d||(l="",d||(this.protocol&&(l+=this.protocol+"://"),this.userInfo&&(l+=this.userInfo+"@"),this.host&&(l+=this.host),this.port&&(l+=":"+this.port)),this.path&&(l+=this.path),this.query&&(l+="?"+this.query),this.anchor&&(l+="#"+this.anchor),this.source=l),this.source}})})();
(function(){var d=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(h){var l,h=this.get(h);return h&&d(h.split("&"),function(d){d=d.split("=");l=l||{};l[unescape(d[0])]=unescape(d[1])}),l},setHash:function(h,l,i,b,a,e){var f="";d(l,function(a,c){f+=(f?"&":"")+escape(c)+"="+escape(a)});this.set(h,f,i,b,a,e)},get:function(d){var l,i,b=document.cookie,d=d+"=";if(b){if(i=b.indexOf("; "+d),-1==i){if(i=b.indexOf(d),0!=i)return null}else i+=2;return l=b.indexOf(";",i),-1==l&&(l=
b.length),unescape(b.substring(i+d.length,l))}},set:function(d,l,i,b,a,e){document.cookie=d+"="+escape(l)+(i?"; expires="+i.toGMTString():"")+(b?"; path="+escape(b):"")+(a?"; domain="+a:"")+(e?"; secure":"")},remove:function(d,l){var i=new Date;i.setTime(i.getTime()-1E3);this.set(d,"",i,l,i)}})})();
(function(){function d(h,l){var i,b,a;if(l=l||'"',null==h)return"null";if(a=typeof h,"string"==a)return b="\bb\tt\nn\ff\rr\"\"''\\\\",l+h.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,f){return'"'===l&&"'"===a?a:(i=b.indexOf(f),i+1?"\\"+b.charAt(i+1):(a=f.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+l;if("object"==a){if(h.hasOwnProperty&&h instanceof Array){i=0;for(b="[";i<h.length;i++)b+=(0<i?",":"")+d(h[i],l);return b+"]"}b="{";for(i in h)h.hasOwnProperty(i)&&(b+="function"!=
typeof h[i]?(1<b.length?","+l:l)+i+l+":"+d(h[i],l):"");return b+"}"}return""+h}tinymce.util.JSON={serialize:d,parse:function(d){try{return eval("("+d+")")}catch(l){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(d){function h(a){i=0;try{i=new ActiveXObject(a)}catch(b){}return i}function l(){!d.async||4==i.readyState||1E4<a++?(d.success&&1E4>a&&200==i.status?d.success.call(d.success_scope,""+i.responseText,i,d):d.error&&d.error.call(d.error_scope,1E4<a?"TIMED_OUT":"GENERAL",i,d),i=null):b.setTimeout(l,10)}var i,b=window,a=0;if(d.scope=d.scope||this,d.success_scope=d.success_scope||d.scope,d.error_scope=d.error_scope||d.scope,d.async=!1!==d.async,d.data=
d.data||"",i=b.XMLHttpRequest?new XMLHttpRequest:h("Microsoft.XMLHTTP")||h("Msxml2.XMLHTTP")){if(i.overrideMimeType&&i.overrideMimeType(d.content_type),i.open(d.type||(d.data?"POST":"GET"),d.url,d.async),d.content_type&&i.setRequestHeader("Content-Type",d.content_type),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(d.data),!d.async)return l();b.setTimeout(l,10)}}});
(function(){var d=tinymce.extend,h=tinymce.util.JSON,l=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(i){this.settings=d({},i);this.count=0},send:function(i){var b=i.error,a=i.success,i=d(this.settings,i);i.success=function(e,f){e=h.parse(e);"undefined"==typeof e&&(e={error:"JSON Parse error."});e.error?b.call(i.error_scope||i.scope,e.error,f):a.call(i.success_scope||i.scope,e.result)};i.error=function(a,f){b&&b.call(i.error_scope||i.scope,a,f)};i.data=h.serialize({id:i.id||
"c"+this.count++,method:i.method,params:i.params});i.content_type="application/json";l.send(i)},"static":{sendRPC:function(d){return(new tinymce.util.JSONRequest).send(d)}}})})();(function(d){d.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(d){return d.shiftKey||d.ctrlKey||d.altKey}}})(tinymce);
(function(d){function h(c){function a(j){var b=c.dom.create("body"),j=j.cloneContents();return b.appendChild(j),c.selection.serializer.serialize(b,{format:"html"})}c.onKeyDown.addToTop(function(b,e){var d=e.keyCode;if(d==g||d==f)if(d=b.selection.getRng(!0),!d.collapsed){var d=a(d),q=c.dom.createRng();q.selectNode(c.getBody());q=a(q);d===q&&(b.setContent("",{format:"raw"}),b.nodeChanged(),e.preventDefault())}})}function l(c){c.onKeyDown.add(function(c,a){if(a.keyCode===f&&c.selection.isCollapsed()&&
0===c.selection.getRng(!0).startOffset){var b=c.selection.getNode().previousSibling;b&&b.nodeName&&"hr"===b.nodeName.toLowerCase()&&(c.dom.remove(b),d.dom.Event.cancel(a))}})}function i(c){function a(c,j,b){var m=/^&nbsp;$|^<br>$/,b=b||j,b=b.parentNode?b.parentNode.childNodes||[]:[],e=!0,f=/TABLE|TH|TD/;return(e=!f.test(j.nodeName),e=e&&j.previousSibling?!f.test(j.previousSibling.nodeName):e,e&&j.nextSibling?!f.test(j.nextSibling.nodeName):e)&&(m.test(c)||1<b.length&&"BR"==b[0].nodeName)}function b(c){return c&&
c.innerHTML&&(c.innerHTML.replace(/\uFEFF|\u200B/g,"")||"&nbsp;")}c.onKeyDown.add(function(c,e){var q,k,s=c.selection.getNode();q=s.nextSibling;if(c.selection.isCollapsed()&&s!=c.dom.getRoot())if(e.keyCode===f)0===c.selection.getRng(!0).startOffset&&(q=s.previousSibling,k=b(q),q&&a(k,s,q)&&(c.dom.remove(q),d.dom.Event.cancel(e)));else if(e.keyCode==g&&!(k=b(s),1>=(s.parentNode?s.parentNode.childNodes||[]:[]).length||1<s.childNodes.length)&&q&&a(k,s,q))c.dom.remove(s),d.dom.Event.cancel(e),k=c.selection,
s=k.getRng(!0),c.focus(),q.focus(),s.setStart(q,0),s.setEnd(q,0),k.setRng(s)})}function b(c){c.onClick.add(function(c,a){a=a.target;/^(IMG|HR)$/.test(a.nodeName)&&c.selection.getSel().setBaseAndExtent(a,0,a,1);"A"==a.nodeName&&c.dom.hasClass(a,"mceItemAnchor")&&c.selection.select(a);c.nodeChanged()})}function b(c){c.onClick.add(function(c,a){a=a.target;/^(IMG|HR)$/.test(a.nodeName)&&c.selection.getSel().setBaseAndExtent(a,0,a,1);"A"==a.nodeName&&c.dom.hasClass(a,"mceItemAnchor")&&c.selection.select(a);
c.nodeChanged()})}function a(){document.body.setAttribute("role","application")}function a(){document.body.setAttribute("role","application")}var e=d.VK,f=e.BACKSPACE,g=e.DELETE;d.create("tinymce.util.Quirks",{Quirks:function(c){if(d.isWebKit){if(d.isChrome){var j=function(c,a){"[object Array]"===toString.call(c)?d.each(c,function(c){c?m.setAttrib(m.select(".non-editable",c),"contenteditable",a):m.setAttrib(d.DOM.select(".non-editable"),"contenteditable",a)}):m.setAttrib(m.select(".non-editable",
c),"contenteditable",a)},m=c.dom,o=c.selection;c.onKeyDown.add(function(c,a){var b,p,v,n=function(){var c=[],a=!1;return d.each(p,function(j){j?c=c.concat(m.select("span",j)):a||(c=c.concat(d.DOM.select("span")),a=!0)}),c};if(v=a.keyCode==g,(v||a.keyCode==f)&&!e.modifierPressed(a)){a.preventDefault();b=o.getRng();var q;p=(q=m.getParent(b.startContainer,m.isBlock),v?[q,m.getNext(q,m.isBlock)]:[m.getPrev(q,m.isBlock),q]);d.each(n(),function(c){c.setAttribute("data-mce-mark","1")});(b=!v&&p[1]&&AJS.EditorUtils.isCursorAtStartOf(p[1],
b)||v&&p[0]&&AJS.EditorUtils.isCursorAtEndOf(p[0],b))&&j(p[1],!0);c.getDoc().execCommand(v?"ForwardDelete":"Delete",!1,null);b&&j(p,!1);d.each(n(),function(c){c.getAttribute("data-mce-mark")?c.removeAttribute("data-mce-mark"):c.style.color?m.setAttrib(c,"style","color: "+c.style.color):m.remove(c,!0)})}})}h(c);c.dom.bind(c.getDoc(),"focusin",function(){setTimeout(function(){c&&!c.destroyed&&c.selection.setRng(c.selection.getRng())},0)});b(c);if(d.isIDevice){var p,q;c.dom.bind(c.getDoc(),"selectionchange",
function(){q&&(clearTimeout(q),q=0);q=window.setTimeout(function(){var a=c.selection.getRng();p&&d.dom.RangeUtils.compareRanges(a,p)||(c.nodeChanged(),p=a)},50)})}i(c)}d.isIE&&(l(c),h(c),a(c),c.onKeyDown.add(function(c,a){if(a.keyCode===e.ENTER&&!e.modifierPressed(a)){var j=c.selection.getNode();(c.dom.is(j,"h1,h2,h3,h4,h5,h6")||null!==c.dom.getParent(j,"h1,h2,h3,h4,h5,h6"))&&setTimeout(function(){var a=c.selection.getNode();c.dom.is(a,"p")&&(c.dom.setAttrib(a,"style",null),c.execCommand("mceCleanup"))},
0)}}),i(c));d.isGecko&&(l(c),i(c),Range.prototype.getClientRects||c.onMouseDown.add(function(c,a){if("HTML"===a.target.nodeName){var j=c.getBody();j.blur();setTimeout(function(){j.focus()},0)}}))}})})(tinymce);
(function(d){function h(c,a){var b,e,f,d={};if(c){c=c.split(",");a=a||10;for(b=0;b<c.length;b+=2)e=String.fromCharCode(parseInt(c[b],a)),i[e]||(f="&"+c[b+1]+";",d[e]=f,d[f]=e);return d}}var l,i,b,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,e=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,g=/&(#x|#)?([\w]+);/g,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",
148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};b={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};l=h("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);d.html=d.html||{};d.html.Entities={encodeRaw:function(c,b){return c.replace(b?a:e,function(c){return i[c]||c})},encodeAllRaw:function(c){return(""+c).replace(f,function(c){return i[c]||c})},encodeNumeric:function(c,b){return c.replace(b?a:e,function(c){return 1<c.length?"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";":i[c]||"&#"+c.charCodeAt(0)+";"})},encodeNamed:function(c,b,f){return f=f||l,c.replace(b?a:e,function(c){return i[c]||f[c]||c})},getEncodeFunc:function(c,b){function f(c,
j){return c.replace(j?a:e,function(c){return i[c]||b[c]||"&#"+c.charCodeAt(0)+";"||c})}function p(c,a){return g.encodeNamed(c,a,b)}var g=d.html.Entities;return b=h(b)||l,c=d.makeMap(c.replace(/\+/g,",")),c.named&&c.numeric?f:c.named?b?p:g.encodeNamed:c.numeric?g.encodeNumeric:g.encodeRaw},decode:function(a){return a.replace(g,function(a,j,e){if(j)a=(e=parseInt(e,2===j.length?16:10),65535<e?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):c[e]||String.fromCharCode(e));else{if(!(e=b[a]))if(!(e=
l[a]))var f,e=(f=document.createElement("div"),f.innerHTML=a,f.textContent||f.innerText||a);a=e}return a})}}})(tinymce);
tinymce.html.Styles=function(d,h){function l(c,a,b,e){function f(c){return c=parseInt(c).toString(16),1<c.length?c:"0"+c}return"#"+f(a)+f(b)+f(e)}var i,b,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,e=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,c={},d=d||{};b="\\\" \\' \\; \\: ; : ﻿".split(" ");for(i=0;i<b.length;i++)c[b[i]]="﻿"+i,c["﻿"+i]=b[i];return{toHex:function(c){return c.replace(a,
l)},parse:function(j){function b(c,a){var j,e,f,d;(j=v[c+"-top"+a])&&(e=v[c+"-right"+a],j==e&&(f=v[c+"-bottom"+a],e==f&&(d=v[c+"-left"+a],f==d&&(v[c+a]=d,delete v[c+"-top"+a],delete v[c+"-right"+a],delete v[c+"-bottom"+a],delete v[c+"-left"+a]))))}function o(c){var a,j=v[c];if(j&&!(0>j.indexOf(" "))){j=j.split(" ");for(a=j.length;a--;)if(j[a]!==j[0])return!1;return v[c]=j[0],!0}}function p(a){return i=!0,c[a]}function q(a,j){return i&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return c[a]})),j||(a=a.replace(/\\([\'\";:])/g,
"$1")),a}var k,s,r,i,v={},n=d.url_converter,h=d.url_converter_scope||this;if(j){for(j=j.replace(/\\[\"\';:\uFEFF]/g,p).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(c){return c.replace(/[;:]/g,p)});k=f.exec(j);)s=k[1].replace(g,"").toLowerCase(),r=k[2].replace(g,""),s&&0<r.length&&("font-weight"===s&&"700"===r?r="bold":"color"!==s&&"background-color"!==s||(r=r.toLowerCase()),r=r.replace(a,l),r=r.replace(e,function(c,a,j,b,e,f){return(e=e||f)?(e=q(e),"'"+e.replace(/\'/g,"\\'")+"'"):(a=q(a||j||b),n&&(a=
n.call(h,a,"style")),"url('"+a.replace(/\'/g,"\\'")+"')")}),v[s]=i?q(r,!0):r),f.lastIndex=k.index+k[0].length;b("border","");b("border","-width");b("border","-color");b("border","-style");b("padding","");b("margin","");o("border-width")&&o("border-style")&&o("border-color")&&(v.border=v["border-width"]+" "+v["border-style"]+" "+v["border-color"],delete v["border-width"],delete v["border-style"],delete v["border-color"]);"medium none"===v.border&&delete v.border}return v},serialize:function(c,a){function b(a){var e,
f,m,g;if(e=h.styles[a]){f=0;for(m=e.length;f<m;f++)a=e[f],g=c[a],void 0!==g&&0<g.length&&(d+=(0<d.length?" ":"")+a+": "+g+";")}}var e,f,d="";if(a&&h&&h.styles)b("*"),b(a);else for(e in c)f=c[e],void 0!==f&&0<f.length&&(d+=(0<d.length?" ":"")+e+": "+f+";");return d}}};
(function(d){function h(c,a){return c.split(a||",")}var l,i,b,a,e,f,g={},c={},j=d.makeMap,m=d.each;i="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";i=j(i,",",j(i.toUpperCase()));var o={Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",
ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",
E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},p=function(c){return c.replace(/[A-Z]+/g,function(c){return p(o[c])})},q,k={};for(q in o)o.hasOwnProperty(q)&&(o[q]=p(o[q]));g=(p("script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]").replace(/#/g,
"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(c,a,b,e){b=h(b,"|");k[a]={attributes:j(b),attributesOrder:b,children:j(e,"|",{"#comment":{}})}}),k);l=j("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls");b=j("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");a=d.extend(j("td,th,iframe,video,audio,object"),b);e=j("pre,script,style,textarea,code");f=j("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");
d.html.Schema=function(k){function p(c){var a,b,e,f,m,k,g,v,n,o,r,q,i,s,l,u,y,t,B=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,C=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,K=/[*?+]/;if(c){c=h(c);A["@"]&&(u=A["@"].attributes,y=A["@"].attributesOrder);a=0;for(b=c.length;a<b;a++)if(m=B.exec(c[a])){if(s=m[1],n=m[2],l=m[3],v=m[4],q={},i=[],k={attributes:q,attributesOrder:i},"#"===s&&(k.paddEmpty=!0),"-"===s&&(k.removeEmpty=!0),u){for(t in u)q[t]=u[t];i.push.apply(i,y)}if(v){v=h(v,"|");e=
0;for(f=v.length;e<f;e++)if(m=C.exec(v[e]))(g={},r=m[1],o=m[2].replace(/::/g,":"),s=m[3],m=m[4],"!"===r&&(k.attributesRequired=k.attributesRequired||[],k.attributesRequired.push(o),g.required=!0),"-"===r)?(delete q[o],i.splice(d.inArray(i,o),1)):(s&&("="===s&&(k.attributesDefault=k.attributesDefault||[],k.attributesDefault.push({name:o,value:m}),g.defaultValue=m),":"===s&&(k.attributesForced=k.attributesForced||[],k.attributesForced.push({name:o,value:m}),g.forcedValue=m),"<"===s&&(g.validValues=
j(m,"?"))),K.test(o)?(k.attributePatterns=k.attributePatterns||[],g.pattern=RegExp("^"+o.replace(/([?+*])/g,".$1")+"$"),k.attributePatterns.push(g)):(q[o]||i.push(o),q[o]=g))}u||"@"!=n||(u=q,y=i);l&&(k.outputName=n,A[l]=k);K.test(n)?(k.pattern=RegExp("^"+n.replace(/([?+*])/g,".$1")+"$"),x.push(k)):A[n]=k}}}function o(c){A={};x=[];p(c);m(g,function(c,a){B[a]=c.children})}function v(a){var j=/^(~)?(.+)$/;a&&m(h(a),function(a){var a=j.exec(a),b="~"===a[1],e=b?"span":"div",f=a[2];B[f]=B[e];c[f]=e;b||
(i[f]={});m(B,function(c){c[e]&&(c[f]=c[e])})})}function n(c){var a=/^([+\-]?)(\w+)\[([^\]]+)\]$/;c&&m(h(c),function(c){var b,j;(c=a.exec(c))&&(j=c[1],b=j?B[c[2]]:B[c[2]]={"#comment":{}},b=B[c[2]],m(h(c[3],"|"),function(c){"-"===j?delete b[c]:b[c]={}}))})}function q(c){var a,b=A[c];if(b)return b;for(a=x.length;a--;)if(b=x[a],b.pattern.test(c))return b}var t,C,A={},B={},x=[],k=k||{};!1===k.verify_html&&(k.valid_elements="*[*]");k.valid_styles&&(t={},m(k.valid_styles,function(c,a){t[a]=d.explode(c)}));
C=k.whitespace_elements?j(k.whitespace_elements):e;k.valid_elements?o(k.valid_elements):(m(g,function(c,a){A[a]={attributes:c.attributes,attributesOrder:c.attributesOrder};B[a]=c.children}),m(h("strong/b,em/i"),function(c){c=h(c,"/");A[c[1]].outputName=c[0]}),A.img.attributesDefault=[{name:"alt",value:""}],m(h("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(c){A[c].removeEmpty=!0}),m(h("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(c){A[c].paddEmpty=!0}));v(k.custom_elements);
n(k.valid_children);p(k.extended_valid_elements);n("+ol[ul|ol],+ul[ul|ol]");q("span")||p("span[!data-mce-type|*]");k.invalid_elements&&d.each(d.explode(k.invalid_elements),function(c){A[c]&&delete A[c]});this.children=B;this.styles=t;this.getBoolAttrs=function(){return l};this.getBlockElements=function(){return i};this.getShortEndedElements=function(){return b};this.getSelfClosingElements=function(){return f};this.getNonEmptyElements=function(){return a};this.getWhiteSpaceElements=function(){return C};
this.isValidChild=function(c,a){var b=B[c];return!(!b||!b[a])};this.getElementRule=q;this.getCustomElements=function(){return c};this.addValidElements=p;this.setValidElements=o;this.addCustomElements=v;this.addValidChildren=n};d.html.Schema.boolAttrMap=l;d.html.Schema.blockElementsMap=i})(tinymce);
(function(d){d.html.SaxParser=function(h,l){var i=this,b=function(){},h=h||{};i.schema=l=l||new d.html.Schema;!1!==h.fix_self_closing&&(h.fix_self_closing=!0);d.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(i[a]=h[a]||b)});i.parse=function(a){function b(c){var a,j;for(a=G.length;a--&&G[a].name!==c;);if(0<=a){for(j=G.length-1;j>=a;j--)c=G[j],c.valid&&D.end(c.name);G.length=a}}var f,g,c,j,m,o,p,q,k,i,r,u,v,n,y,t,C,A,B,x,z,H,E,F,I,L,J,M,N,D=this;r=0;var G=[],P=0,O=d.html.Entities.decode;
F=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g");I=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;L={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};k=l.getShortEndedElements();E=l.getSelfClosingElements();i=l.getBoolAttrs();u=h.validate;
q=h.remove_internals;M=h.fix_self_closing;N=d.isIE;for(C=/^:/;f=F.exec(a);){if(r<f.index&&D.text(O(a.substr(r,f.index-r))),g=f[6])g=g.toLowerCase(),N&&C.test(g)&&(g=g.substr(1)),b(g);else if(g=f[7]){if(g=g.toLowerCase(),N&&C.test(g)&&(g=g.substr(1)),r=g in k,M&&E[g]&&0<G.length&&G[G.length-1].name===g&&b(g),!u||(v=l.getElementRule(g))){if(n=!0,u&&(A=v.attributes,B=v.attributePatterns),(t=f[8])?(p=-1!==t.indexOf("data-mce-type"),p&&q&&(n=!1),j=[],j.map={},t.replace(I,function(c,a,b,e,f){var d;if(a=
a.toLowerCase(),b=a in i?a:O(b||e||f||""),u&&!p&&0!==a.indexOf("data-")){if(d=A[a],!d&&B){for(c=B.length;c--&&(d=B[c],!d.pattern.test(a)););-1===c&&(d=null)}if(!d||d.validValues&&!(b in d.validValues))return}j.map[a]=b;j.push({name:a,value:b})})):(j=[],j.map={}),u&&!p){if(x=v.attributesRequired,z=v.attributesDefault,H=v.attributesForced)for(c=H.length;c--;)y=H[c],o=y.name,J=y.value,"{$uid}"===J&&(J="mce_"+P++),j.map[o]=J,j.push({name:o,value:J});if(z)for(c=z.length;c--;)y=z[c],o=y.name,o in j.map||
(J=y.value,"{$uid}"===J&&(J="mce_"+P++),j.map[o]=J,j.push({name:o,value:J}));if(x){for(c=x.length;c--&&!(x[c]in j.map););-1===c&&(n=!1)}j.map["data-mce-bogus"]&&(n=!1)}n&&D.start(g,j,r)}else n=!1;if(c=L[g]){c.lastIndex=r=f.index+f[0].length;(f=c.exec(a))?(n&&(m=a.substr(r,f.index-r)),r=f.index+f[0].length):(m=a.substr(r),r=a.length);n&&0<m.length&&D.text(m,!0);n&&D.end(g);F.lastIndex=r;continue}r||(t&&t.indexOf("/")==t.length-1?n&&D.end(g):G.push({name:g,valid:n}))}else(g=f[1])?D.comment(g):(g=f[2])?
D.cdata(g):(g=f[3])?D.doctype(g):(g=f[4])&&D.pi(g,f[5]);r=f.index+f[0].length}r<a.length&&D.text(O(a.substr(r)));for(c=G.length-1;0<=c;c--)g=G[c],g.valid&&D.end(g.name)}}})(tinymce);
(function(d){function h(a,b,f){var d;d=f?"lastChild":"firstChild";f=f?"prev":"next";if(a[d])return a[d];if(a!==b){if(d=a[f])return d;for(a=a.parent;a&&a!==b;a=a.parent)if(d=a[f])return d}}function l(a,b){this.name=a;this.type=b;1===b&&(this.attributes=[],this.attributes.map={})}var i=/^[ \t\r\n]*$/,b={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};d.extend(l.prototype,{replace:function(a){return a.parent&&a.remove(),this.insert(a,this),this.remove(),this},attr:function(a,
b){var f,d;if("string"!=typeof a){for(d in a)this.attr(d,a[d]);return this}if(f=this.attributes){if(void 0!==b){if(null===b){if(a in f.map){delete f.map[a];for(d=f.length;d--;)if(f[d].name===a)return f.splice(d,1),this}return this}if(a in f.map)for(d=f.length;d--;){if(f[d].name===a){f[d].value=b;break}}else f.push({name:a,value:b});return f.map[a]=b,this}return f.map[a]}},clone:function(){var a,b,f,d,c,j=new l(this.name,this.type);if(f=this.attributes){c=[];c.map={};a=0;for(b=f.length;a<b;a++)d=f[a],
"id"!==d.name&&(c[c.length]={name:d.name,value:d.value},c.map[d.name]=d.value);j.attributes=c}return j.value=this.value,j.shortEnded=this.shortEnded,j},wrap:function(a){return this.parent.insert(a,this),a.append(this),this},unwrap:function(){var a,b;for(a=this.firstChild;a;)b=a.next,this.insert(a,this,!0),a=b;this.remove()},remove:function(){var a=this.parent,b=this.next,d=this.prev;return a&&(a.firstChild===this?(a.firstChild=b,b&&(b.prev=null)):d.next=b,a.lastChild===this?(a.lastChild=d,d&&(d.next=
null)):b.prev=d,this.parent=this.next=this.prev=null),this},append:function(a){var b;return a.parent&&a.remove(),b=this.lastChild,b?(b.next=a,a.prev=b,this.lastChild=a):this.lastChild=this.firstChild=a,a.parent=this,a},insert:function(a,b,d){var g;return a.parent&&a.remove(),g=b.parent||this,d?(b===g.firstChild?g.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===g.lastChild?g.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=g,a},getAll:function(a){var b,d=[];for(b=
this.firstChild;b;b=h(b,this))b.name===a&&d.push(b);return d},empty:function(){var a,b,d;if(this.firstChild){a=[];for(d=this.firstChild;d;d=h(d,this))a.push(d);for(b=a.length;b--;)d=a[b],d.parent=d.firstChild=d.lastChild=d.next=d.prev=null}return this.firstChild=this.lastChild=null,this},isEmpty:function(a){var a=a||new d.html.Schema,b,f=this.firstChild,g=a.getNonEmptyElements(),c=a.getWhiteSpaceElements();if(f){do{if(1===f.type){if(f.attributes.map["data-mce-bogus"])continue;if(g[f.name])return!1;
for(a=f.attributes.length;a--;)if(b=f.attributes[a].name,"name"===b||0===b.indexOf("data-"))return!1}if(8===f.type||3===f.type&&(!i.test(f.value)||c[this.name]&&f.value&&0<f.value.length&&i.test(f.value)))return!1}while(f=h(f,this))}return!0},walk:function(a){return h(this,null,a)}});d.extend(l,{create:function(a,d){var f,g;if(f=new l(a,b[a]||1),d)for(g in d)f.attr(g,d[g]);return f}});d.html.Node=l})(tinymce);
(function(d){var h=d.html.Node;d.html.DomParser=function(l,i){var b=this,a={},e=[],f={},g={},l=l||{};l.validate=!("validate"in l)||l.validate;l.root_name=l.root_name||"body";b.schema=i=i||new d.html.Schema;b.filterNode=function(c){var b,d,o;d in a&&(o=f[d],o?o.push(c):f[d]=[c]);for(b=e.length;b--;)d=e[b].name,d in c.attributes.map&&(o=g[d],o?o.push(c):g[d]=[c]);return c};b.addNodeFilter=function(c,b){d.each(d.explode(c),function(c){var d=a[c];d||(a[c]=d=[]);d.push(b)})};b.addAttributeFilter=function(c,
a){d.each(d.explode(c),function(c){var b;for(b=0;b<e.length;b++)if(e[b].name===c)return void e[b].callbacks.push(a);e.push({name:c,callbacks:[a]})})};b.parse=function(c,j){function m(c,b){var j,d=new h(c,b);return c in a&&(j=f[c],j?j.push(d):f[c]=[d]),d}function o(c){for(var a,b,c=c.prev;c&&3===c.type;)a=c.value.replace(B,""),0<a.length?(c.value=a,c=c.prev):(b=c.prev,c.remove(),c=b)}var p,q,k,s,r,u,v,n,y,t,C,A,B,x,z,H,E=[],j=j||{};f={};g={};C=d.extend(d.makeMap("script,style,head,html,body,title,meta,param"),
i.getBlockElements());i.getNonEmptyElements();H=i.children;t=l.validate;s="forced_root_block"in j?j.forced_root_block:l.forced_root_block;z=i.getWhiteSpaceElements();A=/^[ \t\r\n]+/;B=/[ \t\r\n]+$/;x=/[ \t\r\n]+/g;p=new d.html.SaxParser({validate:t,fix_self_closing:!t,cdata:function(c){k.append(m("#cdata",4)).value=c},text:function(c,a){var b;z[k.name]||(c=c.replace(x," "),k.lastChild&&C[k.lastChild.name]&&(c=c.replace(A,"")));0!==c.length&&(b=m("#text",3),b.raw=!!a,k.append(b).value=c)},comment:function(c){k.append(m("#comment",
8)).value=c},pi:function(c,a){k.append(m(c,7)).value=a;o(k)},doctype:function(c){k.append(m("#doctype",10)).value=c;o(k)},start:function(c,a,b){var j,d,f;if(j=t?i.getElementRule(c):{}){j=m(j.outputName||c,1);j.attributes=a;j.shortEnded=b;k.append(j);(d=H[k.name])&&H[j.name]&&!d[j.name]&&E.push(j);for(d=e.length;d--;)f=e[d].name,f in a.map&&(y=g[f],y?y.push(j):g[f]=[j]);C[c]&&o(j);b||(k=j)}},end:function(c){var a,b,j,f;if(a=t?i.getElementRule(c):{}){if(C[c]&&!z[k.name]){for(c=k.firstChild;c&&3===c.type;)b=
c.value.replace(A,""),0<b.length?(c.value=b,c=c.next):(j=c.next,c.remove(),c=j);for(c=k.lastChild;c&&3===c.type;)b=c.value.replace(B,""),0<b.length?(c.value=b,c=c.prev):(j=c.prev,c.remove(),c=j)}if((a.removeEmpty||a.paddEmpty)&&k.isEmpty(i))if(a.paddEmpty)k.empty().append(new d.html.Node("br",1)).shortEnded=!0;else if(!k.attributes.map.name)return f=k.parent,k.empty().remove(),void(k=f);k=k.parent}}},i);q=k=new h(j.context||l.root_name,11);p.parse(c);if(t&&E.length)if(j.context)j.invalid=!0;else{var F,
I,L,J,M,N,D,G;N=d.makeMap("tr,td,th,tbody,thead,tfoot,table");i.getNonEmptyElements();for(p=0;p<E.length;p++)if(u=E[p],u.parent){I=[u];for(F=u.parent;F&&!i.isValidChild(F.name,u.name)&&!N[F.name];F=F.parent)I.push(F);if(F&&1<I.length){I.reverse();L=J=b.filterNode(I[0].clone());for(M=0;M<I.length-1;M++){i.isValidChild(J.name,I[M].name)?(v=b.filterNode(I[M].clone()),J.append(v)):v=J;for(J=I[M].firstChild;J&&J!=I[M+1];)G=J.next,v.append(J),J=G;J=v}L.isEmpty(i)?F.insert(u,I[0],!0):(F.insert(L,I[0],!0),
F.insert(u,L));F=I[0];(F.isEmpty(i)||F.firstChild===F.lastChild&&"br"===F.firstChild.name)&&F.empty().remove()}else u.parent&&("li"===u.name?(D=u.prev,D&&("ul"===D.name||"ul"===D.name))?D.append(u):(D=u.next,D&&("ul"===D.name||"ul"===D.name))?D.insert(u,D.firstChild,!0):u.wrap(b.filterNode(new h("ul",1))):i.isValidChild(u.parent.name,"div")&&i.isValidChild("div",u.name)?u.wrap(b.filterNode(new h("div",1))):"style"===u.name||"script"===u.name?u.empty().remove():u.unwrap())}}if(s&&"body"==q.name)for(v=
q.firstChild;v;)u=v.next,3==v.type||1==v.type&&"p"!==v.name&&!C[v.name]&&!v.attr("data-mce-type")?r?r.append(v):(r=m(s,1),q.insert(r,v),r.append(v)):r=null,v=u;if(!j.invalid){for(n in f){y=a[n];s=f[n];for(v=s.length;v--;)s[v].parent||s.splice(v,1);r=0;for(u=y.length;r<u;r++)y[r](s,n,j)}r=0;for(u=e.length;r<u;r++)if(y=e[r],y.name in g){s=g[y.name];for(v=s.length;v--;)s[v].parent||s.splice(v,1);v=0;for(n=y.callbacks.length;v<n;v++)y.callbacks[v](s,y.name,j)}}return q};l.remove_trailing_brs&&b.addNodeFilter("br",
function(c){var a,b,f,e,g,k=c.length,s=i.getBlockElements();i.getNonEmptyElements();s.body=1;for(a=0;a<k;a++)if(b=c[a],f=b.parent,s[b.parent.name]&&b===f.lastChild){for(e=b.prev;e;){if(g=e.name,"span"!==g||"bookmark"!==e.attr("data-mce-type")){if("br"!==g)break;if("br"===g){b=null;break}}e=e.prev}b&&(b.remove(),f.isEmpty(i)&&(elementRule=i.getElementRule(f.name),elementRule&&(elementRule.removeEmpty?f.remove():elementRule.paddEmpty&&(f.empty().append(new d.html.Node("br",1)).shortEnded=!0))))}})}})(tinymce);
tinymce.html.Writer=function(d){var h,l,i,b,a,e=[];return d=d||{},h=d.indent,l=tinymce.makeMap(d.indent_before||""),i=tinymce.makeMap(d.indent_after||""),b=tinymce.html.Entities.getEncodeFunc(d.entity_encoding||"raw",d.entities),a="html"==d.element_format,{start:function(d,g,c){var j,m,o,p;if(h&&l[d]&&0<e.length&&(p=e[e.length-1],0<p.length&&"\n"!==p&&e.push("\n")),e.push("<",d),g){j=0;for(m=g.length;j<m;j++)o=g[j],e.push(" ",o.name,'="',b(o.value,!0),'"')}!c||a?e[e.length]=">":e[e.length]=" />";
c&&h&&i[d]&&0<e.length&&(p=e[e.length-1],0<p.length&&"\n"!==p&&e.push("\n"))},end:function(a){var b;e.push("</",a,">");h&&i[a]&&0<e.length&&(b=e[e.length-1],0<b.length&&"\n"!==b&&e.push("\n"))},text:function(a,d){0<a.length&&(e[e.length]=d?a:b(a))},cdata:function(a){e.push("<![CDATA[",a,"]]\>")},comment:function(a){e.push("<\!--",a,"--\>")},pi:function(a,b){b?e.push("<?",a," ",b,"?>"):e.push("<?",a,"?>");h&&e.push("\n")},doctype:function(a){e.push("<!DOCTYPE",a,">",h?"\n":"")},reset:function(){e.length=
0},getContent:function(){return e.join("").replace(/\n$/,"")}}};
(function(d){d.html.Serializer=function(h,l){var i=new d.html.Writer(h),h=h||{};h.validate=!("validate"in h)||h.validate;this.schema=l=l||new d.html.Schema;this.writer=i;this.serialize=function(b){function a(b){var c,j,m,o,p,q,k,s,r;if(c=d[b.type])c(b);else{if(c=b.name,j=b.shortEnded,m=b.attributes,f&&m&&1<m.length){q=[];q.map={};r=l.getElementRule(b.name);k=0;for(s=r.attributesOrder.length;k<s;k++)o=r.attributesOrder[k],o in m.map&&(p=m.map[o],q.map[o]=p,q.push({name:o,value:p}));k=0;for(s=m.length;k<
s;k++)o=m[k].name,o in q.map||(p=m.map[o],q.map[o]=p,q.push({name:o,value:p}));m=q}if(i.start(b.name,m,j),!j){if(b=b.firstChild){do a(b);while(b=b.next)}i.end(c)}}}var d,f;return f=h.validate,d={3:function(a){i.text(a.value,a.raw)},8:function(a){i.comment(a.value)},7:function(a){i.pi(a.name,a.value)},10:function(a){i.doctype(a.value)},4:function(a){i.cdata(a.value)},11:function(b){if(b=b.firstChild){do a(b);while(b=b.next)}}},i.reset(),1!=b.type||h.inner?d[11](b):a(b),i.getContent()}}})(tinymce);
(function(d){var h=d.each,l=d.is,i=d.isWebKit,b=d.isIE,a=d.html.Entities,e=/^([a-z0-9],?)+$/i,f=d.html.Schema.blockElementsMap,g=/^[ \t\r\n]*$/;d.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(c,
a){var f;if(this.doc=c,this.win=window,this.files={},this.cssFlicker=!1,this.counter=0,this.stdMode=!d.isIE||8<=c.documentMode,this.boxModel=!d.isIE||"CSS1Compat"==c.compatMode||this.stdMode,this.hasOuterHTML="outerHTML"in c.createElement("a"),this.settings=a=d.extend({keep_values:!1,hex_colors:1},a),this.schema=a.schema,this.styles=new d.html.Styles({url_converter:a.url_converter,url_converter_scope:a.url_converter_scope},a.schema),d.isIE6)try{c.execCommand("BackgroundImageCache",!1,!0)}catch(e){this.cssFlicker=
!0}if(b&&a.schema)for(f in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){c.createElement(a)}),a.schema.getCustomElements())c.createElement(f);d.addUnload(this.destroy,this)},getRoot:function(){var c=this.settings;return c&&this.get(c.root_element)||this.doc.body},getViewPort:function(c){var a,b;return c=c?c:this.win,a=c.document,b=this.boxModel?a.documentElement:a.body,{x:c.pageXOffset||
b.scrollLeft,y:c.pageYOffset||b.scrollTop,w:c.innerWidth||b.clientWidth,h:c.innerHeight||b.clientHeight}},getRect:function(c){var a,b;return c=this.get(c),a=this.getPos(c),b=this.getSize(c),{x:a.x,y:a.y,w:b.w,h:b.h}},getSize:function(c){var a,b;return c=this.get(c),a=this.getStyle(c,"width"),b=this.getStyle(c,"height"),-1===a.indexOf("px")&&(a=0),-1===b.indexOf("px")&&(b=0),{w:parseInt(a)||c.offsetWidth||c.clientWidth,h:parseInt(b)||c.offsetHeight||c.clientHeight}},getParent:function(c,a,b){return this.getParents(c,
a,b,!1)},getParents:function(c,a,b,d){var f,e=this,k=e.settings,g=[],c=e.get(c),d=void 0===d;k.strict_root&&(b=b||e.getRoot());for(l(a,"string")&&(f=a,a="*"===a?function(c){return 1==c.nodeType}:function(c){return e.is(c,f)});c&&c!=b&&c.nodeType&&9!==c.nodeType;){if(!a||a(c)){if(!d)return c;g.push(c)}c=c.parentNode}return d?g:null},get:function(c){var a;return c&&this.doc&&"string"==typeof c&&(a=c,c=this.doc.getElementById(c),c&&c.id!==a)?this.doc.getElementsByName(a)[1]:c},getNext:function(c,a){return this._findSib(c,
a,"nextSibling")},getPrev:function(c,a){return this._findSib(c,a,"previousSibling")},select:function(c,a){return d.dom.Sizzle(c,this.get(a)||this.get(this.settings.root_element)||this.doc,[])},is:function(c,a){var b;if(void 0===c.length){if("*"===a)return 1==c.nodeType;if(e.test(a)){a=a.toLowerCase().split(/,/);c=c.nodeName.toLowerCase();for(b=a.length-1;0<=b;b--)if(a[b]==c)return!0;return!1}}return 0<d.dom.Sizzle.matches(a,c.nodeType?[c]:c).length},add:function(c,a,b,d,f){var e=this;return this.run(c,
function(c){var g;return g=l(a,"string")?e.doc.createElement(a):a,e.setAttribs(g,b),d&&(d.nodeType?g.appendChild(d):e.setHTML(g,d)),f?g:c.appendChild(g)})},create:function(c,a,b){return this.add(this.doc.createElement(c),c,a,b,1)},createHTML:function(c,a,b){var d,f;f="<"+c;for(d in a)a.hasOwnProperty(d)&&(f+=" "+d+'="'+this.encode(a[d])+'"');return"undefined"!=typeof b?f+">"+b+"</"+c+">":f+" />"},remove:function(c,a){return this.run(c,function(c){var b,f=c.parentNode;if(!f)return null;if(a)for(;b=
c.firstChild;)!d.isIE||3!==b.nodeType||b.nodeValue?f.insertBefore(b,c):c.removeChild(b);return f.removeChild(c)})},setStyle:function(c,a,f){var e=this;return e.run(c,function(p){var g;switch(g=p.style,a=a.replace(/-(\D)/g,function(c,a){return a.toUpperCase()}),e.pixelStyles.test(a)&&(d.is(f,"number")||/^[\-0-9\.]+$/.test(f))&&(f+="px"),a){case "opacity":b&&(g.filter=""===f?"":"alpha(opacity="+100*f+")",c.currentStyle&&c.currentStyle.hasLayout||(g.display="inline-block"));g[a]=g["-moz-opacity"]=g["-khtml-opacity"]=
f||"";break;case "float":b?g.styleFloat=f:g.cssFloat=f;break;default:g[a]=f||""}e.settings.update_styles&&e.setAttrib(p,"data-mce-style")})},getStyle:function(c,a,d){if(c=this.get(c)){if(this.doc.defaultView&&d){a=a.replace(/[A-Z]/g,function(c){return"-"+c});try{return this.doc.defaultView.getComputedStyle(c,null).getPropertyValue(a)}catch(f){return null}}return a=a.replace(/-(\D)/g,function(c,a){return a.toUpperCase()}),"float"==a&&(a=b?"styleFloat":"cssFloat"),c.currentStyle&&d?c.currentStyle[a]:
c.style?c.style[a]:void 0}},setStyles:function(c,a){var b,d=this,f=d.settings;b=f.update_styles;f.update_styles=0;h(a,function(a,b){d.setStyle(c,b,a)});f.update_styles=b;f.update_styles&&d.setAttrib(c,f.cssText)},removeAllAttribs:function(c){return this.run(c,function(c){var a,b=c.attributes;for(a=b.length-1;0<=a;a--)c.removeAttributeNode(b.item(a))})},setAttrib:function(c,a,b){var d=this;if(c&&a)return d.settings.strict&&(a=a.toLowerCase()),this.run(c,function(c){var f=d.settings,e=c.getAttribute(a);
if(null!==b)switch(a){case "style":if(!l(b,"string"))return void h(b,function(a,b){d.setStyle(c,b,a)});f.keep_values&&(b&&!d._isRes(b)?c.setAttribute("data-mce-style",b,2):c.removeAttribute("data-mce-style",2));c.style.cssText=b;break;case "class":c.className=b||"";break;case "src":case "href":f.keep_values&&(f.url_converter&&(b=f.url_converter.call(f.url_converter_scope||d,b,a,c)),d.setAttrib(c,"data-mce-"+a,b,2));break;case "shape":c.setAttribute("data-mce-style",b)}if(l(b)&&null!==b&&0!==b.length?
c.setAttribute(a,""+b,2):c.removeAttribute(a,2),tinyMCE.activeEditor&&e!=b)f=tinyMCE.activeEditor,f.onSetAttrib.dispatch(f,c,a,b)})},setAttribs:function(c,a){var b=this;return this.run(c,function(c){h(a,function(a,d){b.setAttrib(c,d,a)})})},getAttrib:function(c,a,f){var e;if(c=this.get(c),!c||1!==c.nodeType)return void 0!==f&&f;if(l(f)||(f=""),/^(src|href|style|coords|shape)$/.test(a)&&(e=c.getAttribute("data-mce-"+a)))return e;if(b&&this.props[a]&&(e=c[this.props[a]],e=e&&e.nodeValue?e.nodeValue:
e),e||(e=c.getAttribute(a,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(a))return!0===c[this.props[a]]&&""===e?a:e?a:"";if("FORM"===c.nodeName&&c.getAttributeNode(a))return c.getAttributeNode(a).nodeValue;if("style"===a&&(e=e||c.style.cssText,e&&(e=this.serializeStyle(this.parseStyle(e),c.nodeName),this.settings.keep_values&&!this._isRes(e)&&c.setAttribute("data-mce-style",e))),i&&"class"===a&&e&&(e=e.replace(/(apple|webkit)\-[a-z\-]+/gi,
"")),b)switch(a){case "rowspan":case "colspan":1===e&&(e="");break;case "size":"+0"!==e&&20!==e&&0!==e||(e="");break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":0===e&&(e="");break;case "hspace":-1===e&&(e="");break;case "maxlength":case "tabindex":32768!==e&&2147483647!==e&&"32768"!==e||(e="");break;case "multiple":case "compact":case "noshade":case "nowrap":return 65535===e?a:f;case "shape":e=e.toLowerCase();break;default:0===a.indexOf("on")&&e&&(e=d._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,
"$1",""+e))}return void 0!==e&&null!==e&&""!==e?""+e:f},getPos:function(c,a){var b,d=0,e=0,f=this.doc;if(c=this.get(c),a=a||f.body,c){if(c.getBoundingClientRect)return c=c.getBoundingClientRect(),b=this.boxModel?f.documentElement:f.body,d=c.left+(f.documentElement.scrollLeft||f.body.scrollLeft)-b.clientTop,e=c.top+(f.documentElement.scrollTop||f.body.scrollTop)-b.clientLeft,{x:d,y:e};for(b=c;b&&b!=a&&b.nodeType;)d+=b.offsetLeft||0,e+=b.offsetTop||0,b=b.offsetParent;for(b=c.parentNode;b&&b!=a&&b.nodeType;)d-=
b.scrollLeft||0,e-=b.scrollTop||0,b=b.parentNode}return{x:d,y:e}},parseStyle:function(c){return this.styles.parse(c)},serializeStyle:function(c,a){return this.styles.serialize(c,a)},loadCSS:function(c){var a,e=this,f=e.doc;c||(c="");a=e.select("head")[0];h(c.split(","),function(c){var g;e.files[c]||(e.files[c]=!0,g=e.create("link",{rel:"stylesheet",href:d._addVer(c)}),b&&f.documentMode&&f.recalc&&(g.onload=function(){f.recalc&&f.recalc();g.onload=null}),a.appendChild(g))})},addClass:function(c,a){return this.run(c,
function(c){var b;return a?this.hasClass(c,a)?c.className:(b=this.removeClass(c,a),c.className=(""!=b?b+" ":"")+a):0})},removeClass:function(c,a){var b,e=this;return e.run(c,function(c){var f;return e.hasClass(c,a)?(b||(b=RegExp("(^|\\s+)"+a+"(\\s+|$)","g")),f=c.className.replace(b," "),f=d.trim(" "!=f?f:""),c.className=f,f||(c.removeAttribute("class"),c.removeAttribute("className")),f):c.className})},hasClass:function(c,a){return c=this.get(c),!(!c||!a)&&-1!==(" "+c.className+" ").indexOf(" "+a+
" ")},show:function(c){return this.setStyle(c,"display","block")},hide:function(c){return this.setStyle(c,"display","none")},isHidden:function(c){return c=this.get(c),!c||"none"==c.style.display||"none"==this.getStyle(c,"display")},uniqueId:function(c){return(c?c:"mce_")+this.counter++},setHTML:function(c,a){var d=this;return d.run(c,function(c){if(b){for(;c.firstChild;)c.removeChild(c.firstChild);try{c.innerHTML="<br />"+a,c.removeChild(c.firstChild)}catch(e){c=d.create("div"),c.innerHTML="<br />"+
a,h(c.childNodes,function(a,b){b&&c.appendChild(a)})}}else c.innerHTML=a;return a})},getOuterHTML:function(c){var a;return(c=this.get(c))?1===c.nodeType&&this.hasOuterHTML?c.outerHTML:(a=(c.ownerDocument||this.doc).createElement("body"),a.appendChild(c.cloneNode(!0)),a.innerHTML):null},setOuterHTML:function(c,a,d){function e(c,a,b){b=b.createElement("body");b.innerHTML=a;for(a=b.lastChild;a;)f.insertAfter(a.cloneNode(!0),c),a=a.previousSibling;f.remove(c)}var f=this;return this.run(c,function(c){if(c=
f.get(c),1==c.nodeType)if(d=d||c.ownerDocument||f.doc,b)try{b&&1==c.nodeType?c.outerHTML=a:e(c,a,d)}catch(k){e(c,a,d)}else e(c,a,d)})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(c,a){return a=this.get(a),this.run(c,function(c){var b,d;return b=a.parentNode,d=a.nextSibling,d?b.insertBefore(c,d):b.appendChild(c),c})},isBlock:function(c){var a=c.nodeType;return a?!(1!==a||!f[c.nodeName]):!!f[c]},replace:function(c,a,b){return l(a,"array")&&(c=c.cloneNode(!0)),this.run(a,function(a){return b&&
h(d.grep(a.childNodes),function(a){c.appendChild(a)}),a.parentNode.replaceChild(c,a)})},rename:function(c,a){var b,d=this;return c.nodeName!=a.toUpperCase()&&(b=d.create(a),h(d.getAttribs(c),function(a){d.setAttrib(b,a.nodeName,d.getAttrib(c,a.nodeName))}),d.replace(b,c,1)),b||c},findCommonAncestor:function(c,a){for(var b,d=c;d;){for(b=a;b&&d!=b;)b=b.parentNode;if(d==b)break;d=d.parentNode}return!d&&c.ownerDocument?c.ownerDocument.documentElement:d},toHex:function(c){function a(c){return c=parseInt(c).toString(16),
1<c.length?c:"0"+c}var b=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(c);return b?c="#"+a(b[1])+a(b[2])+a(b[3]):c},getClasses:function(){function c(k){h(k.imports,function(a){c(a)});h(k.cssRules||k.rules,function(k){switch(k.type||1){case 1:k.selectorText&&h(k.selectorText.split(","),function(c){c=c.replace(/^\s*|\s*$|^\s\./g,"");!/\.mce/.test(c)&&/\.[\w\-]+$/.test(c)&&(a=c,c=d._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",c),f&&!(c=f(c,a))||e[c]||(b.push({"class":c}),e[c]=
1))});break;case 3:c(k.styleSheet)}})}var a,b=[],e={},f=this.settings.class_filter;if(this.classes)return this.classes;try{h(this.doc.styleSheets,c)}catch(g){}return 0<b.length&&(this.classes=b),b},run:function(c,a,b){var d,e=this;return e.doc&&"string"==typeof c&&(c=e.get(c)),!!c&&(b=b||this,c.nodeType||!c.length&&0!==c.length?a.call(b,c):(d=[],h(c,function(c,f){c&&("string"==typeof c&&(c=e.doc.getElementById(c)),d.push(a.call(b,c,f)))}),d))},getAttribs:function(c){var a;return c=this.get(c),c?b?
(a=[],"OBJECT"==c.nodeName?c.attributes:("OPTION"===c.nodeName&&this.getAttrib(c,"selected")&&a.push({specified:1,nodeName:"selected"}),c.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(c){a.push({specified:1,nodeName:c})}),a)):c.attributes:[]},isEmpty:function(c,a){var b,e,f,i,k;if(c=c.firstChild){f=new d.dom.TreeWalker(c);a=a||this.schema?this.schema.getNonEmptyElements():null;do{if(e=c.nodeType,1===e){if(c.getAttribute("data-mce-bogus"))continue;
if(i=c.nodeName.toLowerCase(),a&&a[i]){if(k=c.parentNode,"br"===i&&this.isBlock(k)&&k.firstChild===c&&k.lastChild===c)continue;return!1}this.getAttribs(c);for(b=c.attributes.length;b--;)if(i=c.attributes[b].nodeName.toLowerCase(),"name"===i||"data-mce-bookmark"===i||"contenteditable"===i&&"true"===c.attributes[b].value)return!1}if(8==e||3===e&&!g.test(c.nodeValue))return!1}while(c=f.next())}return!0},destroy:function(c){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;
c||d.removeUnload(this.destroy)},createRng:function(){var c=this.doc;return c.createRange?c.createRange():new d.dom.Range(this)},nodeIndex:function(c,a){var b,d,e=0;if(c){b=c.nodeType;for(c=c.previousSibling;c;c=c.previousSibling)d=c.nodeType,(!a||3!=d||d!=b&&c.nodeValue.length)&&(e++,b=d)}return e},split:function(c,a,b){function e(c){var a,b=c.childNodes,f=c.nodeType;if(1!=f||"bookmark"!=c.getAttribute("data-mce-type")){for(a=b.length-1;0<=a;a--)e(b[a]);if(9!=f){if(3==f&&0<c.nodeValue.length){a=
d.trim(c.nodeValue).length;if(!(b=!i.isBlock(c.parentNode)))if(!(b=0<a)){if(a=0==a)a=c.nextSibling&&"SPAN"==c.nextSibling.nodeName,a=c.previousSibling&&"SPAN"==c.previousSibling.nodeName&&a;b=a}if(b)return}else if(1==f&&(b=c.childNodes,1==b.length&&b[0]&&1==b[0].nodeType&&"bookmark"==b[0].getAttribute("data-mce-type")&&c.parentNode.insertBefore(b[0],c),b.length||/^(br|hr|input|img)$/i.test(c.nodeName)))return;i.remove(c)}return c}}var f,g,k,i=this,r=i.createRng();if(c&&a)return r.setStart(c.parentNode,
i.nodeIndex(c)),r.setEnd(a.parentNode,i.nodeIndex(a)),f=r.extractContents(),r=i.createRng(),r.setStart(a.parentNode,i.nodeIndex(a)+1),r.setEnd(c.parentNode,i.nodeIndex(c)+1),g=r.extractContents(),k=c.parentNode,k.insertBefore(e(f),c),b?k.replaceChild(b,a):k.insertBefore(a,c),k.insertBefore(e(g),c),i.remove(c),b||a},bind:function(c,a,b,e){return this.events||(this.events=new d.dom.EventUtils),this.events.add(c,a,b,e||this)},unbind:function(c,a,b){return this.events||(this.events=new d.dom.EventUtils),
this.events.remove(c,a,b)},dumpRng:function(c){return"startContainer: "+c.startContainer.nodeName+", startOffset: "+c.startOffset+", endContainer: "+c.endContainer.nodeName+", endOffset: "+c.endOffset},_findSib:function(c,a,b){var d=this,e=a;if(c){l(e,"string")&&(e=function(c){return d.is(c,a)});for(c=c[b];c;c=c[b])if(e(c))return c}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});d.DOM=new d.dom.DOMUtils(document,
{process_html:0})})(tinymce);
(function(d){function h(d){function i(a,b){c(v,a,b)}function b(a,b){c(n,a,b)}function a(a){i(a.parentNode,x(a))}function e(a){b(a.parentNode,x(a)+1)}function f(a,c){var b;if(3==a.nodeType||0>c)return a;for(b=a.firstChild;b&&0<c;)--c,b=b.nextSibling;return b?b:a}function g(a,c,b,e){var f,k;if(a==b)return c==e?0:c<e?-1:1;for(f=b;f&&f.parentNode!=a;)f=f.parentNode;if(f){k=0;for(b=a.firstChild;b!=f&&k<c;)k++,b=b.nextSibling;return c<=k?-1:1}for(f=a;f&&f.parentNode!=b;)f=f.parentNode;if(f){k=0;for(b=b.firstChild;b!=
f&&k<e;)k++,b=b.nextSibling;return k<e?-1:1}for(c=d.findCommonAncestor(a,b);a&&a.parentNode!=c;)a=a.parentNode;a||(a=c);for(e=b;e&&e.parentNode!=c;)e=e.parentNode;if(e||(e=c),a==e)return 0;for(b=c.firstChild;b;){if(b==a)return-1;if(b==e)return 1;b=b.nextSibling}}function c(a,c,b){a?(k[t]=c,k[y]=b):(k[C]=c,k[A]=b);for(c=k[C];c.parentNode;)c=c.parentNode;for(b=k[t];b.parentNode;)b=b.parentNode;b==c?0<g(k[t],k[y],k[C],k[A])&&k.collapse(a):k.collapse(a);k.collapsed=k[t]==k[C]&&k[y]==k[A];k.commonAncestorContainer=
d.findCommonAncestor(k[t],k[C])}function j(a){var c,b,d,e;d=e=0;if(k[t]==k[C]){var j,g;if(a!=u&&(c=s.createDocumentFragment()),k[y]==k[A])a=c;else if(3==k[t].nodeType)a=(b=k[t].nodeValue,j=b.substring(k[y],k[A]),a!=r&&(k[t].deleteData(k[y],k[A]-k[y]),k.collapse(v)),a==u)?void 0:(c.appendChild(s.createTextNode(j)),c);else{d=f(k[t],k[y]);for(g=k[A]-k[y];0<g;)e=d.nextSibling,d=q(d,a),c&&c.appendChild(d),--g,d=e;a=(a!=r&&k.collapse(v),c)}return a}c=k[C];for(b=c.parentNode;b;c=b,b=b.parentNode){if(b==
k[t]){g=c;var p=j=b=d=e=c=void 0;if(!(a!=u&&(c=s.createDocumentFragment()),e=m(g,a),c&&c.appendChild(e),d=x(g),b=d-k[y],0>=b))for(e=g.previousSibling;0<b;)j=e.previousSibling,p=q(e,a),c&&c.insertBefore(p,c.firstChild),--b,e=j;a=(a!=r&&(k.setEndBefore(g),k.collapse(n)),c);return a}++e}c=k[t];for(b=c.parentNode;b;c=b,b=b.parentNode){if(b==k[C]){g=c;b=d=e=b=e=c=void 0;a!=u&&(c=s.createDocumentFragment());b=o(g,a);c&&c.appendChild(b);e=x(g);++e;e=k[A]-e;for(b=g.nextSibling;0<e;)d=b.nextSibling,b=q(b,
a),c&&c.appendChild(b),--e,b=d;return a!=r&&(k.setStartAfter(g),k.collapse(v)),c}++d}d-=e;for(c=k[t];0<d;)c=c.parentNode,d--;for(e=k[C];0>d;)e=e.parentNode,d++;d=c.parentNode;for(b=e.parentNode;d!=b;d=d.parentNode,b=b.parentNode)c=d,e=b;a!=u&&(g=s.createDocumentFragment());d=o(c,a);g&&g.appendChild(d);b=x(c);j=x(e);++b;b=j-b;for(j=c.nextSibling;0<b;)p=j.nextSibling,d=q(j,a),g&&g.appendChild(d),j=p,--b;return d=m(e,a),g&&g.appendChild(d),a!=r&&(k.setStartAfter(c),k.collapse(v)),g}function m(a,c){var b,
d,e,j;j=f(k[C],k[A]-1);var g=j!=k[C];if(j==a)return p(j,g,n,c);b=j.parentNode;for(d=p(b,n,n,c);b;){for(;j;)e=j.previousSibling,j=p(j,g,n,c),c!=u&&d.insertBefore(j,d.firstChild),g=v,j=e;if(b==a)return d;j=b.previousSibling;b=b.parentNode;e=p(b,n,n,c);c!=u&&e.appendChild(d);d=e}}function o(c,a){var b,d,e,j;j=f(k[t],k[y]);var g=j!=k[t];if(j==c)return p(j,g,v,a);b=j.parentNode;for(d=p(b,n,v,a);b;){for(;j;)e=j.nextSibling,j=p(j,g,v,a),a!=u&&d.appendChild(j),g=v,j=e;if(b==c)return d;j=b.nextSibling;b=b.parentNode;
e=p(b,n,v,a);a!=u&&e.appendChild(d);d=e}}function p(a,c,b,d){var e,f,j,g,v;if(c)return q(a,d);if(3==a.nodeType)return(e=a.nodeValue,b?(g=k[y],f=e.substring(g),j=e.substring(0,g)):(g=k[A],f=e.substring(0,g),j=e.substring(g)),d!=r&&(a.nodeValue=j),d==u)?void 0:(v=a.cloneNode(n),v.nodeValue=f,v);if(d!=u)return a.cloneNode(n)}function q(a,c){return c!=u?c==r?a.cloneNode(v):a:void a.parentNode.removeChild(a)}var k=this,s=d.doc,r=1,u=2,v=!0,n=!1,y="startOffset",t="startContainer",C="endContainer",A="endOffset",
B=tinymce.extend,x=d.nodeIndex;B(k,{startContainer:s,startOffset:0,endContainer:s,endOffset:0,collapsed:v,commonAncestorContainer:s,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:b,setStartBefore:a,setStartAfter:function(a){i(a.parentNode,x(a)+1)},setEndBefore:function(a){b(a.parentNode,x(a))},setEndAfter:e,collapse:function(a){a?(k[C]=k[t],k[A]=k[y]):(k[t]=k[C],k[y]=k[A]);k.collapsed=v},selectNode:function(c){a(c);e(c)},selectNodeContents:function(a){i(a,0);b(a,1===
a.nodeType?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a,c){var b=k[t],d=k[y],e=k[C],f=k[A],j=c.startContainer,v=c.startOffset,n=c.endContainer,p=c.endOffset;return 0===a?g(b,d,j,v):1===a?g(e,f,j,v):2===a?g(e,f,n,p):3===a?g(b,d,n,p):void 0},deleteContents:function(){j(u)},extractContents:function(){return j(0)},cloneContents:function(){return j(r)},insertNode:function(a){var c,b,e=this[t],f=this[y];3!==e.nodeType&&4!==e.nodeType||!e.nodeValue?(0<e.childNodes.length&&(b=
e.childNodes[f]),b?e.insertBefore(a,b):e.appendChild(a)):f?f>=e.nodeValue.length?d.insertAfter(a,e):(c=e.splitText(f),e.parentNode.insertBefore(a,c)):e.parentNode.insertBefore(a,e)},surroundContents:function(a){var c=k.extractContents();k.insertNode(a);a.appendChild(c);k.selectNode(a)},cloneRange:function(){return B(new h(d),{startContainer:k[t],startOffset:k[y],endContainer:k[C],endOffset:k[A],collapsed:k.collapsed,commonAncestorContainer:k.commonAncestorContainer})}})}d.Range=h})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(d){function h(a,b){var f,g,c,j,i,l,p,q,k=0,s=-1;if(f=a.duplicate(),f.collapse(b),q=f.parentElement(),q.ownerDocument===d.dom.doc){for(;"false"===q.contentEditable;)q=q.parentNode;if(!q.hasChildNodes())return{node:q,inside:1};j=q.children;for(g=j.length-1;k<=g;)if(p=Math.floor((k+g)/2),i=j[p],f.moveToElementText(i),s=f.compareEndPoints(b?"StartToStart":"EndToEnd",a),0<s)g=p-1;else{if(!(0>s))return{node:i};k=p+1}if(0>s){if(i?f.collapse(!1):(f.moveToElementText(q),
f.collapse(!0),i=q,c=!0),f.setEndPoint(b?"EndToStart":"EndToEnd",a),0<f.compareEndPoints(b?"StartToStart":"StartToEnd",a)){f=a.duplicate();f.collapse(b);for(l=-1;q==f.parentElement()&&0!=f.move("character",-1);)l++}l=l||f.text.replace("\r\n"," ").length}else f.collapse(!0),f.setEndPoint(b?"StartToStart":"StartToEnd",a),l=f.text.replace("\r\n"," ").length;return{node:i,position:s,offset:l,inside:c}}}var l=this,i=d.dom,b=!0;this.getBookmark=function(a){function b(a){var c,d,e,f,k=[];c=a.parentNode;
for(d=i.doc.body.parentNode;c!=d&&9!==c.nodeType;){e=c.children;for(f=e.length;f--;)if(a===e[f]){k.push(f);break}a=c;c=c.parentNode}return k}function f(a){if(a=h(g,a))return{position:a.position,offset:a.offset,indexes:b(a.node),inside:a.inside}}var g=d.getRng(),c={};return 2===a&&(g.item?c.start={ctrl:!0,indexes:b(g.item(0))}:(c.start=f(!0),d.isCollapsed()||(c.end=f()))),c};this.moveToBookmark=function(a){function b(a){var c,d,e,f;c=i.doc.body;for(d=a.length-1;0<=d;d--)f=c.children,e=a[d],e<=f.length-
1&&(c=f[e]);return c}function d(f){var i,l,p=a[f?"start":"end"];p&&(i=0<p.position,l=c.createTextRange(),l.moveToElementText(b(p.indexes)),offset=p.offset,void 0!==offset?(l.collapse(p.inside||i),l.moveStart("character",i?-offset:offset)):l.collapse(f),g.setEndPoint(f?"StartToStart":"EndToStart",l),f&&g.collapse(!0))}var g,c=i.doc.body;a.start&&(a.start.ctrl?(g=c.createControlRange(),g.addElement(b(a.start.indexes)),g.select()):(g=c.createTextRange(),d(!0),d(),g.select()))};this.addRange=function(a){function e(a){var d,
e,k,g,y;k=i.create("a");d=a?c:l;e=a?j:h;g=f.duplicate();d!=p&&d!=p.documentElement||(d=q,e=0);3==d.nodeType?(d.parentNode.insertBefore(k,d),g.moveToElementText(k),g.moveStart("character",e),i.remove(k),f.setEndPoint(a?"StartToStart":"EndToEnd",g)):(y=d.childNodes,y.length?(e>=y.length?i.insertAfter(k,y[y.length-1]):d.insertBefore(k,y[e]),g.moveToElementText(k)):(k=p.createTextNode("﻿"),d.appendChild(k),g.moveToElementText(k.parentNode),g.collapse(b)),f.setEndPoint(a?"StartToStart":"EndToEnd",g),i.remove(k))}
var f,g,c,j,l,h,p=d.dom.doc,q=p.body;if(c=a.startContainer,j=a.startOffset,l=a.endContainer,h=a.endOffset,f=q.createTextRange(),c==l&&1==c.nodeType&&j==h-1&&j==h-1)try{return g=q.createControlRange(),g.addElement(c.childNodes[j]),void g.select()}catch(k){}e(!0);e();f.select()};this.getRangeAt=function(){function a(a){var c,b,d,e,f=h(m,a),g=0;if(c=f.node,b=f.offset,f.inside&&!c.hasChildNodes())return void o[a?"setStart":"setEnd"](c,0);if(void 0===b)return void o[a?"setStartBefore":"setEndAfter"](c);
if(0>f.position){if(d=f.inside?c.firstChild:c.nextSibling,!d)return void o[a?"setStartAfter":"setEndAfter"](c);if(!b)return void(3==d.nodeType?o[a?"setStart":"setEnd"](d,0):o[a?"setStartBefore":"setEndBefore"](d));for(;d;){if(e=d.nodeValue,g+=e.length,g>=b){c=d;g-=b;g=e.length-g;break}d=d.nextSibling}}else{if(d=c.previousSibling,!d)return o[a?"setStartBefore":"setEndBefore"](c);if(!b)return void(3==c.nodeType?o[a?"setStart":"setEnd"](d,c.nodeValue.length):o[a?"setStartAfter":"setEndAfter"](d));for(;d;){if(g+=
d.nodeValue.length,g>=b){c=d;g-=b;break}d=d.previousSibling}}o[a?"setStart":"setEnd"](c,g)}var b,f,g,c,j,m=d.getRng(),o=i.createRng();if(b=m.item?m.item(0):m.parentElement(),b.ownerDocument!=i.doc)return o;if(f=d.isCollapsed(),m.item)return o.setStart(b.parentNode,i.nodeIndex(b)),o.setEnd(o.startContainer,o.startOffset+1),o;try{a(!0),f||a()}catch(p){if(-2147024809!=p.number)throw p;j=l.getBookmark(2);g=m.duplicate();g.collapse(!0);b=g.parentElement();f||(g=m.duplicate(),g.collapse(!1),c=g.parentElement(),
c.innerHTML=c.innerHTML);b.innerHTML=b.innerHTML;l.moveToBookmark(j);m=d.getRng();a(!0);f||a()}return o}}})();
(function(){function d(a,c,b,d,e,f){for(var e=0,g=d.length;e<g;e++){var k=d[e];if(k){for(var k=k[a],j=!1;k;){if(k.sizcache===b){j=d[k.sizset];break}if(1!==k.nodeType||f||(k.sizcache=b,k.sizset=e),k.nodeName.toLowerCase()===c){j=k;break}k=k[a]}d[e]=j}}}function h(a,c,b,d,e,k){for(var e=0,g=d.length;e<g;e++){var j=d[e];if(j){for(var j=j[a],p=!1;j;){if(j.sizcache===b){p=d[j.sizset];break}if(1===j.nodeType)if(k||(j.sizcache=b,j.sizset=e),"string"!=typeof c){if(j===c){p=!0;break}}else if(0<f.filter(c,
[j]).length){p=j;break}j=j[a]}d[e]=p}}}var l=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=0,b=Object.prototype.toString,a=!1,e=!0;[0,0].sort(function(){return e=!1,0});var f=function(a,d,e,k){var e=e||[],j=d=d||document;if(1!==d.nodeType&&9!==d.nodeType)return[];if(!a||"string"!=typeof a)return e;var p,i,r,m,s,h,q=[],I=!0,L=f.isXML(d),J=a;do if(l.exec(""),p=l.exec(J),p&&(J=p[3],q.push(p[1]),p[2])){m=p[3];break}while(p);
if(1<q.length&&c.exec(a))if(2===q.length&&g.relative[q[0]])i=u(q[0]+q[1],d);else for(i=g.relative[q[0]]?[d]:f(q.shift(),d);q.length;)a=q.shift(),g.relative[a]&&(a+=q.shift()),i=u(a,i);else if(!k&&1<q.length&&9===d.nodeType&&!L&&g.match.ID.test(q[0])&&!g.match.ID.test(q[q.length-1])&&(s=f.find(q.shift(),d,L),d=s.expr?f.filter(s.expr,s.set)[0]:s.set[0]),d){s=k?{expr:q.pop(),set:o(k)}:f.find(q.pop(),1!==q.length||"~"!==q[0]&&"+"!==q[0]||!d.parentNode?d:d.parentNode,L);i=s.expr?f.filter(s.expr,s.set):
s.set;for(0<q.length?r=o(i):I=!1;q.length;)p=h=q.pop(),g.relative[h]?p=q.pop():h="",null==p&&(p=d),g.relative[h](r,p,L)}else r=[];if(r||(r=i),r||f.error(h||a),"[object Array]"===b.call(r))if(I)if(d&&1===d.nodeType)for(a=0;null!=r[a];a++)r[a]&&(!0===r[a]||1===r[a].nodeType&&f.contains(d,r[a]))&&e.push(i[a]);else for(a=0;null!=r[a];a++)r[a]&&1===r[a].nodeType&&e.push(i[a]);else e.push.apply(e,r);else o(r,e);return m&&(f(m,j,e,k),f.uniqueSort(e)),e};f.uniqueSort=function(c){if(q&&(a=e,c.sort(q),a))for(var b=
1;b<c.length;b++)c[b]===c[b-1]&&c.splice(b--,1);return c};f.matches=function(a,c){return f(a,null,null,c)};f.find=function(a,c,b){var d;if(!a)return[];for(var e=0,f=g.order.length;e<f;e++){var k,j=g.order[e];if(k=g.leftMatch[j].exec(a)){var p=k[1];if(k.splice(1,1),"\\"!==p.substr(p.length-1)&&(k[1]=(k[1]||"").replace(/\\/g,""),d=g.find[j](k,c,b),null!=d)){a=a.replace(g.match[j],"");break}}}return d||(d=c.getElementsByTagName("*")),{set:d,expr:a}};f.filter=function(a,c,b,d){for(var e,k,j=a,p=[],i=
c,r=c&&c[0]&&f.isXML(c[0]);a&&c.length;){for(var l in g.filter)if(null!=(e=g.leftMatch[l].exec(a))&&e[2]){var m,s,q=g.filter[l];s=e[1];if(!(k=!1,e.splice(1,1),"\\"===s.substr(s.length-1))){if(i===p&&(p=[]),g.preFilter[l])if(e=g.preFilter[l](e,i,b,p,d,r)){if(!0===e)continue}else k=m=!0;if(e)for(var h=0;null!=(s=i[h]);h++)if(s){m=q(s,e,h,i);var u=d^!!m;b&&null!=m?u?k=!0:i[h]=!1:u&&(p.push(s),k=!0)}if(void 0!==m){if(b||(i=p),a=a.replace(g.match[l],""),!k)return[];break}}}if(a===j){if(null!=k)break;f.error(a)}j=
a}return i};f.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var g=f.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,c){var b="string"==typeof c,d=b&&!/\W/.test(c),b=b&&!d;d&&(c=c.toLowerCase());for(var e=0,k=a.length;e<k;e++)if(d=a[e]){for(;(d=d.previousSibling)&&1!==d.nodeType;);a[e]=b||d&&d.nodeName.toLowerCase()===c?d||!1:d===c}b&&f.filter(c,a,!0)},">":function(a,c){var b,d="string"==
typeof c,e=0,k=a.length;if(d&&!/\W/.test(c))for(c=c.toLowerCase();e<k;e++){if(b=a[e])b=b.parentNode,a[e]=b.nodeName.toLowerCase()===c&&b}else{for(;e<k;e++)(b=a[e])&&(a[e]=d?b.parentNode:b.parentNode===c);d&&f.filter(c,a,!0)}},"":function(a,c,b){var e,f=i++,k=h;"string"!=typeof c||/\W/.test(c)||(c=c.toLowerCase(),e=c,k=d);k("parentNode",c,f,a,e,b)},"~":function(a,c,b){var e,f=i++,k=h;"string"!=typeof c||/\W/.test(c)||(c=c.toLowerCase(),e=c,k=d);k("previousSibling",c,f,a,e,b)}},find:{ID:function(a,
c,b){if("undefined"!=typeof c.getElementById&&!b)return(a=c.getElementById(a[1]))?[a]:[]},NAME:function(a,c){if("undefined"!=typeof c.getElementsByName){for(var b=[],d=c.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&b.push(d[e]);return 0===b.length?null:b}},TAG:function(a,c){return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,b,d,e,f){if(a=" "+a[1].replace(/\\/g,"")+" ",f)return a;for(var k=0;null!=(f=c[k]);k++)f&&(e^(f.className&&0<=(" "+f.className+
" ").replace(/[\t\n]/g," ").indexOf(a))?b||d.push(f):b&&(c[k]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if("nth"===a[1]){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}return a[0]=i++,a},ATTR:function(a,c,b,d,e,f){c=a[1].replace(/\\/g,"");return!f&&g.attrMap[c]&&(a[1]=g.attrMap[c]),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},
PSEUDO:function(a,c,b,d,e){if("not"===a[1]){if(!(1<(l.exec(a[3])||"").length||/^\w/.test(a[3])))return a=f.filter(a[3],c,b,1^e),b||d.push.apply(d,a),!1;a[3]=f(a[3],null,null,c)}else if(g.match.POS.test(a[0])||g.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){return a.parentNode.selectedIndex,
!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,c,b){return!!f(b[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===
a.type},button:function(a){return"button"===a.type||"button"===a.nodeName.toLowerCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,c){return 0===c},last:function(a,c,b,d){return c===d.length-1},even:function(a,c){return 0===c%2},odd:function(a,c){return 1===c%2},lt:function(a,c,b){return c<b[3]-0},gt:function(a,c,b){return c>b[3]-0},nth:function(a,c,b){return b[3]-0===c},eq:function(a,c,b){return b[3]-0===c}},filter:{PSEUDO:function(a,
c,b,d){var e=c[1],k=g.filters[e];if(k)return k(a,b,c,d);if("contains"===e)return 0<=(a.textContent||a.innerText||f.getText([a])||"").indexOf(c[3]);if("not"===e){c=c[3];b=0;for(d=c.length;b<d;b++)if(c[b]===a)return!1;return!0}f.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,c){var b=c[1],d=a;switch(b){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===b)return!0;d=a;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case "nth":var b=
c[2],e=c[3];if(1===b&&0===e)return!0;var f=c[0],k=a.parentNode;if(k&&(k.sizcache!==f||!a.nodeIndex)){for(var j=0,d=k.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++j);k.sizcache=f}d=a.nodeIndex-e;return 0===b?0===d:0===d%b&&0<=d/b}},ID:function(a,c){return 1===a.nodeType&&a.getAttribute("id")===c},TAG:function(a,c){return"*"===c&&1===a.nodeType||a.nodeName.toLowerCase()===c},CLASS:function(a,c){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)},ATTR:function(a,c){var b=
c[1],b=g.attrHandle[b]?g.attrHandle[b](a):null!=a[b]?a[b]:a.getAttribute(b),d=b+"",e=c[2],f=c[4];return null==b?"!="===e:"="===e?d===f:"*="===e?0<=d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):f?"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-f.length)===f:"|="===e&&(d===f||d.substr(0,f.length+1)===f+"-"):d&&!1!==b},POS:function(a,c,b,d){var e=g.setFilters[c[2]];if(e)return e(a,b,c,d)}}},c=g.match.POS,j=function(a,c){return"\\"+(c-0+1)},m;for(m in g.match)g.match[m]=RegExp(g.match[m].source+
/(?![^\[]*\])(?![^\(]*\))/.source),g.leftMatch[m]=RegExp(/(^(?:.|\r|\n)*?)/.source+g.match[m].source.replace(/\\(\d+)/g,j));var o=function(a,c){return a=Array.prototype.slice.call(a,0),c?(c.push.apply(c,a),c):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(p){o=function(a,c){var d=c||[],e=0;if("[object Array]"===b.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var f=a.length;e<f;e++)d.push(a[e]);else for(;a[e];e++)d.push(a[e]);
return d}}var q;document.documentElement.compareDocumentPosition?q=function(c,b){if(!c.compareDocumentPosition||!b.compareDocumentPosition)return c==b&&(a=!0),c.compareDocumentPosition?-1:1;var d=4&c.compareDocumentPosition(b)?-1:c===b?0:1;return 0===d&&(a=!0),d}:"sourceIndex"in document.documentElement?q=function(c,b){if(!c.sourceIndex||!b.sourceIndex)return c==b&&(a=!0),c.sourceIndex?-1:1;var d=c.sourceIndex-b.sourceIndex;return 0===d&&(a=!0),d}:document.createRange&&(q=function(c,b){if(!c.ownerDocument||
!b.ownerDocument)return c==b&&(a=!0),c.ownerDocument?-1:1;var d=c.ownerDocument.createRange(),e=b.ownerDocument.createRange();d.setStart(c,0);d.setEnd(c,0);e.setStart(b,0);e.setEnd(b,0);d=d.compareBoundaryPoints(Range.START_TO_END,e);return 0===d&&(a=!0),d});f.getText=function(a){for(var c,b="",d=0;a[d];d++)c=a[d],3===c.nodeType||4===c.nodeType?b+=c.nodeValue:8!==c.nodeType&&(b+=f.getText(c.childNodes));return b};j=document.createElement("div");m="script"+(new Date).getTime();j.innerHTML="<a name='"+
m+"'/>";var k=document.documentElement;k.insertBefore(j,k.firstChild);document.getElementById(m)&&(g.find.ID=function(a,c,b){if("undefined"!=typeof c.getElementById&&!b)return(c=c.getElementById(a[1]))?c.id===a[1]||"undefined"!=typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===a[1]?[c]:void 0:[]},g.filter.ID=function(a,c){var b="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&b&&b.nodeValue===c});k.removeChild(j);k=j=null;j=document.createElement("div");
j.appendChild(document.createComment(""));0<j.getElementsByTagName("*").length&&(g.find.TAG=function(a,c){var b=c.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;b[e];e++)1===b[e].nodeType&&d.push(b[e]);b=d}return b});j.innerHTML="<a href='#'></a>";j.firstChild&&"undefined"!=typeof j.firstChild.getAttribute&&"#"!==j.firstChild.getAttribute("href")&&(g.attrHandle.href=function(a){return a.getAttribute("href",2)});j=null;if(document.querySelectorAll){var s=f,j=document.createElement("div");
if(j.innerHTML="<p class='TEST'></p>",!j.querySelectorAll||0!==j.querySelectorAll(".TEST").length){var f=function(a,c,b,d){if(c=c||document,!d&&9===c.nodeType&&!f.isXML(c))try{return o(c.querySelectorAll(a),b)}catch(e){}return s(a,c,b,d)},r;for(r in s)f[r]=s[r];j=null}!0}r=document.createElement("div");r.innerHTML="<div class='test e'></div><div class='test'></div>";r.getElementsByClassName&&0!==r.getElementsByClassName("e").length&&(r.lastChild.className="e",1!==r.getElementsByClassName("e").length&&
(g.order.splice(1,0,"CLASS"),g.find.CLASS=function(a,c,b){if("undefined"!=typeof c.getElementsByClassName&&!b)return c.getElementsByClassName(a[1])},r=null));f.contains=document.compareDocumentPosition?function(a,c){return!!(16&a.compareDocumentPosition(c))}:function(a,c){return a!==c&&(!a.contains||a.contains(c))};f.isXML=function(a){a=(a?a.ownerDocument||a:0).documentElement;return!!a&&"HTML"!==a.nodeName};var u=function(a,c){for(var b,d=[],e="",k=c.nodeType?[c]:c;b=g.match.PSEUDO.exec(a);)e+=b[0],
a=a.replace(g.match.PSEUDO,"");a=g.relative[a]?a+"*":a;b=0;for(var j=k.length;b<j;b++)f(a,k[b],d);return f.filter(e,d)};window.tinymce.dom.Sizzle=f})();
(function(d){var h,l=d.each,i=d.DOM,b=d.isIE;d.isWebKit;d.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,e,f,g){var c,j,m=this,h=m.events;return e instanceof Array?(j=[],l(e,function(c){j.push(m.add(a,c,f,g))}),j):a&&a.hasOwnProperty&&a instanceof Array?(j=[],l(a,function(a){a=i.get(a);j.push(m.add(a,e,f,g))}),j):(a=i.get(a))?(c=function(a){if(!m.disabled&&(!d.activeEditor||!a||"keydown"!==a.type&&"keypress"!==a.type||0!==d.activeEditor.selection.getSel().rangeCount||
(d.isMac?a.metaKey:a.ctrlKey)&&(83===a.keyCode||69===a.keyCode&&a.shiftKey)))return a=a||window.event,a&&b&&!d.isIE11&&(a.target||(a.target=a.srcElement),d.extend(a,m._stoppers)),g?f.call(g,a):f(a)},"unload"==e?(d.unloads.unshift({func:c}),c):"init"==e?(m.domLoaded?c():m.inits.push(c),c):(h.push({obj:a,name:e,func:f,cfunc:c,scope:g}),m._add(a,e,c),f)):void 0},remove:function(a,b,d){var g,c=this,j=c.events,m=!1;return a&&a.hasOwnProperty&&a instanceof Array?(g=[],l(a,function(a){a=i.get(a);g.push(c.remove(a,
b,d))}),g):(a=i.get(a),l(j,function(g,i){if(g.obj==a&&g.name==b&&(!d||g.func==d||g.cfunc==d))return j.splice(i,1),c._remove(a,b,g.cfunc),m=!0,!1}),m)},clear:function(a){var b,d,g=this.events;if(a){a=i.get(a);for(b=g.length-1;0<=b;b--)d=g[b],d.obj===a&&(this._remove(d.obj,d.name,d.cfunc),d.obj=d.cfunc=null,g.splice(b,1))}},cancel:function(a){return!!a&&(this.stop(a),this.prevent(a))},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?
a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;l(a.events,function(b){a._remove(b.obj,b.name,b.cfunc);b.obj=b.cfunc=null});a.events=[];a=null},_add:function(a,b,d){a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener?a.addEventListener(b,d,!1):a["on"+b]=d},_remove:function(a,b,d){if(a)try{a.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener?a.removeEventListener(b,d,!1):a["on"+b]=null}catch(g){}},_pageInit:function(){this.domLoaded||(this.domLoaded=!0,l(this.inits,
function(a){a()}),this.inits=[])},_wait:function(a){var b=this,d=a.document;return a.tinyMCE_GZ&&tinyMCE_GZ.loaded?void(b.domLoaded=1):"complete"===d.readyState?void b._pageInit(a):(d.attachEvent?(d.attachEvent("onreadystatechange",function(){"complete"===d.readyState&&(d.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),d.documentElement.doScroll&&a==a.top&&!function(){if(!b.domLoaded){try{d.documentElement.doScroll("left")}catch(g){return void setTimeout(arguments.callee,0)}b._pageInit(a)}}()):
d.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),void b._add(a,"load",function(){b._pageInit(a)}))},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}});h=d.dom.Event=new d.dom.EventUtils;h._wait(window);d.addUnload(function(){h.destroy()})})(tinymce);
(function(d){d.dom.Element=function(h,l){var i,b=this;b.settings=l=l||{};b.id=h;b.dom=i=l.dom||d.DOM;d.isIE||i.get(b.id);d.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){b[a]=function(){var d,f=[h];for(d=0;d<arguments.length;d++)f.push(arguments[d]);return f=i[a].apply(i,f),b.update(a),f}});d.extend(b,{on:function(a,e,f){return d.dom.Event.add(b.id,
a,e,f)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var a=i.get(b.id);return{w:parseInt(b.getStyle("width")||a.clientWidth),h:parseInt(b.getStyle("height")||a.clientHeight)}},moveTo:function(a,d){b.setStyles({left:a,top:d})},moveBy:function(a,d){var f=b.getXY();b.moveTo(f.x+a,f.y+d)},resizeTo:function(a,d){b.setStyles({width:a,height:d})},resizeBy:function(a,d){var f=b.getSize();b.resizeTo(f.w+a,f.h+d)},update:function(a){var e;if(d.isIE6&&
l.blocker&&!(a=a||"",0===a.indexOf("get")||0===a.indexOf("has")||0===a.indexOf("is"))){if("remove"==a)return void i.remove(b.blocker);b.blocker?e=i.get(b.blocker):(b.blocker=i.uniqueId(),e=i.add(l.container||i.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(e,"opacity",0));i.setStyles(e,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",
1)||0)-1})}}})}})(tinymce);
(function(d){var h=d.is,l=d.isIE,i=d.each;d.create("tinymce.dom.Selection",{Selection:function(b,a,e){var f=this;f.dom=b;f.win=a;f.serializer=e;i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(a){f[a]=new d.util.Dispatcher(f)});f.win.getSelection||(f.tridentSel=new d.dom.TridentSelection(f));d.isIE&&b.boxModel&&this._fixIESelection();d.addUnload(f.destroy,f)},setCursorLocation:function(b,a){var d=this.dom.createRng();d.setStart(b,a);d.setEnd(b,a);this.setRng(d);
this.collapse(!1)},getContent:function(b){var a,d,f,g=this.getRng(),c=this.dom.create("body"),j=this.getSel();return b=b||{},a=d="",b.get=!0,b.format=b.format||"html",b.forced_root_block="",this.onBeforeGetContent.dispatch(this,b),"text"==b.format?this.isCollapsed()?"":g.text||(j.toString?j.toString():""):(g.cloneContents?(f=g.cloneContents(),f&&c.appendChild(f)):h(g.item)||h(g.htmlText)?(c.innerHTML="<br>"+(g.item?g.item(0).outerHTML:g.htmlText),c.removeChild(c.firstChild)):c.innerHTML=g.toString(),
/^\s/.test(c.innerHTML)&&(a=" "),/\s+$/.test(c.innerHTML)&&(d=" "),b.getInner=!0,b.content=this.isCollapsed()?"":a+this.serializer.serialize(c,b)+d,this.onGetContent.dispatch(this,b),b.content)},setContent:function(b,a){var d,f,g,c=this.getRng(),j=this.win.document;if(a=a||{format:"html"},a.set=!0,b=a.content=b,a.no_events||this.onBeforeSetContent.dispatch(this,a),b=a.content,c.insertNode){if(b+='<span id="__caret">_</span>',c.startContainer==j&&c.endContainer==j)j.body.innerHTML=b;else if(c.deleteContents(),
0==j.body.childNodes.length)j.body.innerHTML=b;else if(c.createContextualFragment)try{c.insertNode(c.createContextualFragment(b))}catch(i){if(0!==c.startOffset||0!==c.endOffset||0!==c.startContainer.children.length)throw i;f=j.createDocumentFragment();g=j.createElement("div");g.innerHTML=b;g=g.children[0];for(f.appendChild(g.cloneNode());g=g.nextSibling;)f.appendChild(g.cloneNode());c.startContainer.parentNode.insertBefore(f,c.startContainer)}else f=j.createDocumentFragment(),g=j.createElement("div"),
f.appendChild(g),g.outerHTML=b,c.insertNode(f);try{d=this.dom.get("__caret"),c=j.createRange(),c.setStartBefore(d),c.setEndBefore(d),this.setRng(c),this.dom.remove("__caret"),this.setRng(c)}catch(l){AJS.logError("Exception occurred at tinymce setContent(): "+l)}}else c.item&&(j.execCommand("Delete",!1,null),c=this.getRng()),/^\s+/.test(b)?(c.pasteHTML('<span id="__mce_tmp">_</span>'+b),this.dom.remove("__mce_tmp")):c.pasteHTML(b);a.no_events||this.onSetContent.dispatch(this,a)},getStart:function(){var b,
a,d;a=this.getRng();if(a.duplicate||a.item){if(a.item)return a.item(0);b=a.duplicate();b.collapse(1);b=b.parentElement();for(a=d=a.parentElement();d=d.parentNode;)if(d==b){b=a;break}return b}return b=a.startContainer,1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&3==b.nodeType?b.parentNode:b},getEnd:function(){var b,a,d=this.getRng();return d.duplicate||d.item?d.item?d.item(0):(d=d.duplicate(),d.collapse(0),b=d.parentElement(),b&&"BODY"==b.nodeName?
b.lastChild||b:b):(b=d.endContainer,a=d.endOffset,1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[0<a?a-1:a]),b&&3==b.nodeType?b.parentNode:b)},getBookmark:function(b,a){function d(a,c){var b=0;return i(p.select(a),function(a,d){a==c&&(b=d)}),b}var f,g,c,j,l,h=this,p=h.dom;if(2==b){if(h.tridentSel)f=h.tridentSel.getBookmark(b);else{f=function(c,b){var d,e=c[b?"startContainer":"endContainer"],f=c[b?"startOffset":"endOffset"],k=[],j=0;if(3==e.nodeType){if(a)for(d=e.previousSibling;d&&3==d.nodeType;d=
d.previousSibling)f+=d.nodeValue.length;k.push(f)}else d=e.childNodes,f>=d.length&&d.length&&(j=1,f=Math.max(0,d.length-1)),k.push(h.dom.nodeIndex(d[f],a)+j);for(;e&&e!=q;e=e.parentNode)k.push(h.dom.nodeIndex(e,a));return k};c=h.getRng(!0);var q=p.doc.body;j={};f=(j.start=f(c,!0),h.isCollapsed()||(j.end=f(c)),j)}return f}if(b)return{rng:h.getRng()};if(f=h.getRng(),c=p.uniqueId(),j=tinyMCE.activeEditor.selection.isCollapsed(),f.duplicate||f.item){if(f.item)return l=f.item(0),g=l.nodeName,{name:g,index:d(g,
l)};g=f.duplicate();try{f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+c+'_start" style="overflow:hidden;line-height:0px">﻿</span>'),j||(g.collapse(!1),f.moveToElementText(g.parentElement()),0==f.compareEndPoints("StartToEnd",g)&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+c+'_end" style="overflow:hidden;line-height:0px">﻿</span>'))}catch(k){return null}}else{if(l=h.getNode(),g=l.nodeName,"IMG"==g)return{name:g,index:d(g,l)};g=f.cloneRange();j||(g.collapse(!1),
g.insertNode(p.create("span",{"data-mce-type":"bookmark",id:c+"_end",style:"overflow:hidden;line-height:0px"},"﻿")));f.collapse(!0);f.insertNode(p.create("span",{"data-mce-type":"bookmark",id:c+"_start",style:"overflow:hidden;line-height:0px"},"﻿"))}return h.moveToBookmark({id:c,keep:1}),{id:c}},moveToBookmark:function(b){function a(a){var d,e,f,j,i=b[a?"start":"end"];if(i){f=i[0];e=c;for(d=i.length-1;1<=d;d--){if(j=e.childNodes,i[d]>j.length-1)return;e=j[i[d]]}3===e.nodeType&&(f=Math.min(i[0],e.nodeValue.length));
1===e.nodeType&&(f=Math.min(i[0],e.childNodes.length));a?g.setStart(e,f):g.setEnd(e,f)}return!0}function e(a){var c,e,f,g=q.get(b.id+"_"+a);f=b.keep;if(g&&(c=g.parentNode,"start"==a?(f?(c=g.firstChild,e=1):e=q.nodeIndex(g),j=m=c,h=p=e):(f?(c=g.firstChild,e=1):e=q.nodeIndex(g),m=c,p=e),!f)){f=g.previousSibling;c=g.nextSibling;for(i(d.grep(g.childNodes),function(a){3==a.nodeType&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});g=q.get(b.id+"_"+a);)q.remove(g,1);f&&c&&f.nodeType==c.nodeType&&3==f.nodeType&&
!d.isOpera&&(e=f.nodeValue.length,f.appendData(c.nodeValue),q.remove(c),"start"==a?(j=m=f,h=p=e):(m=f,p=e))}}function f(a){return q.isBlock(a)&&!a.innerHTML&&(a.innerHTML=l?" ":'<br data-mce-bogus="1" />'),a}var g,c,j,m,h,p,q=this.dom;if(b)if(b.start){if(g=q.createRng(),c=q.doc.body,this.tridentSel)return this.tridentSel.moveToBookmark(b);a(!0)&&a()&&this.setRng(g)}else b.id?(e("start"),e("end"),j&&(g=q.createRng(),g.setStart(f(j),h),g.setEnd(f(m),p),this.setRng(g))):b.name?this.select(q.select(b.name)[b.index]):
b.rng&&this.setRng(b.rng)},select:function(b,a){function e(a,b){var e=new d.dom.TreeWalker(a,a);try{do{if(3==a.nodeType&&0!=d.trim(a.nodeValue).length)return void(b?c.setStart(a,0):c.setEnd(a,a.nodeValue.length));if("BR"==a.nodeName)return void(b?c.setStartBefore(a):c.setEndBefore(a))}while(a=b?e.next():e.prev())}catch(f){AJS.log("Error in Selection.js: select : setPoint: "+f)}}var f,g=this.dom,c=g.createRng();return b&&(f=g.nodeIndex(b),c.setStart(b.parentNode,f),c.setEnd(b.parentNode,f+1),a&&(e(b,
1),e(b)),this.setRng(c)),b},isCollapsed:function(){var b=this.getRng(),a=this.getSel();return!(!b||b.item)&&(b.compareEndPoints?0===b.compareEndPoints("StartToEnd",b):!a||b.collapsed)},collapse:function(b){var a,d=this.getRng();d.item&&(a=d.item(0),d=this.win.document.body.createTextRange(),d.moveToElementText(a));d.collapse(!!b);this.setRng(d)},getSel:function(){var b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){function a(a,c,b){try{return c.compareBoundaryPoints(a,
b)}catch(d){return-1}}var e,f,g,c=this.win.document;if(b&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{(e=this.getSel())&&(f=0<e.rangeCount?e.getRangeAt(0):e.createRange?e.createRange():c.createRange())}catch(j){}try{d.isIE&&f&&f.setStart&&c.selection&&c.selection.createRange().item&&(g=c.selection.createRange().item(0),f=c.createRange(),f.setStartBefore(g),f.setEndAfter(g))}catch(i){}return f||(f=c.createRange?c.createRange():c.body.createTextRange()),this.selectedRange&&this.explicitRange&&
(0===a(f.START_TO_START,f,this.selectedRange)&&0===a(f.END_TO_END,f,this.selectedRange)?f=this.explicitRange:(this.selectedRange=null,this.explicitRange=null)),f},setRng:function(b){var a;if(this.tridentSel){if(b.cloneRange)try{return void this.tridentSel.addRange(b)}catch(d){AJS.logError("Exception occurred at tinymce setRng() - tridentSel.addRange(): "+d)}try{b.select()}catch(f){AJS.logError("Exception occurred at tinymce setRng() - select(): "+f)}}else if(a=this.getSel()){this.explicitRange=b;
try{a.removeAllRanges()}catch(g){AJS.logError("Exception occurred at tinymce setRng() - removeAllRanges(): "+g)}try{a.addRange(b)}catch(c){AJS.logError("Exception occurred at tinymce setRng() - addRange(): "+c)}this.selectedRange=0<a.rangeCount?a.getRangeAt(0):null}},setNode:function(b){return this.setContent(this.dom.getOuterHTML(b)),b},getNode:function(){function b(a,b){for(var d=a;a&&3===a.nodeType&&0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||d}var a,d=this.getRng(),f=(this.getSel(),
d.startContainer),g=d.endContainer;return d?d.setStart?(a=d.commonAncestorContainer,!d.collapsed&&(d.startContainer==d.endContainer&&2>d.endOffset-d.startOffset&&d.startContainer.hasChildNodes()&&(a=d.startContainer.childNodes[d.startOffset]),3===f.nodeType&&3===g.nodeType&&(f=f.length===d.startOffset?b(f.nextSibling,!0):f.parentNode,g=0===d.endOffset?b(g.previousSibling,!1):g.parentNode,f&&f===g))?f:a&&3==a.nodeType?a.parentNode:a):d.item?d.item(0):d.parentElement():this.dom.getRoot()},getSelectedBlocks:function(b,
a){var e,f,g,c=this.dom,j=[];if(e=c.getParent(b||this.getStart(),c.isBlock),f=c.getParent(a||this.getEnd(),c.isBlock),e&&j.push(e),e&&f&&e!=f){g=e;for(var i=new d.dom.TreeWalker(e,c.getRoot());(g=i.next())&&g!=f;)c.isBlock(g)&&j.push(g)}return f&&e!=f&&j.push(f),j},normalize:function(){function b(b){var c,j,i,l,p=f.dom;i=p.getRoot();if(c=a[(b?"start":"end")+"Container"],j=a[(b?"start":"end")+"Offset"],9===c.nodeType&&(c=c.body,j=0),c===i&&c.hasChildNodes()){if(c=c.childNodes[Math.min(!b&&0<j?j-1:
j,c.childNodes.length-1)],j=0,"TABLE"===c.nodeName)return;if(c.hasChildNodes()){l=c;i=new d.dom.TreeWalker(c,i);do{if(3===l.nodeType){j=b?0:l.nodeValue.length-1;c=l;e=!0;break}if(/^(BR|IMG)$/.test(l.nodeName)){j=p.nodeIndex(l);c=l.parentNode;"IMG"!=l.nodeName||b||j++;e=!0;break}}while(l=b?i.next():i.prev())}}e&&a["set"+(b?"Start":"End")](c,j)}var a,e,f=this;d.isIE||(a=f.getRng(),b(!0),a.collapsed&&e&&b(),e&&f.setRng(a))},destroy:function(b){this.win=null;b||d.removeUnload(this.destroy)},_fixIESelection:function(){function b(a,
c){var b=l.createTextRange();try{b.moveToPoint(a,c)}catch(d){b=null}return b}function a(a){var c;a.button?(c=b(a.x,a.y),c&&(0<c.compareEndPoints("StartToStart",g)?c.setEndPoint("StartToStart",g):c.setEndPoint("EndToEnd",g),c.select())):d()}function d(){var c=i.selection?i.selection.createRange():tinyMCE.activeEditor.getBody().createTextRange();g&&!c.item&&0===c.compareEndPoints("StartToEnd",c)&&g.select();j.unbind(i,"mouseup",d);j.unbind(i,"mousemove",a);g=f=0}var f,g,c,j=this.dom,i=j.doc,l=i.body;
i.documentElement.unselectable=!0;j.bind(i,["mousedown","contextmenu"],function(p){if("HTML"===p.target.nodeName&&!(f&&d(),c=i.documentElement,c.scrollHeight>c.clientHeight))f=1,(g=b(p.x,p.y))&&(j.bind(i,"mouseup",d),j.bind(i,"mousemove",a),j.win.focus(),g.select())})}})})(tinymce);
(function(d){d.dom.Serializer=function(h,l,i){var b,a,e,f=(d.isIE,d.each);return h.apply_source_formatting||(h.indent=!1),l=l||d.DOM,i=i||new d.html.Schema(h),h.entity_encoding=h.entity_encoding||"named",h.remove_trailing_brs=!("remove_trailing_brs"in h)||h.remove_trailing_brs,b=new d.util.Dispatcher(self),a=new d.util.Dispatcher(self),e=new d.html.DomParser(h,i),e.addAttributeFilter("src,href,style",function(a,c){for(var b,d,e=a.length,f="data-mce-"+c,i=h.url_converter,k=h.url_converter_scope;e--;)b=
a[e],d=b.attributes.map[f],void 0!==d?(b.attr(c,0<d.length?d:null),b.attr(f,null)):(d=b.attributes.map[c],"style"===c?d=l.serializeStyle(l.parseStyle(d),b.name):i&&(d=i.call(k,d,c,b.name)),b.attr(c,0<d.length?d:null))}),e.addAttributeFilter("class",function(a){for(var c,b,d=a.length;d--;)c=a[d],b=c.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),c.attr("class",0<b.length?b:null)}),e.addAttributeFilter("data-mce-type",function(a,c,b){for(var d=a.length;d--;)c=a[d],"bookmark"!==c.attributes.map["data-mce-type"]||
b.cleanup||c.remove()}),e.addNodeFilter("script,style",function(a,c){function b(a){return a.replace(/(<\!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<\!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<\!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<\!--|\/\*\s*<\!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\>)?|\s*\/\/\s*\]\]>(--\>)?|\/\/\s*(--\>)?|\]\]>|\/\*\s*--\>\s*\*\/|\s*--\>\s*)\s*$/g,"")}for(var d,e,f=a.length;f--;)d=a[f],e=d.firstChild?d.firstChild.value:"",
"script"===c?(d.attr("type",(d.attr("type")||"text/javascript").replace(/^mce\-/,"")),0<e.length&&(d.firstChild.value="// <![CDATA[\n"+b(e)+"\n// ]]\>")):0<e.length&&(d.firstChild.value="<\!--\n"+b(e)+"\n--\>")}),e.addNodeFilter("#comment",function(a){for(var c,b=a.length;b--;)c=a[b],0===c.value.indexOf("[CDATA[")?(c.name="#cdata",c.type=4,c.value=c.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===c.value.indexOf("mce:protected ")&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(c.value).substr(14))}),
e.addNodeFilter("xml:namespace,input",function(a,c){for(var b,d=a.length;d--;)b=a[d],7===b.type?b.remove():1===b.type&&("input"!==c||"type"in b.attributes.map||b.attr("type","text"))}),h.fix_list_elements&&e.addNodeFilter("ul,ol",function(a){for(var c,b,d=a.length;d--;)c=a[d],b=c.parent,"ul"!==b.name&&"ol"!==b.name||c.prev&&"li"===c.prev.name&&c.prev.append(c)}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,c){for(var b=a.length;b--;)a[b].attr(c,null)}),{schema:i,addNodeFilter:e.addNodeFilter,
addAttributeFilter:e.addAttributeFilter,onPreProcess:b,onPostProcess:a,serialize:function(g,c){var j,m,o,p;return g=g.cloneNode(!0),j=g.ownerDocument.implementation,j.createHTMLDocument&&(m=j.createHTMLDocument(""),f("BODY"==g.nodeName?g.childNodes:[g],function(a){m.body.appendChild(m.importNode(a,!0))}),g="BODY"!=g.nodeName?m.body.firstChild:m.body,o=l.doc,l.doc=m),c=c||{},c.format=c.format||"html",c.no_events||(c.node=g,b.dispatch(self,c)),p=new d.html.Serializer(h,i),c.content=p.serialize(e.parse(c.getInner?
g.innerHTML:d.trim(l.getOuterHTML(g),c),c)),c.cleanup||(c.content=c.content.replace(/\uFEFF|\u200B/g,"")),c.no_events||a.dispatch(self,c),o&&(l.doc=o),c.node=null,c.content},addRules:function(a){i.addValidElements(a)},setRules:function(a){i.setValidElements(a)}}}})(tinymce);
(function(d){d.dom.ScriptLoader=function(){var h={},l=[],i={},b=[],a=0;this.isDone=function(a){return 2==h[a]};this.markDone=function(a){h[a]=2};this.add=this.load=function(a,b,d){void 0==h[a]&&(l.push(a),h[a]=0);b&&(i[a]||(i[a]=[]),i[a].push({func:b,scope:d||this}))};this.loadQueue=function(a,b){this.loadScripts(l,a,b)};this.loadScripts=function(e,f,g){function c(a){d.each(i[a],function(a){a.func.call(a.scope)});i[a]=void 0}var j;b.push({func:f,scope:g||this});(j=function(){var f=d.grep(e);e.length=
0;d.each(f,function(b){var e;if(2==h[b])e=void c(b);else{if(1!=h[b]){h[b]=1;a++;var f=function(){m.remove(l);k&&(k.onreadystatechange=k.onload=k=null);h[b]=2;a--;c(b);j()};e=function(){AJS.log("Failed to load: "+b)};var k,g,i,l,m=d.DOM;l=m.uniqueId();d.isIE6&&(g=new d.util.URI(b),i=location,g.host==i.hostname&&g.port==i.port&&g.protocol+":"==i.protocol&&"file"!=g.protocol.toLowerCase())?d.util.XHR.send({url:d._addVer(g.getURI()),success:function(a){var c=m.create("script",{type:"text/javascript"});
c.text=a;document.getElementsByTagName("head")[0].appendChild(c);m.remove(c);f()},error:e}):(k=m.create("script",{id:l,type:"text/javascript",src:d._addVer(b)}),d.isIE||(k.onload=f),k.onerror=e,d.isOpera||(k.onreadystatechange=function(){var a=k.readyState;"complete"!=a&&"loaded"!=a||f()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(k))}e=void 0}return e});a||(d.each(b,function(a){a.func.call(a.scope)}),b.length=0)})()}};d.ScriptLoader=new d.dom.ScriptLoader})(tinymce);
tinymce.dom.TreeWalker=function(d,h){function l(b,a,d,f){if(b){if(!f&&b[a])return b[a];if(b!=h){if(a=b[d])return a;for(b=b.parentNode;b&&b!=h;b=b.parentNode)if(a=b[d])return a}}}var i=d;this.current=function(){return i};this.next=function(b){return i=l(i,"firstChild","nextSibling",b)};this.prev=function(b){return i=l(i,"lastChild","previousSibling",b)}};
(function(d){d.dom.RangeUtils=function(h){this.walk=function(l,i){function b(a){var c;return c=a[0],3===c.nodeType&&c===p&&q>=c.nodeValue.length&&a.splice(0,1),c=a[a.length-1],0===s&&0<a.length&&c===k&&3===c.nodeType&&a.splice(a.length-1,1),a}function a(a,c,b){for(var d=[];a&&a!=b;a=a[c])d.push(a);return d}function e(a,c){do{if(a.parentNode==c)return a;a=a.parentNode}while(a)}function f(c,d,e){var f=e?"nextSibling":"previousSibling";j=c;for(m=j.parentNode;j&&j!=d;j=m)m=j.parentNode,o=a(j==c?j:j[f],
f),o.length&&(e||o.reverse(),i(b(o)))}var g,c,j,m,o,p=l.startContainer,q=l.startOffset,k=l.endContainer,s=l.endOffset;if(c=h.select("td.mceSelected,th.mceSelected"),0<c.length)return void d.each(c,function(a){i([a])});if(1==p.nodeType&&p.hasChildNodes()&&(p=p.childNodes[q]),1==k.nodeType&&k.hasChildNodes()&&(k=k.childNodes[Math.min(s-1,k.childNodes.length-1)]),p==k)return i(b([p]));g=h.findCommonAncestor(p,k);for(j=p;j;j=j.parentNode){if(j===k)return f(p,g,!0);if(j===g)break}for(j=k;j;j=j.parentNode){if(j===
p)return f(k,g);if(j===g)break}c=e(p,g)||p;g=e(k,g)||k;f(p,c,!0);o=a(c==p?c:c.nextSibling,"nextSibling",g==k?g.nextSibling:g);o.length&&i(b(o));f(k,g)};this.split=function(d){var i=d.startContainer,b=d.startOffset,a=d.endContainer,d=d.endOffset;return i==a&&3==i.nodeType?0<b&&b<i.nodeValue.length&&(a=i.splitText(b),i=a.previousSibling,d>b?(d-=b,i=a=a.splitText(d).previousSibling,d=a.nodeValue.length,b=0):d=0):(3==i.nodeType&&0<b&&b<i.nodeValue.length&&(i=i.splitText(b),b=0),3==a.nodeType&&0<d&&d<
a.nodeValue.length&&(a=a.splitText(d).previousSibling,d=a.nodeValue.length)),{startContainer:i,startOffset:b,endContainer:a,endOffset:d}}};d.dom.RangeUtils.compareRanges=function(d,l){if(d&&l){if(!d.item&&!d.duplicate)return d.startContainer==l.startContainer&&d.startOffset==l.startOffset;if(d.item&&l.item&&d.item(0)===l.item(0)||d.isEqual&&l.isEqual&&l.isEqual(d))return!0}return!1}})(tinymce);
(function(d){var h=d.dom.Event,l=d.each;d.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(i,b){var a,e,f,g,c,j=this,m=i.root,o=i.items,p=i.enableUpDown,q=i.enableLeftRight||!i.enableUpDown,k=i.excludeFromTabOrder,b=b||d.DOM;a=function(a){c=a.target.id};e=function(a){b.setAttrib(a.target.id,"tabindex","-1")};g=function(){var a=b.get(c);b.setAttrib(a,"tabindex","0");a.focus()};j.focus=function(){b.get(c).focus()};j.destroy=function(){l(o,function(c){b.unbind(b.get(c.id),"focus",
a);b.unbind(b.get(c.id),"blur",e)});b.unbind(b.get(m),"focus",g);b.unbind(b.get(m),"keydown",f);o=b=m=j.focus=a=e=f=g=null;j.destroy=function(){}};j.moveFocus=function(a,d){var e,f=-1;j.controls;c&&(l(o,function(a,b){if(a.id===c)return f=b,!1}),f+=a,0>f?f=o.length-1:f>=o.length&&(f=0),e=o[f],b.setAttrib(c,"tabindex","-1"),b.setAttrib(e.id,"tabindex","0"),b.get(e.id).focus(),i.actOnFocus&&i.onAction(e.id),d&&h.cancel(d))};f=function(a){switch(a.keyCode){case 37:q&&j.moveFocus(-1);break;case 39:q&&
j.moveFocus(1);break;case 38:p&&j.moveFocus(-1);break;case 40:p&&j.moveFocus(1);break;case 27:i.onCancel&&(i.onCancel(),h.cancel(a));break;case 14:case 13:case 32:i.onAction&&(i.onAction(c),h.cancel(a))}};l(o,function(c,d){var f;c.id||(c.id=b.uniqueId("_mce_item_"));k?(b.bind(c.id,"blur",e),f="-1"):f=0===d?"0":"-1";b.setAttrib(c.id,"tabindex",f);b.bind(b.get(c.id),"focus",a)});o[0]&&(c=o[0].id);b.setAttrib(m,"tabindex","-1");b.bind(b.get(m),"focus",g);b.bind(b.get(m),"keydown",f)}})})(tinymce);
(function(d){var h=d.DOM,l=d.is;d.create("tinymce.ui.Control",{Control:function(i,b,a){this.id=i;this.settings=b=b||{};this.rendered=!1;this.onRender=new d.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.active=this.disabled=0;this.editor=a},setAriaProperty:function(d,b){var a=h.get(this.id+"_aria")||h.get(this.id);a&&h.setAttrib(a,"aria-"+d,!!b)},focus:function(){h.get(this.id).focus()},setDisabled:function(d){d!=this.disabled&&(this.setAriaProperty("disabled",d),this.setState("Disabled",
d),this.setState("Enabled",!d),this.disabled=d)},isDisabled:function(){return this.disabled},setActive:function(d){d!=this.active&&(this.setState("Active",d),this.active=d,this.setAriaProperty("pressed",d))},isActive:function(){return this.active},setState:function(d,b){var a=h.get(this.id),d=this.classPrefix+d;b?h.addClass(a,d):h.removeClass(a,d)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){h.setHTML(d,this.renderHTML())},postRender:function(){var d;l(this.disabled)&&
(d=this.disabled,this.disabled=-1,this.setDisabled(d));l(this.active)&&(d=this.active,this.active=-1,this.setActive(d))},remove:function(){h.remove(this.id);this.destroy()},destroy:function(){d.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(d,h,l){this.parent(d,h,l);this.controls=[];this.lookup={}},add:function(d){return this.lookup[d.id]=d,this.controls.push(d),d},get:function(d){return this.lookup[d]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(d,h){this.parent(d,h);this.classPrefix="mceSeparator";this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
(function(d){var h=d.is;d.DOM;d.each;d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(d,i){this.parent(d,i);this.classPrefix="mceMenuItem"},setSelected:function(d){this.setState("Selected",d);this.setAriaProperty("checked",!!d);this.selected=d},isSelected:function(){return this.selected},postRender:function(){this.parent();h(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(d){var h=(d.is,d.DOM),l=(d.each,d.walk);d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(i,b){this.parent(i,b);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new d.util.Dispatcher(this)},expand:function(d){d&&l(this,function(b){b.expand&&b.expand()},"items",this);this.collapsed=!1},collapse:function(d){d&&l(this,function(b){b.collapse&&b.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(i){return i.settings||
(i=new d.ui.MenuItem(i.id||h.uniqueId(),i)),this.onAddItem.dispatch(this,i),this.items[i.id]=i},addSeparator:function(){return this.add({separator:!0})},addMenu:function(d){return d.collapse||(d=this.createMenu(d)),this.menuCount++,this.add(d)},hasMenus:function(){return 0!==this.menuCount},remove:function(d){delete this.items[d.id]},removeAll:function(){l(this,function(d){d.removeAll?d.removeAll():d.remove();d.destroy()},"items",this);this.items={}},createMenu:function(i){i=new d.ui.Menu(i.id||h.uniqueId(),
i);return i.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),i}})})(tinymce);
(function(d){var h=d.is,l=d.DOM,i=d.each,b=d.dom.Event,a=d.dom.Element;d.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||l.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;h(b.icons)&&!b.icons&&(b["class"]+=" mceNoIcons");this.parent(a,b);this.onShowMenu=new d.util.Dispatcher(this);this.onHideMenu=new d.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var b,
g=this.settings;return a.container=a.container||g.container,a.parent=this,a.constrain=a.constrain||g.constrain,a["class"]=a["class"]||g["class"],a.vp_offset_x=a.vp_offset_x||g.vp_offset_x,a.vp_offset_y=a.vp_offset_y||g.vp_offset_y,a.keyboard_focus=g.keyboard_focus,b=new d.ui.DropMenu(a.id||l.uniqueId(),a),b.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),b},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var a,b,d=this.settings,c=l.get("menu_"+this.id+"_tbl"),
j=l.get("menu_"+this.id+"_co");a=d.max_width?Math.min(c.clientWidth,d.max_width):c.clientWidth;b=d.max_height?Math.min(c.clientHeight,d.max_height):c.clientHeight;l.boxModel?this.element.setStyles({width:a,height:b}):this.element.setStyles({width:a+2,height:b+2});d.max_width&&l.setStyle(j,"width",a);d.max_height&&(l.setStyle(j,"height",b),c.clientHeight<d.max_height&&l.setStyle(j,"overflow","hidden"))},showMenu:function(e,f,g){var c,j,h,o,p,q,k=this,s=k.settings,r=l.getViewPort(),u=k.classPrefix;
k.collapse(1);k.isMenuVisible||(k.rendered?c=l.get("menu_"+k.id):(c=l.add(k.settings.container,k.renderNode()),i(k.items,function(a){a.postRender()}),k.element=new a("menu_"+k.id,{blocker:1,container:s.container})),d.isOpera||l.setStyles(c,{left:-65535,top:-65535}),l.show(c),k.update(),e+=s.offset_x||0,f+=s.offset_y||0,r.w-=4,r.h-=4,s.constrain&&(j=c.clientWidth-2,h=c.clientHeight-2,o=r.x+r.w,p=r.y+r.h,e+s.vp_offset_x+j>o&&(e=g?g-j:Math.max(0,o-s.vp_offset_x-j)),f+s.vp_offset_y+h>p&&(f=Math.max(0,
p-s.vp_offset_y-h))),l.setStyles(c,{left:e,top:f}),k.element.update(),k.isMenuVisible=1,k.mouseClickFunc=b.add(c,"click",function(a){var c;if(a=a.target,a&&(a=l.getParent(a,"tr"))&&!l.hasClass(a,u+"ItemSub"))if(!(c=k.items[a.id],c.isDisabled())){for(q=k;q;)q.hideMenu&&q.hideMenu(),q=q.settings.parent;return c.settings.onclick&&c.settings.onclick(a),b.cancel(a)}}),k.hasMenus()&&(k.mouseOverFunc=b.add(c,"mouseover",function(a){var c,b;if(a=a.target,a&&(a=l.getParent(a,"tr")))if(!(c=k.items[a.id],k.lastMenu&&
k.lastMenu.collapse(1),c.isDisabled()))a&&l.hasClass(a,u+"ItemSub")&&(b=l.getRect(a),c.showMenu(b.x+b.w-2,b.y-2,b.x),k.lastMenu=c,l.addClass(l.get(c.id).firstChild,u+"ItemActive"))})),b.add(c,"keydown",k._keyHandler,k),k.onShowMenu.dispatch(k),s.keyboard_focus&&k._setupKeyboardNav())},hideMenu:function(a){var d,g=l.get("menu_"+this.id);this.isMenuVisible&&(this.keyboardNav&&this.keyboardNav.destroy(),b.remove(g,"mouseover",this.mouseOverFunc),b.remove(g,"click",this.mouseClickFunc),b.remove(g,"keydown",
this._keyHandler),l.hide(g),this.isMenuVisible=0,a||this.collapse(1),this.element&&this.element.hide(),(d=l.get(this.id))&&l.removeClass(d.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this))},add:function(a){var b;return a=this.parent(a),this.isRendered&&(b=l.get("menu_"+this.id))&&this._add(l.select("tbody",b)[0],a),a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){return l.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=l.get("menu_"+
this.id);this.keyboardNav&&this.keyboardNav.destroy();b.remove(a,"mouseover",this.mouseOverFunc);b.remove(l.select("a",a),"focus",this.mouseOverFunc);b.remove(a,"click",this.mouseClickFunc);b.remove(a,"keydown",this._keyHandler);this.element&&this.element.remove();l.remove(a)},renderNode:function(){var b,d,g,c,j=this,h=j.settings;return c=l.create("div",{role:"listbox",id:"menu_"+j.id,"class":h["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),j.settings.parent&&l.setAttrib(c,
"aria-parent","menu_"+j.settings.parent.id),g=l.add(c,"div",{role:"presentation",id:"menu_"+j.id+"_co","class":j.classPrefix+(h["class"]?" "+h["class"]:"")}),j.element=new a("menu_"+j.id,{blocker:1,container:h.container}),h.menu_line&&l.add(g,"span",{"class":j.classPrefix+"Line"}),b=l.add(g,"table",{role:"presentation",id:"menu_"+j.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),d=l.add(b,"tbody"),i(j.items,function(a){j._add(d,a)}),j.rendered=!0,c},_setupKeyboardNav:function(){var a,b,g=this;a=
l.get("menu_"+g.id);b=l.select("a[role=option]","menu_"+g.id);b.splice(0,0,a);g.keyboardNav=new d.ui.KeyboardNavigation({root:"menu_"+g.id,items:b,onCancel:function(){g.hideMenu()},enableUpDown:!0});a.focus()},_keyHandler:function(a){switch(a.keyCode){case 37:this.settings.parent&&(this.hideMenu(),this.settings.parent.focus(),b.cancel(a));break;case 39:this.mouseOverFunc&&this.mouseOverFunc(a)}},_add:function(a,b){var d,c,j,i,h,p=b.settings,q=this.classPrefix;return p.separator?(j=l.add(a,"tr",{id:b.id,
"class":q+"ItemSeparator"}),l.add(j,"td",{"class":q+"ItemSeparator"}),void((d=j.previousSibling)&&l.addClass(d,"mceLast"))):(d=j=l.add(a,"tr",{id:b.id,"class":q+"Item "+q+"ItemEnabled"}),d=i=l.add(d,p.titleItem?"th":"td"),d=c=l.add(d,"a",{id:b.id+"_aria",role:p.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),p.parent&&(l.setAttrib(c,"aria-haspopup","true"),l.setAttrib(c,"aria-owns","menu_"+b.id)),l.addClass(i,p["class"]),h=l.add(d,"span",
{"class":"mceIcon"+(p.icon?" mce_"+p.icon:"")}),p.icon_src&&l.add(h,"img",{src:p.icon_src}),d=l.add(d,p.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&l.setAttrib(d,"style",b.settings.style),1==a.childNodes.length&&l.addClass(j,"mceFirst"),(d=j.previousSibling)&&l.hasClass(d,q+"ItemSeparator")&&l.addClass(j,"mceFirst"),b.collapse&&l.addClass(j,q+"ItemSub"),(d=j.previousSibling)&&l.removeClass(d,"mceLast"),void l.addClass(j,"mceLast"))}})})(tinymce);
(function(d){var h=d.DOM;d.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(d,i,b){this.parent(d,i,b);this.classPrefix="mceButton"},renderHTML:function(){var d,i,b=this.classPrefix,a=this.settings;return i=h.encode(a.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+b+" "+b+"Enabled "+a["class"]+(i?" "+b+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+h.encode(a.title)+'">',d+=!a.image||this.editor&&
this.editor.forcedHighContrastMode?'<span class="mceIcon '+a["class"]+'"></span>'+(i?'<span class="'+b+'Label">'+i+"</span>":""):'<img class="mceIcon" src="'+a.image+'" alt="'+h.encode(a.title)+'" />'+i,d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+a.title+"</span>",d+"</a>"},postRender:function(){var l,i=this,b=i.settings;d.isIE&&i.editor&&d.dom.Event.add(i.id,"mousedown",function(){l="IMG"===i.editor.selection.getNode().nodeName?i.editor.selection.getBookmark():
null});d.dom.Event.add(i.id,"click",function(a){if(!i.isDisabled())return d.isIE&&i.editor&&null!==l&&i.editor.selection.moveToBookmark(l),b.onclick.call(b.scope,a)});d.dom.Event.add(i.id,"keyup",function(a){if(!i.isDisabled()&&a.keyCode==d.VK.SPACEBAR)return b.onclick.call(b.scope,a)})}})})(tinymce);
(function(d){var h=d.DOM,l=d.dom.Event,i=d.each,b=d.util.Dispatcher;d.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,e,f){this.parent(a,e,f);this.items=[];this.onChange=new b(this);this.onPostRender=new b(this);this.onAdd=new b(this);this.onRenderMenu=new d.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var b,d,g=this;return void 0==a?g.selectByIndex(-1):(d=a&&"function"==typeof a?a:function(c){return c==a},void(a!=g.selectedValue&&(i(g.items,function(a,
j){if(d(a.value))return b=1,g.selectByIndex(j),!1}),b||g.selectByIndex(-1))))},selectByIndex:function(a){var b,d,g;a!=this.selectedIndex&&(b=h.get(this.id+"_text"),g=h.get(this.id+"_voiceDesc"),d=this.items[a],d?(this.selectedValue=d.value,this.selectedIndex=a,h.setHTML(b,h.encode(d.title)),h.setHTML(g,this.settings.title+" - "+d.title),h.removeClass(b,"mceTitle"),h.setAttrib(this.id,"aria-valuenow",d.title)):(h.setHTML(b,h.encode(this.settings.title)),h.setHTML(g,h.encode(this.settings.title)),h.addClass(b,
"mceTitle"),this.selectedValue=this.selectedIndex=null,h.setAttrib(this.id,"aria-valuenow",this.settings.title)))},add:function(a,b,f){f=f||{};f=d.extend(f,{title:a,value:b});this.items.push(f);this.onAdd.dispatch(this,f)},getLength:function(){return this.items.length},renderHTML:function(){var a="",b=this.settings,d=this.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+this.id+'_voiceDesc" aria-describedby="'+this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+
this.id+'" cellpadding="0" cellspacing="0" class="'+d+" "+d+"Enabled"+(b["class"]?" "+b["class"]:"")+'"><tbody><tr>',a+="<td>"+h.createHTML("span",{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title),a+=h.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},h.encode(this.settings.title))+"</td>",a+="<td>"+h.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",
onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+"</tr></tbody></table></span>"},showMenu:function(){var a,b,f=this,g=h.get(this.id);if(!f.isDisabled()&&0!=f.items.length){if(f.menu&&f.menu.isMenuVisible)return f.hideMenu();f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0);a=h.getPos(g);b=f.menu;b.settings.offset_x=a.x;b.settings.offset_y=a.y;b.settings.keyboard_focus=!d.isOpera;f.oldID&&
b.items[f.oldID].setSelected(0);i(f.items,function(a){a.value===f.selectedValue&&(b.items[a.id].setSelected(1),f.oldID=a.id)});b.showMenu(0,g.clientHeight);l.add(h.doc,"mousedown",f.hideMenu,f);h.addClass(f.id,f.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible&&!(h.removeClass(this.id,this.classPrefix+"Selected"),a&&"mousedown"==a.type&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open")))a&&h.getParent(a.target,".mceMenu")||(h.removeClass(this.id,this.classPrefix+
"Selected"),l.remove(h.doc,"mousedown",this.hideMenu,this),this.menu.hideMenu())},renderMenu:function(){var a,b=this;a=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,"class":b.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});a.onHideMenu.add(function(){b.hideMenu();b.focus()});a.add({title:b.settings.title,"class":"mceMenuItemTitle",onclick:function(){!1!==b.settings.onselect("")&&b.select("")}});i(b.items,function(d){void 0===d.value?a.add({title:d.title,role:"option",
"class":"mceMenuItemTitle",onclick:function(){!1!==b.settings.onselect("")&&b.select("")}}):(d.id=h.uniqueId(),d.role="option",d.onclick=function(){!1!==b.settings.onselect(d.value)&&b.select(d.value)},a.add(d))});b.onRenderMenu.dispatch(b,a);b.menu=a},postRender:function(){var a=this,b=a.classPrefix;l.add(a.id,"click",a.showMenu,a);l.add(a.id,"keydown",function(b){32==b.keyCode&&(a.showMenu(b),l.cancel(b))});l.add(a.id,"focus",function(){a._focused||(a.keyDownHandler=l.add(a.id,"keydown",function(b){40==
b.keyCode&&(a.showMenu(),l.cancel(b))}),a.keyPressHandler=l.add(a.id,"keypress",function(b){var d;13==b.keyCode&&(d=a.selectedValue,a.selectedValue=null,l.cancel(b),a.settings.onselect(d))}));a._focused=1});l.add(a.id,"blur",function(){l.remove(a.id,"keydown",a.keyDownHandler);l.remove(a.id,"keypress",a.keyPressHandler);a._focused=0});!d.isIE6&&h.boxModel||(l.add(a.id,"mouseover",function(){h.hasClass(a.id,b+"Disabled")||h.addClass(a.id,b+"Hover")}),l.add(a.id,"mouseout",function(){h.hasClass(a.id,
b+"Disabled")||h.removeClass(a.id,b+"Hover")}));a.onPostRender.dispatch(a,h.get(a.id))},destroy:function(){this.parent();l.clear(this.id+"_text");l.clear(this.id+"_open")}})})(tinymce);
(function(d){var h=d.DOM,l=d.dom.Event,i=d.each;d.util.Dispatcher;d.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(b,a){this.parent(b,a);this.classPrefix="mceNativeListBox"},setDisabled:function(b){h.get(this.id).disabled=b;this.setAriaProperty("disabled",b)},isDisabled:function(){return h.get(this.id).disabled},select:function(b){var a,d,f=this;return void 0==b?f.selectByIndex(-1):(d=b&&"function"==typeof b?b:function(a){return a==b},void(b!=f.selectedValue&&(i(f.items,
function(b,c){if(d(b.value))return a=1,f.selectByIndex(c),!1}),a||f.selectByIndex(-1))))},selectByIndex:function(b){h.get(this.id).selectedIndex=b+1;this.selectedValue=this.items[b]?this.items[b].value:null},add:function(b,a,d){d=d||{};d.value=a;this.isRendered()&&h.add(h.get(this.id),"option",d,b);b={title:b,value:a,attribs:d};this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var b;return b=h.createHTML("option",{value:""},"-- "+
this.settings.title+" --"),i(this.items,function(a){b+=h.createHTML("option",{value:a.value},a.title)}),b=h.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},b),b+=h.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title)},postRender:function(){function b(b){(b=a.items[b.target.selectedIndex-1])&&(b=b.value)&&(a.onChange.dispatch(a,b),a.settings.onselect&&a.settings.onselect(b))}var a=this,e=!0;a.rendered=!0;l.add(a.id,"change",
b);l.add(a.id,"keydown",function(f){var g;return l.remove(a.id,"change",void 0),e=!1,g=l.add(a.id,"blur",function(){e||(e=!0,l.add(a.id,"change",b),l.remove(a.id,"blur",g))}),!d.isWebKit||37!=f.keyCode&&39!=f.keyCode?13==f.keyCode||32==f.keyCode?(b(f),l.cancel(f)):void 0:l.prevent(f)});a.onPostRender.dispatch(a,h.get(a.id))}})})(tinymce);
(function(d){var h=d.DOM,l=d.dom.Event;d.each;d.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(i,b,a){this.parent(i,b,a);this.onRenderMenu=new d.util.Dispatcher(this);b.menu_container=b.menu_container||h.doc.body},showMenu:function(){var d,b,a=h.get(this.id);if(!this.isDisabled()){if(this.isMenuRendered||(this.renderMenu(),this.isMenuRendered=!0),this.isMenuVisible)return this.hideMenu();h.getPos(this.settings.menu_container);d=h.getPos(a);b=this.menu;b.settings.offset_x=d.x;
b.settings.offset_y=d.y;b.settings.vp_offset_x=d.x;b.settings.vp_offset_y=d.y;b.settings.keyboard_focus=this._focused;b.showMenu(0,a.clientHeight);l.add(h.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var d,b=this;d=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:b.settings.icons});d.onHideMenu.add(function(){b.hideMenu();b.focus()});b.onRenderMenu.dispatch(b,d);b.menu=d},hideMenu:function(d){var b=
this;d&&"mousedown"==d.type&&h.getParent(d.target,function(a){return a.id===b.id||a.id===b.id+"_open"})||(d&&h.getParent(d.target,".mceMenu")||(b.setState("Selected",0),l.remove(h.doc,"mousedown",b.hideMenu,b),b.menu&&b.menu.hideMenu()),b.isMenuVisible=0)},postRender:function(){var d=this,b=d.settings;l.add(d.id,"click",function(){d.isDisabled()||(b.onclick&&b.onclick(d.value),d.showMenu())})}})})(tinymce);
(function(d){var h=d.DOM,l=d.dom.Event;d.each;d.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(d,b,a){this.parent(d,b,a);this.classPrefix="mceSplitButton"},renderHTML:function(){var d,b,a=this.settings;return d="<tbody><tr>",b=a.image?h.createHTML("img ",{src:a.image,role:"presentation","class":"mceAction "+a["class"]}):h.createHTML("span",{"class":"mceAction "+a["class"]},""),b+=h.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},
a.title),d+="<td >"+h.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+a["class"],onclick:"return false;",onmousedown:"return false;",title:a.title},b)+"</td>",b=h.createHTML("span",{"class":"mceOpen "+a["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),d+="<td >"+h.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+a["class"],onclick:"return false;",onmousedown:"return false;",
title:a.title},b)+"</td>",d+="</tr></tbody>",d=h.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+a["class"],cellpadding:"0",cellspacing:"0",title:a.title},d),h.createHTML("div",{id:this.id,role:"button",tabindex:"0","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},d)},postRender:function(){var i,b=this,a=b.settings;a.onclick&&(i=function(d){b.isDisabled()||(a.onclick(b.value),l.cancel(d))},l.add(b.id+"_action","click",i),l.add(b.id,["click","keydown"],
function(a){32!==a.keyCode&&13!==a.keyCode&&14!==a.keyCode||a.altKey||a.ctrlKey||a.metaKey?"click"!==a.type&&40!==a.keyCode||(b.showMenu(),l.cancel(a)):(i(),l.cancel(a))}));l.add(b.id+"_open","click",function(a){b.showMenu();l.cancel(a)});l.add([b.id,b.id+"_open"],"focus",function(){b._focused=1});l.add([b.id,b.id+"_open"],"blur",function(){b._focused=0});!d.isIE6&&h.boxModel||(l.add(b.id,"mouseover",function(){h.hasClass(b.id,"mceSplitButtonDisabled")||h.addClass(b.id,"mceSplitButtonHover")}),l.add(b.id,
"mouseout",function(){h.hasClass(b.id,"mceSplitButtonDisabled")||h.removeClass(b.id,"mceSplitButtonHover")}))},destroy:function(){this.parent();l.clear(this.id+"_action");l.clear(this.id+"_open");l.clear(this.id)}})})(tinymce);
(function(d){var h=d.DOM,l=d.dom.Event,i=d.is,b=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b,f){this.parent(a,b,f);this.settings=b=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new d.util.Dispatcher(this);this.onHideMenu=new d.util.Dispatcher(this);this.value=b.default_color},showMenu:function(){var a,b,d=this;if(!d.isDisabled()){if(d.isMenuRendered||(d.renderMenu(),d.isMenuRendered=!0),d.isMenuVisible)return d.hideMenu();a=h.get(d.id);h.show(d.id+"_menu");h.addClass(a,"mceSplitButtonSelected");b=h.getPos(a);h.setStyles(d.id+"_menu",{left:b.x,top:b.y+a.clientHeight,zIndex:2E5});a=0;l.add(h.doc,"mousedown",d.hideMenu,d);d.onShowMenu.dispatch(d);
d._focused&&(d._keyHandler=l.add(d.id+"_menu","keydown",function(a){27==a.keyCode&&d.hideMenu()}),h.select("a",d.id+"_menu")[0].focus());d.isMenuVisible=1}},hideMenu:function(a){var b=this;if(b.isMenuVisible&&(!a||!("mousedown"==a.type&&h.getParent(a.target,function(a){return a.id===b.id+"_open"}))))a&&h.getParent(a.target,".mceSplitButtonMenu")||(h.removeClass(b.id,"mceSplitButtonSelected"),l.remove(h.doc,"mousedown",b.hideMenu,b),l.remove(b.id+"_menu","keydown",b._keyHandler),h.hide(b.id+"_menu")),
b.isMenuVisible=0,b.onHideMenu.dispatch()},renderMenu:function(){var a,e,f,g,c,j,m=this,o=0,p=m.settings;return c=h.add(p.menu_container,"div",{role:"listbox",id:m.id+"_menu","class":p.menu_class+" "+p["class"],style:"position:absolute;left:0;top:-1000px;"}),a=h.add(c,"div",{"class":p["class"]+" mceSplitButtonMenu"}),h.add(a,"span",{"class":"mceMenuLine"}),e=h.add(a,"table",{role:"presentation","class":"mceColorSplitMenu"}),f=h.add(e,"tbody"),o=0,b(i(p.colors,"array")?p.colors:p.colors.split(","),
function(a){a=a.replace(/^#/,"");o--||(g=h.add(f,"tr"),o=p.grid_width-1);e=h.add(g,"td");var c={href:"javascript:;",style:{backgroundColor:"#"+a},title:m.editor.getLang("colors."+a,a),"data-mce-color":"#"+a};d.isIE||(c.role="option");e=h.add(e,"a",c);m.editor.forcedHighContrastMode&&(e=h.add(e,"canvas",{width:16,height:16,"aria-hidden":"true"}),e.getContext&&(j=e.getContext("2d"))?(j.fillStyle="#"+a,j.fillRect(0,0,16,16)):h.remove(e))}),p.more_colors_func&&(e=h.add(f,"tr"),e=h.add(e,"td",{colspan:p.grid_width,
"class":"mceMoreColors"}),e=h.add(e,"a",{role:"option",id:m.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},p.more_colors_title),l.add(e,"click",function(a){return p.more_colors_func.call(p.more_colors_scope||this),l.cancel(a)})),h.addClass(a,"mceColorSplitMenu"),new d.ui.KeyboardNavigation({root:m.id+"_menu",items:h.select("a",m.id+"_menu"),onCancel:function(){m.hideMenu();m.focus()}}),l.add(m.id+"_menu","mousedown",function(a){return l.cancel(a)}),l.add(m.id+"_menu",
"click",function(a){var c;return a=h.getParent(a.target,"a",f),a&&"a"==a.nodeName.toLowerCase()&&(c=a.getAttribute("data-mce-color"))&&m.setColor(c),l.cancel(a)}),c},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){h.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();h.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});h.setStyle(this.id+"_preview","backgroundColor",
this.value)},destroy:function(){this.parent();l.clear(this.id+"_menu");l.clear(this.id+"_more");h.remove(this.id+"_menu")}})})(tinymce);
(function(d){var h=d.DOM,l=d.each,i=d.dom.Event;d.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var b=[],a=this.controls,e=d.each,f=this.settings;return b.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">'),b.push("<span role='application'>"),b.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+h.encode(f.name)+"</span>"),e(a,function(a){b.push(a.renderHTML())}),b.push("</span>"),b.push("</div>"),b.join("")},
focus:function(){h.get(this.id).focus()},postRender:function(){var b=this,a=[];l(b.controls,function(b){l(b.controls,function(b){b.id&&a.push(b)})});b.keyNav=new d.ui.KeyboardNavigation({root:b.id,items:a,onCancel:function(){d.isWebKit&&h.get(b.editor.id+"_ifr").focus();b.editor.focus()},excludeFromTabOrder:!b.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();i.clear(this.id)}})})(tinymce);
(function(d){var h=d.DOM;d.each;d.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var d,i,b,a,e,f,g="",c=this.settings;f=this.controls;for(b=0;b<f.length;b++)i=f[b],a=f[b-1],e=f[b+1],0===b&&(d="mceToolbarStart",i.Button?d+=" mceToolbarStartButton":i.SplitButton?d+=" mceToolbarStartSplitButton":i.ListBox&&(d+=" mceToolbarStartListBox"),g+=h.createHTML("td",{"class":d},h.createHTML("span",null,"<\!-- IE --\>"))),a&&i.ListBox&&(a.Button||a.SplitButton)&&(g+=h.createHTML("td",
{"class":"mceToolbarEnd"},h.createHTML("span",null,"<\!-- IE --\>"))),g+=h.stdMode?'<td style="position: relative">'+i.renderHTML()+"</td>":"<td>"+i.renderHTML()+"</td>",e&&i.ListBox&&(e.Button||e.SplitButton)&&(g+=h.createHTML("td",{"class":"mceToolbarStart"},h.createHTML("span",null,"<\!-- IE --\>")));return d="mceToolbarEnd",i.Button?d+=" mceToolbarEndButton":i.SplitButton?d+=" mceToolbarEndSplitButton":i.ListBox&&(d+=" mceToolbarEndListBox"),g+=h.createHTML("td",{"class":d},h.createHTML("span",
null,"<\!-- IE --\>")),h.createHTML("table",{id:this.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+g+"</tr></tbody>")}})})(tinymce);
(function(d){var h=d.util.Dispatcher;d.each;d.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new h(this)},get:function(d){return this.lookup[d]?this.lookup[d].instance:void 0},dependencies:function(d){var i;return this.lookup[d]&&(i=this.lookup[d].dependencies),i||[]},requireLangPack:function(h){var i=d.settings;i&&i.language&&!1!==i.language_load&&d.ScriptLoader.add(this.urls[h]+"/langs/"+i.language+".js")},add:function(d,i,b){return this.items.push(i),
this.lookup[d]={instance:i,dependencies:b},this.onAdd.dispatch(this,d,i),i},createUrl:function(d,i){return"object"==typeof i?i:{prefix:d.prefix,resource:i,suffix:d.suffix}},addComponents:function(h,i){var b=this.urls[h];d.each(i,function(a){d.ScriptLoader.add(b+"/"+a)})},load:function(h,i,b,a){function e(){var c=f.dependencies(h);d.each(c,function(a){a=f.createUrl(i,a);f.load(a.resource,a,void 0,void 0)});b&&(a?b.call(a):b.call(d.ScriptLoader))}var f=this,g=i;f.urls[h]||("object"==typeof i&&(g=i.prefix+
i.resource+i.suffix),0!=g.indexOf("/")&&-1==g.indexOf("://")&&(g=d.baseURL+"/"+g),f.urls[h]=g.substring(0,g.lastIndexOf("/")),d.settings.atlassian||(f.lookup[h]?e():d.ScriptLoader.add(g,e,a)))}});d.PluginManager=new d.AddOnManager;d.ThemeManager=new d.AddOnManager})(tinymce);
(function(d){var h=d.each,l=d.extend,i=d.DOM,b=d.dom.Event,a=(d.ThemeManager,d.PluginManager,d.explode),e=d.util.Dispatcher,f=0;d.documentBaseURL=d.baseURL;AJS.log("tinymce.documentBaseURL = "+d.documentBaseURL);/[\/\\]$/.test(d.documentBaseURL)||(d.documentBaseURL+="/");d.baseURL=(new d.util.URI(d.documentBaseURL)).toAbsolute(d.baseURL);d.baseURI=new d.util.URI(d.baseURL);d.onBeforeUnload=new e(d);b.add(window,"beforeunload",function(a){d.onBeforeUnload.dispatch(d,a)});d.onAddEditor=new e(d);d.onRemoveEditor=
new e(d);d.EditorManager=l(d,{editors:[],i18n:{},activeEditor:null,init:function(e){function c(a,c,b){var e=a[c];if(e)return d.is(e,"string")&&(b=e.replace(/\.\w+$/,""),b=b?d.resolve(b):0,e=d.resolve(e)),e.apply(b||this,Array.prototype.slice.call(arguments,2))}function j(){var b,j;switch(c(e,"onpageload"),e.mode){case "exact":b=e.elements||"";0<b.length&&h(a(b),function(a){i.get(a)?(o=new d.Editor(a,e),q.push(o),o.render(1)):h(document.forms,function(c){h(c.elements,function(c){c.name===a&&(a="mce_editor_"+
f++,i.setAttrib(c,"id",a),o=new d.Editor(a,e),q.push(o),o.render(1))})})});break;case "textareas":case "specific_textareas":h(i.select("textarea"),function(a){e.editor_deselector&&(e.editor_deselector.constructor===RegExp?e.editor_deselector.test(a.className):i.hasClass(a,e.editor_deselector))||e.editor_selector&&!(e.editor_selector.constructor===RegExp?e.editor_selector.test(a.className):i.hasClass(a,e.editor_selector))||(m=i.get(a.name),a.id||m||(a.id=a.name),a.id&&!p.get(a.id)||(a.id=i.uniqueId()),
o=new d.Editor(a.id,e),q.push(o),o.render(1))})}e.oninit&&(b=j=0,h(q,function(a){j++;a.initialized?b++:a.onInit.add(function(){b++;b==j&&c(e,"oninit")});b==j&&c(e,"oninit")}))}var m,o,p=this,q=(d.ScriptLoader,[]),e=l({theme:"simple",language:"en"},e);p.settings=e;e.atlassian?j():b.add(document,"init",j)},get:function(a){return void 0===a?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var c=this.editors;return c[a.id]=a,c.push(a),this._setActive(a),this.onAddEditor.dispatch(this,
a),d.adapter&&d.adapter.patchEditor(a),a},remove:function(a){var c,b=this.editors;if(!b[a.id])return null;delete b[a.id];for(c=0;c<b.length;c++)if(b[c]==a){b.splice(c,1);break}return this.activeEditor==a&&this._setActive(b[0]),a.destroy(),this.onRemoveEditor.dispatch(this,a),a},execCommand:function(a,c,b){function e(){i.destroy();f.detachEvent("onunload",e);f=f.tinyMCE=f.tinymce=null}var f,i=this.get(b);switch(a){case "mceFocus":return i.focus(),!0;case "mceAddEditor":case "mceAddControl":return this.get(b)||
(new d.Editor(b,this.settings)).render(),!0;case "mceAddFrameControl":return f=b.window,f.tinyMCE=tinyMCE,f.tinymce=d,d.DOM.doc=f.document,d.DOM.win=f,i=new d.Editor(b.element_id,b),i.render(),d.isIE&&f.attachEvent("onunload",e),b.page_window=null,!0;case "mceRemoveEditor":case "mceRemoveControl":return i&&i.remove(),!0;case "mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(this.execCommand("mceAddControl",0,b),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(a,c,b)},execInstanceCommand:function(a,
c,b,d){a=this.get(a);return!!a&&a.execCommand(c,b,d)},triggerSave:function(){h(this.editors,function(a){a.save()})},addI18n:function(a,c){var b=this.i18n;d.is(a,"string")?h(c,function(c,d){b[a+"."+d]=c}):h(a,function(a,c){h(a,function(a,d){h(a,function(a,e){"common"===d?b[c+"."+e]=a:b[c+"."+d+"."+e]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);
(function(d){var h=d.DOM,l=d.dom.Event,i=d.extend,b=d.util.Dispatcher,a=d.each,e=d.isGecko,f=d.isIE,g=(d.isWebKit,d.is),c=d.ThemeManager,j=d.PluginManager,m=(d.inArray,d.grep,d.explode),o=d.VK;d.create("tinymce.Editor",{Editor:function(c,e){var f=this;f.id=f.editorId=c;f.execCommands={};f.queryStateCommands={};f.queryValueCommands={};f.isNotDirty=!1;f.plugins={};a("onPreInit onBeforeRenderUI onPostRender onLoad onInit onRemove onActivate onDeactivate onClick onEvent onMouseUp onMouseDown onDblClick onKeyDown onKeyUp onKeyPress onContextMenu onSubmit onReset onPaste onPreProcess onPostProcess onBeforeSetContent onBeforeGetContent onSetContent onGetContent onLoadContent onSaveContent onNodeChange onChange onBeforeExecCommand onExecCommand onUndo onRedo onVisualAid onSetProgressState onSetAttrib".split(" "),
function(a){f[a]=new b(f)});f.settings=e=i({id:c,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:d.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,
doctype:d.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE html>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,
convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:f.convertURL,url_converter_scope:f,ie7_compat:!0},e);f.documentBaseURI=new d.util.URI(e.document_base_url||d.documentBaseURL,{base_uri:tinyMCE.baseURI});f.baseURI=d.baseURI;f.contentCSS=
[];f.execCallback("setup",f)},render:function(){var b=this,e=b.settings,f=b.id,g=d.ScriptLoader;if(e.atlassian||l.domLoaded){tinyMCE.settings=e;if(b.getElement()&&(!d.isIDevice||d.isIOS5))!/TEXTAREA|INPUT/i.test(b.getElement().nodeName)&&e.hidden_input&&h.getParent(f,"form")&&h.insertAfter(h.create("input",{type:"hidden",name:f}),f),d.WindowManager&&(b.windowManager=new d.WindowManager(b)),"xml"==e.encoding&&b.onGetContent.add(function(a,c){c.save&&(c.content=h.encode(c.content))}),e.add_form_submit_trigger&&
b.onSubmit.addToTop(function(){b.initialized&&(b.save(),b.isNotDirty=1)}),e.add_unload_trigger&&(b._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!b.initialized||b.destroyed||b.isHidden()||b.save({format:"raw",no_events:!0})})),d.addUnload(b.destroy,b),e.submit_patch&&b.onBeforeRenderUI.add(function(){var a=b.getElement().form;a&&(a._mceOldSubmit||(a.submit.nodeType||a.submit.length||(b.formElement=a,a._mceOldSubmit=a.submit,a.submit=function(){return d.triggerSave(),b.isNotDirty=1,b.formElement._mceOldSubmit(b.formElement)}),
a=null))}),f=function(){b.removed||b.init()},e.theme&&"-"!=e.theme.charAt(0)&&!c.urls[e.theme]&&c.load(e.theme,"themes/"+e.theme+"/editor_template"+d.suffix+".js"),a(m(e.plugins),function(c){c&&!j.urls[c]&&("-"==c.charAt(0)?(c=c.substr(1,c.length),c=j.dependencies(c),a(c,function(a){a=j.createUrl({prefix:"plugins/",resource:a,suffix:"/editor_plugin"+d.suffix+".js"},a);j.load(a.resource,a)})):"safari"!=c&&j.load(c,{prefix:"plugins/",resource:c,suffix:"/editor_plugin"+d.suffix+".js"}))}),e.atlassian?
f():g.loadQueue(f);e=void 0}else e=void l.add(document,"init",function(){b.render()});return e},init:function(){function b(c){var e,f=j.get(c),k=j.urls[c]||d.documentBaseURL.replace(/\/$/,"");f&&-1===d.inArray(C,c)&&(a(j.dependencies(c),function(a){b(a)}),e=new f(n,k),n.plugins[c]=e,e.init&&(e.init(n,k),C.push(c)),AJS.log("initPlugin: "+c+" initialised"))}function g(a,c){c&&c.initial||n.execCommand("mceRepaint")}var k,l,r,u,o,n=this,y=n.settings,t=n.getElement(),C=[];if(d.add(n),y.aria_label=y.aria_label||
h.getAttrib(t,"aria-label",n.getLang("aria.rich_text_area")),y.theme&&(y.theme=y.theme.replace(/-/,""),r=c.get(y.theme),n.theme=new r,n.theme.init&&y.init_theme&&n.theme.init(n,c.urls[y.theme]||d.documentBaseURL.replace(/\/$/,""))),a(m(y.plugins.replace(/\-/g,"")),b),!1!==y.popup_css&&(y.popup_css?y.popup_css=n.documentBaseURI.toAbsolute(y.popup_css):y.popup_css=n.baseURI.toAbsolute("themes/"+y.theme+"/skins/"+y.skin+"/dialog.css")),y.popup_css_add&&(y.popup_css+=","+n.documentBaseURI.toAbsolute(y.popup_css_add)),
n.controlManager=new d.ControlManager(n),y.custom_undo_redo&&(n.onBeforeExecCommand.add(function(a,c,b,d,e){"Undo"==c||"Redo"==c||"mceRepaint"==c||e&&e.skip_undo||n.undoManager.beforeChange()}),n.onExecCommand.add(function(a,c,b,d,e){"Undo"==c||"Redo"==c||"mceRepaint"==c||e&&e.skip_undo||n.undoManager.add()})),n.onExecCommand.add(function(a,c){/^(FontName|FontSize)$/.test(c)||n.nodeChanged()}),e&&(n.onUndo.add(g),n.onRedo.add(g),n.onSetContent.add(g)),n.onBeforeRenderUI.dispatch(n,n.controlManager),
y.render_ui&&(k=y.width||t.style.width||t.offsetWidth,l=y.height||t.style.height||t.offsetHeight,n.orgDisplay=t.style.display,o=/^[0-9\.]+(|px)$/i,o.test(""+k)&&(k=Math.max(parseInt(k)+(r.deltaWidth||0),100)),o.test(""+l)&&(l=Math.max(parseInt(l)+(r.deltaHeight||0),100)),r=n.theme.renderUI({targetNode:t,width:k,height:l,deltaWidth:y.delta_width,deltaHeight:y.delta_height}),n.editorContainer=r.editorContainer),y.content_editable)return t=r=null,n.setupContentEditable();document.domain&&location.hostname!=
document.domain&&(d.relaxedDomain=document.domain);h.setStyles(r.sizeContainer||r.editorContainer,{width:k,height:l});y.content_css&&d.each(m(y.content_css),function(a){n.contentCSS.push(n.documentBaseURI.toAbsolute(a))});100>l&&(l=100);n.iframeHTML=y.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';y.ie7_compat?n.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':n.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />';n.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';
for(k=0;k<n.contentCSS.length;k++)n.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+n.contentCSS[k]+'" />';y.contentCssTags&&(n.iframeHTML+=y.contentCssTags);n.contentCSS=[];k=y.body_id||"tinymce";-1!=k.indexOf("=")&&(k=n.getParam("body_id","","hash"),k=k[n.id]||k);o=y.body_class||"";-1!=o.indexOf("=")&&(o=n.getParam("body_class","","hash"),o=o[n.id]||"");n.iframeHTML+='</head><body id="'+k+'" class="mceContentBody aui-theme-default '+o+'" onload="window.parent.tinyMCE.get(\''+n.id+"').onLoad.dispatch();\"><br></body></html>";
d.relaxedDomain&&(f||d.isOpera&&11>parseFloat(opera.version()))&&(u='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()');y.iframe_attr=y.iframe_attr||{};y.iframe_attr=i(y.iframe_attr,{id:n.id+"_ifr",src:u||'javascript:""',frameBorder:"0",allowTransparency:"true",title:y.aria_label,style:{width:"100%",height:l,display:"block"}});h.add(r.iframeContainer,"iframe",
y.iframe_attr);n.contentAreaContainer=r.iframeContainer;h.get(r.editorContainer).style.display=n.orgDisplay;h.get(n.id).style.display="none";h.setAttrib(n.id,"aria-hidden",!0);d.relaxedDomain&&u||n.setupIframe();t=r=null},setupIframe:function(){function c(b){a(b.dom.select("a"),function(a){var c=a.parentNode;b.dom.isBlock(c)&&c.lastChild===a&&b.dom.add(c,"br",{"data-mce-bogus":1})})}var b,k=this,j=k.settings;h.get(k.id);b=k.getDoc();f&&d.relaxedDomain||(b.open(),b.write(k.iframeHTML),b.close(),d.relaxedDomain&&
(b.domain=d.relaxedDomain));b=k.getBody();b.disabled=!0;j.readonly||(b.contentEditable=!0);b.disabled=!1;k.schema=new d.html.Schema(j);k.dom=new d.dom.DOMUtils(k.getDoc(),{keep_values:!0,url_converter:k.convertURL,url_converter_scope:k,hex_colors:j.force_hex_style_colors,class_filter:j.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:k.schema});k.parser=new d.html.DomParser(j,k.schema);k.settings.allow_html_in_named_anchor||k.parser.addAttributeFilter("name",function(a){for(var c,b,d,e,f=a.length;f--;)if(e=
a[f],"a"===e.name&&e.firstChild){d=e.parent;c=e.lastChild;do b=c.prev,d.insert(c,e),c=b;while(c)}});k.parser.addAttributeFilter("src,href,style",function(a,c){for(var b,d,e,f=a.length,j=k.dom;f--;)b=a[f],d=b.attr(c),e="data-mce-"+c,b.attributes.map[e]||("style"===c?b.attr(e,j.serializeStyle(j.parseStyle(d),b.name)):b.attr(e,k.convertURL(d,c,b.name)))});k.parser.addNodeFilter("script",function(a){for(var c,b=a.length;b--;)c=a[b],c.attr("type","mce-"+(c.attr("type")||"text/javascript"))});k.parser.addNodeFilter("#cdata",
function(a){for(var c,b=a.length;b--;)c=a[b],c.type=8,c.name="#comment",c.value="[CDATA["+c.value+"]]"});k.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(a){var c,b=a.length;for(k.schema.getNonEmptyElements();b--;)c=a[b],c.isEmpty(k.schema)&&(c.empty().append(new d.html.Node("br",1)).shortEnded=!0)});k.serializer=new d.dom.Serializer(j,k.dom,k.schema);k.selection=new d.dom.Selection(k.dom,k.getWin(),k.serializer);k.formatter=new d.Formatter(this);k.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",
styles:{textAlign:"left"}},{selector:"img.confluence-embedded-image",classes:"image-left"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img.confluence-embedded-image",classes:"image-center"},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img.confluence-embedded-image",
classes:"image-right"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"s",
remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},
onformat:function(c,b,d){a(d,function(a,b){k.dom.setAttrib(c,b,a)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){k.formatter.register(a,{block:a,remove:"all"})});k.formatter.register(k.settings.formats);
k.undoManager=new d.UndoManager(k);k.undoManager.onAdd.add(function(a,c){if(a.hasUndo())return k.onChange.dispatch(k,c,a)});k.undoManager.onUndo.add(function(a,c){return k.onUndo.dispatch(k,c,a)});k.undoManager.onRedo.add(function(a,c){return k.onRedo.dispatch(k,c,a)});k.forceBlocks=new d.ForceBlocks(k,{forced_root_block:j.forced_root_block});k.editorCommands=new d.EditorCommands(k);k.serializer.onPreProcess.add(function(a,c){return k.onPreProcess.dispatch(k,c,a)});k.serializer.onPostProcess.add(function(a,
c){return k.onPostProcess.dispatch(k,c,a)});AJS.log("Editor:setupIframe: dispatch onPreInit");k.onPreInit.dispatch(k);j.gecko_spellcheck||(k.getBody().spellcheck=0);j.readonly||k._addEvents();AJS.log("Editor:setupIframe: dispatch controlManager onPostRender");k.controlManager.onPostRender.dispatch(k,k.controlManager);AJS.log("Editor:setupIframe: dispatch onPostRender");k.onPostRender.dispatch(k);k.quirks=new d.util.Quirks(this);j.directionality&&(k.getBody().dir=j.directionality);j.nowrap&&(k.getBody().style.whiteSpace=
"nowrap");j.handle_node_change_callback&&k.onNodeChange.add(function(a,c,b){k.execCallback("handle_node_change_callback",k.id,b,-1,-1,!0,k.selection.isCollapsed())});j.save_callback&&k.onSaveContent.add(function(a,c){var b=k.execCallback("save_callback",k.id,c.content,k.getBody());b&&(c.content=b)});j.onchange_callback&&k.onChange.add(function(a,c){k.execCallback("onchange_callback",k,c)});j.protect&&k.onBeforeSetContent.add(function(c,b){j.protect&&a(j.protect,function(a){b.content=b.content.replace(a,
function(a){return"<\!--mce:protected "+escape(a)+"--\>"})})});j.convert_newlines_to_brs&&k.onBeforeSetContent.add(function(a,c){c.initial&&(c.content=c.content.replace(/\r?\n/g,"<br />"))});j.preformatted&&k.onPostProcess.add(function(a,c){c.content=c.content.replace(/^\s*<pre.*?>/,"");c.content=c.content.replace(/<\/pre>\s*$/,"");c.set&&(c.content='<pre class="mceItemHidden">'+c.content+"</pre>")});j.verify_css_classes&&(k.serializer.attribValueFilter=function(c,b){var d,e;return"class"==c?(k.classesRE||
(e=k.dom.getClasses(),0<e.length&&(d="",a(e,function(a){d+=(d?"|":"")+a["class"]}),k.classesRE=RegExp("("+d+")","gi"))),!k.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||k.classesRE.test(b)?b:""):b});j.cleanup_callback&&(k.onBeforeSetContent.add(function(a,c){c.content=k.execCallback("cleanup_callback","insert_to_editor",c.content,c)}),k.onPreProcess.add(function(a,c){c.set&&k.execCallback("cleanup_callback","insert_to_editor_dom",c.node,c);c.get&&k.execCallback("cleanup_callback","get_from_editor_dom",
c.node,c)}),k.onPostProcess.add(function(a,c){c.set&&(c.content=k.execCallback("cleanup_callback","insert_to_editor",c.content,c));c.get&&(c.content=k.execCallback("cleanup_callback","get_from_editor",c.content,c))}));j.save_callback&&k.onGetContent.add(function(a,c){c.save&&(c.content=k.execCallback("save_callback",k.id,c.content,k.getBody()))});j.handle_event_callback&&k.onEvent.add(function(a,c,b){!1===k.execCallback("handle_event_callback",c,a,b)&&l.cancel(c)});k.onSetContent.add(function(){k.addVisual(k.getBody())});
j.padd_empty_editor&&k.onPostProcess.add(function(a,c){c.content=c.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});e&&(k.onExecCommand.add(function(a,b){"CreateLink"===b&&c(a)}),k.onSetContent.add(k.selection.onSetContent.add(c)));k.load({initial:!0,format:"html"});k.startContent=k.getContent({format:"raw"});k.undoManager.add();k.initialized=!0;AJS.log("Editor:setupIframe: dispatch onInit");k.onInit.dispatch(k);AJS.log("Editor:setupIframe: Callback setupcontent_callback");
k.execCallback("setupcontent_callback",k.id,k.getBody(),k.getDoc());AJS.log("Editor:setupIframe: Completed setupcontent_callback");AJS.log("Editor:setupIframe: Callback init_instance_callback");k.execCallback("init_instance_callback",k);AJS.log("Editor:setupIframe: Completed init_instance_callback");k.focus(!0);k.nodeChanged({initial:1});a(k.contentCSS,function(a){k.dom.loadCSS(a)});j.auto_focus&&setTimeout(function(){var a=d.get(j.auto_focus);a.selection.select(a.getBody(),1);a.selection.collapse(1);
a.getBody().focus();a.getWin().focus()},100)},setupContentEditable:function(){var c=this,b=c.settings,e=c.getElement();c.contentDocument=b.content_document||document;c.contentWindow=b.content_window||window;c.bodyElement=e;b.content_document=b.content_window=null;h.hide(e);e.contentEditable=c.getParam("content_editable_state",!0);h.show(e);b.gecko_spellcheck||(c.getDoc().body.spellcheck=0);c.dom=new d.dom.DOMUtils(c.getDoc(),{keep_values:!0,url_converter:c.convertURL,url_converter_scope:c,hex_colors:b.force_hex_style_colors,
class_filter:b.class_filter,root_element:c.id,fix_ie_paragraphs:1,update_styles:1});c.serializer=new d.dom.Serializer(b,c.dom,schema);c.selection=new d.dom.Selection(c.dom,c.getWin(),c.serializer);c.forceBlocks=new d.ForceBlocks(c,{forced_root_block:b.forced_root_block});c.editorCommands=new d.EditorCommands(c);c.serializer.onPreProcess.add(function(a,b){return c.onPreProcess.dispatch(c,b,a)});c.serializer.onPostProcess.add(function(a,b){return c.onPostProcess.dispatch(c,b,a)});c.onPreInit.dispatch(c);
c._addEvents();c.controlManager.onPostRender.dispatch(c,c.controlManager);c.onPostRender.dispatch(c);c.onSetContent.add(function(){c.addVisual(c.getBody())});c.startContent=c.getContent({format:"raw"});c.undoManager.add({initial:!0});c.initialized=!0;c.onInit.dispatch(c);c.focus(!0);c.nodeChanged({initial:1});b.content_css&&a(m(b.content_css),function(a){c.dom.loadCSS(c.documentBaseURI.toAbsolute(a))});f&&(c.dom.bind(c.getElement(),"beforedeactivate",function(){c.lastSelectionBookmark=c.selection.getBookmark(1)}),
c.onBeforeExecCommand.add(function(a,c,b,d,e){h.getParent(a.selection.getStart(),function(c){return c==a.getBody()})||(e.terminate=1);h.getParent(a.selection.getEnd(),function(c){return c==a.getBody()})||(e.terminate=1)}));e=null},focus:function(a){var c,b,e,f,j,g=this.selection,i=this.settings.content_editable,l=this.getDoc();if(!a){if(b=g.getRng(),b.item&&(e=b.item(0)),this._refreshContentEditable(),!i)if(d.isIE)try{f=this.getWin(),j=h.getViewPort(f),this.dom.getRoot().focus(),f.scrollTo(j.x,j.y)}catch(m){}else this.getWin().focus();
d.isGecko&&this.getBody().focus();e&&e.ownerDocument==l&&(b=l.body.createControlRange(),b.addElement(e),b.select());i&&(d.isWebKit?this.getWin().focus():d.isIE?this.getElement().setActive():this.getElement().focus())}d.activeEditor!=this&&(null!=(c=d.activeEditor)&&c.onDeactivate.dispatch(c,this),this.onActivate.dispatch(this,c));d._setActive(this)},execCallback:function(a){var c,b=this.settings[a];if(b)return this.callbackLookup&&(c=this.callbackLookup[a])&&(b=c.func,c=c.scope),g(b,"string")&&(c=
b.replace(/\.\w+$/,""),c=c?d.resolve(c):0,b=d.resolve(b),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:b,scope:c}),b.apply(c||this,Array.prototype.slice.call(arguments,1))},translate:function(a){var c=this.settings.language||"en",b=d.i18n;return a?b[c+"."+a]||a.replace(/{\#([^}]+)\}/g,function(a,d){return b[c+"."+d]||"{#"+d+"}"}):""},getLang:function(a,c){return d.i18n[(this.settings.language||"en")+"."+a]||(g(c)?c:"{#"+a+"}")},getParam:function(c,b,e){var f,j=d.trim,c=
g(this.settings[c])?this.settings[c]:b;return"hash"===e?(f={},g(c,"string")?a(0<c.indexOf("=")?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):c.split(","),function(a){a=a.split("=");1<a.length?f[j(a[0])]=j(a[1]):f[j(a[0])]=j(a)}):f=c,f):c},nodeChanged:function(a){var c=this.selection,b=c.getStart()||this.getBody();this.initialized&&(a=a||{},b=f&&b.ownerDocument!=this.getDoc()?this.getBody():b,a.parents=[],this.dom.getParent(b,function(c){return"BODY"==c.nodeName||void a.parents.push(c)}),this.onNodeChange.dispatch(this,
a?a.controlManager||this.controlManager:this.controlManager,b,c.isCollapsed(),a))},addButton:function(a,c){this.buttons=this.buttons||{};this.buttons[a]=c},addCommand:function(a,c,b){this.execCommands[a]={func:c,scope:b||this}},addQueryStateHandler:function(a,c,b){this.queryStateCommands[a]={func:c,scope:b||this}},addQueryValueHandler:function(a,c,b){this.queryValueCommands[a]={func:c,scope:b||this}},addShortcut:function(c,b,d,e){var f,j=this;return!!j.settings.custom_shortcuts&&(j.shortcuts=j.shortcuts||
{},g(d,"string")&&(f=d,d=function(){j.execCommand(f,!1,null)}),g(d,"object")&&(f=d,d=function(){j.execCommand(f[0],f[1],f[2])}),a(m(c),function(c){var f={func:d,scope:e||this,desc:b,alt:!1,ctrl:!1,shift:!1};a(m(c,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":f[a]=!0;break;default:f.charCode=a.charCodeAt(0),f.keyCode=a.toUpperCase().charCodeAt(0)}});j.shortcuts[(f.ctrl?"ctrl":"")+","+(f.alt?"alt":"")+","+(f.shift?"shift":"")+","+f.keyCode]=f}),!0)},execCommand:function(c,b,d,e){var f,
j,g=this,h=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(c)||e&&e.skip_focus||g.focus(),e=i({},e),g.onBeforeExecCommand.dispatch(g,c,b,d,e),!e.terminate&&(g.execCallback("execcommand_callback",g.id,g.selection.getNode(),c,b,d)?(g.onExecCommand.dispatch(g,c,b,d,e),!0):(f=g.execCommands[c])&&(j=f.func.call(f.scope,b,d),!0!==j)?(g.onExecCommand.dispatch(g,c,b,d,e),j):(a(g.plugins,function(a){if(a.execCommand&&a.execCommand(c,b,d))return g.onExecCommand.dispatch(g,
c,b,d,e),h=1,!1}),!!h||(g.theme&&g.theme.execCommand&&g.theme.execCommand(c,b,d)?(g.onExecCommand.dispatch(g,c,b,d,e),!0):g.editorCommands.execCommand(c,b,d)?(g.onExecCommand.dispatch(g,c,b,d,e),!0):(g.getDoc().execCommand(c,b,d),void g.onExecCommand.dispatch(g,c,b,d,e)))))},queryCommandState:function(a){var c,b;if(!this._isHidden()){if((c=this.queryStateCommands[a])&&(b=c.func.call(c.scope),!0!==b))return b;if(c=this.editorCommands.queryCommandState(a),-1!==c)return c;try{return this.getDoc().queryCommandState(a)}catch(d){}}},
queryCommandValue:function(a){var c,b;if(!this._isHidden()){if((c=this.queryValueCommands[a])&&(b=c.func.call(c.scope),!0!==b))return b;if(c=this.editorCommands.queryCommandValue(a),g(c))return c;try{return this.getDoc().queryCommandValue(a)}catch(d){}}},show:function(){h.show(this.getContainer());h.hide(this.id);this.load()},hide:function(){var a=this.getDoc();f&&a&&a.execCommand("SelectAll");this.save();h.hide(this.getContainer());h.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!h.isHidden(this.id)},
setProgressState:function(a,c,b){return this.onSetProgressState.dispatch(this,a,c,b),a},load:function(a){var c,b=this.getElement();if(b)return a=a||{},a.load=!0,c=this.setContent(g(b.value)?b.value:b.innerHTML,a),a.element=b,a.no_events||this.onLoadContent.dispatch(this,a),a.element=null,c},save:function(c){var b,d,e=this,f=e.getElement();if(f&&e.initialized){c=c||{};c.save=!0;try{c.no_events||(e.undoManager.typing=!1,e.undoManager.add())}catch(j){AJS.logError("editor.save() : "+j)}return c.element=
f,b=c.content=e.getContent(c),c.no_events||e.onSaveContent.dispatch(e,c),b=c.content,/TEXTAREA|INPUT/i.test(f.nodeName)?f.value=b:(f.innerHTML=b,(d=h.getParent(e.id,"form"))&&a(d.elements,function(a){if(a.name==e.id)return a.value=b,!1})),c.element=f=null,b}},setContent:function(a,c){var b,e=this.getBody();return c=c||{},c.format=c.format||"html",c.set=!0,c.content=a,c.no_events||this.onBeforeSetContent.dispatch(this,c),a=c.content,d.isIE||0!==a.length&&!/^\s+$/.test(a)||(b=this.settings.forced_root_block,
a=b?"<"+b+'><br data-mce-bogus="1"></'+b+">":'<br data-mce-bogus="1">',e.innerHTML=a,this.selection.select(e,!0),this.selection.collapse(!0)),"raw"!==c.format&&(a=(new d.html.Serializer({},this.schema)).serialize(this.parser.parse(a))),c.content=d.trim(a),this.dom.setHTML(e,c.content),c.no_events||this.onSetContent.dispatch(this,c),this.selection.normalize(),c.content},getContent:function(a){var c;return a=a||{},a.format=a.format||"html",a.get=!0,a.no_events||this.onBeforeGetContent.dispatch(this,
a),c="raw"==a.format?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),a),a.content=d.trim(c),a.no_events||this.onGetContent.dispatch(this,a),a.content},isDirty:function(){return d.trim(this.startContent)!=d.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},setDirty:function(a){this.isNotDirty=a?0:1},getContainer:function(){return this.container||(this.container=h.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},
getElement:function(){return h.get(this.settings.content_element||this.id)},getWin:function(){var a;return this.contentWindow||(a=h.get(this.id+"_ifr"),a&&(this.contentWindow=a.contentWindow)),this.contentWindow},getDoc:function(){var a;return this.contentDocument||(a=this.getWin(),a&&(this.contentDocument=a.document)),this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,c,b){var d=this.settings;return d.urlconverter_callback?this.execCallback("urlconverter_callback",
a,b,!0,c):!d.convert_urls||b&&"LINK"==b.nodeName||0===a.indexOf("file:")?a:d.relative_urls?this.documentBaseURI.toRelative(a):this.documentBaseURI.toAbsolute(a,d.remove_script_host)},addVisual:function(c){var b=this,d=b.settings,c=c||b.getBody();g(b.hasVisual)||(b.hasVisual=d.visual);a(b.dom.select("table,a",c),function(a){var c;switch(a.nodeName){case "TABLE":return c=b.dom.getAttrib(a,"border"),void(c&&"0"!=c||(b.hasVisual?b.dom.addClass(a,d.visual_table_class):b.dom.removeClass(a,d.visual_table_class)));
case "A":return c=b.dom.getAttrib(a,"name"),void(c&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor")))}});b.onVisualAid.dispatch(b,c,b.hasVisual)},remove:function(){var a=this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];d.remove(this);h.remove(a)},destroy:function(a){this.destroyed||(a||(d.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),
this.theme&&this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),this.selection.destroy(),this.dom.destroy(),this.settings.content_editable||(l.clear(this.getWin()),l.clear(this.getDoc())),l.clear(this.getBody()),l.clear(this.formElement)),this.formElement&&(this.formElement.submit=this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null),this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=
null,this.selection&&(this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null),this.destroyed=1)},_addEvents:function(){function c(a,b){a.type;n.removed||!1!==n.onEvent.dispatch(n,a,b)&&n[C[a.fakeType||a.type]].dispatch(n,a,b)}function b(){n.focus(!0)}function f(){var a=this.getDoc(),c=this.settings;if(e&&!c.readonly){this._refreshContentEditable();try{a.execCommand("styleWithCSS",0,!1)}catch(b){if(!this._isHidden())try{a.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{a.execCommand("enableInlineTableEditing",
!1,!1)}catch(j){}if(!c.object_resizing)try{a.execCommand("enableObjectResizing",!1,!1)}catch(g){}}}function j(c){var b=null;return c.altKey||c.ctrlKey||c.metaKey?(a(n.shortcuts,function(a){if((!d.isMac||a.ctrl==c.metaKey)&&(d.isMac||a.ctrl==c.ctrlKey)&&a.alt==c.altKey&&a.shift==c.shiftKey)return c.keyCode==a.keyCode||c.charCode&&c.charCode==a.charCode?(b=a,!1):void 0}),b):b}function g(){n.undoManager.typing=!1;n.undoManager.add()}function i(){var c=n.dom.getAttribs(n.selection.getStart().cloneNode(!1));
return function(){var b=n.selection.getStart();b!==n.getBody()&&(n.dom.setAttrib(b,"style",null),a(c,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function m(){var a=n.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}var n=this,y=n.settings,t=n.dom,C={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};if(a(C,function(a,
b){switch(b){case "contextmenu":t.bind(n.getDoc(),b,c);break;case "paste":t.bind(n.getBody(),b,function(a){c(a)});break;case "submit":case "reset":t.bind(n.getElement().form||h.getParent(n.id,"form"),b,c);break;default:t.bind(y.content_editable?n.getBody():n.getDoc(),b,c)}}),t.bind(y.content_editable?n.getBody():e?n.getDoc():n.getWin(),"focus",function(){n.focus(!0)}),y.content_editable&&d.isOpera&&(t.bind(n.getBody(),"click",b),t.bind(n.getBody(),"keydown",b)),d.isGecko&&t.bind(n.getDoc(),"DOMNodeInserted",
function(a){var c,a=a.target;1===a.nodeType&&"IMG"===a.nodeName&&(c=a.getAttribute("data-mce-src"))&&(a.src=n.documentBaseURI.toAbsolute(c))}),e&&(n.onBeforeExecCommand.add(f),n.onMouseDown.add(f)),n.onMouseUp.add(n.nodeChanged),n.onKeyUp.add(function(a,c){var b=c.keyCode;(33<=b&&36>=b||37<=b&&40>=b||13==b||45==b||46==b||8==b||d.isMac&&(91==b||93==b)||c.ctrlKey)&&n.nodeChanged()}),n.onKeyDown.add(function(a,c){if(c.keyCode==o.BACKSPACE){var b=a.selection.getRng(!0);if(b.collapsed){for(var d=b.startContainer,
e=b.startOffset;d&&d.nodeType&&1!=d.nodeType&&d.parentNode;)d=d.parentNode;d&&d.parentNode&&"BLOCKQUOTE"===d.parentNode.tagName&&d.parentNode.firstChild==d&&0===e&&(a.formatter.toggle("blockquote",null,d.parentNode),b.setStart(d,0),b.setEnd(d,0),a.selection.setRng(b),a.selection.collapse(!1))}}}),n.onReset.add(function(){n.setContent(n.startContent,{format:"raw"})}),y.custom_shortcuts&&(y.custom_undo_redo_keyboard_shortcuts&&(n.addShortcut("ctrl+z",n.getLang("undo_desc"),"Undo"),n.addShortcut("ctrl+y",
n.getLang("redo_desc"),"Redo")),n.addShortcut("ctrl+b",n.getLang("bold_desc"),"Bold"),n.addShortcut("ctrl+i",n.getLang("italic_desc"),"Italic"),n.addShortcut("ctrl+u",n.getLang("underline_desc"),"Underline"),n.onKeyUp.add(function(a,c){if(j(c))return l.cancel(c)}),n.onKeyPress.add(function(a,c){if(j(c))return l.cancel(c)}),n.onKeyDown.add(function(a,c){var b=j(c);if(b)return b.func.call(b.scope),l.cancel(c)})),d.isIE&&t.bind(n.getDoc(),"controlselect",function(a){var c,b=n.resizeInfo,a=a.target;"IMG"===
a.nodeName&&(b&&t.unbind(b.node,b.ev,b.cb),t.hasClass(a,"mceItemNoResize")?(ev="resizestart",c=t.bind(a,"resizestart",l.cancel,l)):(ev="resizeend",c=t.bind(a,ev,function(a){var c,a=a.target;(c=t.getStyle(a,"width"))&&(t.setAttrib(a,"width",c.replace(/[^0-9%]+/g,"")),t.setStyle(a,"width",""));(c=t.getStyle(a,"height"))&&(t.setAttrib(a,"height",c.replace(/[^0-9%]+/g,"")),t.setStyle(a,"height",""))})),b=n.resizeInfo={node:a,ev:ev,cb:c})}),d.isOpera&&n.onClick.add(function(a,c){l.prevent(c)}),y.custom_undo_redo){var A=
d.isGecko?"blur":"focusout";t.bind(n.getDoc(),A,function(){!n.removed&&n.undoManager.typing&&g()});n.dom.bind(n.dom.getRoot(),"dragend",function(){g()});n.onKeyUp.add(function(a,c){var b=c.keyCode;(33<=b&&36>=b||37<=b&&40>=b||13==b||45==b||c.ctrlKey)&&g()});n.onKeyDown.add(function(a,c){var b,e=c.keyCode;return 8==e&&(b=n.getDoc().selection,b&&b.createRange&&b.createRange().item)?(n.undoManager.beforeChange(),a.dom.remove(b.createRange().item(0)),g(),l.cancel(c)):33<=e&&36>=e||37<=e&&40>=e||13==e||
45==e?(d.isIE&&13==e&&n.undoManager.beforeChange(),void(n.undoManager.typing&&g())):void((16>e||20<e)&&224!=e&&91!=e&&!n.undoManager.typing&&(n.undoManager.beforeChange(),n.undoManager.typing=!0,n.undoManager.add()))});n.onMouseDown.add(function(){n.undoManager.typing&&g()})}d.isGecko&&(n.onKeyPress.add(function(a,c){var b;if((8==c.keyCode||46==c.keyCode)&&m())return b=i(),n.getDoc().execCommand("delete",!1,null),b(),l.cancel(c)}),n.dom.bind(n.getDoc(),"cut",function(){var a;m()&&(a=i(),n.onKeyUp.addToTop(l.cancel,
l),setTimeout(function(){a();n.onKeyUp.remove(l.cancel,l)},0))}))},_refreshContentEditable:function(){var a,c;this._isHidden()&&(a=this.getBody(),c=a.parentNode,c.removeChild(a),c.appendChild(a),a.focus())},_isHidden:function(){var a;return e?(a=this.selection.getSel(),!a||!a.rangeCount||0==a.rangeCount):0}})})(tinymce);
(function(d){var h=d.each,l=!0,i=!1;d.EditorCommands=function(b){function a(a,c,b){var d;return a=a.toLowerCase(),(d=p.exec[a])?(d(a,c,b),l):i}function e(a){var c;return a=a.toLowerCase(),(c=p.state[a])?c(a):-1}function f(a,c){c=c||"exec";h(a,function(a,b){h(b.toLowerCase().split(","),function(b){p[c][b]=a})})}function g(a,c,d){return void 0===c&&(c=i),void 0===d&&(d=null),b.getDoc().execCommand(a,c,d)}function c(a,c){k.toggle(a,c?{value:c}:void 0)}var j,m=b.dom,o=b.selection,p={state:{},exec:{},
value:{}},q=b.settings,k=b.formatter;d.extend(this,{execCommand:a,queryCommandState:e,queryCommandValue:function(a){var c;return a=a.toLowerCase(),(c=p.value[a])?c(a):i},addCommands:f});f({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){b.undoManager.add()},"Cut,Copy,Paste":function(a){var c,e=b.getDoc();try{g(a)}catch(f){c=l}!c&&e.queryCommandSupported(a)||(d.isGecko?b.windowManager.confirm(b.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html",
"_blank")}):b.windowManager.alert(b.getLang("clipboard_no_support")))},unlink:function(a){o.isCollapsed()&&o.select(o.getNode());g(a);o.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(d){var e=d.substring(7);b.undoManager.add();var f=o.getRng(),j=o.getNode();h(["left","center","right","full"],function(a){e!=a&&k.remove("align"+a);tinyMCE.isIE||"IMG"!=j.nodeName||"#document"!=o.getRng().startContainer.nodeName&&"#text"!=o.getRng().startContainer.nodeName||o.setRng(f)});c("align"+
e);a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var c;g(a);if(a=m.getParent(o.getNode(),"ol,ul"))c=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(j=o.getBookmark(void 0),m.split(c,a),o.moveToBookmark(j))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){c(a)},"ForeColor,HiliteColor,FontName":function(a,b,d){c(a,d)},FontSize:function(a,b,e){var f,j;1<=e&&7>=e&&(j=d.explode(q.font_size_style_values),f=d.explode(q.font_size_classes),e=f?f[e-
1]||e:j[e-1]||e);c(a,e)},RemoveFormat:function(a){k.remove(a)},mceBlockQuote:function(){c("blockquote")},FormatBlock:function(a,b,d){return c(d||"p")},mceCleanup:function(){var a=o.getBookmark();b.setContent(b.getContent({cleanup:l}),{cleanup:l});o.moveToBookmark(a)},mceRemoveNode:function(a,c,d){a=d||o.getNode();a!=b.getBody()&&(j=o.getBookmark(void 0),b.dom.remove(a,l),o.moveToBookmark(j))},mceSelectNodeDepth:function(a,c,d){var e=0;m.getParent(o.getNode(),function(a){if(1==a.nodeType&&e++==d)return o.select(a),
i},b.getBody())},mceSelectNode:function(a,c,b){o.select(b)},mceInsertContent:function(a,c,e){var f,j,g,k,i,h,l;if(f=b.parser,j=new d.html.Serializer({},b.schema),i={content:e,format:"html"},o.onBeforeSetContent.dispatch(o,i),e=i.content,-1==e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">﻿</span>'),!o.isCollapsed()&&o.getContent().length&&b.execCommand("mceDelete",!1,null,{skip_undo:!0}),g=o.getNode(),i={context:g.nodeName.toLowerCase()},
k=f.parse(e,i),h=k.lastChild,"mce_marker"==h.attr("id")){e=h;for(h=h.prev;h;h=h.walk(!0))if(3==h.type||!m.isBlock(h.name)){h.parent.insert(e,h,"br"===h.name);break}}if(i.invalid){o.setContent('<span id="mce_marker" data-mce-type="bookmark">﻿</span>');g=b.selection.getNode();a=b.getBody();for(9==g.nodeType?g=h=a:h=g;h!==a;)g=h,h=h.parentNode;e=g==a?a.innerHTML:m.getOuterHTML(g);e=j.serialize(f.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return j.serialize(k)})));
g==a?m.setHTML(a,e):m.setOuterHTML(g,e)}else e=j.serialize(k),h=g.firstChild,f=g.lastChild,!h||h===f&&"BR"===h.nodeName?m.setHTML(g,e):o.setContent(e);e=m.get("mce_marker");h=m.getRect(e);g=m.getViewPort(b.getWin());(h.y+h.h>g.y+g.h||h.y<g.y||h.x>g.x+g.w||h.x<g.x)&&(l=d.isIE?b.getDoc().documentElement:b.getBody(),l.scrollLeft=h.x,l.scrollTop=h.y-g.h+25);l=m.createRng();(h=e.previousSibling)&&3==h.nodeType?l.setStart(h,h.nodeValue.length):(l.setStartBefore(e),l.setEndBefore(e));m.remove(e);o.setRng(l);
o.onSetContent.dispatch(o,i);b.addVisual()},mceInsertRawHTML:function(a,c,d){o.setContent("tiny_mce_marker");b.setContent(b.getContent().replace(/tiny_mce_marker/g,function(){return d}))},mceSetContent:function(a,c,d){b.setContent(d)},"Indent,Outdent":function(a){var c,b,d;c=q.indentation;b=/[a-z%]+$/i.exec(c);c=parseInt(c);e("InsertUnorderedList")||e("InsertOrderedList")||e("InsertInlineTaskList")?g(a):h(o.getSelectedBlocks(),function(e){"outdent"==a?(d=Math.max(0,parseInt(e.style.paddingLeft||0)-
c),m.setStyle(e,"paddingLeft",d?d+b:"")):m.setStyle(e,"paddingLeft",parseInt(e.style.paddingLeft||0)+c+b)})},mceRepaint:function(){if(d.isGecko)try{j=o.getBookmark(l),o.getSel()&&o.getSel().selectAllChildren(b.getBody()),o.collapse(l),o.moveToBookmark(j)}catch(a){}},mceToggleFormat:function(a,c,b){k.toggle(b)},InsertHorizontalRule:function(){b.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){b.hasVisual=!b.hasVisual;b.addVisual()},mceReplaceContent:function(a,c,d){b.execCommand("mceInsertContent",
!1,d.replace(/\{\$selection\}/g,o.getContent({format:"text"})))},mceInsertLink:function(a,c,b){"string"==typeof b&&(b={href:b});a=m.getParent(o.getNode(),"a");b.href=b.href.replace(" ","%20");a&&b.href||k.remove("link");b.href&&k.apply("link",b,a)},selectAll:function(){var a=m.getRoot(),c=m.createRng();c.setStart(a,0);c.setEnd(a,a.childNodes.length);b.selection.setRng(c)}});f({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c="align"+a.substring(7),a=o.isCollapsed()?[o.getNode()]:
o.getSelectedBlocks(),a=d.map(a,function(a){return!!k.matchNode(a,c)});return-1!==d.inArray(a,l)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return k.match(a)},mceBlockQuote:function(){return k.match("blockquote")},Outdent:function(){var a;return q.inline_styles&&((a=m.getParent(o.getStart(),m.isBlock))&&0<parseInt(a.style.paddingLeft)||(a=m.getParent(o.getEnd(),m.isBlock))&&0<parseInt(a.style.paddingLeft))?l:e("InsertUnorderedList")||e("InsertOrderedList")||e("InsertInlineTaskList")||
!q.inline_styles&&!!m.getParent(o.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList,InsertInlineTaskList":function(a){var c,b=m.getParent(o.getNode(),"ul,ol");return!!b&&(c=b.tagName,"OL"===c&&"insertorderedlist"===a||"UL"===c&&!m.hasClass(b,"inline-task-list")&&"insertunorderedlist"===a||"UL"===c&&m.hasClass(b,"inline-task-list")&&"insertinlinetasklist"===a)}},"state");f({"FontSize,FontName":function(a){var c;return(c=m.getParent(o.getNode(),"span"))&&("fontsize"==a||c.style.fontFamily.replace(/, /g,
",").replace(/[\'\"]/g,"").toLowerCase()),0}},"value");q.custom_undo_redo&&f({Undo:function(){b.undoManager.undo()},Redo:function(){b.undoManager.redo()}})}})(tinymce);
(function(d){var h=d.util.Dispatcher;d.UndoManager=function(l){var i,b,a=0,e=[];return i={typing:!1,onAdd:new h(i),onUndo:new h(i),onRedo:new h(i),beforeChange:function(){b=l.selection.getBookmark(2,!0)},add:function(f){var g,c=l.settings;if(f=f||{},f.content=d.trim(l.getContent({format:"raw",no_events:1})),g=e[a],g&&g.content==f.content)return null;if(e[a]&&(e[a].beforeBookmark=b),c.custom_undo_redo_levels&&e.length>c.custom_undo_redo_levels){for(g=0;g<e.length-1;g++)e[g]=e[g+1];e.length--;a=e.length}return f.bookmark=
l.selection.getBookmark(2,!0),a<e.length-1&&(e.length=a+1),e.push(f),a=e.length-1,i.onAdd.dispatch(i,f),l.isNotDirty=0,f},undo:function(){var b;return i.typing&&(i.add(),i.typing=!1),0<a&&(b=e[--a],l.setContent(b.content,{format:"raw"}),l.selection.moveToBookmark(b.beforeBookmark),i.onUndo.dispatch(i,b)),b},redo:function(){var b;return a<e.length-1&&(b=e[++a],l.setContent(b.content,{format:"raw"}),l.selection.moveToBookmark(b.bookmark),i.onRedo.dispatch(i,b)),b},clear:function(){e=[];a=0;i.typing=
!1},hasUndo:function(){return 0<a||this.typing},hasRedo:function(){return a<e.length-1&&!this.typing},ignore:function(a,b){var c=e.slice();a.call(b||l);e=c}}}})(tinymce);
(function(d){var h=d.dom.Event,l=d.isIE,i=d.isGecko,b=d.isOpera,a=d.each,e=(d.extend,!0),f=!1;d.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var c,b=a.settings;this.editor=a;this.dom=a.dom;c=(b.forced_root_block||"p").toLowerCase();b.element=c.toUpperCase();a.onPreInit.add(this.setup,this)},setup:function(){function a(){var c,d,e,g,i,h,l,t=p.getStart(),C=o.getRoot(),A=b.getDoc().body;if(t&&1===t.nodeType){for(;t!=C;){if(!(t&&1===t.nodeType)||q[t.nodeName])return;t=t.parentNode}c=p.getRng();
c.setStart?(d=c.startContainer,e=c.startOffset,g=c.endContainer,i=c.endOffset):(c.item&&(c=b.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),e=-1*tmpRng.move("character",-16777215),tmpRng.collapsed||(tmpRng=c.duplicate(),tmpRng.collapse(!1),i=-1*tmpRng.move("character",-16777215)-e));for(t=C.firstChild;t;t)3===t.nodeType||1==t.nodeType&&!q[t.nodeName]?(h||(h=o.create(f.forced_root_block),t.parentNode.insertBefore(h,t)),l=t,t=t.nextSibling,h.appendChild(l)):
(h=null,t=t.nextSibling);if(c.setStart)c.setStart(d,e),c.setEnd(g,i),p.setRng(c);else try{c=A.createTextRange(),c.moveToElementText(A),c.move("character",-16777215),c.collapse(!0),c.moveStart("character",e),0<i&&c.moveEnd("character",i),c.select()}catch(B){}b.nodeChanged()}}var c=this,b=c.editor,f=b.settings,o=b.dom,p=b.selection,q=b.schema.getBlockElements();f.forced_root_block&&(b.onKeyUp.add(a),b.onKeyDown.add(a),b.onClick.add(a));f.force_br_newlines&&l&&b.onKeyPress.add(function(a,c){var b;if(13==
c.keyCode&&"LI"!=p.getNode().nodeName)return p.setContent('<br id="__" /> ',{format:"raw"}),b=o.get("__"),b.removeAttribute("id"),p.select(b),p.collapse(),h.cancel(c)});f.force_p_newlines&&(l||b.onKeyPress.add(function(a,b){13!=b.keyCode||b.shiftKey||c.insertPara(b)||h.cancel(b)}),i&&b.onKeyDown.add(function(a,b){8!=b.keyCode&&46!=b.keyCode||b.shiftKey||c.backspaceDelete(b,8==b.keyCode)}));d.isWebKit&&b.onKeyPress.add(function(a,c){if(13==c.keyCode&&(c.shiftKey||f.force_br_newlines&&!o.getParent(p.getNode(),
"h1,h2,h3,h4,h5,h6,ol,ul"))){var b,d;d=p.getRng();var j=o.create("div",null," "),g=o.getViewPort(a.getWin());d.insertNode(b=o.create("br"));d.setStartAfter(b);d.setEndAfter(b);p.setRng(d);p.getSel().focusNode==b.previousSibling&&(p.select(o.insertAfter(o.doc.createTextNode(" "),b)),p.collapse(e));o.insertAfter(j,b);b=o.getPos(j).y;d=o.getSize(j).h;o.remove(j);j=b+d;j>g.y+g.h&&a.getWin().scrollTo(0,j-g.h);h.cancel(c)}});l&&"P"!=f.element&&(b.onKeyPress.add(function(){c.lastElm=p.getNode().nodeName}),
b.onKeyUp.add(function(a,b){var d,e=p.getNode();1===a.getBody().childNodes.length&&"P"==e.nodeName?(e=o.rename(e,f.element),p.select(e),p.collapse(),a.nodeChanged()):13!=b.keyCode||b.shiftKey||"P"==c.lastElm||(d=o.getParent(e,"p"),d&&(o.rename(d,f.element),a.nodeChanged()))}))},getParentBlock:function(a){var c=this.dom;return c.getParent(a,c.isBlock)},insertPara:function(){function g(a,c){var d,e,j=[];if(a.innerHTML="",B.keep_styles){e=c;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&
(d=e.cloneNode(f),C.setAttrib(d,"id",""),j.push(d));while(e=e.parentNode)}if(0<j.length){e=j.length-1;for(d=a;0<=e;e--)d=d.appendChild(j[e]);return j[0].innerHTML=b?" ":"<br />",j[0]}a.innerHTML=b?" ":"<br />"}var c,j,i,h,l,q,k,s,r,u,v,n,y,t=this.editor,C=t.dom,A=t.getDoc(),B=t.settings,x=t.selection.getSel(),z=x.getRangeAt(0),H=A.body,E=C.getViewPort(t.getWin());t.undoManager.beforeChange();c=A.createRange();c.setStart(x.anchorNode,x.anchorOffset);c.collapse(e);j=A.createRange();j.setStart(x.focusNode,
x.focusOffset);j.collapse(e);h=(i=0>c.compareBoundaryPoints(c.START_TO_END,j))?x.anchorNode:x.focusNode;l=i?x.anchorOffset:x.focusOffset;q=i?x.focusNode:x.anchorNode;i=i?x.focusOffset:x.anchorOffset;if(d.isWebKit&&h===q&&1===h.nodeType&&0<h.childNodes.length&&t.dom.is(r=h.childNodes[0<l?l-1:0],"table"))return c=C.create("p",0,'<br data-mce-bogus="1" />'),C.insertAfter(c,r),z.setStart(c,0),t.selection.setRng(z),z=t.dom.getPos(c).y,z>E.y&&t.getWin().scrollTo(0,z),t.undoManager.add(),f;if(h===q&&/^(TD|TH)$/.test(h.nodeName)){if("BR"==
h.firstChild.nodeName&&C.remove(h.firstChild),0==h.childNodes.length)t.dom.add(h,B.element,null,"<br />"),s=t.dom.add(h,B.element,null,"<br />");else{var F=!1;a(h.childNodes,function(a){if(t.dom.isBlock(a))return F=!0,!1});F?(z=t.selection.getRng(),z.insertNode(t.dom.create(B.element,null,"<br />"))):(n=h.innerHTML,h.innerHTML="",t.dom.add(h,B.element,null,n),s=t.dom.add(h,B.element,null,"<br />"))}return s&&(z=A.createRange(),z.selectNodeContents(s),z.collapse(1),t.selection.setRng(z)),f}h==H&&q==
H&&H.firstChild&&t.dom.isBlock(H.firstChild)&&(h=q=h.firstChild,l=i=0,c=A.createRange(),c.setStart(h,0),j=A.createRange(),j.setStart(q,0));A.body.hasChildNodes()||A.body.appendChild(C.create("br"));h="HTML"==h.nodeName?A.body:h;h="BODY"==h.nodeName?h.firstChild:h;q="HTML"==q.nodeName?A.body:q;q="BODY"==q.nodeName?q.firstChild:q;s=t.dom.getRoot();if(h===s&&(h=h.firstChild,l=0),q===s&&(q=q.firstChild,i=0),k=this.getParentBlock(h),s=this.getParentBlock(q),r=k?k.nodeName:B.element,n=this.dom.getParent(k,
"li,pre"))return"LI"==n.nodeName?(E=t.selection,z=this.dom,c=n,E=z.isEmpty(c)?(u=z.getParent(c,"ul,ol"),z.getParent(u.parentNode,"ul,ol")||(z.split(u,c),v=z.create("p",0,'<br data-mce-bogus="1" />'),z.replace(v,c),E.select(v,1)),AJS.Rte.showSelection(),f):e):E=e,E;k&&("CAPTION"==k.nodeName||/absolute|relative|fixed/gi.test(C.getStyle(k,"position",1)))&&(r=B.element,k=null);s&&("CAPTION"==s.nodeName||/absolute|relative|fixed/gi.test(C.getStyle(k,"position",1)))&&(r=B.element,s=null);(/(TD|TABLE|TH|CAPTION)/.test(r)||
k&&"DIV"==r&&/left|right/gi.test(C.getStyle(k,"float",1)))&&(r=B.element,k=s=null);u=k&&k.nodeName==r?k.cloneNode(0):t.dom.create(r);s=s&&s.nodeName==r?s.cloneNode(0):t.dom.create(r);s.removeAttribute("id");/^(H[1-6])$/.test(r)&&(n=z,v=k,k=v.ownerDocument.createRange(),(k.setStart(n.endContainer,n.endOffset),k.setEndAfter(v),0==k.cloneContents().textContent.length)&&(s=t.dom.create(B.element)));n=v=h;do{if(n==H||9==n.nodeType||this.dom.isBlock(n)||/(TD|TABLE|TH|CAPTION)/.test(n.nodeName))break;v=
n}while(n=n.previousSibling?n.previousSibling:n.parentNode);n=k=q;do{if(n==H||9==n.nodeType||this.dom.isBlock(n)||/(TD|TABLE|TH|CAPTION)/.test(n.nodeName))break;k=n}while(n=n.nextSibling?n.nextSibling:n.parentNode);v.nodeName==r?c.setStart(v,0):c.setStartBefore(v);c.setEnd(h,l);u.appendChild(c.cloneContents()||A.createTextNode(""));try{j.setEndAfter(k)}catch(I){}return j.setStart(q,i),s.appendChild(j.cloneContents()||A.createTextNode("")),z=A.createRange(),v.previousSibling||v.parentNode.nodeName!=
r?c.startContainer.nodeName==r&&0==c.startOffset?z.setStartBefore(c.startContainer):z.setStart(c.startContainer,c.startOffset):z.setStartBefore(v.parentNode),k.nextSibling||k.parentNode.nodeName!=r?z.setEnd(j.endContainer,j.endOffset):z.setEndAfter(k.parentNode),z.deleteContents(),b&&t.getWin().scrollTo(0,E.y),u.firstChild&&u.firstChild.nodeName==r&&(u.innerHTML=u.firstChild.innerHTML),s.firstChild&&s.firstChild.nodeName==r&&(s.innerHTML=s.firstChild.innerHTML),C.isEmpty(u)&&g(u,h),C.isEmpty(s)&&
g(s,q),this.dom.removeClass(s,"auto-cursor-target"),b&&9.5>parseFloat(opera.version())?(z.insertNode(u),z.insertNode(s)):(z.insertNode(s),z.insertNode(u)),s.normalize(),u.normalize(),t.selection.select(s,!0),t.selection.collapse(!0),y=t.dom.getPos(s).y,(y<E.y||y+25>E.y+E.h)&&t.getWin().scrollTo(0,y<E.y?y:y-E.h+25),t.undoManager.add(),f},backspaceDelete:function(a,c){var b,e,i,l,q=this.editor;i=q.getBody();var k=(q.dom,q.selection),s=k.getRng(),r=s.startContainer;if(!(a.getPreventDefault?a.getPreventDefault():
a.defaultPrevented)){if(!c&&s.collapsed&&1==r.nodeType&&s.startOffset==r.childNodes.length){l=new d.dom.TreeWalker(r.lastChild,r);for(b=r.lastChild;b;b=l.prev())if(3==b.nodeType)return s.setStart(b,b.nodeValue.length),s.collapse(!0),void k.setRng(s)}if(r&&q.dom.isBlock(r)&&!/^(TD|TH)$/.test(r.nodeName)&&c&&(0==r.childNodes.length||1==r.childNodes.length&&"BR"==r.firstChild.nodeName)){for(b=r;(b=b.previousSibling)&&!q.dom.isBlock(b););if(b){if(r!=i.firstChild){for(e=q.dom.doc.createTreeWalker(b,NodeFilter.SHOW_TEXT,
null,f);i=e.nextNode();)b=i;s=q.getDoc().createRange();s.setStart(b,b.nodeValue?b.nodeValue.length:0);s.setEnd(b,b.nodeValue?b.nodeValue.length:0);k.setRng(s);q.dom.remove(r)}return h.cancel(a)}}if(!c&&s.collapsed&&/^(BODY)$/.test(r.nodeName)&&(r=r.childNodes[s.startOffset])&&q.dom.isBlock(r)&&!/^(TD|TH)$/.test(r.nodeName)&&(0==r.childNodes.length||1==r.childNodes.length&&"BR"==r.firstChild.nodeName)){b=r;for(var u;b=b.nextSibling;)if(q.dom.isBlock(b)){u=b;break}if(u&&r!=i.lastChild)return e=q.dom.doc.createTreeWalker(u,
NodeFilter.SHOW_TEXT,null,f),u=e.nextNode(),s=q.getDoc().createRange(),s.setStart(u,0),s.setEnd(u,0),k.setRng(s),q.dom.remove(r),h.cancel(a)}}}})})(tinymce);
(function(d){var h=(d.DOM,d.dom.Event),l=d.each,i=d.extend;d.create("tinymce.ControlManager",{ControlManager:function(b,a){var e=this,a=a||{};e.editor=b;e.controls={};e.onAdd=new d.util.Dispatcher(e);e.onPostRender=new d.util.Dispatcher(e);e.prefix=a.prefix||b.id+"_";e._cls={};e.onPostRender.add(function(){l(e.controls,function(a){a.postRender()})})},get:function(b){return this.controls[this.prefix+b]||this.controls[b]},setActive:function(b,a){var d=null;return(d=this.get(b))&&d.setActive(a),d},setDisabled:function(b,
a){var d=null;return(d=this.get(b))&&d.setDisabled(a),d},add:function(b){return b&&(this.controls[b.id]=b,this.onAdd.dispatch(b,this)),b},createControl:function(b){var a,d=this,f=d.editor;switch(l(f.plugins,function(f){if(f.createControl&&(a=f.createControl(b,d)))return!1}),b){case "|":case "separator":return d.createSeparator()}return!a&&f.buttons&&(a=f.buttons[b])?d.createButton(b,a):d.add(a)},createDropMenu:function(b,a,e){var f,g,c,j,h=this.editor;return a=i({"class":"mceDropDown",constrain:h.settings.constrain_menus},
a),a["class"]=a["class"]+" "+h.getParam("skin")+"Skin",(c=h.getParam("skin_variant"))&&(a["class"]+=" "+h.getParam("skin")+"Skin"+c.substring(0,1).toUpperCase()+c.substring(1)),b=this.prefix+b,j=e||this._cls.dropmenu||d.ui.DropMenu,f=this.controls[b]=new j(b,a),f.onAddItem.add(function(a,c){var b=c.settings;b.title=h.getLang(b.title,b.title);b.onclick||(b.onclick=function(){b.cmd&&h.execCommand(b.cmd,b.ui||!1,b.value)})}),h.onRemove.add(function(){f.destroy()}),d.isIE&&(f.onShowMenu.add(function(){h.focus();
g=h.selection.getBookmark(1)}),f.onHideMenu.add(function(){g&&(h.selection.moveToBookmark(g),g=0)})),this.add(f)},createListBox:function(b,a,e){var f,g,c=this.editor;return this.get(b)?null:(a.title=c.translate(a.title),a.scope=a.scope||c,a.onselect||(a.onselect=function(b){c.execCommand(a.cmd,a.ui||!1,b||a.value)}),a=i({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a),b=this.prefix+b,c.settings.use_native_selects||c.settings.use_accessible_selects&&!d.isGecko?f=new d.ui.NativeListBox(b,
a):(g=e||this._cls.listbox||d.ui.ListBox,f=new g(b,a,c)),this.controls[b]=f,d.isWebKit&&f.onPostRender.add(function(a,b){h.add(b,"mousedown",function(){c.bookmark=c.selection.getBookmark(1)});h.add(b,"focus",function(){c.selection.moveToBookmark(c.bookmark);c.bookmark=null})}),f.hideMenu&&c.onMouseDown.add(f.hideMenu,f),this.add(f))},createButton:function(b,a,e){var f,g,c=this.editor;return this.get(b)?null:(a.title=c.translate(a.title),a.label=c.translate(a.label),a.scope=a.scope||c,a.onclick||a.menu_button||
(a.onclick=function(){c.execCommand(a.cmd,a.ui||!1,a.value)}),a=i({title:a.title,"class":"mce_"+b,unavailable_prefix:c.getLang("unavailable",""),scope:a.scope,control_manager:this},a),b=this.prefix+b,a.menu_button?(g=e||this._cls.menubutton||d.ui.MenuButton,f=new g(b,a,c),c.onMouseDown.add(f.hideMenu,f)):(g=this._cls.button||d.ui.Button,f=new g(b,a,c)),this.add(f))},createMenuButton:function(b,a,d){return a=a||{},a.menu_button=1,this.createButton(b,a,d)},createSplitButton:function(b,a,e){var f,g,
c=this.editor;return this.get(b)?null:(a.title=c.translate(a.title),a.scope=a.scope||c,a.onclick||(a.onclick=function(b){c.execCommand(a.cmd,a.ui||!1,b||a.value)}),a.onselect||(a.onselect=function(b){c.execCommand(a.cmd,a.ui||!1,b||a.value)}),a=i({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a),b=this.prefix+b,g=e||this._cls.splitbutton||d.ui.SplitButton,f=this.add(new g(b,a,c)),c.onMouseDown.add(f.hideMenu,f),f)},createColorSplitButton:function(b,a,e){var f,g,c,j=this.editor;
return this.get(b)?null:(a.title=j.translate(a.title),a.scope=a.scope||j,a.onclick||(a.onclick=function(b){d.isIE&&(c=j.selection.getBookmark(1));j.execCommand(a.cmd,a.ui||!1,b||a.value)}),a.onselect||(a.onselect=function(c){j.execCommand(a.cmd,a.ui||!1,c||a.value)}),a=i({title:a.title,"class":"mce_"+b,menu_class:j.getParam("skin")+"Skin",scope:a.scope,more_colors_title:j.getLang("more_colors")},a),b=this.prefix+b,g=e||this._cls.colorsplitbutton||d.ui.ColorSplitButton,f=new g(b,a,j),j.onMouseDown.add(f.hideMenu,
f),j.onRemove.add(function(){f.destroy()}),d.isIE&&(f.onShowMenu.add(function(){j.focus();c=j.selection.getBookmark(1)}),f.onHideMenu.add(function(){c&&(j.selection.moveToBookmark(c),c=0)})),this.add(f))},createToolbar:function(b,a,e){var f,g;return b=this.prefix+b,g=e||this._cls.toolbar||d.ui.Toolbar,f=new g(b,a,this.editor),this.get(b)?null:this.add(f)},createToolbarGroup:function(b,a,e){var f,g;return b=this.prefix+b,g=e||this._cls.toolbarGroup||d.ui.ToolbarGroup,f=new g(b,a,this.editor),this.get(b)?
null:this.add(f)},createSeparator:function(b){return new (b||this._cls.separator||d.ui.Separator)},setControlType:function(b,a){return this._cls[b.toLowerCase()]=a},destroy:function(){l(this.controls,function(b){b.destroy()});this.controls=null}})})(tinymce);
(function(d){var h=d.util.Dispatcher,l=d.each,i=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new h(this);this.onClose=new h(this);this.params={};this.features={}},open:function(a,e){var f,g,c,j="",h="modal"==this.editor.settings.dialog_type;c=d.DOM.getViewPort();a=a||{};e=e||{};g=b?c.w:screen.width;c=b?c.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=!0;
a.left=a.left||parseInt(g/2)-a.width/2;a.top=a.top||parseInt(c/2)-a.height/2;e.inline=!1;e.mce_width=a.width;e.mce_height=a.height;e.mce_auto_focus=a.auto_focus;h&&i&&(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1);l(a,function(a,c){d.is(a,"boolean")&&(a=a?"yes":"no");/^(name|url)$/.test(c)||(j+=i&&h?(j?";":"")+c+":"+a:(j?",":"")+c+"="+a)});this.features=a;this.params=e;this.onOpen.dispatch(this,a,e);g=a.url||a.file;g=d._addVer(g);try{i&&h?
(f=1,window.showModalDialog(g,window,j)):f=window.open(g,a.name,j)}catch(o){}f||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,b,f,g,c,j){return new (d.resolve(a))(b,f,g,c,j)},confirm:function(a,b,d,g){g=g||window;b.call(d||this,g.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,d,g){g=g||window;g.alert(this._decode(this.editor.getLang(a,a)));b&&b.call(d||this)},resizeBy:function(a,b,d){d.resizeBy(a,
b)},_decode:function(a){return d.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
(function(d){d.Formatter=function(h){function l(a){return 1===a.nodeType&&"_mce_caret"===a.id}function i(a){return a?A[a]:A}function b(a,c){a&&("string"!=typeof a?B(a,function(a,c){b(c,a)}):(c=c.length?c:[c],B(c,function(a){a.deep===C&&(a.deep=!a.selector);a.split===C&&(a.split=!a.selector||a.inline);a.remove===C&&a.selector&&!a.inline&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"==typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),A[a]=c))}function a(a,b,e){function g(a,
c){c=c||K;a&&(c.onformat&&c.onformat(a,c,b,e),B(c.styles,function(c,d){x.setStyle(a,d,o(c,b))}),B(c.attributes,function(c,d){x.setAttrib(a,d,o(c,b))}),B(c.classes,function(c){c=o(c,b);x.hasClass(a,c)||x.addClass(a,c)}))}function m(){var a=h.selection.getRng(),c=a.startContainer,b=a.endContainer;if(c!=b&&0==a.endOffset){a:{b=new H(b);for(e=b.current();e;e=b.prev())if(1<e.childNodes.length||e==c){c=e;break a}c=void 0}a.setEnd(c,3==c.nodeType?c.length:c.childNodes.length)}return a}function q(e,k,i){var h,
m,n=[];h=K.inline||K.block;m=x.create(h);g(m);E.walk(e,function(c){function e(c){var p,q=c.nodeName.toLowerCase(),o=c.parentNode.nodeName.toLowerCase();return j(q,"br")?(k=0,void(K.block&&x.remove(c))):K.wrapper&&f(c,a,b)?void(k=0):K.block&&!K.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(q)?(c=x.rename(c,h),g(c),n.push(c),void(k=0)):K.selector&&(B(A,function(a){"collapsed"in a&&a.collapsed!==C||x.is(c,a.selector)&&!l(c)&&(g(c,a),p=!0)}),!K.inline||p)?void(k=0):void(F(h,q)&&F(o,h)&&(i||3!==
c.nodeType||1!==c.nodeValue.length||65279!==c.nodeValue.charCodeAt(0))&&!l(c)?(k||(k=m.cloneNode(D),c.parentNode.insertBefore(k,c),n.push(k)),k.appendChild(c)):(k=0,B(d.grep(c.childNodes),e),k=0))}var k;B(c,e)});!1===K.wrap_links&&B(n,function(a){function c(a){var b,e,f;if("A"===a.nodeName){e=m.cloneNode(D);n.push(e);f=d.grep(a.childNodes);for(b=0;b<f.length;b++)e.appendChild(f[b]);a.appendChild(e)}B(d.grep(a.childNodes),c)}c(a)});B(n,function(d){var e,j=0;if(e=(B(d.childNodes,function(a){p(a)||u(a)||
j++}),j),(1<n.length||!I(d))&&0===e)return void x.remove(d,1);if(K.inline||K.wrapper){if(!K.exact&&1===e){e=d;var k,h,d=(B(e.childNodes,function(a){if(1==a.nodeType&&!u(a)&&!l(a))return k=a,D}),k&&c(k,K)&&(h=k.cloneNode(D),g(h),x.replace(h,e,G),x.remove(k,1)),h||e)}if(B(A,function(a){B(x.select(a.inline,d),function(c){var d;if(!1===a.wrap_links){d=c.parentNode;do if("A"===d.nodeName)return;while(d=d.parentNode)}s(a,b,c,a.exact?c:null)})}),f(d.parentNode,a,b))return x.remove(d,1),d=0,G;K.merge_with_parents&&
x.getParent(d.parentNode,function(c){if(f(c,a,b))return x.remove(d,1),d=0,G});d&&!1!==K.merge_siblings&&(d=v(r(d),d),d=v(d,r(d,G)))}})}var n,A=i(a),K=A[0],C=z.isCollapsed();if(K)if(e)e.nodeType?(n=x.createRng(),n.setStartBefore(e),n.setEndAfter(e),q(k(n,A),null,!0)):q(e,null,!0);else if(C&&K.inline&&!x.select("td.mceSelected,th.mceSelected").length)y("apply",a,b);else if(!x.select("td.mceSelected.numberingColumn").length){var Q=h.selection.getNode();h.selection.setRng(m());n=z.getBookmark();q(k(z.getRng(G),
A),n);K.styles&&(K.styles.color||K.styles.textDecoration)&&(d.walk(Q,O,"childNodes"),O(Q));z.moveToBookmark(n);t(z.getRng(G));h.nodeChanged()}}function e(a,c,b){function e(a){var b,f,j;b=d.grep(a.childNodes);f=0;for(j=r.length;f<j&&!s(r[f],c,a,a);f++);if(v.deep){f=0;for(j=b.length;f<j;f++)e(b[f])}}function j(b){var d;return B(x.getParents(b.parentNode,void 0,x.getRoot()).reverse(),function(b){var e;d||"_start"==b.id||"_end"==b.id||(e=f(b,a,c),e&&!1!==e.split&&(d=b))}),d}function l(a,b,d,e){var f,
j,g,k,h,i;if(a){i=a.parentNode;for(f=b.parentNode;f&&f!=i;f=f.parentNode){j=f.cloneNode(D);for(h=0;h<r.length;h++)if(s(r[h],c,j,j)){j=0;break}j&&(g&&j.appendChild(g),k||(k=j),g=j)}!e||v.mixed&&I(a)||(b=x.split(a,b));g&&(d.parentNode.insertBefore(g,d),k.appendChild(d))}return b}function m(a){var c=x.get(a?"_start":"_end"),b=c[a?"firstChild":"lastChild"];return u(b)&&(b=b[a?"firstChild":"lastChild"]),x.remove(c,!0),b}function p(a){var c,b,d,a=k(a,r,G);v.split&&(c=n(a,G),b=n(a),c!=b?(d=c.firstChild,
"TD"==c.nodeName&&d&&(c=d),c=q(c,"span",{id:"_start","data-mce-type":"bookmark"}),b=q(b,"span",{id:"_end","data-mce-type":"bookmark"}),l(j(c),c,c,!0),l(j(b),b,b,!0),c=m(G),b=m()):c=b=l(j(c),c,c,!0),a.startContainer=c.parentNode,a.startOffset=J(c),a.endContainer=b.parentNode,a.endOffset=J(b)+1);E.walk(a,function(a){B(a,function(a){e(a);1===a.nodeType&&"underline"===h.dom.getStyle(a,"text-decoration")&&a.parentNode&&"underline"===P(a.parentNode)&&s({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},
null,a)})})}var o,r=i(a),v=r[0];if(b)return void(b.nodeType?(o=x.createRng(),o.setStartBefore(b),o.setEndAfter(b),p(o)):p(b));z.isCollapsed()&&v.inline&&!x.select("td.mceSelected,th.mceSelected").length?y("remove",a,c):x.select("td.mceSelected.numberingColumn").length||(b=z.getBookmark(),p(z.getRng(G)),z.moveToBookmark(b),v.inline&&g(a,c,z.getStart())&&t(z.getRng(!0)),h.nodeChanged())}function f(a,b,d,e){function f(a,c,b){var g,k,h=c[b];if(c.onmatch)return c.onmatch(a,c,b);if(h)if(h.length===C)for(g in h){if(h.hasOwnProperty(g)&&
((k="attributes"===b?x.getAttrib(a,g):m(a,g),e&&!k&&!c.exact)||(!e||c.exact)&&!j(k,o(h[g],d))))return}else for(g=0;g<h.length&&!("attributes"===b?x.getAttrib(a,h[g]):m(a,h[g]));g++);return c}var g,k;if((k=i(b))&&a)for(b=0;b<k.length;b++)if(g=k[b],c(a,g)&&f(a,g,"attributes")&&f(a,g,"styles")){if(k=g.classes)for(b=0;b<k.length;b++)if(!x.hasClass(a,k[b]))return;return g}}function g(a,c,b){function d(b){return b=x.getParent(b,function(b){return!!f(b,a,c,!0)}),f(b,a,c)}var e;return b?d(b):(b=z.getNode(),
d(b)?G:(e=z.getStart(),e!=b&&d(e)?G:D))}function c(a,c){return j(a,c.inline)?G:j(a,c.block)?G:c.selector?x.is(a,c.selector):void 0}function j(a,c){return a=a||"",c=c||"",a=""+(a.nodeName||a),c=""+(c.nodeName||c),a.toLowerCase()==c.toLowerCase()}function m(a,c){var b=x.getStyle(a,c);return"color"!=c&&"backgroundColor"!=c||(b=x.toHex(b)),"fontWeight"==c&&700==b&&(b="bold"),""+b}function o(a,c){return"string"!=typeof a?a=a(c):c&&(a=a.replace(/%(\w+)/g,function(a,b){return c[b]||a})),a}function p(a){return a&&
3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function q(a,c,b){c=x.create(c,b);return a.parentNode.insertBefore(c,a),c.appendChild(a),c}function k(a,c,b){function d(a){var b,e,f;if(b=e=a?n:o,f=a?"previousSibling":"nextSibling",root=x.getRoot(),3==b.nodeType&&!p(b)&&(a?0<q:r<b.nodeValue.length))return b;for(;;){if(!c[0].block_expand&&I(e))return e;for(a=e[f];a;a=a[f])if(!u(a)&&!p(a))return e;if(e.parentNode==root){b=e;break}e=e.parentNode}return b}function e(a,c){for(c===C&&(c=3===a.nodeType?
a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[c])&&(c=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:c}}function f(a,c,d){function e(a,c){var f,j,g=a.nodeValue;return"undefined"==typeof c&&(c=d?g.length:0),d?(f=g.lastIndexOf(" ",c),j=g.lastIndexOf(" ",c),f=f>j?f:j,-1===f||b||f++):(f=g.indexOf(" ",c),j=g.indexOf(" ",c),f=-1!==f&&(-1===j||f<j)?f:j),f}var j,g,k;if(3===a.nodeType){if(g=e(a,c),-1!==g)return{container:a,offset:g};k=a}for(a=new H(a,x.getParent(a,
I)||h.getBody());j=a[d?"prev":"next"]();)if(3===j.nodeType){if(k=j,g=e(j),-1!==g)return{container:j,offset:g}}else if(I(j))break;if(k)return c=d?0:k.length,{container:k,offset:c}}function g(b,d){var e,f,j,k;3==b.nodeType&&0==b.nodeValue.length&&b[d]&&(b=b[d]);e=x.getParents(b,void 0,x.getRoot());for(f=0;f<e.length;f++)for(j=0;j<c.length;j++)if(k=c[j],!("collapsed"in k&&k.collapsed!==a.collapsed)&&x.is(e[f],k.selector))return e[f];return b}function k(a,b){var d;if(a==x.getRoot())return a;if(c[0].wrapper||
(d=x.getParent(a,c[0].block)),d||(d=x.getParent(3==a.nodeType?a.parentNode:a,I)),d&&c[0].wrapper&&(d=x.getParents(d,"ul,ol",x.getRoot()).reverse()[0]||d),!d)for(d=a;d[b]&&!I(d[b])&&(d=d[b],!j(d,"br")););return d||a}var i,l,m,n=a.startContainer,q=a.startOffset,o=a.endContainer,r=a.endOffset;if(1==n.nodeType&&n.hasChildNodes()&&(i=n.childNodes.length-1,n=n.childNodes[q>i?i:q],3==n.nodeType&&(q=0)),1==o.nodeType&&o.hasChildNodes()&&(i=o.childNodes.length-1,o=o.childNodes[r>i?i:r-1],3==o.nodeType&&(r=
o.nodeValue.length)),(u(n.parentNode)||u(n))&&(n=u(n)?n:n.parentNode,n=n.nextSibling||n,3==n.nodeType&&(q=0)),(u(o.parentNode)||u(o))&&(o=u(o)?o:o.parentNode,o=o.previousSibling||o,3==o.nodeType&&(r=o.length)),c[0].inline&&(a.collapsed&&(m=f(n,q,!0),m&&(n=m.container,q=m.offset),m=f(o,r),m&&(o=m.container,r=m.offset)),l=e(o,r),l.node)){for(;l.node&&0===l.offset&&l.node.previousSibling;)l=e(l.node.previousSibling);l.node&&0<l.offset&&3===l.node.nodeType&&" "===l.node.nodeValue.charAt(l.offset-1)&&
(1<l.offset?(o=l.node,o.splitText(l.offset-1)):l.node.previousSibling)}return(c[0].inline||c[0].block_expand)&&(c[0].inline&&3==n.nodeType&&0!==q||(n=d(!0)),c[0].inline&&3==o.nodeType&&r!==o.nodeValue.length||(o=d())),c[0].selector&&c[0].expand!==D&&!c[0].inline&&(n=g(n,"previousSibling"),o=g(o,"nextSibling")),(c[0].block||c[0].selector)&&(n=k(n,"previousSibling"),o=k(o,"nextSibling"),c[0].block&&(I(n)||(n=d(!0)),I(o)||(o=d()))),1==n.nodeType&&(q=J(n),n=n.parentNode),1==o.nodeType&&(r=J(o)+1,o=o.parentNode),
{startContainer:n,startOffset:q,endContainer:o,endOffset:r}}function s(a,b,e,f){var g,k,h;if(!c(e,a))return D;if("all"!=a.remove){B(a.styles,function(a,c){a=o(a,b);"number"==typeof c&&(c=a,f=0);f&&!j(m(f,c),a)||x.setStyle(e,c,"");h=1});h&&""==x.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"));B(a.attributes,function(a,c){var d;if(a=o(a,b),"number"==typeof c&&(c=a,f=0),!f||j(x.getAttrib(f,c),a)){if("class"==c&&(a=x.getAttrib(e,c),a&&(d="",B(a.split(/\s+/),function(a){/mce\w+/.test(a)&&
(d+=(d?" ":"")+a)}),d)))return void x.setAttrib(e,c,d);"class"==c&&e.removeAttribute("className");N.test(c)&&e.removeAttribute("data-mce-"+c);e.removeAttribute(c)}});B(a.classes,function(a){a=o(a,b);f&&!x.hasClass(f,a)||x.removeClass(e,a)});k=x.getAttribs(e);for(g=0;g<k.length;g++)if(0!==k[g].nodeName.indexOf("_"))return D}if("none"!=a.remove){g=function(a,c,b){return a=r(a,c,b),!a||"BR"==a.nodeName||I(a)};var i;k=e.parentNode;a.block&&(L?k==x.getRoot()&&(a.list_block&&j(e,a.list_block)||B(d.grep(e.childNodes),
function(a){F(L,a.nodeName.toLowerCase())?i?i.appendChild(a):i=q(a,L):i=0})):I(e)&&!I(k)&&(g(e,D)||g(e.firstChild,G,1)||e.insertBefore(x.create("br"),e.firstChild),g(e,G)||g(e.lastChild,D,1)||e.appendChild(x.create("br"))));a.selector&&a.inline&&!j(a.inline,e)||x.remove(e,1);a=G}else a=void 0;return a}function r(a,c,b){if(a){c=c?"nextSibling":"previousSibling";for(a=b?a:a[c];a;a=a[c])if(1==a.nodeType||!p(a))return a}}function u(a){return a&&1==a.nodeType&&"bookmark"==a.getAttribute("data-mce-type")}
function v(a,c){function b(a,c){for(e=a;e&&!(3==e.nodeType&&0!==e.nodeValue.length);e=e[c])if(1==e.nodeType&&!u(e))return e;return a}var e,f;if(f=a)if(f=c){a=b(a,"previousSibling");c=b(c,"nextSibling");f=a;var j=c,g=function(a){var c={};return B(x.getAttribs(a),function(b){b=b.nodeName.toLowerCase();0!==b.indexOf("_")&&"style"!==b&&(c[b]=x.getAttrib(a,b))}),c},k=function(a,c){var b,d;for(d in a)if(a.hasOwnProperty(d)){if((b=c[d],b===C)||a[d]!=b)return D;delete c[d]}for(d in c)if(c.hasOwnProperty(d))return D;
return G};f=f.nodeName!=j.nodeName?D:k(g(f),g(j))&&k(x.parseStyle(x.getAttrib(f,"style")),x.parseStyle(x.getAttrib(j,"style")))?G:D}if(f){for(e=a.nextSibling;e&&e!=c;)f=e,e=e.nextSibling,a.appendChild(f);return x.remove(c),B(d.grep(c.childNodes),function(c){a.appendChild(c)}),a}return c}function n(a,c){var b,d,e;return b=a[c?"startContainer":"endContainer"],d=a[c?"startOffset":"endOffset"],1==b.nodeType&&(e=b.childNodes.length-1,!c&&d&&d--,b=b.childNodes[d>e?e:d]),3===b.nodeType&&c&&d>=b.nodeValue.length&&
(b=(new H(b,h.getBody())).next()||b),3!==b.nodeType||c||0!=d||(b=(new H(b,h.getBody())).prev()||b),b}function y(c,b,j){function g(a){var c=x.create("span",{id:q,"data-mce-bogus":!0,style:r?"color:red":""});return a&&c.appendChild(h.getDoc().createTextNode(p)),c}function l(a,c){for(;a;){if(3===a.nodeType&&a.nodeValue!==p||1<a.childNodes.length)return!1;c&&1===a.nodeType&&c.push(a);a=a.firstChild}return!0}function m(a){for(;a;){if(a.id===q)return a;a=a.parentNode}}function n(a){var c;if(a){c=new H(a,
a);for(a=c.current();a;a=c.next())if(3===a.nodeType)return a}}function o(a,c){var b,d;if(a)d=z.getRng(!0),l(a)?(!1!==c&&(d.setStartBefore(a),d.setEndBefore(a)),x.remove(a)):(b=n(a),b.nodeValue.charAt(0)===M&&b.deleteData(0,1),x.remove(a,1)),z.setRng(d);else if(a=m(z.getStart()),!a)for(;a=x.get(q);)o(a,!1)}var p,q="_mce_caret",r=h.settings.caret_debug;p=d.isGecko?"​":M;self._hasCaretEvents||(h.onBeforeGetContent.addToTop(function(){var a,c=[];if(l(m(z.getStart()),c))for(a=c.length;a--;)x.setAttrib(c[a],
"data-mce-bogus","1")}),d.each(["onMouseUp","onKeyUp"],function(a){h[a].addToTop(function(){o()})}),h.onKeyDown.addToTop(function(a,c){var b=c.keyCode;8!=b&&37!=b&&39!=b||o(m(z.getStart()))}),self._hasCaretEvents=!0);if("apply"==c){var s,v,u,y,t;s=z.getRng(!0);c=s.startOffset;t=s.startContainer.nodeValue;(v=m(z.getStart()))&&(u=n(v));t&&0<c&&c<t.length&&/\w/.test(t.charAt(c))&&/\w/.test(t.charAt(c-1))?(y=z.getBookmark(),s.collapse(!0),s=k(s,i(b)),s=E.split(s),a(b,j,s),z.moveToBookmark(y)):(v&&u.nodeValue===
p?a(b,j,v):(v=g(!0),u=v.firstChild,s.insertNode(v),c=1,a(b,j,v)),z.setCursorLocation(u,c))}else{var A,c=z.getRng(!0);y=[];t=c.startContainer;A=c.startOffset;u=t;for(3==t.nodeType&&(A==t.nodeValue.length&&t.nodeValue!==p||(v=!0),u=u.parentNode);u;){if(f(u,b,j)){s=u;break}u.nextSibling&&(v=!0);y.push(u);u=u.parentNode}if(s)if(v)s=z.getBookmark(),c.collapse(!0),c=k(c,i(b),!0),c=E.split(c),e(b,j,c),z.moveToBookmark(s);else{u=j=g();for(b=y.length-1;0<=b;b--)u.appendChild(y[b].cloneNode(!1)),u=u.firstChild;
u.appendChild(x.doc.createTextNode(p));u=u.firstChild;x.insertAfter(j,s);z.setCursorLocation(u,1)}}}function t(a){var c,b,d;c=a.startContainer;var e=a.startOffset;if(3==c.nodeType&&e>=c.nodeValue.length&&(c=c.parentNode,e=J(c)+1),1==c.nodeType){b=c.childNodes;c=b[Math.min(e,b.length-1)];c=new H(c,x.getParent(c,x.isBlock));e>b.length-1&&c.next();for(b=c.current();b;b=c.next())if(3==b.nodeType&&!p(b))return d=x.create("a",null,M),b.parentNode.insertBefore(d,b),a.setStart(b,0),z.setRng(a),void x.remove(d)}}
var C,A={},B=d.each,x=h.dom,z=h.selection,H=d.dom.TreeWalker,E=new d.dom.RangeUtils(x),F=h.schema.isValidChild,I=x.isBlock,L=h.settings.forced_root_block,J=x.nodeIndex,M="﻿",N=/^(src|href|style)$/,D=!1,G=!0,P=function(a){var c;return h.dom.getParent(a,function(a){return c=h.dom.getStyle(a,"text-decoration"),c&&"none"!==c}),c},O=function(a){var c;1===a.nodeType&&a.parentNode&&1===a.parentNode.nodeType&&(c=P(a.parentNode),h.dom.getStyle(a,"color")&&c?h.dom.setStyle(a,"text-decoration",c):h.dom.getStyle(a,
"textdecoration")===c&&h.dom.setStyle(a,"text-decoration",null))};d.extend(this,{get:i,register:b,apply:a,remove:e,toggle:function(c,b,d){var f=i(c);!g(c,b,d)||"toggle"in f[0]&&!f[0].toggle?a(c,b,d):e(c,b,d)},match:g,matchAll:function(a,c){var b,d=[],e={};return b=z.getStart(),x.getParent(b,function(b){var j,g;for(j=0;j<a.length;j++)g=a[j],!e[g]&&f(b,g,c)&&(e[g]=!0,d.push(g))}),d},matchNode:f,canApply:function(a){var c,b,d,e;if(a=i(a)){c=z.getStart();c=x.getParents(c,void 0,x.getRoot());for(d=a.length-
1;0<=d;d--){if(e=a[d].selector,!e)return G;for(b=c.length-1;0<=b;b--)if(x.is(c[b],e))return G}}return D}})}})(tinymce);
tinymce.onAddEditor.add(function(d,h){function l(a,c){d.each(c,function(c,b){c&&e.setStyle(a,b,c)});e.rename(a,"span")}function i(a,c){e=a.dom;f.convert_fonts_to_spans&&d.each(e.select("font,strike",c.node),function(a){b[a.nodeName.toLowerCase()](h.dom,a)})}var b,a,e,f=h.settings;f.inline_styles&&(a=d.explode(f.font_size_legacy_values),b={font:function(b,c){l(c,{backgroundColor:c.style.backgroundColor,color:c.color,fontFamily:c.face,fontSize:a[parseInt(c.size)-1]})},strike:function(a,c){l(c,{textDecoration:"line-through"})}},
h.onPreProcess.add(i),h.onSetContent.add(i),h.onInit.add(function(){h.selection.onSetContent.add(i)}))});
define("atlassian-editor-plugins/paste/repairer-util",function(d,h){h.getBrAndContents=function(d){return $("<br>").add(d.contents())};h.isEmptyLine=function(d){return""===d.text()};h.isNodeContainingText=function(d){return(d.nodeType===Node.ELEMENT_NODE||d.nodeType===Node.TEXT_NODE)&&$.trim(d.textContent)};h.isFirstTextContentInParent=function(d){var i=!1;return d.parent().contents().each(function(){if(h.isNodeContainingText(this))return this===d[0]&&(i=!0,!1)}),i};h.replaceWithP=function(d){var h=
d.attr("style"),b=$("<p></p>").append(d.contents());h&&b.attr("style",h);d.replaceWith(b)};h.appendContentsToPreviousContentOrP=function(d){var i=d.prev("p");i.length?(i.append(h.getBrAndContents(d)),d.remove()):h.isFirstTextContentInParent(d)?h.replaceWithP(d):d.replaceWith(h.getBrAndContents(d))};h.createMacro=function(d,h){var b=$('<table class="wysiwyg-macro" data-macro-name="'+d+'" data-macro-body-type="RICH_TEXT"><tbody><tr><td class="wysiwyg-macro-body"></td></tr></tbody></table>');return b.find(".wysiwyg-macro-body").append(h),
b}});
define("atlassian-editor-plugins/paste/repairer",["atlassian-editor-plugins/paste/repairer-util"],function(d){var h=[function(h){h.find(".expand-container").replaceWith(function(){var h=$(this).find(".expand-content").first().contents();return h.length?d.createMacro("expand",h):""})},function(d){d.find("span:empty").remove()},function(d){d.find("p + br").remove()},function(h){var i=!1;h.find("div:not(.content-wrapper)").each(function(){var b=$(this);d.isEmptyLine(b)?(b.remove(),i=!0):b.find("div, p, pre").length?b.replaceWith(b.contents()):
(i?d.replaceWithP(b):d.appendContentsToPreviousContentOrP(b),i=!1)})}];return{repair:function(d){var i=$("<div></div>").html(d);return h.forEach(function(b){b(i)}),i.html()}}});
(function(d){function h(a,b){return a.getParam(b,e[b])}function l(a,b){a.is("ul.inline-task-list")?b.each(function(){var a=d(this);a.attr("data-inline-task-id")||a.attr("data-inline-task-id","")}):b.removeAttr("data-inline-task-id").removeAttr("data-pasted-task")}function i(a){var b=a.filter("ol,ul").length;return a.length===b}var b,a=tinymce.each,e={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",
paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!1,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]},f=function(a,b){if(!b.collapsed||0!=b.startOffset)return!1;
var e=d(b.startContainer).closest("ol, ul",a.getBody());if(0===e.length)return!1;e=(new tinymce.dom.TreeWalker(b.startContainer,e[0])).prev(!0);return void 0===e||d(e).is("li")},g=function(a){a=3===a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer;return tinymce.isIE?"LI"===a.nodeName&&0===a.childNodes.length:"LI"===a.nodeName&&1===a.childNodes.length&&"BR"===a.firstChild.nodeName};tinymce.create("tinymce.plugins.AtlassianEditorPaste",{init:function(c,e){function f(a,b){var d,
e=c.dom;l.onPreProcess.dispatch(l,a);s&&(a.content=s.repair(a.content));a.node=e.create("div",0,a.content);tinymce.isGecko&&(d=c.selection.getRng(!0),d.startContainer==d.endContainer&&3===d.startContainer.nodeType&&1===a.node.childNodes.length&&/^(p|h[1-6]|pre)$/i.test(a.node.firstChild.nodeName)&&-1===a.content.indexOf("__MCE_ITEM__")&&e.remove(a.node.firstChild,!0));l.onPostProcess.dispatch(l,a);a.content=c.serializer.serialize(a.node,{getInner:1,forced_root_block:""});!b&&c.pasteAsPlainText?(l._insertPlainText(a.content),
h(c,"paste_text_sticky")||(c.pasteAsPlainText=!1,c.controlManager.setActive("pastetext",!1))):l._insert(a.content);tinymce.isGecko&&c.dom.getRoot().focus()}function g(b){if(b){var d=b.firstChild;d&&"DIV"===d.nodeName&&d.style.marginTop&&d.style.backgroundColor&&c.dom.remove(d,1);tinymce.isWebKit&&a(c.dom.select("span.Apple-style-span",b),function(a){c.dom.removeClass(a,"Apple-style-span")});tinymce.isWebKit&&a(c.dom.select("br.Apple-interchange-newline",b),function(a){c.dom.remove(a)});a(c.dom.select("br[data-mce-bogus]",
b),function(a){c.dom.remove(a)});a(c.dom.select("meta[charset]",b),function(a){c.dom.remove(a)})}}function i(b){function e(a){a.preventDefault()}var j,k,h,p,s,A,B,x=c.selection,z=c.dom,H=c.getBody();c.undoManager.add();var E;if(!b.clipboardData||-1==d.inArray("text/html",b.clipboardData.types||[]))E=!1;else{var F=b.clipboardData.getData("text/html");!F||!d.browser.webkit||(E=l.repair(F),E==F)?E=!1:(E=l.parse(E,c.getDoc()),F=d("<div></div>"),E=(F.append(E),g(F[0]),f({content:F.html()}),!0))}if(E)return void d.Event(b).preventDefault();
if((b.clipboardData||z.doc.dataTransfer)&&(A=(b.clipboardData||z.doc.dataTransfer).getData("Text"),c.pasteAsPlainText))return b.preventDefault(),void f({content:z.encode(A).replace(/\r?\n/g,"<br />")});if(!z.get("_mcePaste"))return B=d(c.selection.getStart()).closest("[data-macro-body-type='PLAIN_TEXT']").length,E=H,"true"!=H.contentEditable&&(E=z.getParent(c.selection.getStart(),'[contenteditable="true"]',H)),j=z.add(E,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"﻿﻿"),H!=c.getDoc().body?
H=z.getPos(c.selection.getStart(),H).y:(H=z.getViewPort(c.getWin()),H=H.y+parseInt(H.h/2,10)),s=H,z.setStyles(j,{position:"absolute",left:tinymce.isGecko?-40:0,top:s-25,width:1,height:1,overflow:"hidden"}),tinymce.isIE?(p=x.getRng(),h=z.doc.body.createTextRange(),h.moveToElementText(j),h.execCommand("Paste"),z.remove(j),"﻿﻿"===j.innerHTML?(c.execCommand("mcePasteWord"),void b.preventDefault()):(x.setRng(p),x.setContent(""),setTimeout(function(){f({content:j.innerHTML})},0),tinymce.dom.Event.cancel(b))):
(z.bind(c.getDoc(),"mousedown",e),z.bind(c.getDoc(),"keydown",e),k=x.getBookmark(),j=j.firstChild,h=c.getDoc().createRange(),h.setStart(j,0),h.setEnd(j,2),x.setRng(h),window.setTimeout(function(){var b,d="";z.select("div.mcePaste > div.mcePaste").length?d=B?"<p>"+z.encode(A).replace(/\r?\n/g,"<br />")+"</p>":"<p>"+z.encode(A).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>":(b=z.select("div.mcePaste"),a(b,function(a){g(a);"mcePaste"!=a.parentNode.className&&(d=d+a.innerHTML)}));
a(z.select("div.mcePaste"),function(a){z.remove(a)});k&&x.moveToBookmark(k);f({content:d});z.unbind(c.getDoc(),"mousedown",e);z.unbind(c.getDoc(),"keydown",e)},0),void 0)}var l=this;l.editor=c;l.url=e;l.onPreProcess=new tinymce.util.Dispatcher(l);l.onPostProcess=new tinymce.util.Dispatcher(l);l.onPreProcess.add(l._preProcess);l.onPostProcess.add(l._postProcess);l.onPreProcess.add(function(a,b){c.execCallback("paste_preprocess",a,b)});l.onPostProcess.add(function(a,b){c.execCallback("paste_postprocess",
a,b)});b=[{repair:function(a){var c=/<meta charset='utf-8'>(<td.*<\/td>)<br class="Apple-interchange-newline">/.exec(a);return c?'<table class="confluenceTable"><tbody><tr>'+c[1]+"</tr></tbody></table>":a}},{repair:function(a){var c=/<meta charset='utf-8'>(<tr.*<\/tr>)<br class="Apple-interchange-newline">/.exec(a);return c?'<table class="confluenceTable"><tbody>'+c[1]+"</tbody></table>":a}}];var k=function(a,c){if((tinymce.isMac?c.metaKey:c.ctrlKey)&&!c.shiftKey&&86===c.keyCode||c.shiftKey&&45===
c.keyCode)return!1};c.onKeyDown.addToTop(k);c.onKeyUp.addToTop(k);c.pasteAsPlainText=h(c,"paste_text_sticky_default");var s=null;AJS&&AJS.DarkFeatures&&!AJS.DarkFeatures.isEnabled("editor.advanced.paste.disable")&&require(["atlassian-editor-plugins/paste/repairer"],function(a){s=a});c.addCommand("mceInsertClipboardContent",function(a,c){f(c,!0)});h(c,"paste_text_use_dialog")||c.addCommand("mcePasteText",function(){var a=tinymce.util.Cookie;c.pasteAsPlainText=!c.pasteAsPlainText;c.controlManager.setActive("pastetext",
c.pasteAsPlainText);c.pasteAsPlainText&&!a.get("tinymcePasteText")&&(h(c,"paste_text_sticky")?c.windowManager.alert(c.translate("paste.plaintext_mode_sticky")):c.windowManager.alert(c.translate("paste.plaintext_mode")),h(c,"paste_text_notifyalways")||a.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))});c.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});c.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});h(c,"paste_auto_cleanup_on_paste")&&
(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?c.onKeyDown.addToTop(function(a,c){((tinymce.isMac?c.metaKey:c.ctrlKey)&&86===c.keyCode||c.shiftKey&&45===c.keyCode)&&i(c)}):c.onPaste.addToTop(function(a,c){return i(c)}));c.onInit.add(function(){c.controlManager.setActive("pastetext",c.pasteAsPlainText);h(c,"paste_block_drop")&&c.dom.bind(c.getBody(),"dragend dragover draggesture dragdrop drop drag".split(" "),function(a){return a.preventDefault(),a.stopPropagation(),false})});c.onSaveContent.add(function(a,
c){var b=d("<div/>").html(c.content);d('ul.inline-task-list > li[data-pasted-task="true"]',b).each(function(){var a=d(this),c=a.attr("data-inline-task-id");c&&1<b.find('ul.inline-task-list > li[data-inline-task-id="'+c+'"]').size()&&a.attr("data-inline-task-id","")});c.content=b.html()});l._legacySupport()},getInfo:function(){return{longname:"AtlassianEditorPaste",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}},
_preProcess:function(c,b){function d(c){a(c,function(a){i=a.constructor==RegExp?i.replace(a,""):i.replace(a[0],a[1])})}function e(a,c){if("all"===g)return"";var b=l(u(c.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return b.length?' class="'+b.join(" ")+'"':""}var f,g,k=this.editor,i=b.content,l=tinymce.grep,u=tinymce.explode,v=tinymce.trim;if(0!=k.settings.paste_enable_default_filters){if(tinymce.isIE&&9<=document.documentMode&&(d([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,
"$1"]]),d([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])),/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(i)||b.wordContent){b.wordContent=!0;d([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);h(k,"paste_convert_headers_to_strong")&&(i=i.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>"));h(k,"paste_convert_middot_lists")&&d([[/<\!--\[if !supportLists\]--\>/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],
[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]);d([/<\!--[\s\S]+?--\>/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "]]);do f=i.length,i=i.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(f!=i.length);0===h(k,"paste_retain_style_properties").replace(/^none$/i,"").length?i=i.replace(/<\/?span[^>]*>/gi,""):d([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,
function(a,c){return 0<c.length?c.replace(/./," ").slice(Math.floor(c.length/2)).split("").join(" "):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(c,b,d){var e=[],f=0,c=u(v(d).replace(/&quot;/gi,"'"),";");return a(c,function(a){function c(a){return a+("0"!==a&&/\d$/.test(a))?"px":""}var b,d=u(a,":");if(2===d.length){switch(b=d[0].toLowerCase(),a=d[1].toLowerCase(),b){case "mso-padding-alt":case "mso-padding-top-alt":case "mso-padding-right-alt":case "mso-padding-bottom-alt":case "mso-padding-left-alt":case "mso-margin-alt":case "mso-margin-top-alt":case "mso-margin-right-alt":case "mso-margin-bottom-alt":case "mso-margin-left-alt":case "mso-table-layout-alt":case "mso-height":case "mso-width":case "mso-vertical-align-alt":return void(e[f++]=
b.replace(/^mso-|-alt$/g,"")+":"+c(a));case "horiz-align":return void(e[f++]="text-align:"+a);case "vert-align":return void(e[f++]="vertical-align:"+a);case "font-color":case "mso-foreground":return void(e[f++]="color:"+a);case "mso-background":case "mso-highlight":return void(e[f++]="background:"+a);case "mso-default-height":return void(e[f++]="min-height:"+c(a));case "mso-default-width":return void(e[f++]="min-width:"+c(a));case "mso-padding-between-alt":return void(e[f++]="border-collapse:separate;border-spacing:"+
c(a));case "text-line-through":return void("single"!=a&&"double"!=a||(e[f++]="text-decoration:line-through"));case "mso-zero-height":return void("yes"==a&&(e[f++]="display:none"))}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(b)||(e[f++]=b+":"+d[1])}}),0<f?b+' style="'+e.join(";")+'"':b}]])}h(k,"paste_convert_headers_to_strong")&&d([[/<h[1-6][^>]*>/gi,"<p><strong>"],
[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]);d([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);g=h(k,"paste_strip_class_attributes");"none"!==g&&(i=i.replace(/ class="([^"]+)"/gi,e),i=i.replace(/ class=([\-\w]+)/gi,e));h(k,"paste_remove_spans")&&(i=i.replace(/<\/?span[^>]*>/gi,""));b.content=i}},_postProcess:function(c,b){var d,e=this.editor,f=e.dom;if(0!=e.settings.paste_enable_default_filters){b.wordContent&&(a(f.select("a",b.node),function(a){a.href&&-1===
a.href.indexOf("#_Toc")||f.remove(a,1)}),h(e,"paste_convert_middot_lists")&&this._convertLists(c,b),d=h(e,"paste_retain_style_properties"),tinymce.is(d,"string")&&"all"!==d&&"*"!==d&&(d=tinymce.explode(d.replace(/^none$/i,"")),a(f.select("*",b.node),function(a){var c,b,e,g={},j=0;if(d)for(c=0;c<d.length;c++)b=d[c],(e=f.getStyle(a,b))&&(g[b]=e,j++);f.setAttrib(a,"style","");d&&0<j?f.setStyles(a,g):"SPAN"!==a.nodeName||a.className||f.remove(a,!0)})));h(e,"paste_remove_styles")||h(e,"paste_remove_styles_if_webkit")&&
tinymce.isWebKit?a(f.select("*[style]",b.node),function(a){a.removeAttribute("style");a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&a(f.select("*",b.node),function(a){a.removeAttribute("data-mce-style")});var g=AJS.Meta.get("base-url");a(f.select("a:not([data-base-url='"+g+"'])[data-base-url]",b.node),function(a){for(var c=a.attributes.href?a.attributes.href.value:g;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);a.setAttribute("href",c)})}},_convertLists:function(c,b){var d,
e,f,g,h,i=c.editor.dom,l=-1,u=[];a(i.select("p",b.node),function(c){var b,j,h,k,A,B="";for(b=c.firstChild;b&&3===b.nodeType;b=b.nextSibling)B+=b.nodeValue;B=c.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," ");/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(B)&&(j="ul");/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(B)&&(j="ol");j?(f=parseFloat(c.style.marginLeft||0),f>l&&u.push(f),d&&j==g?f>l?d=e.appendChild(i.create(j)):f<l&&(k=tinymce.inArray(u,f),A=i.getParents(d.parentNode,
j),d=A[A.length-1-k]||d):(d=i.create(j),i.insertAfter(d,c)),a(i.select("span",c),function(a){var c=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");"ul"==j&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(c)?i.remove(a):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(c)&&i.remove(a)}),h=c.innerHTML,h="ul"==j?c.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,""):c.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,
""),e=d.appendChild(i.create("li",0,h)),i.remove(c),l=f,g=j):d=l=0});h=b.node.innerHTML;-1!==h.indexOf("__MCE_ITEM__")&&(b.node.innerHTML=h.replace(/__MCE_ITEM__/g,""))},_insert:function(a,b){var d,e,f=this.editor,g=f.selection.getRng(!0);if(a=this._applyOnBeforeSetContentListeners(f,a),e=this.parse(a,f.getDoc()),d=this._getClipboardInserter(f,g,e))d.insert(f,g,e),f.selection.onSetContent.dispatch(f.selection,{content:a,format:"html"}),f.addVisual();else{if(f.selection.isCollapsed()||g.startContainer==
g.endContainer||f.execCommand("mceDelete",!1,null,{skip_undo:!0}),tinymce.isIE)for(d=0;d<e.length;d++)if("img"===e[d].nodeName.toLowerCase()){b=!0;break}f.execCommand("mceInsertContent",!1,a,{skip_undo:b})}},_getClipboardInserter:function(a,b,e){var f;return d.each(this.clipboardInserters,function(d,g){if(g.shouldInsert(a,b,e))return f=g,!1}),f},clipboardInserters:[{shouldInsert:function(a,b,d){a=g(b);return a=a&&i(d),a&&0<d.children("li").length},insert:function(a,b,e){b=d(3===b.startContainer.nodeType?
b.startContainer.parentNode:b.startContainer);e=e.children();a.undoManager.beforeChange();a.undoManager.add();l(b.parent(),e);b.replaceWith(e);a.selection.select(e.last()[0],!0);a.selection.collapse();a.undoManager.add()}},{shouldInsert:function(a,b,d){a=f(a,b);return a=a&&i(d),a&&0<d.children("li").length},insert:function(a,b,e){b=d(b.startContainer).closest("li",a.getBody());e=e.children();a.undoManager.beforeChange();a.undoManager.add();l(b.parent(),e);b.before(e);a.selection.select(b[0],!0);a.selection.collapse(!0);
a.undoManager.add()}},{shouldInsert:function(a,b,e){!b.collapsed||3===b.startContainer.nodeType&&b.startOffset!=b.startContainer.nodeValue.length||1===b.startContainer.nodeType&&b.startOffset!=b.startContainer.childNodes.length?b=!1:(a=d(b.startContainer).closest("ol, ul",a.getBody()),0===a.length?b=!1:(b=(new tinymce.dom.TreeWalker(b.startContainer,a[0])).next(!0),b=void 0===b||d(b).is("li")));return b&&e.length===e.filter("ol,ul").length&&0<e.children("li").length},insert:function(a,b,e){b=d(b.startContainer).closest("li",
a.getBody());e=e.children();a.undoManager.beforeChange();a.undoManager.add();l(b.parent(),e);b.after(e);a.selection.select(e.last()[0],!0);a.selection.collapse(!1);a.undoManager.add()}},{shouldInsert:function(a,b,d){var e=1<d.length;if(a=e=(e=e&&!g(b))&&f(a,b))a=d.filter("ol,ul"),d=d[d.length-1],a=1===a.length&&a[0]===d;return a},insert:function(a,b,e){b=d(b.startContainer).closest("li",a.getBody());a.undoManager.beforeChange();a.undoManager.add();l(b.parent(),e.children("li"));e=d("<li></li>").append(e);
b.before(e);a.undoManager.add()}},{shouldInsert:function(a,b,e){return!b.collapsed&&!!d(b.commonAncestorContainer).is("table.confluenceTable > tbody, table.confluenceTable > tbody > tr")&&e.is("table:not(.wysiwyg-macro)")},insert:function(a,b,e){function f(a,c){for(var b=a.shift(),e=c.shift();b&&e;b=a.shift(),e=c.shift())d(e).html(d(b).html())}var g,e=0<e.children("tbody").length?e.children("tbody").children("tr"):e.children("tr"),h=e.children("td, th"),i=d(".mceSelected",a.getDoc());g=i.parent();
if(a.undoManager.beforeChange(),a.undoManager.add(),1===g.length)f(d.makeArray(h),d.makeArray(i));else{e=d.makeArray(e);g=d.makeArray(g);h=e.shift();for(i=g.shift();h&&i;h=e.shift(),i=g.shift())f(d.makeArray(d(h).children()),d.makeArray(d(i).children()))}a.selection.setRng(b);a.undoManager.add()}},{shouldInsert:function(a,b,e){a=d(b.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent");if(0===a.length)return!1;a=a.closest("table.confluenceTable",".mceContent");if(0!==a.length&&
0!==a.children("tbody").length){if(!e.is("table:not(.wysiwyg-macro)"))return!1;var f=!1;return a.find("*[colspan], *[rowspan]").each(function(a,c){if(1<d(c).attr("rowspan")||1<d(c).attr("colspan"))return f=!0,!1}),!f}},insert:function(a,b,e){var b=d(b.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent"),f=b.closest("table.confluenceTable",".mceContent"),e=0<e.children("tbody").length?e.children("tbody").children("tr"):e.children("tr"),g=f.children("tbody").children("tr"),h=e.length,
i=e.first().children("td, th").length,l=g.length,r=g.first().children("td, th").length,u=b.parent().index(),v=b.index();a.undoManager.beforeChange();a.undoManager.add();var n=v+i-r,h=u+h-l,n=0>n?0:n,h=0>h?0:h;g.each(function(a,c){for(var b=d(c),e=b.children().last(),f=0;f<n;f++)b.append(e.clone().html(tinymce.isIE?"":"<br/>"))});i=g.last();for(g=0;g<h;g++){i=d("<tr></tr>").insertAfter(i);for(l=0;l<r+n;l++)i.append('<td class="confluenceTd">'+(tinymce.isIE?"":"<br/>")+"</td>")}var y=[];f.children("tbody").children("tr").slice(u).each(function(a,
c){y.push(d.makeArray(d(c).children("th, td").slice(v)))});var t=[];e.each(function(a,c){t.push(d.makeArray(d(c).children("th, td")))});f=t.shift();for(e=y.shift();f&&e;f=t.shift(),e=y.shift()){r=f.shift();for(u=e.shift();r&&u;r=f.shift(),u=e.shift())d(u).html(d(r).html())}a.selection.select(b[0],1);a.selection.collapse(!0);a.undoManager.add()}}],_applyOnBeforeSetContentListeners:function(a,b){var d={content:b,format:"html"};return a.selection.onBeforeSetContent.dispatch(a.selection,d),d.content},
_insertPlainText:function(c){function b(d){a(d,function(a){c=a.constructor==RegExp?c.replace(a,""):c.replace(a[0],a[1])})}var d=this.editor,e=h(d,"paste_text_linebreaktype"),f=h(d,"paste_text_replacements"),g=tinymce.is;"string"==typeof c&&0<c.length&&(b(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(c)?[/[\n\r]+/g]:[/\r+/g]),b([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,
"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]),c=d.dom.decode(tinymce.html.Entities.encodeRaw(c)),g(f,"array")?b(f):g(f,"string")&&b(RegExp(f,"gi")),b("none"==e?[[/\n+/g," "]]:"br"==e?[[/\n/g,"<br />"]]:"p"==e?[[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]:[[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),d.execCommand("mceInsertContent",!1,c))},_legacySupport:function(){var a=this,b=a.editor;b.addCommand("mcePasteWord",
function(){b.windowManager.open({file:a.url+"/pasteword.htm",width:parseInt(h(b,"paste_dialog_width")),height:parseInt(h(b,"paste_dialog_height")),inline:1})});h(b,"paste_text_use_dialog")&&b.addCommand("mcePasteText",function(){b.windowManager.open({file:a.url+"/pastetext.htm",width:parseInt(h(b,"paste_dialog_width")),height:parseInt(h(b,"paste_dialog_height")),inline:1})});b.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})},parse:function(a,b){return"<"===a.charAt(0)&&">"===
a.charAt(a.length-1)&&3<=a.length?d(a,b||document):d("<div>"+a+"</div>",b||document).contents()},repair:function(a){return a?(d.each(b,function(b,d){a=d.repair(a)}),a):a}});tinymce.PluginManager.add("aePaste",tinymce.plugins.AtlassianEditorPaste)})($);