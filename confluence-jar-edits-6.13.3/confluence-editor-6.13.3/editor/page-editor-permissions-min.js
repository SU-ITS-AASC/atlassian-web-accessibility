define("confluence-editor/editor/page-editor-permissions",["ajs","jquery"],function(i,e){"use strict";var t={updateEditPageRestrictions:function(t,s,n,r){var a=e("#rte-button-restrictions"),o=a.find(".icon"),c="";if(t||s){var d=t?"aui-iconfont-locked icon-red":"aui-iconfont-unlocked icon-red";o.removeClass("aui-iconfont-locked aui-iconfont-unlocked icon-red").addClass(d),c=i.I18n.getText("page.restrictions.apply")}else o.removeClass("aui-iconfont-locked aui-iconfont-unlocked icon-red").addClass("aui-iconfont-unlocked"),c=n?i.I18n.getText("page.restrictions.apply"):i.I18n.getText("page.restrictions.none");a.attr("data-tooltip",c),a.attr("aria-label",c),a.data("explicit-restrictions",t),a.data("inherited-restrictions",s),a.data("restrictionsHash",r)},handleHeartbeat:function(s,n){if(void 0!==n.restrictionsHash){var r=e("#rte-button-restrictions");if(r.data("restrictionsHash")!==n.restrictionsHash)if(e("#update-page-restrictions-dialog").is(":visible")&&i.PagePermissions.updateRestrictionsDialog)i.PagePermissions.updateRestrictionsDialog(),r.data("restrictionsHash",n.restrictionsHash);else{var a=""!==n.restrictionsHash,o=n.hasViewRestrictions,c=!!r.data("inherited-restrictions");t.updateEditPageRestrictions(o,c,a,n.restrictionsHash)}}},init:function(e){i.bind("editor-heartbeat",t.handleHeartbeat);i.bind("edit-page-restrictions-updated",function(i,e){t.updateEditPageRestrictions(e.hasExplicitRestrictions,e.hasInheritedRestrictions,e.hasAnyExplicitRestrictions,e.restrictionsHash)})}};return t}),require("confluence/module-exporter").safeRequire("confluence-editor/editor/page-editor-permissions",function(i){var e=require("ajs"),t=require("jquery");e.PagePermissions=e.PagePermissions||{},t.extend(e.PagePermissions,{updateEditPageRestrictions:i.updateEditPageRestrictions}),e.toInit(i.init)});