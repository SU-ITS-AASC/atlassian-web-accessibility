define("confluence-editor/tinymce3/plugins/customtoolbar/table-toolbar","ajs jquery confluence/legacy tinymce document window".split(" "),function(g,d,b,c,i){return{initContextToolbars:function(z,e){function k(b){var a=d(this),c=d("#table-highlight-group"),f=c.attr("data-highlight-colour"),g=c.attr("data-remove-highlight");if(f){c.removeClass("highlight-"+f);c.removeAttr("data-highlight-colour")}c.removeClass("remove-highlight");g&&c.removeAttr("data-remove-highlight");if(f=a.attr("data-highlight-colour")){c.addClass("highlight-"+
f);c.attr("data-highlight-colour",f)}if(a.attr("data-remove-highlight")){c.addClass("remove-highlight");c.attr("data-remove-highlight",true)}e.focus();e.execCommand("confTableSelectionToggleHighlight",false,{alwaysHighlight:true});b.preventDefault()}function p(){var b=d("<ul/>").addClass("table-mode-list"),e=[{name:a("table.responsive"),mceCmd:"mceAutoWidth",tooltip:a("table.responsive_tooltip")},{name:a("table.fixed_width"),mceCmd:"mceFixedWidth",tooltip:a("table.fixed_width_tooltip")}];d.each(e,
function(a,f){var e=d("<li/>").addClass("dropdown-item").attr("data-tooltip",f.tooltip),o=d('<a href="#">'+f.name+"</a>").addClass("item-link");e.on("click",function(){c.execCommand(f.mceCmd,false,"")});b.append(e.append(o))});return b}var j,a=function(b){var a=e.getLang(b);(b=e.getLang(b+"_shortcut",""))&&(a=a+(" ("+b+")"));return a},l=g.storageManager("atlassian.editor","tables");e.onNodeChange.add(function(a,c,h){a=d("body");a=!a.hasClass("no-tools")||a.hasClass("no-tools-toolbars-visible");if(!j&&
h.parentNode!=null&&h.nodeName!=="BODY"){j=true;if(d(h).closest("table:not(.wysiwyg-macro)").length){d(i).trigger("createContextToolbarRow.Toolbar",{buttons:b.Editor.tableToolbar.Buttons,topToolbar:true,animate:a}).trigger("enableContextToolbarRow.Toolbar");g.DarkFeatures.isEnabled("confluence.table.resizable")&&d.fn.updateTableModeInToolbar&&d(h).closest("table").updateTableModeInToolbar();a=d(h).closest("td,th");c=d(".mceSelected",a.closest("table"));a.add(c).filter(function(){var a=d(this);return parseInt(a.attr("rowspan"),
10)>1||parseInt(a.attr("colspan"),10)>1}).length>=1?e.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-split"):e.plugins.customtoolbar.disableToolbarButton("aui-iconfont-table-split");d(h).closest("table").find(".numberingColumn").length>0?d("#insert-numbering-column").addClass("active"):d("#insert-numbering-column").removeClass("active")}else d(i).trigger("disableContextToolbarRow.Toolbar",{animate:a});j=false}});e.onUndo.add(function(a){a.nodeChanged()});e.onInit.add(function(){d(i).delegate("#table-highlight-colour .aui-dropdown a",
"click",k)});e.onRemove.add(function(){d(i).undelegate("#table-highlight-colour .aui-dropdown a","click",k)});var q=b.Editor,r=new b.Editor.Toolbar.Components.Group([new b.Editor.Toolbar.Components.Button({text:a("table.row_before_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-insert-row-before",click:function(){c.execCommand("mceTableInsertRowBefore",false,"")}}),new b.Editor.Toolbar.Components.Button({text:a("table.row_after_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-insert-row-after",
click:function(){c.execCommand("mceTableInsertRowAfter",false,"")}}),new b.Editor.Toolbar.Components.Button({text:a("table.delete_row_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-remove-row",click:function(){c.execCommand("mceTableDeleteRow",false,"")}})]),s=new b.Editor.Toolbar.Components.Group([new b.Editor.Toolbar.Components.Button({text:a("table.cut_row_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-cut-table-row",click:function(){c.execCommand("mceTableCutRow",false,"");e.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-row")}}),
new b.Editor.Toolbar.Components.Button({text:a("table.copy_row_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-copy-table-row",click:function(){c.execCommand("mceTableCopyRow",false,"");e.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-row")}}),new b.Editor.Toolbar.Components.Button({text:a("table.paste_row_before_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-paste-table-row",click:function(){c.execCommand("mceTablePasteRowBefore",false,"")},disabled:!l.doesContain("copied")})]),
t=new b.Editor.Toolbar.Components.Group([new b.Editor.Toolbar.Components.Button({text:a("table.col_before_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-insert-column-before",click:function(){c.execCommand("mceTableInsertColBefore",false,"")}}),new b.Editor.Toolbar.Components.Button({text:a("table.col_after_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-insert-column-after",click:function(){c.execCommand("mceTableInsertColAfter",false,"")}}),new b.Editor.Toolbar.Components.Button({text:a("table.delete_col_desc"),
iconClass:"aui-icon aui-icon-small aui-iconfont-remove-column",click:function(){c.execCommand("mceTableDeleteCol",false,"")}})]),u=new b.Editor.Toolbar.Components.Group([new b.Editor.Toolbar.Components.Button({text:a("table.merge_cells_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-merge-table-cells",click:function(){c.execCommand("mceTableMergeCells",false,"")}}),new b.Editor.Toolbar.Components.Button({text:a("table.split_cells_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-split-merged-table-cells",
click:function(){c.execCommand("mceTableSplitCells",false,"")}})]),v=new b.Editor.Toolbar.Components.Group([new b.Editor.Toolbar.Components.Button({text:a("table.row_highlight"),iconClass:"aui-icon aui-icon-small aui-iconfont-heading-row",click:function(){c.execCommand("confTableRowToggleHeading",false);c.execCommand("mceTableUpdateNumberingCol",false)}}),new b.Editor.Toolbar.Components.Button({text:a("table.col_highlight"),iconClass:"aui-icon aui-icon-small aui-iconfont-heading-column",click:function(){c.execCommand("confTableColumnToggleHeading",
false)}}),new b.Editor.Toolbar.Components.Button({text:a("table.numbering_column_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-insert-numbered-column",id:"insert-numbering-column",click:function(){c.execCommand("mceTableInsertNumberingCol",false,"")}})]),w=b.Editor.Toolbar.Components.SplitGroup,x=[new b.Editor.Toolbar.Components.Button({text:a("table.selection_highlight"),iconClass:"aui-icon aui-icon-small aui-iconfont-paint-bucket",click:function(){c.execCommand("confTableSelectionToggleHighlight",
false)}})],m=d("<ul/>").addClass("table-highlight-picker"),n=[a("table.cell_color_grey"),a("table.cell_color_red"),a("table.cell_color_green"),a("table.cell_color_blue"),a("table.cell_color_yellow"),a("table.cell_color_clear")],y=[false,false,false,false,false,true];d.each(["grey","red","green","blue","yellow",""],function(a,b){var c=d("<li/>"),e=d('<a href="#"></a>');y[a]?e.addClass("remove-highlight").attr("data-remove-highlight",true):e.addClass("highlight-"+b).attr("data-highlight-colour",b);
e.attr("title",n[a]);e.attr("aria-label",n[a]);e.tooltip();c.append(e);m.append(c)});q.tableToolbar={Buttons:[r,s,t,u,v,new w(x,{id:"table-highlight-group",dropDownOptions:{id:"table-highlight-colour",dropDownContent:m,alignment:"right"},postProcess:function(a){a.attr("data-highlight-colour","grey");a.addClass("highlight-grey");var b=d("<span>&nbsp;</span>");b.addClass("highlight-indicator");a.find(".icon.aui-iconfont-paint-bucket").after(b)}}),new b.Editor.Toolbar.Components.Group([new b.Editor.Toolbar.Components.Button({text:a("table.del"),
iconClass:"aui-icon aui-icon-small aui-iconfont-remove-table",click:function(){c.execCommand("mceTableDelete",false,"")}})])],Events:[]};g.DarkFeatures.isEnabled("confluence.table.resizable")&&b.Editor.tableToolbar.Buttons.splice(0,0,new b.Editor.Toolbar.Components.Group([new b.Editor.Toolbar.Components.DropDownButton({id:"table-mode-picker",text:a("table.auto_width"),dropDownContent:p()})]));g.DarkFeatures.isEnabled("confluence-table-enhancements.copy-cut-paste-cols.disabled")||b.Editor.tableToolbar.Buttons.splice(3,
0,new b.Editor.Toolbar.Components.Group([new b.Editor.Toolbar.Components.Button({text:a("table.col_cut_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-cut-table-column",click:function(){c.execCommand("mceTableCutCol",false,"");e.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-column")}}),new b.Editor.Toolbar.Components.Button({text:a("table.col_copy_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-copy-table-column",click:function(){c.execCommand("mceTableCopyCol",
false,"");e.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-column")}}),new b.Editor.Toolbar.Components.Button({text:a("table.col_paste_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-paste-table-column",click:function(){c.execCommand("mceTablePasteColBefore",false,"")},disabled:!l.doesContain("copied")})]))}}});
require("confluence/module-exporter").safeRequire("confluence-editor/tinymce3/plugins/customtoolbar/table-toolbar",function(g){var d=require("jquery"),b=require("document");d(b).bind("initContextToolbars.Toolbar",g.initContextToolbars)});