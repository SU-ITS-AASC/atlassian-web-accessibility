define("confluence-dashboard/modules/recently-viewed/recently-viewed-collection",["module","exports","backbone","configuration","confluence-dashboard/utils/date-utils","../../core/shared/base-collection-with-function","underscore","ajs"],function(e,t,n,o,a,c,r,l){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var d=n.Model,s=o.endpoints,u=i(a).default,f=i(c).default,p=i(r).default,m=i(l).default.contextPath(),w=d.extend({parse:function(e,t){var n=e.metadata.currentuser.viewed.lastSeen,o=new Date(n),a=o.getTime();return p.extend(e,{url:m+e._links.webui,date:n,timestamp:a,lastSeenISO:u.toISODate(o),icon:"page"===e.type?"page":"blogpost"}),e}});t.default=f.extend({model:w,comparator:function(e,t){return-u.compareTimestamps(e.get("timestamp"),t.get("timestamp"))},apiParams:function(e){return{url:s.RECENTLY_VIEWED,expansions:["container","metadata.currentuser.viewed","metadata.currentuser.lastcontributed"],cql:"id in recentlyViewedContent("+this.getPageLimit(e)+", "+this.getPageOffset(e)+")",cqlcontext:'{"contentStatuses":["current","draft"]}'}},groupMethod:function(e){return e.get("lastSeenISO")}}),e.exports=t.default}),define("confluence-dashboard/modules/recently-viewed/recently-viewed-controller",["module","exports","./recently-viewed-collection","confluence-dashboard/core/content/content-as-grouped-list-view","confluence-dashboard/core/content/content-controller","confluence-dashboard/soy-templates","configuration","ajs"],function(e,t,n,o,a,c,r,l){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var d=i(n).default,s=i(o).default,u=i(a).default,f=i(c).default,p=(r.staticResourceUrl,i(l).default);t.default=u.extend({actionsToFilter:["recentViewed"],recentViewed:function(){this.view=new s({collection:new d,templateHelpers:{title:p.I18n.getText("recently.viewed.title"),contentType:this.options.name},emptyViewOptions:{template:f.RecentViewed.blank},className:"default-list-view starred-list"}),this.view.collection.fetch()}}),e.exports=t.default});