define("confluence-keyboard-shortcuts/shortcut-dialog","ajs confluence-keyboard-shortcuts/confluence-keyboard-shortcuts confluence/legacy confluence/templates jquery window".split(" "),function(a,g,f,n,e,r){return function(){var d;g.keyboardShortcuts.getDialog=function(){function p(){if(f&&f.Editor&&f.Editor.isVisible&&f.Editor.isVisible()){d.overrideLastTab();d.gotoPanel(1)}else d.gotoPanel(0)}var o=e.Deferred();if(d){p();return o.resolve(d)}var h=g.keyboardShortcuts.shortcuts,s=r.navigator.platform.indexOf("Mac")!==
-1,u=function(c){for(var b=a("span").addClass("item-action"),d=0;d<c.keys.length;d++){d>0&&b.append(l(a.I18n.getText("keyboard.shortcut.or")));for(var e=c.keys[d],m=0;m<e.length;m++){m>0&&b.append(l(a.I18n.getText("keyboard.shortcut.then")));for(var q=b,j=e[m].split("+"),i=0;i<j.length;i++){i>0&&q.append(l("+"));for(var g=q,f=j[i].split(".."),h=0;h<f.length;h++){h>0&&g.append(l(a.I18n.getText("keyboard.shortcut.to")));g.append(t(f[h]))}}}}return b},t=function(c){var b=a("kbd");switch(c){case "Shift":case "Sh":b.text(a.I18n.getText("keyboard.shortcut.shift"));
b.addClass("modifier-key");break;case "Ctrl":c=s?"âŒ˜":a.I18n.getText("keyboard.shortcut.ctrl");b.text(c);b.addClass("modifier-key");break;case "Tab":b.text(a.I18n.getText("keyboard.shortcut.tab"));b.addClass("modifier-key");break;case "Alt":b.text(a.I18n.getText("keyboard.shortcut.alt"));b.addClass("modifier-key");break;default:b.text(c);b.addClass("regular-key")}return b},l=function(c){var b=a("span");b.text(c);b.addClass("key-separator");return b},k=function(c,b,d){for(var c=e(n.KeyboardShortcutsDialog.keyboardShortcutModule({title:c})),
h=c.find("ul"),g=0;g<d.length;g++){var f=d[g];if(!f.hidden&&e.inArray(f.context,b)!==-1){var j=a("li").addClass("item-details"),i=f.description,i=a("strong").addClass("item-description").append(i);j.append(i);j.append(u(f));h.append(j)}}return c};d=a.ConfluenceDialog({width:950,height:660,id:"keyboard-shortcuts-dialog"});d.addHeader(a.I18n.getText("keyboard.shortcuts.dialog.heading"));d.addPanel(a.I18n.getText("keyboard.shortcuts.dialog.panel.general"),function(){var c=e(n.KeyboardShortcutsDialog.keyboardShortcutPanel({panelId:"general-shortcuts-panel"})),
b=e(c).children(".shortcutsmenu");a.Meta.get("remote-user")&&c.find(".keyboard-shortcut-dialog-panel-header").append(f.Templates.KeyboardShortcutsDialog.keyboardShortcutEnabledCheckbox());b.append(k(a.I18n.getText("keyboard.shortcuts.dialog.module.global"),["global"],h));b.append(k(a.I18n.getText("keyboard.shortcuts.dialog.module.page"),["viewcontent","viewinfo"],h));return c}());d.addPanel(a.I18n.getText("keyboard.shortcuts.dialog.panel.editor"),function(){var c=e(n.KeyboardShortcutsDialog.keyboardShortcutPanel({panelId:"editor-shortcuts-panel"})),
b=e(c).children(".shortcutsmenu");b.append(k(a.I18n.getText("keyboard.shortcuts.dialog.module.block"),["tinymce.block"],h));b.append(k(a.I18n.getText("keyboard.shortcuts.dialog.module.rich"),["tinymce.rich"],h));b.append(k(a.I18n.getText("keyboard.shortcuts.dialog.module.editing-actions"),["tinymce.actions"],h));return c}());d.addCancel(a.I18n.getText("close.name"),function(){a.debug("Hiding Shortcuts help");d.hide();return false});a.trigger("keyboard-shortcut-dialog-ready",d);p();o.resolve(d);e("#keyboard-shortcut-enabled-checkbox").prop("checked",
g.keyboardShortcuts.enabled).click(function(){var c=e(this).prop("checked");e.ajax({type:"POST",url:a.contextPath()+"/rest/confluenceshortcuts/latest/enabled",data:e.toJSON({enabled:c}),dataType:"json",contentType:"application/json"}).done(function(){g.keyboardShortcuts.enabled=c;g.keyboardShortcuts.ready=false;c?a.trigger("add-bindings.keyboardshortcuts"):a.trigger("remove-bindings.keyboardshortcuts")})});return o}}});
require("confluence/module-exporter").safeRequire("confluence-keyboard-shortcuts/shortcut-dialog",function(a){require("ajs").toInit(a)});