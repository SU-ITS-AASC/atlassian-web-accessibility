define("confluence-dashboard/utils/event-manager",["module","exports","backbone","marionette"],function(e,t,n,o){"use strict";var i=n.Wreqr,r=(function(e){return e&&e.__esModule?e:{default:e}}(o).default,i.radio.channel("global"));t.default={EventManager:r.vent,Commands:r.commands,ReqRes:r.reqres},e.exports=t.default}),define("confluence-dashboard/behaviors/aui-sidebar-resizable",["module","exports","marionette","../utils/event-manager","jquery","ajs","confluence/storage-manager"],function(e,t,n,o,i,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=n.Behavior,c=o.EventManager,u=s(i).default,d=s(r).default,f=s(a).default;t.default=l.extend({ui:{resizeHandle:".aui-sidebar-handle"},events:{"mousedown @ui.resizeHandle":"onResizeStart","mouseup @ui.resizeHandle":"onResizeEnd"},dragging:!1,initialize:function(){this.EXPANDED_SIZE=280,this.sidebarSettings=f("confluence","sidebar"),this.listenTo(this.view,"sidebar-attached",this.createAuiSidebar,this),this.listenTo(c,"window:resize",this.resetSidebar,this)},createAuiSidebar:function(){var e=this;this.AUISidebar=d.sidebar(this.view.$el.selector),this.AUISidebar.on("expand-start.sidebar",function(){return e.onExpand()}),this.AUISidebar.on("collapse-start.sidebar",function(){return e.onCollapse()}),this.$footer=u("#footer, #studio-footer"),this.currentWidth=parseInt(this.sidebarSettings.getItem("width")),this.setInitialState()},resetSidebar:function(){var e=u("body").hasClass("aui-sidebar-collapsed"),t=this.AUISidebar.$el.hasClass("aui-sidebar-fly-out");e&&!t?this.AUISidebar.collapse():this.isFlyOut()||this.AUISidebar.isCollapsed()||this.setPanelWidth(this.EXPANDED_SIZE,this.EXPANDED_SIZE)},setInitialState:function(){this.currentWidth?(this.currentWidth>130&&(this.EXPANDED_SIZE=this.currentWidth),this.adjustSize()):this.currentWidth=280},onBeforeDestroy:function(){this.AUISidebar.off(".sidebar")},triggerToggleSidebar:function(e){c.trigger("sidebar:"+e)},isFlyOut:function(){return 1240>window.innerWidth},onExpand:function(){this.triggerToggleSidebar("expand"),this.setPanelWidth(this.EXPANDED_SIZE,this.EXPANDED_SIZE),this.persistSidebarSize()},onCollapse:function(){this.EXPANDED_SIZE=this.currentWidth<130?280:this.currentWidth,this.triggerToggleSidebar("collapse"),this.setPanelWidth(55,"inherit"),this.persistSidebarSize()},onResizeStart:function(e){var t=this;e.preventDefault(),this.AUISidebar.$body.on("mousemove.sidebar",function(e){var n=e.pageX;t.dragging=!0,n>130&&(t.EXPANDED_SIZE=n),t.adjustSize(),n>55&&n<640&&t.setPanelWidth(n)}),this.AUISidebar.$body.one("mouseup.sidebar",function(){return t.onResizeEnd()})},onResizeEnd:function(){this.AUISidebar.$body.off(".sidebar"),this.dragging?(this.adjustSize(),this.persistSidebarSize(),this.dragging=!1):this.AUISidebar.toggle()},setPanelWidth:function(e,t){var n=e+"px",o=n;this.isFlyOut()&&(o="55px"),this.AUISidebar.$wrapper.css({width:n,maxWidth:t||n}),this.AUISidebar.$el.siblings(".aui-page-panel").css({paddingLeft:o}),this.$footer.css("padding-left",o),this.currentWidth=e},persistSidebarSize:function(){this.sidebarSettings.setItemQuietly("width",this.currentWidth)},_collapse:function(){this.AUISidebar.isCollapsed()?this.onCollapse():this.AUISidebar.collapse()},_expand:function(){this.AUISidebar.isCollapsed()?this.AUISidebar.expand():this.onExpand()},adjustSize:function(){this.currentWidth<130?this._collapse():this._expand()}}),e.exports=t.default}),define("configuration",["ajs","confluence/meta"],function(e,t){var n=e.contextPath(),o="com.atlassian.confluence.plugins.confluence-dashboard";return{apiLimit:20,visibleItemLimit:200,pluginKey:o,staticResourceUrl:t.get("static-resource-url-prefix")+"/download/resources/"+o+":confluence-dashboard-resources",backboneHistoryConfig:{pushState:!1,root:n+"/dashboard.action",silent:!1},DARK_FEATURES:{USER_DISABLED_DASHBOARD_DARK_FEATURE:"simple.dashboard.disabled",RECOMMENDED_FOR_YOU_DARK_FEATURE:"recommended.for.you"},endpoints:{ALL_UPDATES:n+"/rest/dashboardmacros/1.0/updates",POPULAR_STREAM:n+"/rest/popular/1/stream/content?days=7&pageSize=20",RECOMMENDED_STREAM:n+"/rest/recommender/1.0/stream/content",RECENTLY_VIEWED:n+"/rest/api/content/search",RECENTLY_WORKED:n+"/rest/api/content/search",STARRED:n+"/rest/api/content/search",FAVOURITE_SPACES:n+"/rest/experimental/search?cql=type=space and space.type=favourite order by favourite desc&expand=space.icon&limit=100",ALL_SPACES:n+"/rest/experimental/search?cql=type = space&expand=space.icon",TOGGLE_FAVOURITE_SPACE:function(e){return n+"/rest/experimental/relation/user/current/favourite/toSpace/"+e},WEB_ITEMS:function(e){return t.get("static-resource-url-prefix")+"/download/resources/com.atlassian.confluence.plugins.confluence-dashboard:confluence-dashboard-nav-items/api/web-items/"+e+".json"},ADD_FAVOURITE:n+"/json/addfavourite.action",REMOVE_FAVOURITE:n+"/json/removefavourite.action",FEATURE_DISCOVERY:n+"/rest/feature-discovery/latest/discovered"},sections:{webItems:{sidebar:{MY_WORK:"my-work",DISCOVER:"discover",MY_SPACES:"my-spaces",MY_TEAM:"my-team"}}},URLS:{LOGIN_PAGE:n+"/login.action"}}}),define("confluence-dashboard/utils/dark-features",["module","exports","confluence/dark-features","confluence/api/ajax","ajs","jquery"],function(e,t,n,o,i,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){var o={enable:"PUT",disable:"DELETE"};return c.ajax({type:o[e],contentType:"application/json",url:f+"/rest/feature/1/"+t+"/"+n,data:{}})}var l=a(n).default,c=a(o).default,u=a(i).default,d=a(r).default,f=u.contextPath();t.default=d.extend(l,{remotely:{user:{enable:function(e){return l.enable(e),s("enable","user",e)},disable:function(e){return l.disable(e),s("disable","user",e)}}}}),e.exports=t.default}),define("confluence-dashboard/modules/nav/nav-definitions",["module","exports","ajs","../../utils/dark-features","configuration"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=r(n).default,s=r(o).default,l=i.DARK_FEATURES.RECOMMENDED_FOR_YOU_DARK_FEATURE,c=[{key:"recently-worked",url:"recently-worked",label:a.I18n.getText("recently.worked.title"),icon:"confluence-icon-recently-worked-on",controllerModule:"confluence-dashboard/modules/recently-worked/recently-worked-controller",controllerMethod:"recentWorked",spa:!0},{key:"recently-viewed",url:"recently-viewed",label:a.I18n.getText("recently.viewed.title"),icon:"confluence-icon-recently-viewed",controllerModule:"confluence-dashboard/modules/recently-viewed/recently-viewed-controller",controllerMethod:"recentViewed",spa:!0},{key:"starred",url:"starred",label:a.I18n.getText("starred.title"),icon:"confluence-icon-starred",controllerModule:"confluence-dashboard/modules/starred/starred-controller",controllerMethod:"starred",spa:!0}],u=[{key:"all-updates",url:"all-updates",icon:"confluence-icon-all-updates",label:a.I18n.getText("all.updates.title"),controllerModule:"confluence-dashboard/modules/all-updates/all-updates-controller",controllerMethod:"allUpdates",spa:!0},{key:"popular-stream",url:"popular",icon:"confluence-icon-popular",label:a.I18n.getText("popular.stream.title"),controllerModule:"confluence-dashboard/modules/popular-stream/popular-stream-controller",controllerMethod:"popularStream",spa:!0}];s.isEnabled(l)&&u.push({key:"recommended-stream",url:"recommended",icon:"confluence-icon-recommended",label:"Recommended for you",controllerModule:"confluence-dashboard/modules/recommended-stream/recommended-stream-controller",controllerMethod:"recommendedStream",spa:!0}),t.default={MY_WORK:c,DISCOVER:u},e.exports=t.default}),define("confluence-dashboard/soy-templates",["module","exports"],function(e,t){"use strict";t.default=window.DashboardTemplates,e.exports=t.default}),define("confluence-dashboard/behaviors/tooltips",["module","exports","marionette"],function(e,t,n){"use strict";var o=n.Behavior;t.default=o.extend({defaults:{selector:".tooltip",configs:{gravity:"s"}},onRender:function(){this.$(this.options.selector).tooltip(this.options.configs)},onBeforeDestroy:function(){this.$(this.options.selector).tooltip("hide")}}),e.exports=t.default}),define("confluence-dashboard/behaviors/tooltips.js",function(){}),define("confluence-dashboard/modules/nav/nav-item-view",["module","exports","marionette","confluence-dashboard/soy-templates","../../utils/event-manager","backbone","../../behaviors/tooltips"],function(e,t,n,o,i,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=n.ItemView,c=s(o).default,u=i.EventManager,d=s(r).default,f=s(a).default;t.default=l.extend({tagName:"li",template:c.Nav.item,behaviors:{tooltip:{behaviorClass:f,selector:".aui-nav-item",configs:{gravity:"w"}}},modelEvents:{"change selected":"render"},events:{"click a":"onClick"},onClick:function(){this.model.set("selected",!0)},initialize:function(){this.onChangeRoute(),this.listenTo(u,"onRoute",this.onChangeRoute)},onChangeRoute:function(){this.model.set("selected",this.model.get("url")===d.history.fragment)},onBeforeRender:function(){this.$el.attr({class:"nav-item-container-"+this.model.get("key")+" "+(this.model.get("selected")?"aui-nav-selected":"")})}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-collection",["module","exports","backbone"],function(e,t,n){"use strict";var o=n.Collection;t.default=o.extend({groupMethod:function(e){throw"groupMethod method missing - check this collection !!!"},safeFetch:function(e){return this.filterXHR&&/[1-3]/.test(this.filterXHR.readyState)&&(this.filterXHR.abort(),this.filterXHR=null),this.filterXHR=this.fetch(e),this.filterXHR},sync:function(e,t,n){return n.cache||(n.cache=!1),o.prototype.sync.apply(this,arguments)}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-collection.js",function(){}),define("confluence-dashboard/core/web-fragments/web-item/web-item-collection",["module","exports","../../shared/base-collection","backbone","configuration"],function(e,t,n,o,i){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n).default,a=o.Model,s=i.endpoints,l=a.extend({defaults:{weight:1,urlWithoutContextPath:!0}});t.default=r.extend({model:l,setContainer:function(e){this.container=e},url:function(){return s.WEB_ITEMS(this.container)},extractUrls:function(){return this.invoke("pick",["url","key"])}}),e.exports=t.default}),define("confluence-dashboard/core/web-fragments/web-item/web-item-views",["module","exports","marionette","confluence-dashboard/soy-templates","./web-item-collection"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n.CollectionView,s=n.CompositeView,l=n.ItemView,c=r(o).default,u=r(i).default,d=l.extend({tagName:"li",template:c.WebFragments.webItem}),f=a.extend({tagName:"ul",childView:d,initialize:function(e){if(!e.container)throw"A container should be defined for a web item";this.collection=new u}}),h=s.extend({childView:d,initialize:function(e){if(!e.container)throw"A container should be defined for a web item";this.collection=new u}});t.default={WebItemView:d,WebItemCollectionView:f,WebItemCompositeView:h},e.exports=t.default}),define("confluence-dashboard/modules/nav/nav-composite-view",["module","exports","confluence-dashboard/soy-templates","./nav-item-view","../../core/web-fragments/web-item/web-item-views"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=r(n).default,s=r(o).default,l=i.WebItemCompositeView;t.default=l.extend({template:a.Nav.container,childViewContainer:".nav-items",className:"backbone-view",childView:s}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-controller",["module","exports","marionette","underscore"],function(e,t,n,o){"use strict";var i=n.Object,r=function(e){return e&&e.__esModule?e:{default:e}}(o).default;t.default=i.extend({initialize:function(){this.wrapActions()},actionsToFilter:[],beforeAction:function(){},afterAction:function(){},wrapActions:function(){var e=this;this.actionsToFilter.forEach(function(t){if(!e[t]||!r.isFunction(e[t]))throw"Method '"+t+"' not found!";var n=e[t];e[t]=function(){!1!==this.beforeAction.apply(this,arguments)&&(n.apply(this,arguments),this.afterAction.apply(this,arguments))}})}}),e.exports=t.default}),define("confluence-dashboard/modules/nav/nav-controller",["module","exports","configuration","./nav-definitions","../../utils/event-manager","./nav-composite-view","../../core/shared/base-controller","ajs","jquery"],function(e,t,n,o,i,r,a,s,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}var u=n.sections,d=o.DISCOVER,f=o.MY_WORK,h=i.Commands,p=c(r).default,m=c(a).default,v=c(s).default,g=c(l).default;t.default=m.extend({createDiscoverView:function(){var e=this.createDefaultNavContainer({container:u.webItems.sidebar.DISCOVER,templateHelpers:{title:v.I18n.getText("nav.controller.discover")}});e.collection.add(d);return e.on("dom:refresh",function(){g("body").animate({scrollTop:0})}),e},createMyWorkView:function(){var e=this.createDefaultNavContainer({container:u.webItems.sidebar.MY_WORK,templateHelpers:{title:v.I18n.getText("nav.controller.my.work")}});return e.collection.add(f),e},createDefaultNavContainer:function(e){var t=new p(e);return this.listenTo(t.collection,"add",this.bootstrapWebItem,this),t.collection.setContainer(e.container),t},bootstrapWebItem:function(e){h.execute("app:setupWebItem",e.toJSON())}}),e.exports=t.default}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-collection",["module","exports","../../core/shared/base-collection","backbone","configuration","ajs"],function(e,t,n,o,i,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=a(n).default,l=o.Model,c=(o.Collection,i.endpoints),u=a(r).default.contextPath(),d=l.extend({idAttribute:"key",url:function(){return c.TOGGLE_FAVOURITE_SPACE(this.get("key"))},parse:function(e){return e.url=u+e.url,e.logo=u+e.space.icon.path,e.name=e.title,e.key=e.space.key,e}}),f=s.extend({url:c.FAVOURITE_SPACES,model:d,parse:function(e){return e.results}}),h=f.extend({url:c.ALL_SPACES});t.default={FavouriteSpacesCollection:f,AllSpacesCollection:h},e.exports=t.default}),define("confluence-dashboard/core/shared/base-composite-view",["module","exports","marionette","configuration"],function(e,t,n,o){"use strict";var i=n.CompositeView;o.staticResourceUrl;t.default=i.extend({fetched:!1,collectionEvents:{sync:"onCollectionSync"},getOption:function(e){return"emptyViewOptions"===e?this.selectEmptyViewOptions():i.prototype.getOption.call(this,e)},isFiltered:function(){return!1},onCollectionSync:function(){var e=!this.fetched;this.fetched=!0,(e||0===this.collection.length)&&this._renderChildren()},getEmptyView:function(){var e=this.selectEmptyViewType(),t=this.getOption(e);if(!t)throw"Missing "+e;return t},selectEmptyViewType:function(){return this.fetched?this.isFiltered()?"noMatchesView":"emptyView":"loadingView"},selectEmptyViewOptions:function(){var e=this.selectEmptyViewType();return i.prototype.getOption.call(this,e+"Options")}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-composite-view.js",function(){}),define("confluence-dashboard/core/shared/loading-view",["module","exports","marionette","confluence-dashboard/soy-templates"],function(e,t,n,o){"use strict";var i=n.ItemView,r=function(e){return e&&e.__esModule?e:{default:e}}(o).default;t.default=i.extend({tagName:"li",className:"empty-view loading-view",getTemplate:function(){return r.Default.loading}}),e.exports=t.default}),define("confluence-dashboard/core/shared/loading-view.js",function(){}),define("confluence-dashboard/utils/analytics",["module","exports","ajs","backbone"],function(e,t,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n).default,a=i(o).default;t.default={publish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="confluence.spa."+e;t.currentSection=a.history.fragment,r.trigger("analytics",{name:n,data:t})}},e.exports=t.default}),define("confluence-dashboard/behaviors/undo-remove",["module","exports","marionette","jquery","../utils/analytics"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n.Behavior,s=r(o).default,l=r(i).default,c=s(window);t.default=a.extend({defaults:{timeToDestroy:3e3},ui:{remove:".remove",undo:".undo-remove"},events:{"click @ui.remove":"virtualRemove","click @ui.undo":"undoVirtualRemove"},modelEvents:{"change:virtuallyDeleted":"onVirtualDelete"},onVirtualDelete:function(){this.view.render()},virtualRemove:function(){var e=this;this.view.model.set("virtuallyDeleted",!0),this.timeout=setTimeout(function(){e.sendRemove()},this.options.timeToDestroy),this.bindToUnload(),l.publish(this.options.eventNamespace+".remove-favourite.clicked")},undoVirtualRemove:function(){clearTimeout(this.timeout),this.unbindFromUnload(),this.view.model.set("virtuallyDeleted",!1),l.publish(this.options.eventNamespace+".remove-favourite.undo")},bindToUnload:function(){var e=this,t=this.view.model.get("id");c.on("beforeunload.remove."+t,function(){e.sendRemove()})},unbindFromUnload:function(){var e=this.view.model.get("id");c.off("beforeunload.remove."+e)},sendRemove:function(){this.view.model.destroy(),this.unbindFromUnload()}}),e.exports=t.default}),define("confluence-dashboard/utils/conditions",["module","exports","confluence/meta","ajs"],function(e,t,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n).default,a=i(o).default;t.default={canShowDashboard:function(){var e=document.querySelector(".confluence-dashboard");return e||a.log("Simplify dashboard disabled.",{simplifyDashboardPresent:e}),e},isAnonymousUser:function(){return!r.get("remote-user")}},e.exports=t.default}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-item-view",["module","exports","marionette","../../behaviors/undo-remove","../../behaviors/tooltips","confluence-dashboard/soy-templates","../../utils/conditions"],function(e,t,n,o,i,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=n.ItemView,c=s(o).default,u=s(i).default,d=s(r).default,f=s(a).default;t.default=l.extend({template:d.NavSpaces.space,tagName:"li",className:"item",templateHelpers:function(){return{isAnonymousUser:f.isAnonymousUser()}},behaviors:{undoRemove:{behaviorClass:c,eventNamespace:"global-sidebar.spaces-menu"},tooltip:{behaviorClass:u,selector:".aui-nav-item",configs:{gravity:"w"}}}}),e.exports=t.default}),define("confluence-dashboard/core/shared/no-content-view",["module","exports","marionette","confluence-dashboard/soy-templates","../../utils/analytics","confluence/legacy","confluence/meta"],function(e,t,n,o,i,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=n.ItemView,c=s(o).default,u=s(i).default,d=s(r).default,f=s(a).default;t.default=l.extend({tagName:"li",className:"empty-view no-content-view",template:c.Default.blank,templateHelpers:function(){return{userCanCreateContent:f.getBoolean("user-can-create-content")}},events:{"click a":"onActionClick","click .create-page":"openCreatePage"},openCreatePage:function(){d.Blueprint.loadDialogAndOpenTemplate({})},onActionClick:function(){u.publish("blank-experience.action.clicked")}}),e.exports=t.default}),define("confluence-dashboard/core/shared/no-content-view.js",function(){}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-empty-view",["module","exports","confluence-dashboard/soy-templates","../../core/shared/no-content-view","ajs"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=r(n).default,s=r(o).default,l=r(i).default;t.default=s.extend({tagName:"li",template:a.NavSpaces.mySpacesBlank,className:"nav-space-blank",templateHelpers:{text:l.I18n.getText("nav.controller.my.spaces.blank"),callToActionText:l.I18n.getText("nav.controller.my.spaces.blank.callToAction"),callToActionLink:l.contextPath()+"/spacedirectory/view.action"}}),e.exports=t.default}),define("confluence-dashboard/behaviors/analytics-tracking",["module","exports","marionette","../utils/analytics","backbone","underscore"],function(e,t,n,o,i,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=n.Behavior,l=a(o).default;a(i).default,a(r).default;t.default=s.extend({defaults:{prefix:""},events:{"click a":"trackItemClick"},trackItemClick:function(){var e="item.clicked";this.options.prefix&&(e=this.options.prefix+"."+e),l.publish(e)}}),e.exports=t.default}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-composite-view",["module","exports","../../core/shared/base-composite-view","../../core/shared/loading-view","confluence-dashboard/soy-templates","./nav-spaces-item-view","./nav-spaces-empty-view","../../behaviors/analytics-tracking","../../utils/analytics"],function(e,t,n,o,i,r,a,s,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}var u=c(n).default,d=c(o).default,f=c(i).default,h=c(r).default,p=c(a).default,m=c(s).default,v=c(l).default;t.default=u.extend({template:f.Nav.container,childViewContainer:".nav-items",childView:h,emptyView:p,loadingView:d,className:"aui-navgroup-inner",behaviors:{analyticsTracking:{behaviorClass:m,prefix:"global-sidebar.spaces-menu"}},events:{"click .all-spaces-link":"onSpaceDirectoryClick"},onSpaceDirectoryClick:function(){v.publish("space-directory.clicked")}}),e.exports=t.default}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-controller",["module","exports","configuration","./nav-spaces-collection","./nav-spaces-composite-view","../../core/shared/base-controller","ajs"],function(e,t,n,o,i,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=n.sections,c=o.AllSpacesCollection,u=o.FavouriteSpacesCollection,d=s(i).default,f=s(r).default,h=s(a).default;t.default=f.extend({createAllSpacesView:function(){return new d({container:l.webItems.sidebar.MY_SPACES,collection:new c,templateHelpers:{title:h.I18n.getText("nav.controller.all.spaces"),anchorName:h.I18n.getText("nav.controller.my.spaces.anchor"),anchorLink:h.contextPath()+"/spacedirectory/view.action",anchorTitle:h.I18n.getText("sidebar.header.spaces.menu.view.all")}})},createMySpacesView:function(){var e=new d({container:l.webItems.sidebar.MY_SPACES,collection:new u,templateHelpers:{title:h.I18n.getText("nav.controller.my.spaces"),anchorName:h.I18n.getText("nav.controller.my.spaces.anchor"),anchorLink:h.contextPath()+"/spacedirectory/view.action",anchorTitle:h.I18n.getText("sidebar.header.spaces.menu.view.all")}});return e.collection.fetch(),e}}),e.exports=t.default}),define("confluence-dashboard/modules/sidebar/sidebar-view",["module","exports","marionette","ajs","../../behaviors/aui-sidebar-resizable","../../modules/nav/nav-controller","../../modules/nav-spaces/nav-spaces-controller","../../utils/conditions"],function(e,t,n,o,i,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var c=n.LayoutView,u=l(o).default,d=l(i).default,f=l(r).default,h=l(a).default,p=l(s).default;t.default=c.extend({template:!1,el:".aui-sidebar",regions:{"sidebar-discover":"#sidebar-discover","sidebar-my-work":"#sidebar-my-work","sidebar-spaces":"#sidebar-spaces"},behaviors:{AuiSidebarResizable:{behaviorClass:d}},initialize:function(){this.setNavContent(),this.trigger("sidebar-attached")},setNavContent:function(){var e=this,t=new f,n=new h;if(this.getRegion("sidebar-discover").show(t.createDiscoverView()),p.isAnonymousUser()){var o=n.createAllSpacesView();o.collection.fetch().then(function(){o.collection.length>0&&e.getRegion("sidebar-spaces").show(o)})}else this.getRegion("sidebar-my-work").show(t.createMyWorkView()),this.getRegion("sidebar-spaces").show(n.createMySpacesView())},expand:function(){u.sidebar(this.el).expand()},collapse:function(){u.sidebar(this.el).collapse()}}),e.exports=t.default}),define("confluence-dashboard/modules/welcome-message/welcome-message-view",["module","exports","marionette","jquery","../../utils/analytics"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n.ItemView,s=(r(o).default,r(i).default);t.default=a.extend({el:".welcome-message",template:!1,events:{"mouseenter a.welcome-message-edit-button":"highlightOn","mouseleave a.welcome-message-edit-button":"highlightOff","click a.welcome-message-edit-button":"onEditButtonClick"},highlightOn:function(){this.$el.addClass("welcome-message-highlight")},highlightOff:function(){this.$el.removeClass("welcome-message-highlight")},onEditButtonClick:function(){s.publish("edit-welcome-message.clicked")}}),e.exports=t.default}),define("confluence-dashboard/core/main/main-router",["module","exports","marionette","../../utils/event-manager","backbone","confluence/storage-manager","underscore","jquery","../../utils/analytics"],function(e,t,n,o,i,r,a,s,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}var u=n.AppRouter,d=o.EventManager,f=c(i).default,h=c(r).default,p=c(a).default,m=c(s).default,v=c(l).default,g=h("dashboard","route"),b=p.debounce(function(e){v.publish("view",{previousSection:e})},100);t.default=u.extend({initialize:function(){this.listenTo(f.history,"route",this.onRoute)},onRoute:function(){b(g.getItem("last"));var e=f.history.fragment;g.setItemQuietly("last",e),d.trigger("onRoute",e)},appRoutes:{"":"index"},controller:{index:function(){var e="all-updates";g.doesContain("last")&&(e=g.getItem("last")),v.publish("root-loaded",{redirectedTo:e}),f.history.navigate(e,{trigger:!0,replace:!0})}},handleClicks:function(e){var t=m(e.currentTarget).attr("href"),n=window.location.protocol+"//";if(t.slice(n.length)!==n){var o="global-sidebar.clicked.using-meta";e.ctrlKey||e.metaKey||(e.preventDefault(),f.history.fragment===t.slice(1)?f.history.loadUrl():this.navigate(t,!0),o="global-sidebar.clicked"),v.publish(o)}}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-factory",["module","exports"],function(e,t){"use strict";t.default=function(e){if(!e)throw"Missing options!";var t=e.name,n=e.scope,o=e.routes,i=e.controllerModule;if(!i)throw"Missing controller module!";if(!o)throw"Missing route definitions!";var r=require(i);if(!r)throw"Controller not found!";return new r({name:t,scope:n||"/",routes:o})},e.exports=t.default}),define("confluence-dashboard/core/main/main-controller",["module","exports","./main-router","../../utils/event-manager","backbone","../shared/base-controller","../content/content-factory"],function(e,t,n,o,i,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=s(n).default,u=o.Commands,d=s(i).default,f=s(r).default,h=s(a).default;t.default=f.extend({initialize:function(){this.router=new c,this.on("navigate",this.onNavigate,this),u.setHandler("app:setupWebItem",this.setupWebItem,this)},onNavigate:function(e){this.router.navigate(e,!0)},setupWebItem:function(e){if(!e)throw"No web item data";if(e.spa){if(!e.url)throw"Web Item missing an url";if(!e.controllerMethod)throw"Web Item missing its controller method";if(!e.controllerModule)throw"Web Item missing controller";var t=l({},e.url,e.controllerMethod);this.webItemController=h({name:e.key,scope:e.scope,routes:t,controllerModule:e.controllerModule}),e.url===d.history.fragment&&d.history.loadUrl()}}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-region-animation",["module","exports","marionette","jquery"],function(e,t,n,o){"use strict";var i=n.Region,r=function(e){return e&&e.__esModule?e:{default:e}}(o).default;r.extend(r.easing,{def:"easeOutQuad",easeOutQuad:function(e,t,n,o,i){return-o*(t/=i)*(t-2)+n}});var a={easing:"easeOutQuad",duration:200,queue:!1},s=function(){var e=r.Deferred(),t=r("#header").height(),n=document.documentElement;if((window.pageYOffset||n.scrollTop)-(n.clientTop||0)>t){var o=r.extend({},a,{complete:function(){e.resolve()}});r("html, body").animate({scrollTop:t},o)}else e.resolve();return e.promise()};t.default=i.extend({in:function(e){e.css({position:"relative",top:"15px",opacity:0}).animate({top:0,opacity:1},a)},out:function(e){var t=r.Deferred();return e.animate({opacity:0},r.extend({},a,{complete:function(){t.resolve()}})),t.promise()},show:function(){var e=this,t=this,n=arguments;this.currentView?s().then(function(){e.out(e.$el.find(e.options.selectorToAnimate)).then(function(){i.prototype.show.apply(t,n),e.in(e.$el.find(e.options.selectorToAnimate))})}):(i.prototype.show.apply(this,arguments),this.in(this.$el.find(this.options.selectorToAnimate)))}}),e.exports=t.default}),define("confluence-dashboard/core/main/main-app",["module","exports","marionette","../../utils/event-manager","../../modules/sidebar/sidebar-view","../../modules/welcome-message/welcome-message-view","./main-controller","../content/content-region-animation","underscore","jquery"],function(e,t,n,o,i,r,a,s,l,c){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}var d=n.Application,f=o.ReqRes,h=o.EventManager,p=o.Commands,m=u(i).default,v=u(r).default,g=u(a).default,b=u(s).default,w=u(l).default,y=(0,u(c).default)(window);t.default=d.extend({el:".PageContent",isStarted:!1,regions:{page:".confluence-dashboard",content:{el:".content-body",selectorToAnimate:".list-container",regionClass:b},dialogs:".dialogs","right-sidebar":".content-sidebar","welcome-message":".welcome-message-wrapper"},initialize:function(){this.controller=new g,this.router=this.controller.router,f.setHandler("app",this.getApp,this),p.setHandler("main-app:swapContent",this.swapContent,this),p.setHandler("main-app:showDialog",this.showDialog,this),y.on("scroll.window.main-layout",this.triggerWindowScroll),y.on("resize.window.main-layout",w.debounce(this.triggerWindowResize.bind(this),16))},getApp:function(){return this},onStart:function(){this.isStarted=!0,this.attachServerRenderedViews(),this.attachWelcomeMessage()},onBeforeDestroy:function(){y.off("scroll.window.main-layout"),y.off("resize.window.main-layout")},triggerWindowScroll:function(){h.trigger("window:scroll",window)},triggerWindowResize:function(){h.trigger("window:resize",window)},expandSidebar:function(){this.sidebarView&&this.sidebarView.expand()},swapContent:function(e){this.getRegion("content").show(e)},showDialog:function(e){this.getRegion("dialogs").show(e)},attachServerRenderedViews:function(){this.sidebarView=new m,this.getRegion("page").attachView(this.sidebarView)},attachWelcomeMessage:function(){this.getRegion("welcome-message").attachView(new v)}}),e.exports=t.default}),define("confluence-dashboard/utils/single-flag",["module","exports","confluence/flag","underscore","jquery"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=r(n).default,s=r(o).default,l=r(i).default,c={currentFlag:null,closePreviousFlags:function(){c.currentFlag&&(c.currentFlag.flag.close(),c.currentFlag=null)},shouldShow:function(e){if(!c.currentFlag||!c.currentFlag.flag)return!0;var t="false"===l(c.currentFlag.flag).attr("aria-hidden"),n=s.isEqual(c.currentFlag.options,e);return!t||!n},create:function(e){var t={type:"error",close:"auto",persistent:!1,stack:"dashboard"},n=s.extend(t,e);if(this.shouldShow(n)){c.closePreviousFlags();var o=a(n);c.currentFlag={flag:o,options:n},n.callback&&s.isFunction(n.callback)&&n.callback()}}};t.default=c,e.exports=t.default}),define("confluence-dashboard/utils/navigation",["module","exports","window"],function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(n).default;t.default={redirect:function(e){o.location.href=e}},e.exports=t.default}),define("confluence-dashboard/utils/error-handlers",["module","exports","backbone","jquery","ajs","./analytics","./single-flag","./navigation","configuration"],function(e,t,n,o,i,r,a,s,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}var u=c(n).default,d=c(o).default,f=c(i).default,h=c(r).default,p=c(a).default,m=c(s).default,v=l.URLS,g=d(window),b=f.contextPath(),w={NOT_FOUND:{type:"error",title:f.I18n.getText("error.notfound.title"),close:"auto"},SERVER_ERROR:{type:"error",title:f.I18n.getText("error.server-error.title"),body:f.I18n.getText("error.server-error.body"),close:"auto"},SESSION_EXPIRED:{type:"error",title:f.I18n.getText("error.session.expired.title"),body:f.I18n.getText("error.session.expired.body"),close:"never"},OFFLINE:{type:"error",title:f.I18n.getText("error.connection.lost.title"),body:f.I18n.getText("error.connection.lost.body"),close:"never"},ONLINE:{type:"success",title:f.I18n.getText("error.connection.recovered.title"),body:'<button class="aui-button aui-button-link btn-reload-content">'+f.I18n.getText("error.connection.recovered.action")+"</button>",close:"auto",callback:function(){d(p.currentFlag).on("click",".btn-reload-content",function(){p.closePreviousFlags(),u.history.loadUrl()})}}},y=function(){p.create(w.NOT_FOUND),h.publish("error-handler.not-found")},x=function(){p.create(w.SERVER_ERROR),h.publish("error-handler.server-error")},_=function(e){if(0===e.status)x();else if(/(401|403)/.test(e.status)){p.create(w.SESSION_EXPIRED),h.publish("error-handler.session.expired");var t=window.location.pathname.replace(b,"");m.redirect(v.LOGIN_PAGE+"?os_destination="+t)}},S=function(){p.create(w.OFFLINE),h.publish("error-handler.connection.lost"),g.one("online.dashboard-error-handler",function(){p.create(w.ONLINE),h.publish("error-handler.connection.recovered")})},k=u.ajax;t.default={interceptBackboneErrors:function(){u.ajax=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.statusCode=d.extend({401:_,403:_,404:y,400:x,500:x},e.statusCode||{}),u.$.ajax.call(u.$,e)}},interceptConnectionErrors:function(){g.on("offline.dashboard-error-handler",S)},stopIntercepting:function(){g.off(".dashboard-error-handler"),u.ajax=k}},e.exports=t.default}),define("confluence-dashboard/app",["module","exports","backbone","jquery","./core/main/main-app","./utils/error-handlers","./utils/analytics","configuration"],function(e,t,n,o,i,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var c=l(n).default,u=l(o).default,d=l(i).default,f=l(r).default,h=l(a).default,p=s.backboneHistoryConfig,m=new d;m.on("before:start",function(){f.interceptBackboneErrors(),f.interceptConnectionErrors(),c.history.start(p)}),m.on("start",function(){u(document).on("click",".confluence-dashboard .aui-sidebar-body .spa a",m.router.handleClicks.bind(m.router)),h.publish("rendered")}),t.default=m,e.exports=t.default}),define("confluence-dashboard/index",["./app","./utils/conditions","ajs"],function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e).default,r=o(t).default;o(n).default.toInit(function(){r.canShowDashboard()&&i.start()})}),define("confluence-dashboard/core/shared/no-matches-view",["module","exports","marionette","confluence-dashboard/soy-templates"],function(e,t,n,o){"use strict";var i=n.ItemView,r=function(e){return e&&e.__esModule?e:{default:e}}(o).default;t.default=i.extend({tagName:"li",className:"empty-view no-matches-view",template:r.Default.noMatches}),e.exports=t.default}),define("confluence-dashboard/core/shared/no-matches-view.js",function(){}),define("confluence-dashboard/core/shared/cql-base-collection",["module","exports","./base-collection","jquery","ajs","underscore"],function(e,t,n,o,i,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=a(n).default,l=a(o).default,c=a(i).default,u=a(r).default,d=c.contextPath();t.default=s.extend({url:function(){return this.buildUrlFromParams()},buildUrlFromParams:function(e){if(!this.apiParams)throw"apiParams attribute missing";var t=this.getApiParams(e),n=t.url,o=t.params,i=t.expansions,r=t.cqlcontext,a=t.cql,s=t.cqlOrder,c=[];if(!n)throw"CqlBaseCollection:buildUrlFromParams: missing URL!";return o&&c.push(l.param(o)),i&&c.push("expand="+i.join(",")),r&&c.push("cqlcontext="+encodeURI(r)),a&&(e&&e.cqlQuery&&(a+=" "+e.cqlQuery),s&&(a+=" order by "+s),c.push("cql="+a)),c.length&&(n=n+"?"+c.join("&")),n},getApiParams:function(e){return u.isFunction(this.apiParams)?this.apiParams(e):this.apiParams},parse:function(e,t){return this.parseNext(e,t),e.results},parseNext:function(e,t){e._links&&e._links.next?(this.hasNext=!0,this.nextUrl=d+e._links.next):(this.hasNext=!1,this.nextUrl=null)},loadMore:function(){if(this.hasNext)return this.safeFetch({url:this.nextUrl,remove:!1,loadingMore:!0});var e=l.Deferred();return e.reject(),e.promise()},search:function(e){var t=this.buildUrlFromParams({cqlQuery:"and title ~ '"+e.query+"*'",isFiltered:!0});return this.safeFetch({url:t,isFiltered:!0})}}),e.exports=t.default}),define("confluence-dashboard/core/shared/cql-base-collection.js",function(){}),define("confluence-dashboard/core/shared/base-collection-with-function",["module","exports","./cql-base-collection","configuration","underscore"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=r(n).default,s=o.apiLimit,l=o.visibleItemLimit,c=r(i).default;t.default=a.extend({pageOffset:0,sync:function(e,t,n){return n.loadingMore||(this.pageOffset=0),a.prototype.sync.apply(this,arguments)},parseNext:function(e,t){this.pageOffset+=e.results.length,this.hasNext=!(t&&t.isFiltered)&&e.results.length>0&&this.getPageLimit(t)>0,this.nextUrl=this.hasNext?this.buildUrlFromParams(t):null},getPageOffset:function(e){return e&&e.isFiltered?0:this.pageOffset},getPageLimit:function(e){return e&&e.isFiltered?l:c.min([s,l-this.getPageOffset(e)])}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-collection-with-function.js",function(){}),define("confluence-dashboard/core/shared/base-dialog",["module","exports","marionette","ajs"],function(e,t,n,o){"use strict";var i=n.ItemView,r=function(e){return e&&e.__esModule?e:{default:e}}(o).default;t.default=i.extend({tagName:"section",className:"aui-layer aui-dialog2 aui-dialog2-medium confluence-dialog-no-chrome confluence-dialog-centered",attributes:{"aria-hidden":!0},openDialog:function(){var e=this;this.initDialog(),this.dialog.on("show",function(){return e.delegateEvents()}),this.dialog.on("hide",function(){return e.destroy()}),this.dialog.show()},closeDialog:function(){this.dialog&&this.dialog.hide()},onRender:function(){this.initDialog()},initDialog:function(){this.dialog||(this.dialog=r.dialog2(this.el))}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-dialog.js",function(){}),define("confluence-dashboard/core/shared/scope-router",["module","exports","marionette","backbone","underscore"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n.AppRouter,s=r(o).default,l=r(i).default;s.History.prototype.route=function(e,t){var n=String(e),o=l.findWhere(this.handlers,{name:n});o?o.callback=t:this.handlers.unshift({name:n,route:e,callback:t})},t.default=a.extend({initialize:function(e){var t=this.options.scope||this.scope,n=this.options.scopedRoutes||this.scopedRoutes;if(!t)throw"Scope router requires a scope!";if(!n)throw"Scope router requires a scopedRoutes object!";if(!this.controller&&!this.options.controller)throw"Scope router requires a controller!";"/"===t?t="":t+="/";var o={};l.each(n,function(e,n){o[""+t+n]=e}),this.scope=t,this.appRoutes=o}}),e.exports=t.default}),define("confluence-dashboard/core/shared/scope-router.js",function(){}),define("confluence-dashboard/core/content/content-as-grouped-list-view",["module","exports","../shared/base-composite-view","confluence-dashboard/soy-templates","../../utils/event-manager","../../behaviors/stickable/stickable","../../behaviors/infinite-loading","../../behaviors/filterable","../../behaviors/progress-indicator","../../behaviors/analytics-tracking","../shared/no-content-view","../shared/loading-view","../shared/no-matches-view","../../modules/group/group-composite-view","../../modules/group/group-collection","../../modules/list-item/list-item-view"],function(e,t,n,o,i,r,a,s,l,c,u,d,f,h,p,m){"use strict";function v(e){return e&&e.__esModule?e:{default:e}}var g=v(n).default,b=v(o).default,w=(i.EventManager,v(r).default),y=v(a).default,x=v(s).default,_=v(l).default,S=v(c).default,k=v(u).default,E=v(d).default,T=v(f).default,M=v(h).default,C=v(p).default,D=v(m).default;t.default=g.extend({template:b.Content.groupedListWithFilter,childViewContainer:".list-container",childView:M,childViewOptions:{childView:D},emptyView:k,loadingView:E,noMatchesView:T,noMatchesViewOptions:{templateHelpers:function(){return{filter:this._parent.getFilterString()}}},ui:{filter:"[name=filter]"},behaviors:{stickMainHeader:{behaviorClass:w,element:".content-header",autoRun:!0},infiniteLoading:{behaviorClass:y,target:".list-container"},progressIndicator:{behaviorClass:_,dataSource:"collection",container:".spinner-container:first",size:"medium"},filterable:{behaviorClass:x},analyticsTracking:{behaviorClass:S}},events:{"submit .content-filter":"onFilterSubmit"},initialize:function(){var e=this.collection;this.collection=new C([],{collectionToGroup:e})},isFiltered:function(){return this.getFilterString().length>0},getFilterString:function(){return this.ui.filter.val()},onFilterSubmit:function(e){e.preventDefault()}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-as-grouped-list-view.js",function(){}),define("confluence-dashboard/behaviors/stickable/stickable",["module","exports","marionette","../../utils/event-manager","underscore"],function(e,t,n,o,i){"use strict";var r=n.Behavior,a=o.EventManager,s=function(e){return e&&e.__esModule?e:{default:e}}(i).default;t.default=r.extend({defaults:{offset:0,gap:0,autoRun:!1},onRender:function(){var e=this.options;if(!e.element)throw"Behavior:Stickable: Missing `element` attribute";this.$target=this.view.$el.find(e.element),this.target=this.$target[0],this.listenTo(a,"window:resize",this.onResize,this),this.listenTo(a,"window:scroll",this.stick,this),this.listenTo(a,"list:change",this.stick,this),e.autoRun&&s.defer(this.stick.bind(this)),this.view.$el.addClass("stickable")},stick:function(){var e=this.options,t=e.gap,n=e.offset,o=document.documentElement,i=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),r=this.view.$el.offset().top,a=r+this.view.$el.outerHeight(),s=i+n+t;if(s>=r&&s<=a){var l=this.target.clientWidth;this.clone||(this.clone=this.$target.clone(),this.$target.before(this.clone),this.$target.addClass("stick").css({width:l+"px"})),s>=a-this.$target.outerHeight()?this.$target.removeClass("stick").addClass("stuck"):this.$target.removeClass("stuck").addClass("stick").css({top:n+"px",width:l+"px"})}else this.removeClone()},onResize:function(){if(this.clone){var e=this.clone.width();this.$target.css({width:e+"px"})}},removeClone:function(e){this.clone&&(this.$target.removeClass("stick").removeClass("stuck"),this.$target.css({width:"100%"}),this.clone.remove(),this.clone=null)},onBeforeDestroy:function(){this.removeClone()}}),e.exports=t.default}),define("confluence-dashboard/behaviors/stickable/stickable.js",function(){}),define("confluence-dashboard/behaviors/infinite-loading",["module","exports","marionette","../utils/event-manager","jquery","underscore"],function(e,t,n,o,i,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=n.Behavior,l=o.EventManager,c=(o.Commands,a(i).default),u=a(r).default;t.default=s.extend({defaults:{offset:50},initialize:function(){this.listenToOnce(this.view,"render:collection",this.setup)},setup:function(){var e=this;this.view.collection.loadMore&&(this.$target=c(this.options.target,this.$el),this.$window=c(window),this.loading=!1,this.listenTo(l,"window:scroll",this.checkPosition,this),this.listenTo(this.view.collection,"sync",this.checkPosition),u.defer(function(){return e.checkPosition()}))},checkPosition:function(){var e=this;if(!this.loading){var t=this.$window.scrollTop()+this.$window.height(),n=this.$target.height();t>this.$target.offset().top+n-this.options.offset&&this.loadMore().then(function(){return e.checkPosition()})}},loadMore:function(){var e=this;return this.loading=!0,this.view.collection.loadMore().always(function(){e.loading=!1})}}),e.exports=t.default}),define("confluence-dashboard/behaviors/infinite-loading.js",function(){}),define("confluence-dashboard/utils/strings",["module","exports","jquery"],function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(n).default,i=/[\+\-&\|!\(\)\{}\[\]\^~\*\?\\\/:"']/g;t.default={normalizeForCQL:function(e){return o.trim(e.replace(i," "))}},e.exports=t.default}),define("confluence-dashboard/behaviors/filterable",["module","exports","marionette","../utils/event-manager","underscore","jquery","ajs","../utils/analytics","../utils/strings"],function(e,t,n,o,i,r,a,s,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}var u=n.Behavior,d=(o.EventManager,c(i).default),f=(c(r).default,c(a).default),h=c(s).default,p=l.normalizeForCQL;t.default=u.extend({ui:{filter:"[name=filter]"},events:{"input @ui.filter":"doFilter"},initialize:function(){this.view.options.collection&&this.view.options.collection.search||console.warn("Behavior:Filterable: The collection is missing or not implementing a search method"),this.doFilter=d.debounce(this.doFilter,400)},onShow:function(){var e=this;this.listenTo(this.view.collection,"sync",this.updateFilterString),this.listenTo(this.view.collection,"error",function(){return e.view.collection.reset([])})},updateFilterString:function(e){this.view.$el.find(".list-container").attr("data-filter-string",this.view.getFilterString()),this.fixAuiSidebar()},fixAuiSidebar:function(){f.sidebar(".aui-sidebar").setPosition()},doFilter:function(){var e=this.ui.filter.val();e=p(e);var t=this.view;if(e.length){if(e===this.lastQuery)return;this.lastQuery=e,t.collection.search({query:e}),h.publish("filter.submit")}else t.collection.safeFetch(),h.publish("filter.clear"),this.lastQuery=null}}),e.exports=t.default}),define("confluence-dashboard/behaviors/filterable.js",function(){}),define("confluence-dashboard/behaviors/progress-indicator",["module","exports","marionette","ajs"],function(e,t,n,o){"use strict";var i=n.Behavior,r=function(e){return e&&e.__esModule?e:{default:e}}(o).default;t.default=i.extend({defaults:{size:"small",dataSource:"collection"},dataEvents:{request:"onRequest",sync:"spinStop",error:"spinStop"},initialize:function(){if(!this.options.dataSource)throw"Behavior:ProgressIndicator: A dataSource should be defined. Use 'collection' or 'model'";this[this.options.dataSource+"Events"]=this.dataEvents},onAttach:function(){this.options.autoRun&&this.spin()},onRequest:function(e,t,n){"POST"!==n.type&&"DELETE"!==n.type&&this.spin()},spin:function(){var e=this;this.view._isShown?(this.$el.addClass("loading"),this._currentSpinDelay=setTimeout(function(){r.$(e.options.container,e.view.el).spin({size:e.options.size,zIndex:2e3})},200)):this.listenToOnce(this.view,"show",this.spin,this)},spinStop:function(){this._currentSpinDelay&&(clearTimeout(this._currentSpinDelay),this._currentSpinDelay=null),this.view._isShown||this.stopListening(this.view,"show",this.spin,this),this.options.autoRun=!1,this.$el.removeClass("loading"),r.$(this.options.container,this.view.el).spinStop()}}),e.exports=t.default}),define("confluence-dashboard/behaviors/progress-indicator.js",function(){}),define("confluence-dashboard/modules/group/group-composite-view",["module","exports","marionette","confluence-dashboard/soy-templates","../../utils/event-manager","../../behaviors/stickable/stickable"],function(e,t,n,o,i,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=n.CompositeView,l=a(o).default,c=(i.EventManager,a(r).default);t.default=s.extend({template:l.Groups.group,childViewContainer:".group-container",tagName:"li",className:"group-wrapper",behaviors:{stickSubHeaders:{behaviorClass:c,element:".sticky-header",autoRun:!0,offset:75}},initialize:function(){this.collection=this.model.get("items")},onRenderCollection:function(){this.trigger("group:rendered")}}),e.exports=t.default}),define("confluence-dashboard/modules/group/group-composite-view.js",function(){}),define("confluence-dashboard/utils/date-utils",["module","exports","underscore","ajs"],function(e,t,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){return new Date}function a(e){return new Date(e).toDateString()}var s=i(n).default,l=i(o).default,c={today:l.I18n.getText("period.today"),yesterday:l.I18n.getText("period.yesterday"),lastSevenDays:l.I18n.getText("period.lastSevenDays"),lastThirtyDays:l.I18n.getText("period.lastThirtyDays"),older:l.I18n.getText("period.older")},u={today:function(e){return a(e)===r().toDateString()},yesterday:function(e){var t=a(e),n=r();return n.setDate(n.getDate()-1),t===n.toDateString()},lastSevenDays:function(e){var t=r(),n=r().setDate(t.getDate()-7),o=new Date(e);return o>=n&&o<=t},lastThirtyDays:function(e){var t=r(),n=r().setDate(t.getDate()-30),o=new Date(e);return o>=n&&o<=t},getPeriod:function(e){var t=s.pick(u,"today","yesterday","lastSevenDays","lastThirtyDays"),n=s.find(t,function(t,n){return t(e)});return n?s.invert(t)[n]:"older"},getPeriodTitle:function(e){return c[e]},getPeriodOrder:function(e){return s.keys(c).indexOf(e)},compareTimestamps:function(e,t){return Math.max(-1,Math.min(1,e-t))},toISODate:function(e){var t=e.getDate();t=t<=9?"0"+t:t;var n=e.getMonth()+1;n=n<=9?"0"+n:n;var o=(new Date).getTimezoneOffset(),i=Math.abs(Math.floor(o/60));i=i<=9?"0"+i:i;var r=Math.abs(o%60);r=r<=9?"0"+r:r;var a=(o<0?"+":"-")+i+":"+r;return e.getFullYear()+"-"+n+"-"+t+"T00:00:00"+a}};t.default=u,e.exports=t.default}),define("confluence-dashboard/utils/date-utils.js",function(){}),define("confluence-dashboard/modules/group/group-collection",["module","exports","../../core/shared/base-collection","backbone","underscore","../../utils/date-utils"],function(e,t,n,o,i,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=a(n).default,l=(o.Model,o.Collection),c=a(i).default,u=a(r).default;t.default=s.extend({idAttribute:"periodKey",comparator:"periodOrder",methodsToProxy:["url","fetch","safeFetch","loadMore","search"],initialize:function(e,t){if(!t.collectionToGroup)throw"Grouped Collection requires a collection to group";if(!t.collectionToGroup.groupMethod)throw"The target collection should implement a groupMethod";this.collectionToGroup=t.collectionToGroup,this.proxyMethods(),this.proxyEvents()},proxyMethods:function(){var e=this;this.methodsToProxy.forEach(function(t){e[t]=function(){return e.collectionToGroup[t].apply(e.collectionToGroup,arguments)}})},proxyEvents:function(){this.listenTo(this.collectionToGroup,"request",this._request),this.listenTo(this.collectionToGroup,"sync",this._sync),this.listenTo(this.collectionToGroup,"remove",this._remove),this.listenTo(this.collectionToGroup,"add",this._add),this.listenTo(this.collectionToGroup,"error",this._error)},_request:function(e,t,n){this.trigger("request",this,t,n)},_sync:function(e,t,n){this._group(),this.trigger("sync",this,t,n)},_remove:function(e,t){var n=this.filter(function(t){return-1!==t.get("items").indexOf(e)});if(n.length){var o=n[0].get("items");o.remove(e),o.length||n[0].destroy()}},_add:function(){c.debounce(this._group,50)},_error:function(){this.trigger("error")},_group:function(){var e=this,t={},n=this.collectionToGroup.groupBy(this.collectionToGroup.groupMethod);c.each(n,function(e,n){var o=u.getPeriod(n);t[o]=t[o]||[],t[o]=t[o].concat(e)}),c.each(t,function(n,o){var i=e.findWhere({periodKey:o});i?i.get("items").set(t[o],{remove:!1}):e.add({periodKey:o,periodOrder:u.getPeriodOrder(o),title:u.getPeriodTitle(o),items:new l(t[o],{comparator:e.collectionToGroup.comparator})})})}}),e.exports=t.default}),define("confluence-dashboard/modules/group/group-collection.js",function(){}),define("confluence-dashboard/modules/list-item/list-item-view",["module","exports","marionette","../../behaviors/tooltips","confluence-dashboard/soy-templates","ajs","confluence/meta"],function(e,t,n,o,i,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var l=n.ItemView,c=s(o).default,u=s(i).default,d=s(r).default,f=s(a).default;t.default=l.extend({template:u.Lists.item,className:"item",tagName:"li",templateHelpers:function(){var e=void 0,t=this.model.get("metadata").currentuser;e=t.hasOwnProperty("lastcontributed")?t.lastcontributed.status:"current";var n=f.get("enabled-dark-features");return{isCollabEditingEnabled:void 0!==n&&-1===n.indexOf("site-wide.synchrony.disable")&&-1===n.indexOf("site-wide.shared-drafts.disable"),contentType:this.model.get("type"),pageStatus:e}},behaviors:{tooltip:{behaviorClass:c,selector:".aui-lozenge.aui-lozenge-subtle"}},events:{"click a":"onClick"},ui:{lozenge:".aui-lozenge"},onClick:function(){1===this.ui.lozenge.length&&d.trigger("analytics",{name:"confluence.drafts.referrer",data:{referrerPage:"recentlyWorkedOn",lozengeType:"unpublished"===this.ui.lozenge[0].getAttribute("data-type")?"Unpublished changes":"Draft"}})}}),e.exports=t.default}),define("confluence-dashboard/modules/list-item/list-item-view.js",function(){}),define("confluence-dashboard/utils/feature-discovery",["module","exports","confluence/legacy","confluence/storage-manager"],function(e,t,n,o){"use strict";var i=n.FeatureDiscovery,r=(0,function(e){return e&&e.__esModule?e:{default:e}}(o).default)("dashboard","feature-discovery");t.default={forPlugin:function(e){var t=i.forPlugin(e);return t.canShow=function(e){return!r.getItem(e)&&!t.listDiscovered().some(function(t){return t===e})},t.markDiscoveredSafe=function(e,n){r.setItemQuietly(e,!0,86400),t.markDiscovered(e,n)},t}},e.exports=t.default}),define("confluence-dashboard/modules/list-item/list-item-discovery-view",["module","exports","./list-item-view","configuration","../../utils/feature-discovery","jquery"],function(e,t,n,o,i,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=a(n).default,l=o.pluginKey,c=a(i).default,u=a(r).default,d=(document.referrer.indexOf("resumedraft.action")>-1||document.referrer.indexOf("createpage.action")>-1)&&c.forPlugin(l).canShow("recently-worked-on-drafts");t.default=s.extend({initialize:function(){this.draftDiscovery=!0===d&&this.model.collection.findWhere({status:"draft"})===this.model},templateHelpers:function(){var e=s.prototype.templateHelpers.call(this);return e.draftDiscovery=this.draftDiscovery,e},onBeforeRender:function(){!1!==this.draftDiscovery&&u(document).on("click","#draft-discovery-button",function(){c.forPlugin(l).markDiscovered("recently-worked-on-drafts"),u("#draft-discovery-dialog").remove()})},onDestroy:function(){u("#draft-discovery-dialog").remove()}}),e.exports=t.default}),define("confluence-dashboard/modules/list-item/list-item-discovery-view.js",function(){}),define("confluence-dashboard/core/content/content-as-grouped-list-discovery-view",["module","exports","./content-as-grouped-list-view","../../modules/list-item/list-item-discovery-view"],function(e,t,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n).default,a=i(o).default;t.default=r.extend({childViewOptions:{childView:a}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-as-stream-view",["module","exports","../shared/base-composite-view","confluence-dashboard/soy-templates","../../behaviors/stickable/stickable","../../behaviors/infinite-loading","../../behaviors/progress-indicator","../../behaviors/analytics-tracking","../shared/no-content-view","../shared/loading-view","../shared/no-matches-view","../../modules/stream-item/stream-item-view"],function(e,t,n,o,i,r,a,s,l,c,u,d){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}var h=f(n).default,p=f(o).default,m=f(i).default,v=f(r).default,g=f(a).default,b=f(s).default,w=f(l).default,y=f(c).default,x=f(u).default,_=f(d).default;t.default=h.extend({template:p.Content.streamList,childViewContainer:".list-container",emptyView:w,loadingView:y,noMatchesView:x,childView:_,behaviors:{stickMainHeader:{behaviorClass:m,element:".content-header",autoRun:!0},progressIndicator:{behaviorClass:g,dataSource:"collection",container:".spinner-container:first",size:"medium"},infiniteLoading:{behaviorClass:v,target:".list-container"},analyticsTracking:{behaviorClass:b}}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-as-stream-view.js",function(){}),define("confluence-dashboard/core/content/content-controller",["module","exports","../../utils/event-manager","../shared/scope-router","../shared/base-controller"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n.Commands,s=r(o).default,l=r(i).default;t.default=l.extend({beforeAction:function(){},afterAction:function(){a.execute("main-app:swapContent",this.view)},initialize:function(e){if(!e||!e.routes)throw"ContentController is missing its route";this.wrapActions(),this.router=new s({scopedRoutes:e.routes,scope:e.scope||"/",controller:this})}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-controller.js",function(){}),define("confluence-dashboard/behaviors/list-item-animated",["module","exports","marionette","../utils/event-manager","jquery"],function(e,t,n,o,i){"use strict";var r=n.View,a=n.Behavior,s=o.EventManager,l=function(e){return e&&e.__esModule?e:{default:e}}(i).default;t.default=a.extend({initialize:function(){this.overrideViewDestroyMethod()},onRender:function(){this.$el.addClass("animated show")},overrideViewDestroyMethod:function(){var e=this;this.view.destroy=function(){var t=this,n=arguments;if(this.isDestroyed)return this;var o=r.prototype.destroy;e.onBeforeDestroyWithAnimation().then(function(){return o.apply(t,n)}).fail(function(){return o.apply(t,n)})},this.view.destroy.bind(this.view)},onBeforeDestroyWithAnimation:function(){var e=this,t=l.Deferred();return this.view.$el.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t.resolve(),s.trigger("list:change",e.view)}),this.view.$el.removeClass("show").addClass("removing"),setTimeout(function(){t.isResolved||t.reject("time-out")},1e4),t.promise()}}),e.exports=t.default}),define("confluence-dashboard/behaviors/list-item-animated.js",function(){}),define("confluence-dashboard/modules/stream-item/stream-item-view",["module","exports","marionette","confluence-dashboard/soy-templates","confluence/hover-user"],function(e,t,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n.ItemView,s=r(o).default,l=r(i).default;t.default=a.extend({template:s.Stream.item,tagName:"li",className:"grouping",onDomRefresh:function(){l()}}),e.exports=t.default}),define("confluence-dashboard/modules/stream-item/stream-item-view.js",function(){}),define("confluence-dashboard/utils/ensure-component",["module","exports","jquery"],function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(n).default,i=function e(t){t.condition()?t.callback():setTimeout(function(){e(t)},t.interval)},r=function(e){return o(e).hasClass("__skate")||e.hasAttribute("resolved")};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=o.Deferred();return r(e)?n.resolve():i({interval:t,condition:function(){return r(e)},callback:function(){n.resolve()}}),n.promise()},e.exports=t.default}),define("confluence-dashboard/utils/module-starter",["module","exports","./event-manager"],function(e,t,n){"use strict";var o=n.ReqRes;t.default={register:function(e){var t=o.request("app");if(!e||"function"!=typeof e)throw"ModuleStarter.register needs a function as callback";if(!t)throw"ModuleStarter is being called before the app is available, please review your dependencies";t.isStarted?e():t.on("start",e)}},e.exports=t.default}),define("confluence-dashboard",function(){}),require(["confluence-dashboard/index"]);