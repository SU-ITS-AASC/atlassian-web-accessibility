define("confluence-quicknav/quick-nav",["ajs","jquery","confluence/api/logger"],function(j,b,k){var f=[],d,g=function(a){return function(e){a.closest("form").find(".quick-nav-drop-down").append(e)}},h=function(a){"undefined"!==typeof a?f.push(a):k.log("WARN: Attempted to add a dropdown post-process function that was undefined.")},l=function(a){b("a",a).each(function(){var a=b(this),c=a.find("span").data("properties");if((c=c?c.spaceName:null)&&!a.is(".content-type-spacedesc"))a.after(a.clone().attr("class",
"space-name").html(c)),a.parent().addClass("with-space-name")})};return{addDropDownPostProcess:h,setMakeParams:function(a){d=a},init:function(){var a=b("#quick-search-query"),e=g(a),c=b("#space-blog-quick-search-query"),i=b("#confluence-space-key");a.quicksearch("/rest/quicknav/1/search",null,{dropdownPlacement:e,dropdownPostprocess:function(a){b.each(f,function(c,b){b&&b(a)})},makeParams:function(a){return d?d(a):{query:a}},ajsDropDownOptions:{className:"quick-search-dropdown"}});h(l);c.length&&
i.length&&c.quicksearch("/rest/quicknav/1/search?type=blogpost&spaceKey="+j("i").html(i.attr("content")).text(),null,{dropdownPlacement:g(c)})}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quicknav/quick-nav","Confluence.QuickNav");