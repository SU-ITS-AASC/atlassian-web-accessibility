define("atlassian-tinymce/plugins/table/table",["ajs","tinymce","tinymce/popup","jquery","document"],function(f,d,t,p,s){function k(c,a){var d=s.forms[0].elements[c];if("undefined"===typeof a||null==a)a="",d&&(a=d.value);if(""==a)return"";a=a.replace(/&/g,"&amp;");a=a.replace(/\"/g,"&quot;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return" "+c+'="'+a+'"'}return{insertTable:function(){var c=p("#tinymce-table-form")[0],a=f.Rte.getEditor(),i=a.dom,g=2,q=2,j=d.settings.confluence_table_style,
e="",b="",l;l=i.getParent(a.selection.getNode(),"table");var m,r;m=c.elements.heading.checked;r=c.elements["equal-width-columns"].checked;g=c.elements.cols.value;q=c.elements.rows.value;c=p("#tinymce-table-form input[name='width']").val();b=b+"<table"+k("data-mce-new","1");c&&a.settings.inline_styles?(e&&(e+="; "),/^[0-9\.]+$/.test(c)&&(c+="px"),e+="width: "+c):b+=k("width",c);b+=k("class",j);b+=k("style",e);b+=">";for(j=0;j<q;j++){b+="<tr>";for(e=0;e<g;e++){var n,o;0==j&&m?(c="th",o=d.settings.confluence_table_heading_style):
(c="td",o=d.settings.confluence_table_cell_style);r&&(n=' width="'+Math.round(100*(100/g))/100+'%"');b+="<"+c+(n?n:"")+' class="'+o+'">';!d.isIE||d.isIE11?b+='<br data-mce-bogus="1"/>':d.isIE9&&(b+="&nbsp;");b+="</"+c+">"}b+="</tr>"}b+="</table>";if(a.settings.fix_table_elements){var h="";f.Rte.BookmarkManager.restoreBookmark();a.selection.setContent('<br class="_mce_marker" />');d.each("h1 h2 h3 h4 h5 h6 p".split(" "),function(a){h&&(h=h+",");h=h+(a+" ._mce_marker")});d.each(a.dom.select(h),function(b){a.dom.split(a.dom.getParent(b,
"h1,h2,h3,h4,h5,h6,p"),b)});g=i.select("br._mce_marker")[0];a.selection.select(g);a.selection.setContent(b);a.dom.remove(g)}else a.execCommand("mceInsertContent",!1,b);d.each(i.select("table[data-mce-new]"),function(b){var c=i.select(m?"th":"td",b);try{a.selection.setCursorLocation(c[0],0)}catch(d){}i.setAttrib(b,"data-mce-new","")});a.addVisual();a.execCommand("mceEndUndoLevel",!1,{},{skip_undo:!0});l&&d.DOM.hasClass(l,"confluenceTable")?f.Confluence.Analytics.publish("confluence.table.create.nested",
{pageId:f.Meta.get("page-id")}):f.Confluence.Analytics.publish("confluence.table.create",{pageId:f.Meta.get("page-id")})}}});require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/table/table",function(f){var d=require("tinymce");require("jquery").extend(d.plugins.TablePlugin.prototype,f)});