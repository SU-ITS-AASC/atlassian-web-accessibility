define("atlassian-tinymce/utils/validate",["tinymce/popup"],function(j){var i={isEmail:function(a){return this.test(a,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(a){return this.test(a,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(a){return this.test(a,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(a){return this.test(a,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(a){var b,
d;if("SELECT"===a.nodeName&&1>a.selectedIndex||"checkbox"===a.type&&!a.checked)return!0;if("radio"===a.type){d=0;for(b=a.form.elements;d<b.length;d++)if("radio"===b[d].type&&b[d].name===a.name&&b[d].checked)return!1;return!0}return/^\s*$/.test(1===a.nodeType?a.value:a)},isNumber:function(a,b){return!isNaN(1===a.nodeType?a.value:a)&&(!b||!this.test(a,"^-?[0-9]*\\.[0-9]*$"))},test:function(a,b){a=1===a.nodeType?a.value:a;return""===a||RegExp(b).test(a)}};return{validator:i,autoValidator:{settings:{id_cls:"id",
int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.settings[b]=a[b])},validate:function(a){var b,d,e=this.settings;d=this.tags(a,"label");for(b=0;b<d.length;b++)this.removeClass(d[b],e.invalid_cls),d[b].setAttribute("aria-invalid",!1);return this.validateElms(a,"input")&&this.validateElms(a,"select")&&this.validateElms(a,"textarea")},
invalidate:function(a){this.mark(a.form,a)},getErrorMessages:function(a){var b,d=this.settings,e,c,f,g=[],h=j.editor,a=this.tags(a,"label");for(b=0;b<a.length;b++)this.hasClass(a[b],d.invalid_cls)&&(e=document.getElementById(a[b].getAttribute("for")),f={field:a[b].textContent},this.hasClass(e,d.min_cls,!0)?(c=h.getLang("invalid_data_min"),f.min=this.getNum(e,d.min_cls)):c=this.hasClass(e,d.number_cls)?h.getLang("invalid_data_number"):this.hasClass(e,d.size_cls)?h.getLang("invalid_data_size"):h.getLang("invalid_data"),
c=c.replace(/{\#([^}]+)\}/g,function(a,b){return f[b]||"{#"+b+"}"}),g.push(c));return g},reset:function(a){var b=["label","input","select","textarea"],d,e,c,f=this.settings;if(null!=a)for(d=0;d<b.length;d++){c=this.tags(a.form?a.form:a,b[d]);for(e=0;e<c.length;e++)this.removeClass(c[e],f.invalid_cls),c[e].setAttribute("aria-invalid",!1)}},validateElms:function(a,b){var d,e,c,f=this.settings,g=!0,h;d=this.tags(a,b);for(e=0;e<d.length;e++){c=d[e];this.removeClass(c,f.invalid_cls);this.hasClass(c,f.required_cls)&&
i.isEmpty(c)&&(g=this.mark(a,c));this.hasClass(c,f.number_cls)&&!i.isNumber(c)&&(g=this.mark(a,c));this.hasClass(c,f.int_cls)&&!i.isNumber(c,!0)&&(g=this.mark(a,c));this.hasClass(c,f.url_cls)&&!i.isAbsUrl(c)&&(g=this.mark(a,c));this.hasClass(c,f.email_cls)&&!i.isEmail(c)&&(g=this.mark(a,c));this.hasClass(c,f.size_cls)&&!i.isSize(c)&&(g=this.mark(a,c));this.hasClass(c,f.id_cls)&&!i.isId(c)&&(g=this.mark(a,c));if(this.hasClass(c,f.min_cls,!0)&&(h=this.getNum(c,f.min_cls),isNaN(h)||parseInt(c.value)<
parseInt(h)))g=this.mark(a,c);if(this.hasClass(c,f.max_cls,!0)&&(h=this.getNum(c,f.max_cls),isNaN(h)||parseInt(c.value)>parseInt(h)))g=this.mark(a,c)}return g},hasClass:function(a,b,d){return RegExp("\\b"+b+(d?"[0-9]+":"")+"\\b","g").test(a.className)},getNum:function(a,b){b=a.className.match(RegExp("\\b"+b+"([0-9]+)\\b","g"))[0];return b=b.replace(/[^0-9]/g,"")},addClass:function(a,b,d){var e=this.removeClass(a,b);a.className=d?b+(""!==e?" "+e:""):(""!==e?e+" ":"")+b},removeClass:function(a,b){b=
a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ");return a.className=" "!==b?b:""},tags:function(a,b){return a.getElementsByTagName(b)},mark:function(a,b){var d=this.settings;this.addClass(b,d.invalid_cls);b.setAttribute("aria-invalid","true");this.markLabels(a,b,d.invalid_cls);return!1},markLabels:function(a,b,d){var e,a=this.tags(a,"label");for(e=0;e<a.length;e++)(a[e].getAttribute("for")===b.id||a[e].htmlFor===b.id)&&this.addClass(a[e],d);return null}}}});
require("confluence/module-exporter").safeRequire("atlassian-tinymce/utils/validate",function(j){window.Validator=j.validator;window.AutoValidator=j.AutoValidator});