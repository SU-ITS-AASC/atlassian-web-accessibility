define("confluence-editor/tinymce3/plugins/confluencepaste/post-paste-node-filter","jquery confluence/legacy confluence-editor/tinymce3/plugins/confluencepaste/linkify ajs document tinymce".split(" "),function(c,B,q,r,y,z){function u(a,b){for(var f=c(a).find("["+b+"]"),d="",e="",g="",h=0,k=f.length;h<k;h++){e=(d=c(f[h]))&&["/",d.attr(b)].join("");g=d&&["/",d.attr("data-mce-"+b)].join("");r.contextPath()&&e.indexOf(r.contextPath())===0&&(f[h]=d.attr(b,e));r.contextPath()&&g.indexOf(r.contextPath())===
0&&(f[h]=d.attr("data-mce-"+b,g))}return f}function m(a,b,f){var a=c(a).find("["+b+"]"),d="",e,g;if(a)for(var h=0,k=a.length;h<k;h++){e=c(a[h]);g=f.standard;for(var n in f)if(f.hasOwnProperty(n)&&e.is(n)){g=f[n];break}if(b.indexOf("style")>-1){var d=e,i=g;g=[];for(var o="",o=void 0,p=d.attr("style"),l=d.attr("data-mce-style"),j=0,m=i.length;j<m;j++)if(p&&p.toLowerCase().indexOf(i[j])>-1)g.push(i[j]+": "+d.css(i[j])+";");else if(l&&l.toLowerCase().indexOf(i[j])>-1){o=RegExp(i[j]+":.+?(?:;|$)");o=l.match(o);
g.push(o[0].indexOf(";")>-1?o:o+";")}d=g.join(" ")}else{d=e;i=b;p=[];if(g){l=0;for(j=g.length;l<j;l++)d.is("["+i+"~="+g[l]+"]")&&p.push(g[l])}d=p.join(" ")}e.removeAttr(b);d.length&&e.attr(b,d)}}function A(a,b){function f(f){var e;if(d.index){e=a.splitText(d.index);a&&b.push(a);a=e}(e=a.splitText(d[0].length))&&b.push(e);c(a).wrap("<a href='"+f+a.data+"'></a>")}var d,e,g;e=s.exec(a.data);g=t.exec(a.data);if(e){d=e;f("mailto:")}else if(g){e=(d=g)&&d[0].indexOf("://")===-1?"http://":"";f(e)}}var t;
q.init();var v=RegExp(q.RE_FULL_URL),w=RegExp(q.RE_OTHER_URL);t={exec:function(a){var b=v.exec(a);return b?b:w.exec(a)},test:function(a){return v.test(a)||w.test(a)}};var s,x=RegExp(q.RE_EMAIL_PATTERN);s={exec:function(a){if((a=x.exec(a))&&/\s/.test(a[0][0])){a[0]=a[0].replace(/\s/,"");a.index++}return a},test:function(a){return x.test(a)}};c(y).bind("postPaste",function(a,b,f){a=f.node;b={standard:["text-decoration","text-align","margin-left"],".wysiwyg-macro":["background-image"],p:["margin-left",
"text-align"],span:["color","text-decoration"],pre:["margin-left"]};b.td=b.th=["text-align"];b.li=["list-style-type","background-image"];b.col=["width"];b["table.confluenceTable.relative-table"]=["width"];m(a,"style",b);m(a,"data-mce-style",b);if(c.browser.mozilla){u(a,"src");u(a,"href")}m(a,"face",{standard:[]});m(a,"id",{standard:[]});m(a,"data-mce-href",{standard:[]});a=f.node;b=[];b.push({elements:["div"],attribute:"class",blackValue:"aui-buttons"});for(var d=0;d<b.length;d++)for(var e=b[d],g=
0;g<e.elements.length;g++)for(var h=c(a).find(e.elements[g]+"["+e.attribute+"]"),k=0;k<h.length;k++){var n=h.eq(k).attr(e.attribute),n=n.replace(e.blackValue,"");h.eq(k).attr(e.attribute,n)}var i=f.node;c.each([".contentLayout",".contentLayout2",".columnLayout",".header",".footer",".cell",".innerCell",".panelContent",".panel",".panelHeader",".Apple-converted-space","font",".jira-status",".jira-issue",".diff-html-removed",".diff-html-added",".diff-html-changed"],function(a,b){c(b,i).contents().unwrap()});
c("img",i).map(function(){c(this).attr("data-attachment-copy","");!c(this).attr("src")&&c(this).remove()});c("dl",i).map(function(){c(this).replaceWith(c("<p/>").text(c(this).text()))});c("a",i).map(function(){c(this).removeClass("confluence-userlink userLogoLink")});if(!c.browser.msie)for(a=c.makeArray(f.node.childNodes);a.length;){b=a.pop();c(b).is("a")||(b.nodeType===3?A(b,a):b.nodeType===1&&(b.childNodes&&b.nodeName.toLowerCase()!=="pre")&&(a=a.concat(c.makeArray(b.childNodes))))}if(a=c.browser.mozilla){a=
c(f.node);a=a.children("br").length&&!a.find(":not(br)").length&&!c(z.activeEditor.selection.getStart()).closest("[data-macro-body-type='PLAIN_TEXT']").length}if(a){f=c(f.node);a="<p>"+f.html().replace(/<br>/gi,"</p><p>")+"</p>";f.html(a)}});return{URL:t,EMAIL:s}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/tinymce3/plugins/confluencepaste/post-paste-node-filter","Confluence.Editor.regex");