define("confluence-editor/tinymce3/plugins/customtoolbar/table-toolbar","ajs jquery confluence/legacy tinymce document window".split(" "),function(h,c,a,d,i,r){return{initContextToolbars:function(D,g){function p(a){var b=c(this),f=c("#table-highlight-group"),e=f.attr("data-highlight-colour"),d=f.attr("data-remove-highlight");if(e){f.removeClass("highlight-"+e);f.removeAttr("data-highlight-colour")}f.removeClass("remove-highlight");d&&f.removeAttr("data-remove-highlight");if(e=b.attr("data-highlight-colour")){f.addClass("highlight-"+
e);f.attr("data-highlight-colour",e)}if(b.attr("data-remove-highlight")){f.addClass("remove-highlight");f.attr("data-remove-highlight",true)}g.focus();g.execCommand("confTableSelectionToggleHighlight",false,{alwaysHighlight:true});a.preventDefault()}function t(){var a=c("<ul/>").addClass("table-mode-list"),j=[{name:b("table.responsive"),mceCmd:"mceAutoWidth",tooltip:b("table.responsive_tooltip")},{name:b("table.fixed_width"),mceCmd:"mceFixedWidth",tooltip:b("table.fixed_width_tooltip")}];c.each(j,
function(b,e){var j=c("<li/>").addClass("dropdown-item").attr("data-tooltip",e.tooltip),g=c("<a href='#'>"+e.name+"</a>").addClass("item-link");j.on("click",function(){d.execCommand(e.mceCmd,false,"")});a.append(j.append(g))});return a}var k=require("aui/templates"),n,b=function(a){var c=g.getLang(a);(a=g.getLang(a+"_shortcut",""))&&(c=c+(" ("+a+")"));return c},o=h.storageManager("atlassian.editor","tables"),l;require("aui/inline-dialog2");l=k.buttons.button({id:"table-more-settings-trigger",text:"",
iconType:"aui",iconClass:"aui-icon-small aui-iconfont-configure",iconText:b("table.table_more_heading"),extraAttributes:{type:"button","data-aui-trigger":"true","aria-controls":"table-more-settings","data-tooltip":b("table.table_more_heading")}});var u=k.inlineDialog2.inlineDialog2({alignment:"bottom left",respondsTo:"toggle",id:"table-more-settings"}),v=k.buttons.buttons({content:l});l=function(a){function d(a){var e=c("<div></div>"),s=c("<h2>"+b("table.table_more_heading")+"</h2>");e.append(s);
a.forEach(function(a){var b=c(k.form.field({type:"checkbox",id:a.id,labelContent:a.text,isChecked:a.isChecked(),isDisabled:a.isDisabled}));b.on("change",a.onChange);e.append(b)});return e}this.render=function(){var b=c(v),e=c(u),g=e[0],h=function(){g.open=false};e.on("aui-show",function(b){c(".aui-inline-dialog-contents",b.target).html(d(a))});b.append(e);c(r).on("resize",c.debounce(h,100));c(i).on("enableContextToolbarRow.Toolbar disableContextToolbarRow.Toolbar",h);return b}};g.onNodeChange.add(function(b,
d,f){b=c("body");b=!b.hasClass("no-tools")||b.hasClass("no-tools-toolbars-visible");if(!n&&f.parentNode!=null&&f.nodeName!=="BODY"){n=true;if(c(f).closest("table:not(.wysiwyg-macro)").length){c(i).trigger("createContextToolbarRow.Toolbar",{buttons:a.Editor.tableToolbar.Buttons,topToolbar:true,animate:b}).trigger("enableContextToolbarRow.Toolbar");h.DarkFeatures.isEnabled("confluence.table.resizable")&&c.fn.updateTableModeInToolbar&&c(f).closest("table").updateTableModeInToolbar();f=c(f).closest("td,th");
b=c(".mceSelected",f.closest("table"));f.add(b).filter(function(){var a=c(this);return parseInt(a.attr("rowspan"),10)>1||parseInt(a.attr("colspan"),10)>1}).length>=1?g.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-split"):g.plugins.customtoolbar.disableToolbarButton("aui-iconfont-table-split")}else c(i).trigger("disableContextToolbarRow.Toolbar",{animate:b});n=false}});g.onUndo.add(function(a){a.nodeChanged()});g.onInit.add(function(){c(i).delegate("#table-highlight-colour .aui-dropdown a",
"click",p)});g.onRemove.add(function(){c(i).undelegate("#table-highlight-colour .aui-dropdown a","click",p)});var m=a.Editor,w=new a.Editor.Toolbar.Components.Group([new a.Editor.Toolbar.Components.Button({text:b("table.row_before_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-row-up",click:function(){d.execCommand("mceTableInsertRowBefore",false,"")}}),new a.Editor.Toolbar.Components.Button({text:b("table.row_after_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-row-down",
click:function(){d.execCommand("mceTableInsertRowAfter",false,"")}}),new a.Editor.Toolbar.Components.Button({text:b("table.delete_row_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-row-remove",click:function(){d.execCommand("mceTableDeleteRow",false,"")}})]),o=new a.Editor.Toolbar.Components.Group([new a.Editor.Toolbar.Components.Button({text:b("table.cut_row_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-cut-row",click:function(){d.execCommand("mceTableCutRow",false,"");
g.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-paste-row")}}),new a.Editor.Toolbar.Components.Button({text:b("table.copy_row_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-copy-row",click:function(){d.execCommand("mceTableCopyRow",false,"");g.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-paste-row")}}),new a.Editor.Toolbar.Components.Button({text:b("table.paste_row_before_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-paste-row",click:function(){d.execCommand("mceTablePasteRowBefore",
false,"")},disabled:!o.doesContain("copied")})]),x=new a.Editor.Toolbar.Components.Group([new a.Editor.Toolbar.Components.Button({text:b("table.col_before_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-col-left",click:function(){d.execCommand("mceTableInsertColBefore",false,"")}}),new a.Editor.Toolbar.Components.Button({text:b("table.col_after_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-col-right",click:function(){d.execCommand("mceTableInsertColAfter",false,"")}}),
new a.Editor.Toolbar.Components.Button({text:b("table.delete_col_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-col-remove",click:function(){d.execCommand("mceTableDeleteCol",false,"")}})]),y=new a.Editor.Toolbar.Components.Group([new a.Editor.Toolbar.Components.Button({text:b("table.merge_cells_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-merge",click:function(){d.execCommand("mceTableMergeCells",false,"")}}),new a.Editor.Toolbar.Components.Button({text:b("table.split_cells_desc"),
iconClass:"aui-icon aui-icon-small aui-iconfont-table-split",click:function(){d.execCommand("mceTableSplitCells",false,"")}})]),z=new a.Editor.Toolbar.Components.Group([new a.Editor.Toolbar.Components.Button({text:b("table.row_highlight"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-header-row",click:function(){d.execCommand("confTableRowToggleHeading",false);d.execCommand("mceTableUpdateNumberingCol",false)}}),new a.Editor.Toolbar.Components.Button({text:b("table.col_highlight"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-header-column",
click:function(){d.execCommand("confTableColumnToggleHeading",false)}})]),A=a.Editor.Toolbar.Components.SplitGroup,B=[new a.Editor.Toolbar.Components.Button({text:b("table.selection_highlight"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-bg",click:function(){d.execCommand("confTableSelectionToggleHighlight",false)}})],q=c("<ul/>").addClass("table-highlight-picker"),C=[false,false,false,false,false,true];c.each(["grey","red","green","blue","yellow",""],function(a,b){var d=c("<li/>"),e=c("<a href='#'></a>");
C[a]?e.addClass("remove-highlight").attr("data-remove-highlight",true):e.addClass("highlight-"+b).attr("data-highlight-colour",b);d.append(e);q.append(d)});m.tableToolbar={Buttons:[w,o,x,y,z,new A(B,{id:"table-highlight-group",dropDownOptions:{id:"table-highlight-colour",dropDownContent:q,alignment:"right"},postProcess:function(a){a.attr("data-highlight-colour","grey");a.addClass("highlight-grey");var b=c("<span>&nbsp;</span>");b.addClass("highlight-indicator");a.find(".icon.aui-iconfont-table-bg").after(b)}}),
new a.Editor.Toolbar.Components.Group([new a.Editor.Toolbar.Components.Button({text:b("table.del"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-remove",click:function(){d.execCommand("mceTableDelete",false,"")}})])],Events:[]};h.DarkFeatures.isEnabled("confluence.table.resizable")&&a.Editor.tableToolbar.Buttons.splice(0,0,new a.Editor.Toolbar.Components.Group([new a.Editor.Toolbar.Components.DropDownButton({id:"table-mode-picker",text:b("table.auto_width"),dropDownContent:t()})]));h.DarkFeatures.isEnabled("confluence-table-enhancements.copy-cut-paste-cols.disabled")||
a.Editor.tableToolbar.Buttons.splice(3,0,new a.Editor.Toolbar.Components.Group([new a.Editor.Toolbar.Components.Button({text:b("table.col_cut_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-cut-column",click:function(){d.execCommand("mceTableCutCol",false,"")}}),new a.Editor.Toolbar.Components.Button({text:b("table.col_copy_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-table-copy-column",click:function(){d.execCommand("mceTableCopyCol",false,"")}}),new a.Editor.Toolbar.Components.Button({text:b("table.col_paste_desc"),
iconClass:"aui-icon aui-icon-small aui-iconfont-table-paste-column",click:function(){d.execCommand("mceTablePasteColBefore",false,"")}})]));if(!h.DarkFeatures.isEnabled("confluence-table-enhancements.auto-row.disabled")){m=[];h.DarkFeatures.isEnabled("confluence-table-enhancements.auto-row.disabled")||m.push({text:b("table.numbering_column_desc"),id:"insert-numbering-column",isChecked:function(){return c(g.selection.getNode()).closest("table").find(".numberingColumn").length>0},onChange:function(){d.execCommand("mceTableInsertNumberingCol",
false,"")}});a.Editor.tableToolbar.Buttons.push(new l(m))}}}});require("confluence/module-exporter").safeRequire("confluence-editor/tinymce3/plugins/customtoolbar/table-toolbar",function(h){var c=require("jquery"),a=require("document");c(a).bind("initContextToolbars.Toolbar",h.initContextToolbars)});