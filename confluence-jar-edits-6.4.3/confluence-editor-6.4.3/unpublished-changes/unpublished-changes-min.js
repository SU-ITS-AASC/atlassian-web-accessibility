define("confluence-editor/unpublished-changes/unpublished-changes",["jquery","confluence/legacy","ajs","underscore","tinymce"],function(e,n,t,i,o){"use strict";return{init:function(o){var a=e(n.Templates.UnpublishedChanges.lozenge({tooltip:t.I18n.getText("editor.unpublished.changes.lozenge.tooltip"),label:t.I18n.getText("editor.unpublished.changes.lozenge.label")})),s=function(t){var o=!i.isBoolean(t)||t;n.Editor.UI.setButtonState(o,e("#rte-button-publish"))},u=function(n,t){var o=t||function(){},s="visible";!i.isBoolean(n)||n?a.addClass(s).fadeIn("fast",o):a.fadeOut("fast",function(){e(this).hide().removeClass(s),o()})},l=function(){a.hasClass("visible")||u(!0,s)},d=function(){u(!1),s(!1)};t.bind("rte-ready",function(){var n=e("#content-title-div");d(),a.insertBefore(n),a.tooltip(),e("#content-title").on("keydown change",l),o.onChange.add(l),o.onKeyDown.add(l),o.onLoad.add(function(){e(o.startContent).text().trim()&&t.Meta.get("draft-id")>0&&l()}),a.on("mouseenter.tipsy",function(){t.trigger("analytics",{name:"confluence.editor.unpublished-changes.lozenge.hover"})}),o.addCommand("mceConf.UnpublishedChangesLozenge.show",l),o.addCommand("mceConf.UnpublishedChangesLozenge.hide",d)})},getInfo:function(){return{longname:"Unpublished Changes",author:"Atlassian",authorurl:"http://www.atlassian.com",version:o.majorVersion+"."+o.minorVersion}}}}),require("confluence/module-exporter").safeRequire("confluence-editor/unpublished-changes/unpublished-changes",function(e){var n=require("tinymce");n.create("tinymce.plugins.UnpublishedChanges",e),n.PluginManager.add("unpublishedchanges",n.plugins.UnpublishedChanges)});