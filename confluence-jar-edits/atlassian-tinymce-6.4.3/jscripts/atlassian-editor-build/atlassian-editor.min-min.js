!function(d){var k=/^\s*|\s*$/g,j="$1"==="B".replace(/A(.)|B/,"$1"),h={majorVersion:"3",minorVersion:"4.9-atlassian-11",releaseDate:"2012-03-06",_init:function(){function b(a){var i=/editor/.test(a);return a&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a)||i?(/_(src|dev)\.js/g.test(a)&&(m.suffix="_src"),-1!=(c=a.indexOf("?"))&&(m.query=a.substring(c+1)),i?m.baseURL=a.substring(0,a.indexOf("/download/")):m.baseURL=a.substring(0,a.lastIndexOf("/")),g&&-1==m.baseURL.indexOf("://")&&
0!==m.baseURL.indexOf("/")&&(m.baseURL=g+m.baseURL),i&&(m.baseURL+="/download/resources/com.atlassian.plugins.editor/tinymcesource"),m.baseURL):null}var a,e,f,g,c,i,m=this;f=document;a=navigator;e=a.userAgent;if(m.isOpera=d.opera&&opera.buildNumber,m.isWebKit=/WebKit/.test(e),m.isChrome=m.isWebKit&&/Chrome/.test(e),m.isIE11=!(-1==e.indexOf("Trident/")||-1==e.indexOf("rv:")&&-1==a.appName.indexOf("Netscape")),m.isIE=!m.isWebKit&&!m.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(a.appName),m.isIE=m.isIE&&
/MSIE (\w+)\./.exec(e)[1],m.isIE=m.isIE||m.isIE11,m.isIE6=m.isIE&&/MSIE [56]/.test(e),m.isIE7=m.isIE&&/MSIE [7]/.test(e),m.isIE8=m.isIE&&/MSIE [8]/.test(e),m.isIE9=m.isIE&&/MSIE [9]/.test(e),m.isIE10=m.isIE&&/MSIE \d\d/.test(e),m.isIE10up=m.isIE&&/MSIE \d\d/.test(e)||m.isIE11,m.isGecko=!m.isWebKit&&!m.isIE11&&/Gecko/.test(e),m.isMac=-1!=e.indexOf("Mac"),m.isAir=/adobeair/i.test(e),m.isIDevice=/(iPad|iPhone)/.test(e),m.isIOS5=m.isIDevice&&534<=e.match(/AppleWebKit\/(\d*)/)[1],d.tinyMCEPreInit)return m.suffix=
tinyMCEPreInit.suffix,m.baseURL=tinyMCEPreInit.base,void(m.query=tinyMCEPreInit.query);m.suffix="";e=f.getElementsByTagName("base");for(a=0;a<e.length;a++)(i=e[a].href)&&(/^https?:\/\/[^\/]+$/.test(i)&&(i+="/"),g=i?i.match(/.*\//)[0]:"");g||(i=document.location,g=i.protocol+"//"+i.hostname+(i.port?":"+i.port:""));if(i=AJS.Meta.get("rte.src.url"))b(i);else{e=f.getElementsByTagName("script");for(a=0;a<e.length;a++)if(b(e[a].src))return;if(f=f.getElementsByTagName("head")[0]){e=f.getElementsByTagName("script");
for(a=0;a<e.length&&!b(e[a].src);a++);}}},is:function(b,a){return a?!!("array"==a&&b.hasOwnProperty&&b instanceof Array)||typeof b==a:void 0!==b},makeMap:function(b,a,e){b=b||[];"string"==typeof b&&(b=b.split(a||","));e=e||{};for(a=b.length;a--;)e[b[a]]={};return e},each:function(b,a,e){var f,g;if(!b)return 0;if(e=e||b,void 0!==b.length){f=0;for(g=b.length;f<g;f++)if(!1===a.call(e,b[f],f,b))return 0}else for(f in b)if(b.hasOwnProperty(f)&&!1===a.call(e,b[f],f,b))return 0;return 1},map:function(b,
a){var e=[];return h.each(b,function(b){e.push(a(b))}),e},grep:function(b,a){var e=[];return h.each(b,function(b){a&&!a(b)||e.push(b)}),e},inArray:function(b,a){var e,f;if(b){e=0;for(f=b.length;e<f;e++)if(b[e]===a)return e}return-1},extend:function(b,a){var e,f,g=arguments;e=1;for(f=g.length;e<f;e++)a=g[e],h.each(a,function(c,a){void 0!==c&&(b[a]=c)});return b},trim:function(b){return(b?""+b:"").replace(k,"")},create:function(b,a,e){var f,g,c,i,m,d=0;if(b=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(b),
c=b[3].match(/(^|\.)(\w+)$/i)[2],g=this.createNS(b[3].replace(/\.\w+$/,""),e),!g[c]){if("static"==b[2])return g[c]=a,void(this.onCreate&&this.onCreate(b[2],b[3],g[c]));a[c]||(a[c]=function(){},d=1);g[c]=a[c];this.extend(g[c].prototype,a);b[5]&&(f=this.resolve(b[5]).prototype,i=b[5].match(/\.(\w+)$/i)[1],m=g[c],d?g[c]=function(){return f[i].apply(this,arguments)}:g[c]=function(){return this.parent=f[i],m.apply(this,arguments)},g[c].prototype[c]=g[c],this.each(f,function(a,i){g[c].prototype[i]=f[i]}),
this.each(a,function(a,i){f[i]?g[c].prototype[i]=function(){return this.parent=f[i],a.apply(this,arguments)}:i!=c&&(g[c].prototype[i]=a)}));this.each(a["static"],function(a,i){g[c][i]=a});this.onCreate&&this.onCreate(b[2],b[3],g[c].prototype)}},walk:function(b,a,e,f){f=f||this;b&&(e&&(b=b[e]),h.each(b,function(b,c){return!1!==a.call(f,b,c,e)&&void h.walk(b,a,e,f)}))},createNS:function(b,a){var e,f,a=a||d,b=b.split(".");for(e=0;e<b.length;e++)f=b[e],a[f]||(a[f]={}),a=a[f];return a},resolve:function(b,
a){var e,f,a=a||d,b=b.split(".");e=0;for(f=b.length;e<f&&(a=a[b[e]],a);e++);return a},addUnload:function(b,a){function e(){var c,a,m=g.unloads;if(m){for(a in m)(c=m[a])&&c.func&&c.func.call(c.scope,1);d.detachEvent?(d.detachEvent("onbeforeunload",f),d.detachEvent("onunload",e)):d.removeEventListener&&d.removeEventListener("unload",e,!1);g.unloads=w=e=0;d.CollectGarbage&&CollectGarbage()}}function f(){function c(){a.detachEvent("onstop",c);e&&e();a=0}var a=document;"interactive"==a.readyState&&(a&&
a.attachEvent("onstop",c),d.setTimeout(function(){a&&a.detachEvent("onstop",c)},0))}var g=this;return b={func:b,scope:a||this},g.unloads?g.unloads.push(b):(d.attachEvent?(d.attachEvent("onunload",e),d.attachEvent("onbeforeunload",f)):d.addEventListener&&d.addEventListener("unload",e,!1),g.unloads=[b]),b},removeUnload:function(b){var a=this.unloads,e=null;return h.each(a,function(f,g){if(f&&f.func==b)return a.splice(g,1),e=b,!1}),e},explode:function(b,a){return b?h.map(b.split(a||","),h.trim):b},_addVer:function(b){var a;
return this.query?(a=(-1==b.indexOf("?")?"?":"&")+this.query,-1==b.indexOf("#")?b+a:b.replace("#",a+"#")):b},_replace:function(b,a,e){return j?e.replace(b,function(){var b,e=a,c=arguments;for(b=0;b<c.length-2;b++)e=void 0===c[b]?e.replace(RegExp("\\$"+b,"g"),""):e.replace(RegExp("\\$"+b,"g"),c[b]);return e}):e.replace(b,a)}};h._init();d.tinyMCE=d.tinymce=h}(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(d){this.scope=d||this;this.listeners=[]},add:function(d,k){return this.listeners.push({cb:d,scope:k||this.scope}),d},addToTop:function(d,k){return this.listeners.unshift({cb:d,scope:k||this.scope}),d},remove:function(d){var k=this.listeners,j=null;return tinymce.each(k,function(h,b){if(d==h.cb)return j=d,k.splice(b,1),!1}),j},dispatch:function(){var d,k,j,h=arguments,b=this.listeners;for(k=0;k<b.length&&(j=b[k],
d=j.cb.apply(j.scope,0<h.length?h:[j.scope]),!1!==d);k++);return d}});
(function(){var d=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(k,j){var h,b,a=this;return k=tinymce.trim(k),j=a.settings=j||{},/^([\w\-]+):([^\/]{2})/i.test(k)||/^\s*#/.test(k)?void(a.source=k):(0===k.indexOf("/")&&0!==k.indexOf("//")&&(k=(j.base_uri?j.base_uri.protocol||"http":"http")+"://mce_host"+k),/^[\w-]*:?\/\//.test(k)||(b=j.base_uri?j.base_uri.path:(new tinymce.util.URI(location.href)).directory,k=(j.base_uri&&j.base_uri.protocol||"http")+"://mce_host"+a.toAbsPath(b,k)),k=
k.replace(/@@/g,"(mce_at)"),k=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(k),d("source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),function(b,f){var g=k[f];g&&(g=g.replace(/\(mce_at\)/g,"@@"));a[b]=g}),void((h=j.base_uri)&&(a.protocol||(a.protocol=h.protocol),a.userInfo||(a.userInfo=
h.userInfo),a.port||"mce_host"!=a.host||(a.port=h.port),a.host&&"mce_host"!=a.host||(a.host=h.host),a.source="")))},setPath:function(d){d=/^(.*?)\/?(\w+)?$/.exec(d);this.path=d[0];this.directory=d[1];this.file=d[2];this.source="";this.getURI()},toRelative:function(d){var j;return"./"===d?d:(d=new tinymce.util.URI(d,{base_uri:this}),"mce_host"!=d.host&&this.host!=d.host&&d.host||this.port!=d.port||this.protocol!=d.protocol?d.getURI():(j=this.toRelPath(this.path,d.path),d.query&&(j+="?"+d.query),d.anchor&&
(j+="#"+d.anchor),j))},toAbsolute:function(d,j){d=new tinymce.util.URI(d,{base_uri:this});return d.getURI(this.host==d.host&&this.protocol==d.protocol?j:0)},toRelPath:function(d,j){var h,b,a,e=0,f="";if(d=d.substring(0,d.lastIndexOf("/")),d=d.split("/"),h=j.split("/"),d.length>=h.length){b=0;for(a=d.length;b<a;b++)if(b>=h.length||d[b]!=h[b]){e=b+1;break}}if(d.length<h.length){b=0;for(a=h.length;b<a;b++)if(b>=d.length||d[b]!=h[b]){e=b+1;break}}if(1==e)return j;b=0;for(a=d.length-(e-1);b<a;b++)f+="../";
b=e-1;for(a=h.length;b<a;b++)f+=b!=e-1?"/"+h[b]:h[b];return f},toAbsPath:function(k,j){var h,b,a,e=0,f=[];b=/\/$/.test(j)?"/":"";k=k.split("/");j=j.split("/");d(k,function(a){a&&f.push(a)});k=f;h=j.length-1;for(f=[];0<=h;h--)0!=j[h].length&&"."!=j[h]&&(".."!=j[h]?0<e?e--:f.push(j[h]):e++);return h=k.length-e,a=0>=h?f.reverse().join("/"):k.slice(0,h).join("/")+"/"+f.reverse().join("/"),0!==a.indexOf("/")&&(a="/"+a),b&&a.lastIndexOf("/")!==a.length-1&&(a+=b),a},getURI:function(d){var j;return this.source&&
!d||(j="",d||(this.protocol&&(j+=this.protocol+"://"),this.userInfo&&(j+=this.userInfo+"@"),this.host&&(j+=this.host),this.port&&(j+=":"+this.port)),this.path&&(j+=this.path),this.query&&(j+="?"+this.query),this.anchor&&(j+="#"+this.anchor),this.source=j),this.source}})})();
(function(){var d=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(k){var j,k=this.get(k);return k&&d(k.split("&"),function(d){d=d.split("=");j=j||{};j[unescape(d[0])]=unescape(d[1])}),j},setHash:function(k,j,h,b,a,e){var f="";d(j,function(a,c){f+=(f?"&":"")+escape(c)+"="+escape(a)});this.set(k,f,h,b,a,e)},get:function(d){var j,h,b=document.cookie,d=d+"=";if(b){if(h=b.indexOf("; "+d),-1==h){if(h=b.indexOf(d),0!=h)return null}else h+=2;return j=b.indexOf(";",h),-1==j&&(j=
b.length),unescape(b.substring(h+d.length,j))}},set:function(d,j,h,b,a,e){document.cookie=d+"="+escape(j)+(h?"; expires="+h.toGMTString():"")+(b?"; path="+escape(b):"")+(a?"; domain="+a:"")+(e?"; secure":"")},remove:function(d,j){var h=new Date;h.setTime(h.getTime()-1E3);this.set(d,"",h,j,h)}})})();
(function(){function d(k,j){var h,b,a;if(j=j||'"',null==k)return"null";if(a=typeof k,"string"==a)return b="\bb\tt\nn\ff\rr\"\"''\\\\",j+k.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,f){return'"'===j&&"'"===a?a:(h=b.indexOf(f),h+1?"\\"+b.charAt(h+1):(a=f.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+j;if("object"==a){if(k.hasOwnProperty&&k instanceof Array){h=0;for(b="[";h<k.length;h++)b+=(0<h?",":"")+d(k[h],j);return b+"]"}b="{";for(h in k)k.hasOwnProperty(h)&&(b+="function"!=
typeof k[h]?(1<b.length?","+j:j)+h+j+":"+d(k[h],j):"");return b+"}"}return""+k}tinymce.util.JSON={serialize:d,parse:function(d){try{return eval("("+d+")")}catch(j){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(d){function k(a){h=0;try{h=new ActiveXObject(a)}catch(b){}return h}function j(){!d.async||4==h.readyState||1E4<a++?(d.success&&1E4>a&&200==h.status?d.success.call(d.success_scope,""+h.responseText,h,d):d.error&&d.error.call(d.error_scope,1E4<a?"TIMED_OUT":"GENERAL",h,d),h=null):b.setTimeout(j,10)}var h,b=window,a=0;if(d.scope=d.scope||this,d.success_scope=d.success_scope||d.scope,d.error_scope=d.error_scope||d.scope,d.async=!1!==d.async,d.data=
d.data||"",h=b.XMLHttpRequest?new XMLHttpRequest:k("Microsoft.XMLHTTP")||k("Msxml2.XMLHTTP")){if(h.overrideMimeType&&h.overrideMimeType(d.content_type),h.open(d.type||(d.data?"POST":"GET"),d.url,d.async),d.content_type&&h.setRequestHeader("Content-Type",d.content_type),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.send(d.data),!d.async)return j();b.setTimeout(j,10)}}});
(function(){var d=tinymce.extend,k=tinymce.util.JSON,j=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(h){this.settings=d({},h);this.count=0},send:function(h){var b=h.error,a=h.success,h=d(this.settings,h);h.success=function(e,f){e=k.parse(e);"undefined"==typeof e&&(e={error:"JSON Parse error."});e.error?b.call(h.error_scope||h.scope,e.error,f):a.call(h.success_scope||h.scope,e.result)};h.error=function(a,f){b&&b.call(h.error_scope||h.scope,a,f)};h.data=k.serialize({id:h.id||
"c"+this.count++,method:h.method,params:h.params});h.content_type="application/json";j.send(h)},"static":{sendRPC:function(d){return(new tinymce.util.JSONRequest).send(d)}}})})();(function(d){d.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(d){return d.shiftKey||d.ctrlKey||d.altKey}}})(tinymce);
(function(d){function k(c){function a(i){var b=c.dom.create("body"),i=i.cloneContents();return b.appendChild(i),c.selection.serializer.serialize(b,{format:"html"})}c.onKeyDown.addToTop(function(b,e){var d=e.keyCode;if(d==g||d==f)if(d=b.selection.getRng(!0),!d.collapsed){var d=a(d),r=c.dom.createRng();r.selectNode(c.getBody());r=a(r);d===r&&(b.setContent("",{format:"raw"}),b.nodeChanged(),e.preventDefault())}})}function j(c){c.onKeyDown.add(function(c,a){if(a.keyCode===f&&c.selection.isCollapsed()&&
0===c.selection.getRng(!0).startOffset){var b=c.selection.getNode().previousSibling;b&&b.nodeName&&"hr"===b.nodeName.toLowerCase()&&(c.dom.remove(b),d.dom.Event.cancel(a))}})}function h(c){function a(c,i,b){var m=/^&nbsp;$|^<br>$/,b=b||i,b=b.parentNode?b.parentNode.childNodes||[]:[],e=!0,d=/TABLE|TH|TD/;return(e=!d.test(i.nodeName),e=e&&i.previousSibling?!d.test(i.previousSibling.nodeName):e,e&&i.nextSibling?!d.test(i.nextSibling.nodeName):e)&&(m.test(c)||1<b.length&&"BR"==b[0].nodeName)}function b(c){return c&&
c.innerHTML&&(c.innerHTML.replace(/\uFEFF|\u200B/g,"")||"&nbsp;")}c.onKeyDown.add(function(c,e){var r,l,p=c.selection.getNode();r=p.nextSibling;if(c.selection.isCollapsed()&&p!=c.dom.getRoot())if(e.keyCode===f)0===c.selection.getRng(!0).startOffset&&(r=p.previousSibling,l=b(r),r&&a(l,p,r)&&(c.dom.remove(r),d.dom.Event.cancel(e)));else if(e.keyCode==g&&!(l=b(p),1>=(p.parentNode?p.parentNode.childNodes||[]:[]).length||1<p.childNodes.length)&&r&&a(l,p,r))c.dom.remove(p),d.dom.Event.cancel(e),l=c.selection,
p=l.getRng(!0),c.focus(),r.focus(),p.setStart(r,0),p.setEnd(r,0),l.setRng(p)})}function b(c){c.onClick.add(function(c,a){a=a.target;/^(IMG|HR)$/.test(a.nodeName)&&c.selection.getSel().setBaseAndExtent(a,0,a,1);"A"==a.nodeName&&c.dom.hasClass(a,"mceItemAnchor")&&c.selection.select(a);c.nodeChanged()})}function b(c){c.onClick.add(function(c,a){a=a.target;/^(IMG|HR)$/.test(a.nodeName)&&c.selection.getSel().setBaseAndExtent(a,0,a,1);"A"==a.nodeName&&c.dom.hasClass(a,"mceItemAnchor")&&c.selection.select(a);
c.nodeChanged()})}function a(){document.body.setAttribute("role","application")}function a(){document.body.setAttribute("role","application")}var e=d.VK,f=e.BACKSPACE,g=e.DELETE;d.create("tinymce.util.Quirks",{Quirks:function(c){if(d.isWebKit){if(d.isChrome){var i=function(c,a){"[object Array]"===toString.call(c)?d.each(c,function(c){c?m.setAttrib(m.select(".non-editable",c),"contenteditable",a):m.setAttrib(d.DOM.select(".non-editable"),"contenteditable",a)}):m.setAttrib(m.select(".non-editable",
c),"contenteditable",a)},m=c.dom,q=c.selection;c.onKeyDown.add(function(c,a){var b,o,t,n=function(){var c=[],a=!1;return d.each(o,function(i){i?c=c.concat(m.select("span",i)):a||(c=c.concat(d.DOM.select("span")),a=!0)}),c};if(t=a.keyCode==g,(t||a.keyCode==f)&&!e.modifierPressed(a)){a.preventDefault();b=q.getRng();var r;o=(r=m.getParent(b.startContainer,m.isBlock),t?[r,m.getNext(r,m.isBlock)]:[m.getPrev(r,m.isBlock),r]);d.each(n(),function(c){c.setAttribute("data-mce-mark","1")});(b=!t&&o[1]&&AJS.EditorUtils.isCursorAtStartOf(o[1],
b)||t&&o[0]&&AJS.EditorUtils.isCursorAtEndOf(o[0],b))&&i(o[1],!0);c.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null);b&&i(o,!1);d.each(n(),function(c){c.getAttribute("data-mce-mark")?c.removeAttribute("data-mce-mark"):c.style.color?m.setAttrib(c,"style","color: "+c.style.color):m.remove(c,!0)})}})}k(c);c.dom.bind(c.getDoc(),"focusin",function(){setTimeout(function(){c&&!c.destroyed&&c.selection.setRng(c.selection.getRng())},0)});b(c);if(d.isIDevice){var o,r;c.dom.bind(c.getDoc(),"selectionchange",
function(){r&&(clearTimeout(r),r=0);r=window.setTimeout(function(){var a=c.selection.getRng();o&&d.dom.RangeUtils.compareRanges(a,o)||(c.nodeChanged(),o=a)},50)})}h(c)}d.isIE&&(j(c),k(c),a(c),c.onKeyDown.add(function(c,a){if(a.keyCode===e.ENTER&&!e.modifierPressed(a)){var i=c.selection.getNode();(c.dom.is(i,"h1,h2,h3,h4,h5,h6")||null!==c.dom.getParent(i,"h1,h2,h3,h4,h5,h6"))&&setTimeout(function(){var a=c.selection.getNode();c.dom.is(a,"p")&&(c.dom.setAttrib(a,"style",null),c.execCommand("mceCleanup"))},
0)}}),h(c));d.isGecko&&(j(c),h(c),Range.prototype.getClientRects||c.onMouseDown.add(function(c,a){if("HTML"===a.target.nodeName){var i=c.getBody();i.blur();setTimeout(function(){i.focus()},0)}}))}})})(tinymce);
(function(d){function k(c,a){var b,e,d,f={};if(c){c=c.split(",");a=a||10;for(b=0;b<c.length;b+=2)e=String.fromCharCode(parseInt(c[b],a)),h[e]||(d="&"+c[b+1]+";",f[e]=d,f[d]=e);return f}}var j,h,b,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,e=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,g=/&(#x|#)?([\w]+);/g,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",
148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};h={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};b={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};j=k("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);d.html=d.html||{};d.html.Entities={encodeRaw:function(c,b){return c.replace(b?a:e,function(c){return h[c]||c})},encodeAllRaw:function(c){return(""+c).replace(f,function(c){return h[c]||c})},encodeNumeric:function(c,b){return c.replace(b?a:e,function(c){return 1<c.length?"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";":h[c]||"&#"+c.charCodeAt(0)+";"})},encodeNamed:function(c,b,d){return d=d||j,c.replace(b?a:e,function(c){return h[c]||d[c]||c})},getEncodeFunc:function(c,b){function f(c,
i){return c.replace(i?a:e,function(c){return h[c]||b[c]||"&#"+c.charCodeAt(0)+";"||c})}function o(c,a){return g.encodeNamed(c,a,b)}var g=d.html.Entities;return b=k(b)||j,c=d.makeMap(c.replace(/\+/g,",")),c.named&&c.numeric?f:c.named?b?o:g.encodeNamed:c.numeric?g.encodeNumeric:g.encodeRaw},decode:function(a){return a.replace(g,function(a,i,e){if(i)a=(e=parseInt(e,2===i.length?16:10),65535<e?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):c[e]||String.fromCharCode(e));else{if(!(e=b[a]))if(!(e=
j[a]))var d,e=(d=document.createElement("div"),d.innerHTML=a,d.textContent||d.innerText||a);a=e}return a})}}})(tinymce);
tinymce.html.Styles=function(d,k){function j(c,a,b,e){function d(c){return c=parseInt(c).toString(16),1<c.length?c:"0"+c}return"#"+d(a)+d(b)+d(e)}var h,b,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,e=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,c={},d=d||{};b="\\\" \\' \\; \\: ; : ﻿".split(" ");for(h=0;h<b.length;h++)c[b[h]]="﻿"+h,c["﻿"+h]=b[h];return{toHex:function(c){return c.replace(a,
j)},parse:function(i){function b(c,a){var i,e,d,f;(i=t[c+"-top"+a])&&(e=t[c+"-right"+a],i==e&&(d=t[c+"-bottom"+a],e==d&&(f=t[c+"-left"+a],d==f&&(t[c+a]=f,delete t[c+"-top"+a],delete t[c+"-right"+a],delete t[c+"-bottom"+a],delete t[c+"-left"+a]))))}function q(c){var a,i=t[c];if(i&&!(0>i.indexOf(" "))){i=i.split(" ");for(a=i.length;a--;)if(i[a]!==i[0])return!1;return t[c]=i[0],!0}}function o(a){return h=!0,c[a]}function r(a,i){return h&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return c[a]})),i||(a=a.replace(/\\([\'\";:])/g,
"$1")),a}var l,p,s,h,t={},n=d.url_converter,k=d.url_converter_scope||this;if(i){for(i=i.replace(/\\[\"\';:\uFEFF]/g,o).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(c){return c.replace(/[;:]/g,o)});l=f.exec(i);)p=l[1].replace(g,"").toLowerCase(),s=l[2].replace(g,""),p&&0<s.length&&("font-weight"===p&&"700"===s?s="bold":"color"!==p&&"background-color"!==p||(s=s.toLowerCase()),s=s.replace(a,j),s=s.replace(e,function(c,a,i,b,e,d){return(e=e||d)?(e=r(e),"'"+e.replace(/\'/g,"\\'")+"'"):(a=r(a||i||b),n&&(a=
n.call(k,a,"style")),"url('"+a.replace(/\'/g,"\\'")+"')")}),t[p]=h?r(s,!0):s),f.lastIndex=l.index+l[0].length;b("border","");b("border","-width");b("border","-color");b("border","-style");b("padding","");b("margin","");q("border-width")&&q("border-style")&&q("border-color")&&(t.border=t["border-width"]+" "+t["border-style"]+" "+t["border-color"],delete t["border-width"],delete t["border-style"],delete t["border-color"]);"medium none"===t.border&&delete t.border}return t},serialize:function(c,a){function b(a){var e,
d,m,g;if(e=k.styles[a]){d=0;for(m=e.length;d<m;d++)a=e[d],g=c[a],void 0!==g&&0<g.length&&(f+=(0<f.length?" ":"")+a+": "+g+";")}}var e,d,f="";if(a&&k&&k.styles)b("*"),b(a);else for(e in c)d=c[e],void 0!==d&&0<d.length&&(f+=(0<f.length?" ":"")+e+": "+d+";");return f}}};
(function(d){function k(c,a){return c.split(a||",")}var j,h,b,a,e,f,g={},c={},i=d.makeMap,m=d.each;h="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";h=i(h,",",i(h.toUpperCase()));var q={Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",
ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",
E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},o=function(c){return c.replace(/[A-Z]+/g,function(c){return o(q[c])})},r,l={};for(r in q)q.hasOwnProperty(r)&&(q[r]=o(q[r]));g=(o("script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]").replace(/#/g,
"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(c,a,b,e){b=k(b,"|");l[a]={attributes:i(b),attributesOrder:b,children:i(e,"|",{"#comment":{}})}}),l);j=i("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls");b=i("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");a=d.extend(i("td,th,iframe,video,audio,object"),b);e=i("pre,script,style,textarea,code");f=i("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");
d.html.Schema=function(l){function o(c){var a,b,e,f,m,g,l,t,n,q,r,p,s,h,j,v,y,x,A=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,C=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,K=/[*?+]/;if(c){c=k(c);B["@"]&&(v=B["@"].attributes,y=B["@"].attributesOrder);a=0;for(b=c.length;a<b;a++)if(m=A.exec(c[a])){if(h=m[1],n=m[2],j=m[3],t=m[4],p={},s=[],g={attributes:p,attributesOrder:s},"#"===h&&(g.paddEmpty=!0),"-"===h&&(g.removeEmpty=!0),v){for(x in v)p[x]=v[x];s.push.apply(s,y)}if(t){t=k(t,"|");e=
0;for(f=t.length;e<f;e++)if(m=C.exec(t[e]))(l={},r=m[1],q=m[2].replace(/::/g,":"),h=m[3],m=m[4],"!"===r&&(g.attributesRequired=g.attributesRequired||[],g.attributesRequired.push(q),l.required=!0),"-"===r)?(delete p[q],s.splice(d.inArray(s,q),1)):(h&&("="===h&&(g.attributesDefault=g.attributesDefault||[],g.attributesDefault.push({name:q,value:m}),l.defaultValue=m),":"===h&&(g.attributesForced=g.attributesForced||[],g.attributesForced.push({name:q,value:m}),l.forcedValue=m),"<"===h&&(l.validValues=
i(m,"?"))),K.test(q)?(g.attributePatterns=g.attributePatterns||[],l.pattern=RegExp("^"+q.replace(/([?+*])/g,".$1")+"$"),g.attributePatterns.push(l)):(p[q]||s.push(q),p[q]=l))}v||"@"!=n||(v=p,y=s);j&&(g.outputName=n,B[j]=g);K.test(n)?(g.pattern=RegExp("^"+n.replace(/([?+*])/g,".$1")+"$"),u.push(g)):B[n]=g}}}function q(c){B={};u=[];o(c);m(g,function(c,a){A[a]=c.children})}function t(a){var b=/^(~)?(.+)$/;a&&m(k(a),function(a){var a=b.exec(a),i="~"===a[1],e=i?"span":"div",d=a[2];A[d]=A[e];c[d]=e;i||
(h[d]={});m(A,function(c){c[e]&&(c[d]=c[e])})})}function n(c){var a=/^([+\-]?)(\w+)\[([^\]]+)\]$/;c&&m(k(c),function(c){var b,i;(c=a.exec(c))&&(i=c[1],b=i?A[c[2]]:A[c[2]]={"#comment":{}},b=A[c[2]],m(k(c[3],"|"),function(c){"-"===i?delete b[c]:b[c]={}}))})}function r(c){var a,b=B[c];if(b)return b;for(a=u.length;a--;)if(b=u[a],b.pattern.test(c))return b}var x,C,B={},A={},u=[],l=l||{};!1===l.verify_html&&(l.valid_elements="*[*]");l.valid_styles&&(x={},m(l.valid_styles,function(c,a){x[a]=d.explode(c)}));
C=l.whitespace_elements?i(l.whitespace_elements):e;l.valid_elements?q(l.valid_elements):(m(g,function(c,a){B[a]={attributes:c.attributes,attributesOrder:c.attributesOrder};A[a]=c.children}),m(k("strong/b,em/i"),function(c){c=k(c,"/");B[c[1]].outputName=c[0]}),B.img.attributesDefault=[{name:"alt",value:""}],m(k("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(c){B[c].removeEmpty=!0}),m(k("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(c){B[c].paddEmpty=!0}));t(l.custom_elements);
n(l.valid_children);o(l.extended_valid_elements);n("+ol[ul|ol],+ul[ul|ol]");r("span")||o("span[!data-mce-type|*]");l.invalid_elements&&d.each(d.explode(l.invalid_elements),function(c){B[c]&&delete B[c]});this.children=A;this.styles=x;this.getBoolAttrs=function(){return j};this.getBlockElements=function(){return h};this.getShortEndedElements=function(){return b};this.getSelfClosingElements=function(){return f};this.getNonEmptyElements=function(){return a};this.getWhiteSpaceElements=function(){return C};
this.isValidChild=function(c,a){var b=A[c];return!(!b||!b[a])};this.getElementRule=r;this.getCustomElements=function(){return c};this.addValidElements=o;this.setValidElements=q;this.addCustomElements=t;this.addValidChildren=n};d.html.Schema.boolAttrMap=j;d.html.Schema.blockElementsMap=h})(tinymce);
(function(d){d.html.SaxParser=function(k,j){var h=this,b=function(){},k=k||{};h.schema=j=j||new d.html.Schema;!1!==k.fix_self_closing&&(k.fix_self_closing=!0);d.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(h[a]=k[a]||b)});h.parse=function(a){function b(c){var a,i;for(a=E.length;a--&&E[a].name!==c;);if(0<=a){for(i=E.length-1;i>=a;i--)c=E[i],c.valid&&D.end(c.name);E.length=a}}var f,g,c,i,m,q,o,r,l,p,s,h,t,n,y,x,C,B,A,u,z,F,G,J,H,L,I,M,N,D=this;s=0;var E=[],P=0,O=d.html.Entities.decode;
J=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g");H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;L={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};l=j.getShortEndedElements();G=j.getSelfClosingElements();p=j.getBoolAttrs();h=k.validate;
r=k.remove_internals;M=k.fix_self_closing;N=d.isIE;for(C=/^:/;f=J.exec(a);){if(s<f.index&&D.text(O(a.substr(s,f.index-s))),g=f[6])g=g.toLowerCase(),N&&C.test(g)&&(g=g.substr(1)),b(g);else if(g=f[7]){if(g=g.toLowerCase(),N&&C.test(g)&&(g=g.substr(1)),s=g in l,M&&G[g]&&0<E.length&&E[E.length-1].name===g&&b(g),!h||(t=j.getElementRule(g))){if(n=!0,h&&(B=t.attributes,A=t.attributePatterns),(x=f[8])?(o=-1!==x.indexOf("data-mce-type"),o&&r&&(n=!1),i=[],i.map={},x.replace(H,function(c,a,b,e,d){var f;if(a=
a.toLowerCase(),b=a in p?a:O(b||e||d||""),h&&!o&&0!==a.indexOf("data-")){if(f=B[a],!f&&A){for(c=A.length;c--&&(f=A[c],!f.pattern.test(a)););-1===c&&(f=null)}if(!f||f.validValues&&!(b in f.validValues))return}i.map[a]=b;i.push({name:a,value:b})})):(i=[],i.map={}),h&&!o){if(u=t.attributesRequired,z=t.attributesDefault,F=t.attributesForced)for(c=F.length;c--;)y=F[c],q=y.name,I=y.value,"{$uid}"===I&&(I="mce_"+P++),i.map[q]=I,i.push({name:q,value:I});if(z)for(c=z.length;c--;)y=z[c],q=y.name,q in i.map||
(I=y.value,"{$uid}"===I&&(I="mce_"+P++),i.map[q]=I,i.push({name:q,value:I}));if(u){for(c=u.length;c--&&!(u[c]in i.map););-1===c&&(n=!1)}i.map["data-mce-bogus"]&&(n=!1)}n&&D.start(g,i,s)}else n=!1;if(c=L[g]){c.lastIndex=s=f.index+f[0].length;(f=c.exec(a))?(n&&(m=a.substr(s,f.index-s)),s=f.index+f[0].length):(m=a.substr(s),s=a.length);n&&0<m.length&&D.text(m,!0);n&&D.end(g);J.lastIndex=s;continue}s||(x&&x.indexOf("/")==x.length-1?n&&D.end(g):E.push({name:g,valid:n}))}else(g=f[1])?D.comment(g):(g=f[2])?
D.cdata(g):(g=f[3])?D.doctype(g):(g=f[4])&&D.pi(g,f[5]);s=f.index+f[0].length}s<a.length&&D.text(O(a.substr(s)));for(c=E.length-1;0<=c;c--)g=E[c],g.valid&&D.end(g.name)}}})(tinymce);
(function(d){function k(a,b,d){var g;g=d?"lastChild":"firstChild";d=d?"prev":"next";if(a[g])return a[g];if(a!==b){if(g=a[d])return g;for(a=a.parent;a&&a!==b;a=a.parent)if(g=a[d])return g}}function j(a,b){this.name=a;this.type=b;1===b&&(this.attributes=[],this.attributes.map={})}var h=/^[ \t\r\n]*$/,b={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};d.extend(j.prototype,{replace:function(a){return a.parent&&a.remove(),this.insert(a,this),this.remove(),this},attr:function(a,
b){var d,g;if("string"!=typeof a){for(g in a)this.attr(g,a[g]);return this}if(d=this.attributes){if(void 0!==b){if(null===b){if(a in d.map){delete d.map[a];for(g=d.length;g--;)if(d[g].name===a)return d.splice(g,1),this}return this}if(a in d.map)for(g=d.length;g--;){if(d[g].name===a){d[g].value=b;break}}else d.push({name:a,value:b});return d.map[a]=b,this}return d.map[a]}},clone:function(){var a,b,d,g,c,i=new j(this.name,this.type);if(d=this.attributes){c=[];c.map={};a=0;for(b=d.length;a<b;a++)g=d[a],
"id"!==g.name&&(c[c.length]={name:g.name,value:g.value},c.map[g.name]=g.value);i.attributes=c}return i.value=this.value,i.shortEnded=this.shortEnded,i},wrap:function(a){return this.parent.insert(a,this),a.append(this),this},unwrap:function(){var a,b;for(a=this.firstChild;a;)b=a.next,this.insert(a,this,!0),a=b;this.remove()},remove:function(){var a=this.parent,b=this.next,d=this.prev;return a&&(a.firstChild===this?(a.firstChild=b,b&&(b.prev=null)):d.next=b,a.lastChild===this?(a.lastChild=d,d&&(d.next=
null)):b.prev=d,this.parent=this.next=this.prev=null),this},append:function(a){var b;return a.parent&&a.remove(),b=this.lastChild,b?(b.next=a,a.prev=b,this.lastChild=a):this.lastChild=this.firstChild=a,a.parent=this,a},insert:function(a,b,d){var g;return a.parent&&a.remove(),g=b.parent||this,d?(b===g.firstChild?g.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===g.lastChild?g.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=g,a},getAll:function(a){var b,d=[];for(b=
this.firstChild;b;b=k(b,this))b.name===a&&d.push(b);return d},empty:function(){var a,b,d;if(this.firstChild){a=[];for(d=this.firstChild;d;d=k(d,this))a.push(d);for(b=a.length;b--;)d=a[b],d.parent=d.firstChild=d.lastChild=d.next=d.prev=null}return this.firstChild=this.lastChild=null,this},isEmpty:function(a){var a=a||new d.html.Schema,b,f=this.firstChild,g=a.getNonEmptyElements(),c=a.getWhiteSpaceElements();if(f){do{if(1===f.type){if(f.attributes.map["data-mce-bogus"])continue;if(g[f.name])return!1;
for(a=f.attributes.length;a--;)if(b=f.attributes[a].name,"name"===b||0===b.indexOf("data-"))return!1}if(8===f.type||3===f.type&&(!h.test(f.value)||c[this.name]&&f.value&&0<f.value.length&&h.test(f.value)))return!1}while(f=k(f,this))}return!0},walk:function(a){return k(this,null,a)}});d.extend(j,{create:function(a,d){var f,g;if(f=new j(a,b[a]||1),d)for(g in d)f.attr(g,d[g]);return f}});d.html.Node=j})(tinymce);
(function(d){var k=d.html.Node;d.html.DomParser=function(j,h){var b=this,a={},e=[],f={},g={},j=j||{};j.validate=!("validate"in j)||j.validate;j.root_name=j.root_name||"body";b.schema=h=h||new d.html.Schema;b.filterNode=function(c){var b,d,q;d in a&&(q=f[d],q?q.push(c):f[d]=[c]);for(b=e.length;b--;)d=e[b].name,d in c.attributes.map&&(q=g[d],q?q.push(c):g[d]=[c]);return c};b.addNodeFilter=function(c,b){d.each(d.explode(c),function(c){var d=a[c];d||(a[c]=d=[]);d.push(b)})};b.addAttributeFilter=function(c,
a){d.each(d.explode(c),function(c){var b;for(b=0;b<e.length;b++)if(e[b].name===c)return void e[b].callbacks.push(a);e.push({name:c,callbacks:[a]})})};b.parse=function(c,i){function m(c,b){var i,d=new k(c,b);return c in a&&(i=f[c],i?i.push(d):f[c]=[d]),d}function q(c){for(var a,b,c=c.prev;c&&3===c.type;)a=c.value.replace(A,""),0<a.length?(c.value=a,c=c.prev):(b=c.prev,c.remove(),c=b)}var o,r,l,p,s,v,t,n,y,x,C,B,A,u,z,F,G=[],i=i||{};f={};g={};C=d.extend(d.makeMap("script,style,head,html,body,title,meta,param"),
h.getBlockElements());h.getNonEmptyElements();F=h.children;x=j.validate;p="forced_root_block"in i?i.forced_root_block:j.forced_root_block;z=h.getWhiteSpaceElements();B=/^[ \t\r\n]+/;A=/[ \t\r\n]+$/;u=/[ \t\r\n]+/g;o=new d.html.SaxParser({validate:x,fix_self_closing:!x,cdata:function(c){l.append(m("#cdata",4)).value=c},text:function(c,a){var b;z[l.name]||(c=c.replace(u," "),l.lastChild&&C[l.lastChild.name]&&(c=c.replace(B,"")));0!==c.length&&(b=m("#text",3),b.raw=!!a,l.append(b).value=c)},comment:function(c){l.append(m("#comment",
8)).value=c},pi:function(c,a){l.append(m(c,7)).value=a;q(l)},doctype:function(c){l.append(m("#doctype",10)).value=c;q(l)},start:function(c,a,b){var i,d,f;if(i=x?h.getElementRule(c):{}){i=m(i.outputName||c,1);i.attributes=a;i.shortEnded=b;l.append(i);(d=F[l.name])&&F[i.name]&&!d[i.name]&&G.push(i);for(d=e.length;d--;)f=e[d].name,f in a.map&&(y=g[f],y?y.push(i):g[f]=[i]);C[c]&&q(i);b||(l=i)}},end:function(c){var a,b,i,e;if(a=x?h.getElementRule(c):{}){if(C[c]&&!z[l.name]){for(c=l.firstChild;c&&3===c.type;)b=
c.value.replace(B,""),0<b.length?(c.value=b,c=c.next):(i=c.next,c.remove(),c=i);for(c=l.lastChild;c&&3===c.type;)b=c.value.replace(A,""),0<b.length?(c.value=b,c=c.prev):(i=c.prev,c.remove(),c=i)}if((a.removeEmpty||a.paddEmpty)&&l.isEmpty(h))if(a.paddEmpty)l.empty().append(new d.html.Node("br",1)).shortEnded=!0;else if(!l.attributes.map.name)return e=l.parent,l.empty().remove(),void(l=e);l=l.parent}}},h);r=l=new k(i.context||j.root_name,11);o.parse(c);if(x&&G.length)if(i.context)i.invalid=!0;else{var J,
H,L,I,M,N,D,E;N=d.makeMap("tr,td,th,tbody,thead,tfoot,table");h.getNonEmptyElements();for(o=0;o<G.length;o++)if(v=G[o],v.parent){H=[v];for(J=v.parent;J&&!h.isValidChild(J.name,v.name)&&!N[J.name];J=J.parent)H.push(J);if(J&&1<H.length){H.reverse();L=I=b.filterNode(H[0].clone());for(M=0;M<H.length-1;M++){h.isValidChild(I.name,H[M].name)?(t=b.filterNode(H[M].clone()),I.append(t)):t=I;for(I=H[M].firstChild;I&&I!=H[M+1];)E=I.next,t.append(I),I=E;I=t}L.isEmpty(h)?J.insert(v,H[0],!0):(J.insert(L,H[0],!0),
J.insert(v,L));J=H[0];(J.isEmpty(h)||J.firstChild===J.lastChild&&"br"===J.firstChild.name)&&J.empty().remove()}else v.parent&&("li"===v.name?(D=v.prev,D&&("ul"===D.name||"ul"===D.name))?D.append(v):(D=v.next,D&&("ul"===D.name||"ul"===D.name))?D.insert(v,D.firstChild,!0):v.wrap(b.filterNode(new k("ul",1))):h.isValidChild(v.parent.name,"div")&&h.isValidChild("div",v.name)?v.wrap(b.filterNode(new k("div",1))):"style"===v.name||"script"===v.name?v.empty().remove():v.unwrap())}}if(p&&"body"==r.name)for(t=
r.firstChild;t;)v=t.next,3==t.type||1==t.type&&"p"!==t.name&&!C[t.name]&&!t.attr("data-mce-type")?s?s.append(t):(s=m(p,1),r.insert(s,t),s.append(t)):s=null,t=v;if(!i.invalid){for(n in f){y=a[n];p=f[n];for(t=p.length;t--;)p[t].parent||p.splice(t,1);s=0;for(v=y.length;s<v;s++)y[s](p,n,i)}s=0;for(v=e.length;s<v;s++)if(y=e[s],y.name in g){p=g[y.name];for(t=p.length;t--;)p[t].parent||p.splice(t,1);t=0;for(n=y.callbacks.length;t<n;t++)y.callbacks[t](p,y.name,i)}}return r};j.remove_trailing_brs&&b.addNodeFilter("br",
function(c){var a,b,e,f,g,l=c.length,p=h.getBlockElements();h.getNonEmptyElements();p.body=1;for(a=0;a<l;a++)if(b=c[a],e=b.parent,p[b.parent.name]&&b===e.lastChild){for(f=b.prev;f;){if(g=f.name,"span"!==g||"bookmark"!==f.attr("data-mce-type")){if("br"!==g)break;if("br"===g){b=null;break}}f=f.prev}b&&(b.remove(),e.isEmpty(h)&&(elementRule=h.getElementRule(e.name),elementRule&&(elementRule.removeEmpty?e.remove():elementRule.paddEmpty&&(e.empty().append(new d.html.Node("br",1)).shortEnded=!0))))}})}})(tinymce);
tinymce.html.Writer=function(d){var k,j,h,b,a,e=[];return d=d||{},k=d.indent,j=tinymce.makeMap(d.indent_before||""),h=tinymce.makeMap(d.indent_after||""),b=tinymce.html.Entities.getEncodeFunc(d.entity_encoding||"raw",d.entities),a="html"==d.element_format,{start:function(d,g,c){var i,m,q,o;if(k&&j[d]&&0<e.length&&(o=e[e.length-1],0<o.length&&"\n"!==o&&e.push("\n")),e.push("<",d),g){i=0;for(m=g.length;i<m;i++)q=g[i],e.push(" ",q.name,'="',b(q.value,!0),'"')}!c||a?e[e.length]=">":e[e.length]=" />";
c&&k&&h[d]&&0<e.length&&(o=e[e.length-1],0<o.length&&"\n"!==o&&e.push("\n"))},end:function(a){var b;e.push("</",a,">");k&&h[a]&&0<e.length&&(b=e[e.length-1],0<b.length&&"\n"!==b&&e.push("\n"))},text:function(a,d){0<a.length&&(e[e.length]=d?a:b(a))},cdata:function(a){e.push("<![CDATA[",a,"]]\>")},comment:function(a){e.push("<\!--",a,"--\>")},pi:function(a,b){b?e.push("<?",a," ",b,"?>"):e.push("<?",a,"?>");k&&e.push("\n")},doctype:function(a){e.push("<!DOCTYPE",a,">",k?"\n":"")},reset:function(){e.length=
0},getContent:function(){return e.join("").replace(/\n$/,"")}}};
(function(d){d.html.Serializer=function(k,j){var h=new d.html.Writer(k),k=k||{};k.validate=!("validate"in k)||k.validate;this.schema=j=j||new d.html.Schema;this.writer=h;this.serialize=function(b){function a(b){var c,i,m,q,o,r,l,p,s;if(c=d[b.type])c(b);else{if(c=b.name,i=b.shortEnded,m=b.attributes,f&&m&&1<m.length){r=[];r.map={};s=j.getElementRule(b.name);l=0;for(p=s.attributesOrder.length;l<p;l++)q=s.attributesOrder[l],q in m.map&&(o=m.map[q],r.map[q]=o,r.push({name:q,value:o}));l=0;for(p=m.length;l<
p;l++)q=m[l].name,q in r.map||(o=m.map[q],r.map[q]=o,r.push({name:q,value:o}));m=r}if(h.start(b.name,m,i),!i){if(b=b.firstChild){do a(b);while(b=b.next)}h.end(c)}}}var d,f;return f=k.validate,d={3:function(a){h.text(a.value,a.raw)},8:function(a){h.comment(a.value)},7:function(a){h.pi(a.name,a.value)},10:function(a){h.doctype(a.value)},4:function(a){h.cdata(a.value)},11:function(b){if(b=b.firstChild){do a(b);while(b=b.next)}}},h.reset(),1!=b.type||k.inner?d[11](b):a(b),h.getContent()}}})(tinymce);
(function(d){var k=d.each,j=d.is,h=d.isWebKit,b=d.isIE,a=d.html.Entities,e=/^([a-z0-9],?)+$/i,f=d.html.Schema.blockElementsMap,g=/^[ \t\r\n]*$/;d.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(c,
a){var e;if(this.doc=c,this.win=window,this.files={},this.cssFlicker=!1,this.counter=0,this.stdMode=!d.isIE||8<=c.documentMode,this.boxModel=!d.isIE||"CSS1Compat"==c.compatMode||this.stdMode,this.hasOuterHTML="outerHTML"in c.createElement("a"),this.settings=a=d.extend({keep_values:!1,hex_colors:1},a),this.schema=a.schema,this.styles=new d.html.Styles({url_converter:a.url_converter,url_converter_scope:a.url_converter_scope},a.schema),d.isIE6)try{c.execCommand("BackgroundImageCache",!1,!0)}catch(f){this.cssFlicker=
!0}if(b&&a.schema)for(e in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){c.createElement(a)}),a.schema.getCustomElements())c.createElement(e);d.addUnload(this.destroy,this)},getRoot:function(){var c=this.settings;return c&&this.get(c.root_element)||this.doc.body},getViewPort:function(c){var a,b;return c=c?c:this.win,a=c.document,b=this.boxModel?a.documentElement:a.body,{x:c.pageXOffset||
b.scrollLeft,y:c.pageYOffset||b.scrollTop,w:c.innerWidth||b.clientWidth,h:c.innerHeight||b.clientHeight}},getRect:function(c){var a,b;return c=this.get(c),a=this.getPos(c),b=this.getSize(c),{x:a.x,y:a.y,w:b.w,h:b.h}},getSize:function(c){var a,b;return c=this.get(c),a=this.getStyle(c,"width"),b=this.getStyle(c,"height"),-1===a.indexOf("px")&&(a=0),-1===b.indexOf("px")&&(b=0),{w:parseInt(a)||c.offsetWidth||c.clientWidth,h:parseInt(b)||c.offsetHeight||c.clientHeight}},getParent:function(c,a,b){return this.getParents(c,
a,b,!1)},getParents:function(c,a,b,d){var e,f=this,l=f.settings,g=[],c=f.get(c),d=void 0===d;l.strict_root&&(b=b||f.getRoot());for(j(a,"string")&&(e=a,a="*"===a?function(c){return 1==c.nodeType}:function(c){return f.is(c,e)});c&&c!=b&&c.nodeType&&9!==c.nodeType;){if(!a||a(c)){if(!d)return c;g.push(c)}c=c.parentNode}return d?g:null},get:function(c){var a;return c&&this.doc&&"string"==typeof c&&(a=c,c=this.doc.getElementById(c),c&&c.id!==a)?this.doc.getElementsByName(a)[1]:c},getNext:function(c,a){return this._findSib(c,
a,"nextSibling")},getPrev:function(c,a){return this._findSib(c,a,"previousSibling")},select:function(c,a){return d.dom.Sizzle(c,this.get(a)||this.get(this.settings.root_element)||this.doc,[])},is:function(c,a){var b;if(void 0===c.length){if("*"===a)return 1==c.nodeType;if(e.test(a)){a=a.toLowerCase().split(/,/);c=c.nodeName.toLowerCase();for(b=a.length-1;0<=b;b--)if(a[b]==c)return!0;return!1}}return 0<d.dom.Sizzle.matches(a,c.nodeType?[c]:c).length},add:function(c,a,b,d,e){var f=this;return this.run(c,
function(c){var g;return g=j(a,"string")?f.doc.createElement(a):a,f.setAttribs(g,b),d&&(d.nodeType?g.appendChild(d):f.setHTML(g,d)),e?g:c.appendChild(g)})},create:function(c,a,b){return this.add(this.doc.createElement(c),c,a,b,1)},createHTML:function(c,a,b){var d,e;e="<"+c;for(d in a)a.hasOwnProperty(d)&&(e+=" "+d+'="'+this.encode(a[d])+'"');return"undefined"!=typeof b?e+">"+b+"</"+c+">":e+" />"},remove:function(c,a){return this.run(c,function(c){var b,e=c.parentNode;if(!e)return null;if(a)for(;b=
c.firstChild;)!d.isIE||3!==b.nodeType||b.nodeValue?e.insertBefore(b,c):c.removeChild(b);return e.removeChild(c)})},setStyle:function(c,a,e){var f=this;return f.run(c,function(g){var r;switch(r=g.style,a=a.replace(/-(\D)/g,function(c,a){return a.toUpperCase()}),f.pixelStyles.test(a)&&(d.is(e,"number")||/^[\-0-9\.]+$/.test(e))&&(e+="px"),a){case "opacity":b&&(r.filter=""===e?"":"alpha(opacity="+100*e+")",c.currentStyle&&c.currentStyle.hasLayout||(r.display="inline-block"));r[a]=r["-moz-opacity"]=r["-khtml-opacity"]=
e||"";break;case "float":b?r.styleFloat=e:r.cssFloat=e;break;default:r[a]=e||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(c,a,d){if(c=this.get(c)){if(this.doc.defaultView&&d){a=a.replace(/[A-Z]/g,function(c){return"-"+c});try{return this.doc.defaultView.getComputedStyle(c,null).getPropertyValue(a)}catch(e){return null}}return a=a.replace(/-(\D)/g,function(c,a){return a.toUpperCase()}),"float"==a&&(a=b?"styleFloat":"cssFloat"),c.currentStyle&&d?c.currentStyle[a]:
c.style?c.style[a]:void 0}},setStyles:function(c,a){var b,d=this,e=d.settings;b=e.update_styles;e.update_styles=0;k(a,function(a,b){d.setStyle(c,b,a)});e.update_styles=b;e.update_styles&&d.setAttrib(c,e.cssText)},removeAllAttribs:function(c){return this.run(c,function(c){var a,b=c.attributes;for(a=b.length-1;0<=a;a--)c.removeAttributeNode(b.item(a))})},setAttrib:function(c,a,b){var d=this;if(c&&a)return d.settings.strict&&(a=a.toLowerCase()),this.run(c,function(c){var e=d.settings,f=c.getAttribute(a);
if(null!==b)switch(a){case "style":if(!j(b,"string"))return void k(b,function(a,b){d.setStyle(c,b,a)});e.keep_values&&(b&&!d._isRes(b)?c.setAttribute("data-mce-style",b,2):c.removeAttribute("data-mce-style",2));c.style.cssText=b;break;case "class":c.className=b||"";break;case "src":case "href":e.keep_values&&(e.url_converter&&(b=e.url_converter.call(e.url_converter_scope||d,b,a,c)),d.setAttrib(c,"data-mce-"+a,b,2));break;case "shape":c.setAttribute("data-mce-style",b)}if(j(b)&&null!==b&&0!==b.length?
c.setAttribute(a,""+b,2):c.removeAttribute(a,2),tinyMCE.activeEditor&&f!=b)e=tinyMCE.activeEditor,e.onSetAttrib.dispatch(e,c,a,b)})},setAttribs:function(c,a){var b=this;return this.run(c,function(c){k(a,function(a,d){b.setAttrib(c,d,a)})})},getAttrib:function(c,a,e){var f;if(c=this.get(c),!c||1!==c.nodeType)return void 0!==e&&e;if(j(e)||(e=""),/^(src|href|style|coords|shape)$/.test(a)&&(f=c.getAttribute("data-mce-"+a)))return f;if(b&&this.props[a]&&(f=c[this.props[a]],f=f&&f.nodeValue?f.nodeValue:
f),f||(f=c.getAttribute(a,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(a))return!0===c[this.props[a]]&&""===f?a:f?a:"";if("FORM"===c.nodeName&&c.getAttributeNode(a))return c.getAttributeNode(a).nodeValue;if("style"===a&&(f=f||c.style.cssText,f&&(f=this.serializeStyle(this.parseStyle(f),c.nodeName),this.settings.keep_values&&!this._isRes(f)&&c.setAttribute("data-mce-style",f))),h&&"class"===a&&f&&(f=f.replace(/(apple|webkit)\-[a-z\-]+/gi,
"")),b)switch(a){case "rowspan":case "colspan":1===f&&(f="");break;case "size":"+0"!==f&&20!==f&&0!==f||(f="");break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":0===f&&(f="");break;case "hspace":-1===f&&(f="");break;case "maxlength":case "tabindex":32768!==f&&2147483647!==f&&"32768"!==f||(f="");break;case "multiple":case "compact":case "noshade":case "nowrap":return 65535===f?a:e;case "shape":f=f.toLowerCase();break;default:0===a.indexOf("on")&&f&&(f=d._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,
"$1",""+f))}return void 0!==f&&null!==f&&""!==f?""+f:e},getPos:function(c,a){var b,d=0,e=0,f=this.doc;if(c=this.get(c),a=a||f.body,c){if(c.getBoundingClientRect)return c=c.getBoundingClientRect(),b=this.boxModel?f.documentElement:f.body,d=c.left+(f.documentElement.scrollLeft||f.body.scrollLeft)-b.clientTop,e=c.top+(f.documentElement.scrollTop||f.body.scrollTop)-b.clientLeft,{x:d,y:e};for(b=c;b&&b!=a&&b.nodeType;)d+=b.offsetLeft||0,e+=b.offsetTop||0,b=b.offsetParent;for(b=c.parentNode;b&&b!=a&&b.nodeType;)d-=
b.scrollLeft||0,e-=b.scrollTop||0,b=b.parentNode}return{x:d,y:e}},parseStyle:function(c){return this.styles.parse(c)},serializeStyle:function(c,a){return this.styles.serialize(c,a)},loadCSS:function(c){var a,e=this,f=e.doc;c||(c="");a=e.select("head")[0];k(c.split(","),function(c){var g;e.files[c]||(e.files[c]=!0,g=e.create("link",{rel:"stylesheet",href:d._addVer(c)}),b&&f.documentMode&&f.recalc&&(g.onload=function(){f.recalc&&f.recalc();g.onload=null}),a.appendChild(g))})},addClass:function(c,a){return this.run(c,
function(c){var b;return a?this.hasClass(c,a)?c.className:(b=this.removeClass(c,a),c.className=(""!=b?b+" ":"")+a):0})},removeClass:function(c,a){var b,e=this;return e.run(c,function(c){var f;return e.hasClass(c,a)?(b||(b=RegExp("(^|\\s+)"+a+"(\\s+|$)","g")),f=c.className.replace(b," "),f=d.trim(" "!=f?f:""),c.className=f,f||(c.removeAttribute("class"),c.removeAttribute("className")),f):c.className})},hasClass:function(c,a){return c=this.get(c),!(!c||!a)&&-1!==(" "+c.className+" ").indexOf(" "+a+
" ")},show:function(c){return this.setStyle(c,"display","block")},hide:function(c){return this.setStyle(c,"display","none")},isHidden:function(c){return c=this.get(c),!c||"none"==c.style.display||"none"==this.getStyle(c,"display")},uniqueId:function(c){return(c?c:"mce_")+this.counter++},setHTML:function(c,a){var d=this;return d.run(c,function(c){if(b){for(;c.firstChild;)c.removeChild(c.firstChild);try{c.innerHTML="<br />"+a,c.removeChild(c.firstChild)}catch(e){c=d.create("div"),c.innerHTML="<br />"+
a,k(c.childNodes,function(a,b){b&&c.appendChild(a)})}}else c.innerHTML=a;return a})},getOuterHTML:function(c){var a;return(c=this.get(c))?1===c.nodeType&&this.hasOuterHTML?c.outerHTML:(a=(c.ownerDocument||this.doc).createElement("body"),a.appendChild(c.cloneNode(!0)),a.innerHTML):null},setOuterHTML:function(c,a,d){function e(c,a,b){b=b.createElement("body");b.innerHTML=a;for(a=b.lastChild;a;)f.insertAfter(a.cloneNode(!0),c),a=a.previousSibling;f.remove(c)}var f=this;return this.run(c,function(c){if(c=
f.get(c),1==c.nodeType)if(d=d||c.ownerDocument||f.doc,b)try{b&&1==c.nodeType?c.outerHTML=a:e(c,a,d)}catch(g){e(c,a,d)}else e(c,a,d)})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(c,a){return a=this.get(a),this.run(c,function(c){var b,d;return b=a.parentNode,d=a.nextSibling,d?b.insertBefore(c,d):b.appendChild(c),c})},isBlock:function(c){var a=c.nodeType;return a?!(1!==a||!f[c.nodeName]):!!f[c]},replace:function(c,a,b){return j(a,"array")&&(c=c.cloneNode(!0)),this.run(a,function(a){return b&&
k(d.grep(a.childNodes),function(a){c.appendChild(a)}),a.parentNode.replaceChild(c,a)})},rename:function(c,a){var b,d=this;return c.nodeName!=a.toUpperCase()&&(b=d.create(a),k(d.getAttribs(c),function(a){d.setAttrib(b,a.nodeName,d.getAttrib(c,a.nodeName))}),d.replace(b,c,1)),b||c},findCommonAncestor:function(a,b){for(var d,e=a;e;){for(d=b;d&&e!=d;)d=d.parentNode;if(e==d)break;e=e.parentNode}return!e&&a.ownerDocument?a.ownerDocument.documentElement:e},toHex:function(a){function b(a){return a=parseInt(a).toString(16),
1<a.length?a:"0"+a}var d=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return d?a="#"+b(d[1])+b(d[2])+b(d[3]):a},getClasses:function(){function a(l){k(l.imports,function(b){a(b)});k(l.cssRules||l.rules,function(l){switch(l.type||1){case 1:l.selectorText&&k(l.selectorText.split(","),function(a){a=a.replace(/^\s*|\s*$|^\s\./g,"");!/\.mce/.test(a)&&/\.[\w\-]+$/.test(a)&&(b=a,a=d._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",a),g&&!(a=g(a,b))||f[a]||(e.push({"class":a}),f[a]=
1))});break;case 3:a(l.styleSheet)}})}var b,e=[],f={},g=this.settings.class_filter;if(this.classes)return this.classes;try{k(this.doc.styleSheets,a)}catch(h){}return 0<e.length&&(this.classes=e),e},run:function(a,b,d){var e,f=this;return f.doc&&"string"==typeof a&&(a=f.get(a)),!!a&&(d=d||this,a.nodeType||!a.length&&0!==a.length?b.call(d,a):(e=[],k(a,function(a,c){a&&("string"==typeof a&&(a=f.doc.getElementById(a)),e.push(b.call(d,a,c)))}),e))},getAttribs:function(a){var d;return a=this.get(a),a?b?
(d=[],"OBJECT"==a.nodeName?a.attributes:("OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&d.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){d.push({specified:1,nodeName:a})}),d)):a.attributes:[]},isEmpty:function(a,b){var e,f,o,h,l;if(a=a.firstChild){o=new d.dom.TreeWalker(a);b=b||this.schema?this.schema.getNonEmptyElements():null;do{if(f=a.nodeType,1===f){if(a.getAttribute("data-mce-bogus"))continue;
if(h=a.nodeName.toLowerCase(),b&&b[h]){if(l=a.parentNode,"br"===h&&this.isBlock(l)&&l.firstChild===a&&l.lastChild===a)continue;return!1}this.getAttribs(a);for(e=a.attributes.length;e--;)if(h=a.attributes[e].nodeName.toLowerCase(),"name"===h||"data-mce-bookmark"===h||"contenteditable"===h&&"true"===a.attributes[e].value)return!1}if(8==f||3===f&&!g.test(a.nodeValue))return!1}while(a=o.next())}return!0},destroy:function(a){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;
a||d.removeUnload(this.destroy)},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new d.dom.Range(this)},nodeIndex:function(a,b){var d,e,f=0;if(a){d=a.nodeType;for(a=a.previousSibling;a;a=a.previousSibling)e=a.nodeType,(!b||3!=e||e!=d&&a.nodeValue.length)&&(f++,d=e)}return f},split:function(a,b,e){function f(a){var c,b=a.childNodes,e=a.nodeType;if(1!=e||"bookmark"!=a.getAttribute("data-mce-type")){for(c=b.length-1;0<=c;c--)f(b[c]);if(9!=e){if(3==e&&0<a.nodeValue.length){c=
d.trim(a.nodeValue).length;if(!(b=!p.isBlock(a.parentNode)))if(!(b=0<c)){if(c=0==c)c=a.nextSibling&&"SPAN"==a.nextSibling.nodeName,c=a.previousSibling&&"SPAN"==a.previousSibling.nodeName&&c;b=c}if(b)return}else if(1==e&&(b=a.childNodes,1==b.length&&b[0]&&1==b[0].nodeType&&"bookmark"==b[0].getAttribute("data-mce-type")&&a.parentNode.insertBefore(b[0],a),b.length||/^(br|hr|input|img)$/i.test(a.nodeName)))return;p.remove(a)}return a}}var g,h,l,p=this,s=p.createRng();if(a&&b)return s.setStart(a.parentNode,
p.nodeIndex(a)),s.setEnd(b.parentNode,p.nodeIndex(b)),g=s.extractContents(),s=p.createRng(),s.setStart(b.parentNode,p.nodeIndex(b)+1),s.setEnd(a.parentNode,p.nodeIndex(a)+1),h=s.extractContents(),l=a.parentNode,l.insertBefore(f(g),a),e?l.replaceChild(e,b):l.insertBefore(b,a),l.insertBefore(f(h),a),p.remove(a),e||b},bind:function(a,b,e,f){return this.events||(this.events=new d.dom.EventUtils),this.events.add(a,b,e,f||this)},unbind:function(a,b,e){return this.events||(this.events=new d.dom.EventUtils),
this.events.remove(a,b,e)},dumpRng:function(a){return"startContainer: "+a.startContainer.nodeName+", startOffset: "+a.startOffset+", endContainer: "+a.endContainer.nodeName+", endOffset: "+a.endOffset},_findSib:function(a,b,d){var e=this,f=b;if(a){j(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});d.DOM=new d.dom.DOMUtils(document,
{process_html:0})})(tinymce);
(function(d){function k(d){function h(a,b){c(t,a,b)}function b(a,b){c(n,a,b)}function a(a){h(a.parentNode,u(a))}function e(a){b(a.parentNode,u(a)+1)}function f(a,c){var b;if(3==a.nodeType||0>c)return a;for(b=a.firstChild;b&&0<c;)--c,b=b.nextSibling;return b?b:a}function g(a,c,b,e){var f,g;if(a==b)return c==e?0:c<e?-1:1;for(f=b;f&&f.parentNode!=a;)f=f.parentNode;if(f){g=0;for(b=a.firstChild;b!=f&&g<c;)g++,b=b.nextSibling;return c<=g?-1:1}for(f=a;f&&f.parentNode!=b;)f=f.parentNode;if(f){g=0;for(b=b.firstChild;b!=
f&&g<e;)g++,b=b.nextSibling;return g<e?-1:1}for(c=d.findCommonAncestor(a,b);a&&a.parentNode!=c;)a=a.parentNode;a||(a=c);for(e=b;e&&e.parentNode!=c;)e=e.parentNode;if(e||(e=c),a==e)return 0;for(b=c.firstChild;b;){if(b==a)return-1;if(b==e)return 1;b=b.nextSibling}}function c(a,c,b){a?(l[x]=c,l[y]=b):(l[C]=c,l[B]=b);for(c=l[C];c.parentNode;)c=c.parentNode;for(b=l[x];b.parentNode;)b=b.parentNode;b==c?0<g(l[x],l[y],l[C],l[B])&&l.collapse(a):l.collapse(a);l.collapsed=l[x]==l[C]&&l[y]==l[B];l.commonAncestorContainer=
d.findCommonAncestor(l[x],l[C])}function i(a){var c,b,d,e;d=e=0;if(l[x]==l[C]){var g,i;if(a!=v&&(c=p.createDocumentFragment()),l[y]==l[B])a=c;else if(3==l[x].nodeType)a=(b=l[x].nodeValue,g=b.substring(l[y],l[B]),a!=s&&(l[x].deleteData(l[y],l[B]-l[y]),l.collapse(t)),a==v)?void 0:(c.appendChild(p.createTextNode(g)),c);else{d=f(l[x],l[y]);for(i=l[B]-l[y];0<i;)e=d.nextSibling,d=r(d,a),c&&c.appendChild(d),--i,d=e;a=(a!=s&&l.collapse(t),c)}return a}c=l[C];for(b=c.parentNode;b;c=b,b=b.parentNode){if(b==
l[x]){i=c;var o=g=b=d=e=c=void 0;if(!(a!=v&&(c=p.createDocumentFragment()),e=m(i,a),c&&c.appendChild(e),d=u(i),b=d-l[y],0>=b))for(e=i.previousSibling;0<b;)g=e.previousSibling,o=r(e,a),c&&c.insertBefore(o,c.firstChild),--b,e=g;a=(a!=s&&(l.setEndBefore(i),l.collapse(n)),c);return a}++e}c=l[x];for(b=c.parentNode;b;c=b,b=b.parentNode){if(b==l[C]){i=c;b=d=e=b=e=c=void 0;a!=v&&(c=p.createDocumentFragment());b=q(i,a);c&&c.appendChild(b);e=u(i);++e;e=l[B]-e;for(b=i.nextSibling;0<e;)d=b.nextSibling,b=r(b,
a),c&&c.appendChild(b),--e,b=d;return a!=s&&(l.setStartAfter(i),l.collapse(t)),c}++d}d-=e;for(c=l[x];0<d;)c=c.parentNode,d--;for(e=l[C];0>d;)e=e.parentNode,d++;d=c.parentNode;for(b=e.parentNode;d!=b;d=d.parentNode,b=b.parentNode)c=d,e=b;a!=v&&(i=p.createDocumentFragment());d=q(c,a);i&&i.appendChild(d);b=u(c);g=u(e);++b;b=g-b;for(g=c.nextSibling;0<b;)o=g.nextSibling,d=r(g,a),i&&i.appendChild(d),g=o,--b;return d=m(e,a),i&&i.appendChild(d),a!=s&&(l.setStartAfter(c),l.collapse(t)),i}function m(a,c){var b,
d,e,g;g=f(l[C],l[B]-1);var i=g!=l[C];if(g==a)return o(g,i,n,c);b=g.parentNode;for(d=o(b,n,n,c);b;){for(;g;)e=g.previousSibling,g=o(g,i,n,c),c!=v&&d.insertBefore(g,d.firstChild),i=t,g=e;if(b==a)return d;g=b.previousSibling;b=b.parentNode;e=o(b,n,n,c);c!=v&&e.appendChild(d);d=e}}function q(a,c){var b,d,e,g;g=f(l[x],l[y]);var i=g!=l[x];if(g==a)return o(g,i,t,c);b=g.parentNode;for(d=o(b,n,t,c);b;){for(;g;)e=g.nextSibling,g=o(g,i,t,c),c!=v&&d.appendChild(g),i=t,g=e;if(b==a)return d;g=b.nextSibling;b=b.parentNode;
e=o(b,n,t,c);c!=v&&e.appendChild(d);d=e}}function o(a,c,b,d){var e,f,g,i,t;if(c)return r(a,d);if(3==a.nodeType)return(e=a.nodeValue,b?(i=l[y],f=e.substring(i),g=e.substring(0,i)):(i=l[B],f=e.substring(0,i),g=e.substring(i)),d!=s&&(a.nodeValue=g),d==v)?void 0:(t=a.cloneNode(n),t.nodeValue=f,t);if(d!=v)return a.cloneNode(n)}function r(a,c){return c!=v?c==s?a.cloneNode(t):a:void a.parentNode.removeChild(a)}var l=this,p=d.doc,s=1,v=2,t=!0,n=!1,y="startOffset",x="startContainer",C="endContainer",B="endOffset",
A=tinymce.extend,u=d.nodeIndex;A(l,{startContainer:p,startOffset:0,endContainer:p,endOffset:0,collapsed:t,commonAncestorContainer:p,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:h,setEnd:b,setStartBefore:a,setStartAfter:function(a){h(a.parentNode,u(a)+1)},setEndBefore:function(a){b(a.parentNode,u(a))},setEndAfter:e,collapse:function(a){a?(l[C]=l[x],l[B]=l[y]):(l[x]=l[C],l[y]=l[B]);l.collapsed=t},selectNode:function(c){a(c);e(c)},selectNodeContents:function(a){h(a,0);b(a,1===
a.nodeType?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a,c){var b=l[x],d=l[y],e=l[C],f=l[B],i=c.startContainer,t=c.startOffset,n=c.endContainer,o=c.endOffset;return 0===a?g(b,d,i,t):1===a?g(e,f,i,t):2===a?g(e,f,n,o):3===a?g(b,d,n,o):void 0},deleteContents:function(){i(v)},extractContents:function(){return i(0)},cloneContents:function(){return i(s)},insertNode:function(a){var c,b,e=this[x],f=this[y];3!==e.nodeType&&4!==e.nodeType||!e.nodeValue?(0<e.childNodes.length&&(b=
e.childNodes[f]),b?e.insertBefore(a,b):e.appendChild(a)):f?f>=e.nodeValue.length?d.insertAfter(a,e):(c=e.splitText(f),e.parentNode.insertBefore(a,c)):e.parentNode.insertBefore(a,e)},surroundContents:function(a){var c=l.extractContents();l.insertNode(a);a.appendChild(c);l.selectNode(a)},cloneRange:function(){return A(new k(d),{startContainer:l[x],startOffset:l[y],endContainer:l[C],endOffset:l[B],collapsed:l.collapsed,commonAncestorContainer:l.commonAncestorContainer})}})}d.Range=k})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(d){function k(a,b){var f,g,c,i,h,j,o,r,l=0,p=-1;if(f=a.duplicate(),f.collapse(b),r=f.parentElement(),r.ownerDocument===d.dom.doc){for(;"false"===r.contentEditable;)r=r.parentNode;if(!r.hasChildNodes())return{node:r,inside:1};i=r.children;for(g=i.length-1;l<=g;)if(o=Math.floor((l+g)/2),h=i[o],f.moveToElementText(h),p=f.compareEndPoints(b?"StartToStart":"EndToEnd",a),0<p)g=o-1;else{if(!(0>p))return{node:h};l=o+1}if(0>p){if(h?f.collapse(!1):(f.moveToElementText(r),
f.collapse(!0),h=r,c=!0),f.setEndPoint(b?"EndToStart":"EndToEnd",a),0<f.compareEndPoints(b?"StartToStart":"StartToEnd",a)){f=a.duplicate();f.collapse(b);for(j=-1;r==f.parentElement()&&0!=f.move("character",-1);)j++}j=j||f.text.replace("\r\n"," ").length}else f.collapse(!0),f.setEndPoint(b?"StartToStart":"StartToEnd",a),j=f.text.replace("\r\n"," ").length;return{node:h,position:p,offset:j,inside:c}}}var j=this,h=d.dom,b=!0;this.getBookmark=function(a){function b(a){var c,d,e,f,g=[];c=a.parentNode;
for(d=h.doc.body.parentNode;c!=d&&9!==c.nodeType;){e=c.children;for(f=e.length;f--;)if(a===e[f]){g.push(f);break}a=c;c=c.parentNode}return g}function f(a){if(a=k(g,a))return{position:a.position,offset:a.offset,indexes:b(a.node),inside:a.inside}}var g=d.getRng(),c={};return 2===a&&(g.item?c.start={ctrl:!0,indexes:b(g.item(0))}:(c.start=f(!0),d.isCollapsed()||(c.end=f()))),c};this.moveToBookmark=function(a){function b(a){var c,d,e,f;c=h.doc.body;for(d=a.length-1;0<=d;d--)f=c.children,e=a[d],e<=f.length-
1&&(c=f[e]);return c}function d(f){var h,j,o=a[f?"start":"end"];o&&(h=0<o.position,j=c.createTextRange(),j.moveToElementText(b(o.indexes)),offset=o.offset,void 0!==offset?(j.collapse(o.inside||h),j.moveStart("character",h?-offset:offset)):j.collapse(f),g.setEndPoint(f?"StartToStart":"EndToStart",j),f&&g.collapse(!0))}var g,c=h.doc.body;a.start&&(a.start.ctrl?(g=c.createControlRange(),g.addElement(b(a.start.indexes)),g.select()):(g=c.createTextRange(),d(!0),d(),g.select()))};this.addRange=function(a){function e(a){var d,
e,g,l,y;g=h.create("a");d=a?c:j;e=a?i:k;l=f.duplicate();d!=o&&d!=o.documentElement||(d=r,e=0);3==d.nodeType?(d.parentNode.insertBefore(g,d),l.moveToElementText(g),l.moveStart("character",e),h.remove(g),f.setEndPoint(a?"StartToStart":"EndToEnd",l)):(y=d.childNodes,y.length?(e>=y.length?h.insertAfter(g,y[y.length-1]):d.insertBefore(g,y[e]),l.moveToElementText(g)):(g=o.createTextNode("﻿"),d.appendChild(g),l.moveToElementText(g.parentNode),l.collapse(b)),f.setEndPoint(a?"StartToStart":"EndToEnd",l),h.remove(g))}
var f,g,c,i,j,k,o=d.dom.doc,r=o.body;if(c=a.startContainer,i=a.startOffset,j=a.endContainer,k=a.endOffset,f=r.createTextRange(),c==j&&1==c.nodeType&&i==k-1&&i==k-1)try{return g=r.createControlRange(),g.addElement(c.childNodes[i]),void g.select()}catch(l){}e(!0);e();f.select()};this.getRangeAt=function(){function a(a){var c,b,d,e,f=k(m,a),g=0;if(c=f.node,b=f.offset,f.inside&&!c.hasChildNodes())return void q[a?"setStart":"setEnd"](c,0);if(void 0===b)return void q[a?"setStartBefore":"setEndAfter"](c);
if(0>f.position){if(d=f.inside?c.firstChild:c.nextSibling,!d)return void q[a?"setStartAfter":"setEndAfter"](c);if(!b)return void(3==d.nodeType?q[a?"setStart":"setEnd"](d,0):q[a?"setStartBefore":"setEndBefore"](d));for(;d;){if(e=d.nodeValue,g+=e.length,g>=b){c=d;g-=b;g=e.length-g;break}d=d.nextSibling}}else{if(d=c.previousSibling,!d)return q[a?"setStartBefore":"setEndBefore"](c);if(!b)return void(3==c.nodeType?q[a?"setStart":"setEnd"](d,c.nodeValue.length):q[a?"setStartAfter":"setEndAfter"](d));for(;d;){if(g+=
d.nodeValue.length,g>=b){c=d;g-=b;break}d=d.previousSibling}}q[a?"setStart":"setEnd"](c,g)}var b,f,g,c,i,m=d.getRng(),q=h.createRng();if(b=m.item?m.item(0):m.parentElement(),b.ownerDocument!=h.doc)return q;if(f=d.isCollapsed(),m.item)return q.setStart(b.parentNode,h.nodeIndex(b)),q.setEnd(q.startContainer,q.startOffset+1),q;try{a(!0),f||a()}catch(o){if(-2147024809!=o.number)throw o;i=j.getBookmark(2);g=m.duplicate();g.collapse(!0);b=g.parentElement();f||(g=m.duplicate(),g.collapse(!1),c=g.parentElement(),
c.innerHTML=c.innerHTML);b.innerHTML=b.innerHTML;j.moveToBookmark(i);m=d.getRng();a(!0);f||a()}return q}}})();
(function(){function d(a,c,b,d,e,f){for(var e=0,g=d.length;e<g;e++){var i=d[e];if(i){for(var i=i[a],l=!1;i;){if(i.sizcache===b){l=d[i.sizset];break}if(1!==i.nodeType||f||(i.sizcache=b,i.sizset=e),i.nodeName.toLowerCase()===c){l=i;break}i=i[a]}d[e]=l}}}function k(a,c,b,d,e,g){for(var e=0,i=d.length;e<i;e++){var l=d[e];if(l){for(var l=l[a],o=!1;l;){if(l.sizcache===b){o=d[l.sizset];break}if(1===l.nodeType)if(g||(l.sizcache=b,l.sizset=e),"string"!=typeof c){if(l===c){o=!0;break}}else if(0<f.filter(c,
[l]).length){o=l;break}l=l[a]}d[e]=o}}}var j=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,h=0,b=Object.prototype.toString,a=!1,e=!0;[0,0].sort(function(){return e=!1,0});var f=function(a,d,e,i){var e=e||[],l=d=d||document;if(1!==d.nodeType&&9!==d.nodeType)return[];if(!a||"string"!=typeof a)return e;var o,h,p,s,m,r,k=[],H=!0,L=f.isXML(d),I=a;do if(j.exec(""),o=j.exec(I),o&&(I=o[3],k.push(o[1]),o[2])){s=o[3];break}while(o);
if(1<k.length&&c.exec(a))if(2===k.length&&g.relative[k[0]])h=v(k[0]+k[1],d);else for(h=g.relative[k[0]]?[d]:f(k.shift(),d);k.length;)a=k.shift(),g.relative[a]&&(a+=k.shift()),h=v(a,h);else if(!i&&1<k.length&&9===d.nodeType&&!L&&g.match.ID.test(k[0])&&!g.match.ID.test(k[k.length-1])&&(m=f.find(k.shift(),d,L),d=m.expr?f.filter(m.expr,m.set)[0]:m.set[0]),d){m=i?{expr:k.pop(),set:q(i)}:f.find(k.pop(),1!==k.length||"~"!==k[0]&&"+"!==k[0]||!d.parentNode?d:d.parentNode,L);h=m.expr?f.filter(m.expr,m.set):
m.set;for(0<k.length?p=q(h):H=!1;k.length;)o=r=k.pop(),g.relative[r]?o=k.pop():r="",null==o&&(o=d),g.relative[r](p,o,L)}else p=[];if(p||(p=h),p||f.error(r||a),"[object Array]"===b.call(p))if(H)if(d&&1===d.nodeType)for(a=0;null!=p[a];a++)p[a]&&(!0===p[a]||1===p[a].nodeType&&f.contains(d,p[a]))&&e.push(h[a]);else for(a=0;null!=p[a];a++)p[a]&&1===p[a].nodeType&&e.push(h[a]);else e.push.apply(e,p);else q(p,e);return s&&(f(s,l,e,i),f.uniqueSort(e)),e};f.uniqueSort=function(c){if(r&&(a=e,c.sort(r),a))for(var b=
1;b<c.length;b++)c[b]===c[b-1]&&c.splice(b--,1);return c};f.matches=function(a,c){return f(a,null,null,c)};f.find=function(a,c,b){var d;if(!a)return[];for(var e=0,f=g.order.length;e<f;e++){var i,l=g.order[e];if(i=g.leftMatch[l].exec(a)){var o=i[1];if(i.splice(1,1),"\\"!==o.substr(o.length-1)&&(i[1]=(i[1]||"").replace(/\\/g,""),d=g.find[l](i,c,b),null!=d)){a=a.replace(g.match[l],"");break}}}return d||(d=c.getElementsByTagName("*")),{set:d,expr:a}};f.filter=function(a,c,b,d){for(var e,i,l=a,o=[],h=
c,p=c&&c[0]&&f.isXML(c[0]);a&&c.length;){for(var s in g.filter)if(null!=(e=g.leftMatch[s].exec(a))&&e[2]){var j,m,k=g.filter[s];m=e[1];if(!(i=!1,e.splice(1,1),"\\"===m.substr(m.length-1))){if(h===o&&(o=[]),g.preFilter[s])if(e=g.preFilter[s](e,h,b,o,d,p)){if(!0===e)continue}else i=j=!0;if(e)for(var r=0;null!=(m=h[r]);r++)if(m){j=k(m,e,r,h);var v=d^!!j;b&&null!=j?v?i=!0:h[r]=!1:v&&(o.push(m),i=!0)}if(void 0!==j){if(b||(h=o),a=a.replace(g.match[s],""),!i)return[];break}}}if(a===l){if(null!=i)break;f.error(a)}l=
a}return h};f.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var g=f.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,c){var b="string"==typeof c,d=b&&!/\W/.test(c),b=b&&!d;d&&(c=c.toLowerCase());for(var e=0,g=a.length;e<g;e++)if(d=a[e]){for(;(d=d.previousSibling)&&1!==d.nodeType;);a[e]=b||d&&d.nodeName.toLowerCase()===c?d||!1:d===c}b&&f.filter(c,a,!0)},">":function(a,c){var b,d="string"==
typeof c,e=0,g=a.length;if(d&&!/\W/.test(c))for(c=c.toLowerCase();e<g;e++){if(b=a[e])b=b.parentNode,a[e]=b.nodeName.toLowerCase()===c&&b}else{for(;e<g;e++)(b=a[e])&&(a[e]=d?b.parentNode:b.parentNode===c);d&&f.filter(c,a,!0)}},"":function(a,c,b){var e,f=h++,g=k;"string"!=typeof c||/\W/.test(c)||(c=c.toLowerCase(),e=c,g=d);g("parentNode",c,f,a,e,b)},"~":function(a,c,b){var e,f=h++,g=k;"string"!=typeof c||/\W/.test(c)||(c=c.toLowerCase(),e=c,g=d);g("previousSibling",c,f,a,e,b)}},find:{ID:function(a,
c,b){if("undefined"!=typeof c.getElementById&&!b)return(a=c.getElementById(a[1]))?[a]:[]},NAME:function(a,c){if("undefined"!=typeof c.getElementsByName){for(var b=[],d=c.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&b.push(d[e]);return 0===b.length?null:b}},TAG:function(a,c){return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,b,d,e,f){if(a=" "+a[1].replace(/\\/g,"")+" ",f)return a;for(var g=0;null!=(f=c[g]);g++)f&&(e^(f.className&&0<=(" "+f.className+
" ").replace(/[\t\n]/g," ").indexOf(a))?b||d.push(f):b&&(c[g]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if("nth"===a[1]){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}return a[0]=h++,a},ATTR:function(a,c,b,d,e,f){c=a[1].replace(/\\/g,"");return!f&&g.attrMap[c]&&(a[1]=g.attrMap[c]),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},
PSEUDO:function(a,c,b,d,e){if("not"===a[1]){if(!(1<(j.exec(a[3])||"").length||/^\w/.test(a[3])))return a=f.filter(a[3],c,b,1^e),b||d.push.apply(d,a),!1;a[3]=f(a[3],null,null,c)}else if(g.match.POS.test(a[0])||g.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){return a.parentNode.selectedIndex,
!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,c,b){return!!f(b[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===
a.type},button:function(a){return"button"===a.type||"button"===a.nodeName.toLowerCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,c){return 0===c},last:function(a,c,b,d){return c===d.length-1},even:function(a,c){return 0===c%2},odd:function(a,c){return 1===c%2},lt:function(a,c,b){return c<b[3]-0},gt:function(a,c,b){return c>b[3]-0},nth:function(a,c,b){return b[3]-0===c},eq:function(a,c,b){return b[3]-0===c}},filter:{PSEUDO:function(a,
c,b,d){var e=c[1],i=g.filters[e];if(i)return i(a,b,c,d);if("contains"===e)return 0<=(a.textContent||a.innerText||f.getText([a])||"").indexOf(c[3]);if("not"===e){c=c[3];b=0;for(d=c.length;b<d;b++)if(c[b]===a)return!1;return!0}f.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,c){var b=c[1],d=a;switch(b){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===b)return!0;d=a;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case "nth":var b=
c[2],e=c[3];if(1===b&&0===e)return!0;var f=c[0],g=a.parentNode;if(g&&(g.sizcache!==f||!a.nodeIndex)){for(var i=0,d=g.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++i);g.sizcache=f}d=a.nodeIndex-e;return 0===b?0===d:0===d%b&&0<=d/b}},ID:function(a,c){return 1===a.nodeType&&a.getAttribute("id")===c},TAG:function(a,c){return"*"===c&&1===a.nodeType||a.nodeName.toLowerCase()===c},CLASS:function(a,c){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)},ATTR:function(a,c){var b=
c[1],b=g.attrHandle[b]?g.attrHandle[b](a):null!=a[b]?a[b]:a.getAttribute(b),d=b+"",e=c[2],f=c[4];return null==b?"!="===e:"="===e?d===f:"*="===e?0<=d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):f?"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-f.length)===f:"|="===e&&(d===f||d.substr(0,f.length+1)===f+"-"):d&&!1!==b},POS:function(a,c,b,d){var e=g.setFilters[c[2]];if(e)return e(a,b,c,d)}}},c=g.match.POS,i=function(a,c){return"\\"+(c-0+1)},m;for(m in g.match)g.match[m]=RegExp(g.match[m].source+
/(?![^\[]*\])(?![^\(]*\))/.source),g.leftMatch[m]=RegExp(/(^(?:.|\r|\n)*?)/.source+g.match[m].source.replace(/\\(\d+)/g,i));var q=function(a,c){return a=Array.prototype.slice.call(a,0),c?(c.push.apply(c,a),c):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(o){q=function(a,c){var d=c||[],e=0;if("[object Array]"===b.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var f=a.length;e<f;e++)d.push(a[e]);else for(;a[e];e++)d.push(a[e]);
return d}}var r;document.documentElement.compareDocumentPosition?r=function(c,b){if(!c.compareDocumentPosition||!b.compareDocumentPosition)return c==b&&(a=!0),c.compareDocumentPosition?-1:1;var d=4&c.compareDocumentPosition(b)?-1:c===b?0:1;return 0===d&&(a=!0),d}:"sourceIndex"in document.documentElement?r=function(c,b){if(!c.sourceIndex||!b.sourceIndex)return c==b&&(a=!0),c.sourceIndex?-1:1;var d=c.sourceIndex-b.sourceIndex;return 0===d&&(a=!0),d}:document.createRange&&(r=function(c,b){if(!c.ownerDocument||
!b.ownerDocument)return c==b&&(a=!0),c.ownerDocument?-1:1;var d=c.ownerDocument.createRange(),e=b.ownerDocument.createRange();d.setStart(c,0);d.setEnd(c,0);e.setStart(b,0);e.setEnd(b,0);d=d.compareBoundaryPoints(Range.START_TO_END,e);return 0===d&&(a=!0),d});f.getText=function(a){for(var c,b="",d=0;a[d];d++)c=a[d],3===c.nodeType||4===c.nodeType?b+=c.nodeValue:8!==c.nodeType&&(b+=f.getText(c.childNodes));return b};i=document.createElement("div");m="script"+(new Date).getTime();i.innerHTML="<a name='"+
m+"'/>";var l=document.documentElement;l.insertBefore(i,l.firstChild);document.getElementById(m)&&(g.find.ID=function(a,c,b){if("undefined"!=typeof c.getElementById&&!b)return(c=c.getElementById(a[1]))?c.id===a[1]||"undefined"!=typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===a[1]?[c]:void 0:[]},g.filter.ID=function(a,c){var b="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&b&&b.nodeValue===c});l.removeChild(i);l=i=null;i=document.createElement("div");
i.appendChild(document.createComment(""));0<i.getElementsByTagName("*").length&&(g.find.TAG=function(a,c){var b=c.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;b[e];e++)1===b[e].nodeType&&d.push(b[e]);b=d}return b});i.innerHTML="<a href='#'></a>";i.firstChild&&"undefined"!=typeof i.firstChild.getAttribute&&"#"!==i.firstChild.getAttribute("href")&&(g.attrHandle.href=function(a){return a.getAttribute("href",2)});i=null;if(document.querySelectorAll){var p=f,i=document.createElement("div");
if(i.innerHTML="<p class='TEST'></p>",!i.querySelectorAll||0!==i.querySelectorAll(".TEST").length){var f=function(a,c,b,d){if(c=c||document,!d&&9===c.nodeType&&!f.isXML(c))try{return q(c.querySelectorAll(a),b)}catch(e){}return p(a,c,b,d)},s;for(s in p)f[s]=p[s];i=null}!0}s=document.createElement("div");s.innerHTML="<div class='test e'></div><div class='test'></div>";s.getElementsByClassName&&0!==s.getElementsByClassName("e").length&&(s.lastChild.className="e",1!==s.getElementsByClassName("e").length&&
(g.order.splice(1,0,"CLASS"),g.find.CLASS=function(a,c,b){if("undefined"!=typeof c.getElementsByClassName&&!b)return c.getElementsByClassName(a[1])},s=null));f.contains=document.compareDocumentPosition?function(a,c){return!!(16&a.compareDocumentPosition(c))}:function(a,c){return a!==c&&(!a.contains||a.contains(c))};f.isXML=function(a){a=(a?a.ownerDocument||a:0).documentElement;return!!a&&"HTML"!==a.nodeName};var v=function(a,c){for(var b,d=[],e="",i=c.nodeType?[c]:c;b=g.match.PSEUDO.exec(a);)e+=b[0],
a=a.replace(g.match.PSEUDO,"");a=g.relative[a]?a+"*":a;b=0;for(var l=i.length;b<l;b++)f(a,i[b],d);return f.filter(e,d)};window.tinymce.dom.Sizzle=f})();
(function(d){var k,j=d.each,h=d.DOM,b=d.isIE;d.isWebKit;d.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,e,f,g){var c,i,m=this,k=m.events;return e instanceof Array?(i=[],j(e,function(c){i.push(m.add(a,c,f,g))}),i):a&&a.hasOwnProperty&&a instanceof Array?(i=[],j(a,function(a){a=h.get(a);i.push(m.add(a,e,f,g))}),i):(a=h.get(a))?(c=function(a){if(!m.disabled&&(!d.activeEditor||!a||"keydown"!==a.type&&"keypress"!==a.type||0!==d.activeEditor.selection.getSel().rangeCount||
(d.isMac?a.metaKey:a.ctrlKey)&&(83===a.keyCode||69===a.keyCode&&a.shiftKey)))return a=a||window.event,a&&b&&!d.isIE11&&(a.target||(a.target=a.srcElement),d.extend(a,m._stoppers)),g?f.call(g,a):f(a)},"unload"==e?(d.unloads.unshift({func:c}),c):"init"==e?(m.domLoaded?c():m.inits.push(c),c):(k.push({obj:a,name:e,func:f,cfunc:c,scope:g}),m._add(a,e,c),f)):void 0},remove:function(a,b,d){var g,c=this,i=c.events,m=!1;return a&&a.hasOwnProperty&&a instanceof Array?(g=[],j(a,function(a){a=h.get(a);g.push(c.remove(a,
b,d))}),g):(a=h.get(a),j(i,function(g,h){if(g.obj==a&&g.name==b&&(!d||g.func==d||g.cfunc==d))return i.splice(h,1),c._remove(a,b,g.cfunc),m=!0,!1}),m)},clear:function(a){var b,d,g=this.events;if(a){a=h.get(a);for(b=g.length-1;0<=b;b--)d=g[b],d.obj===a&&(this._remove(d.obj,d.name,d.cfunc),d.obj=d.cfunc=null,g.splice(b,1))}},cancel:function(a){return!!a&&(this.stop(a),this.prevent(a))},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?
a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;j(a.events,function(b){a._remove(b.obj,b.name,b.cfunc);b.obj=b.cfunc=null});a.events=[];a=null},_add:function(a,b,d){a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener?a.addEventListener(b,d,!1):a["on"+b]=d},_remove:function(a,b,d){if(a)try{a.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener?a.removeEventListener(b,d,!1):a["on"+b]=null}catch(g){}},_pageInit:function(){this.domLoaded||(this.domLoaded=!0,j(this.inits,
function(a){a()}),this.inits=[])},_wait:function(a){var b=this,d=a.document;return a.tinyMCE_GZ&&tinyMCE_GZ.loaded?void(b.domLoaded=1):"complete"===d.readyState?void b._pageInit(a):(d.attachEvent?(d.attachEvent("onreadystatechange",function(){"complete"===d.readyState&&(d.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),d.documentElement.doScroll&&a==a.top&&!function(){if(!b.domLoaded){try{d.documentElement.doScroll("left")}catch(g){return void setTimeout(arguments.callee,0)}b._pageInit(a)}}()):
d.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),void b._add(a,"load",function(){b._pageInit(a)}))},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}});k=d.dom.Event=new d.dom.EventUtils;k._wait(window);d.addUnload(function(){k.destroy()})})(tinymce);
(function(d){d.dom.Element=function(k,j){var h,b=this;b.settings=j=j||{};b.id=k;b.dom=h=j.dom||d.DOM;d.isIE||h.get(b.id);d.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){b[a]=function(){var d,f=[k];for(d=0;d<arguments.length;d++)f.push(arguments[d]);return f=h[a].apply(h,f),b.update(a),f}});d.extend(b,{on:function(a,e,f){return d.dom.Event.add(b.id,
a,e,f)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var a=h.get(b.id);return{w:parseInt(b.getStyle("width")||a.clientWidth),h:parseInt(b.getStyle("height")||a.clientHeight)}},moveTo:function(a,d){b.setStyles({left:a,top:d})},moveBy:function(a,d){var f=b.getXY();b.moveTo(f.x+a,f.y+d)},resizeTo:function(a,d){b.setStyles({width:a,height:d})},resizeBy:function(a,d){var f=b.getSize();b.resizeTo(f.w+a,f.h+d)},update:function(a){var e;if(d.isIE6&&
j.blocker&&!(a=a||"",0===a.indexOf("get")||0===a.indexOf("has")||0===a.indexOf("is"))){if("remove"==a)return void h.remove(b.blocker);b.blocker?e=h.get(b.blocker):(b.blocker=h.uniqueId(),e=h.add(j.container||h.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),h.setStyle(e,"opacity",0));h.setStyles(e,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",
1)||0)-1})}}})}})(tinymce);
(function(d){var k=d.is,j=d.isIE,h=d.each;d.create("tinymce.dom.Selection",{Selection:function(b,a,e){var f=this;f.dom=b;f.win=a;f.serializer=e;h(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(a){f[a]=new d.util.Dispatcher(f)});f.win.getSelection||(f.tridentSel=new d.dom.TridentSelection(f));d.isIE&&b.boxModel&&this._fixIESelection();d.addUnload(f.destroy,f)},setCursorLocation:function(b,a){var d=this.dom.createRng();d.setStart(b,a);d.setEnd(b,a);this.setRng(d);
this.collapse(!1)},getContent:function(b){var a,d,f,g=this.getRng(),c=this.dom.create("body"),i=this.getSel();return b=b||{},a=d="",b.get=!0,b.format=b.format||"html",b.forced_root_block="",this.onBeforeGetContent.dispatch(this,b),"text"==b.format?this.isCollapsed()?"":g.text||(i.toString?i.toString():""):(g.cloneContents?(f=g.cloneContents(),f&&c.appendChild(f)):k(g.item)||k(g.htmlText)?(c.innerHTML="<br>"+(g.item?g.item(0).outerHTML:g.htmlText),c.removeChild(c.firstChild)):c.innerHTML=g.toString(),
/^\s/.test(c.innerHTML)&&(a=" "),/\s+$/.test(c.innerHTML)&&(d=" "),b.getInner=!0,b.content=this.isCollapsed()?"":a+this.serializer.serialize(c,b)+d,this.onGetContent.dispatch(this,b),b.content)},setContent:function(b,a){var d,f,g,c=this.getRng(),i=this.win.document;if(a=a||{format:"html"},a.set=!0,b=a.content=b,a.no_events||this.onBeforeSetContent.dispatch(this,a),b=a.content,c.insertNode){if(b+='<span id="__caret">_</span>',c.startContainer==i&&c.endContainer==i)i.body.innerHTML=b;else if(c.deleteContents(),
0==i.body.childNodes.length)i.body.innerHTML=b;else if(c.createContextualFragment)try{c.insertNode(c.createContextualFragment(b))}catch(h){if(0!==c.startOffset||0!==c.endOffset||0!==c.startContainer.children.length)throw h;f=i.createDocumentFragment();g=i.createElement("div");g.innerHTML=b;g=g.children[0];for(f.appendChild(g.cloneNode());g=g.nextSibling;)f.appendChild(g.cloneNode());c.startContainer.parentNode.insertBefore(f,c.startContainer)}else f=i.createDocumentFragment(),g=i.createElement("div"),
f.appendChild(g),g.outerHTML=b,c.insertNode(f);try{d=this.dom.get("__caret"),c=i.createRange(),c.setStartBefore(d),c.setEndBefore(d),this.setRng(c),this.dom.remove("__caret"),this.setRng(c)}catch(j){AJS.logError("Exception occurred at tinymce setContent(): "+j)}}else c.item&&(i.execCommand("Delete",!1,null),c=this.getRng()),/^\s+/.test(b)?(c.pasteHTML('<span id="__mce_tmp">_</span>'+b),this.dom.remove("__mce_tmp")):c.pasteHTML(b);a.no_events||this.onSetContent.dispatch(this,a)},getStart:function(){var b,
a,d;a=this.getRng();if(a.duplicate||a.item){if(a.item)return a.item(0);b=a.duplicate();b.collapse(1);b=b.parentElement();for(a=d=a.parentElement();d=d.parentNode;)if(d==b){b=a;break}return b}return b=a.startContainer,1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&3==b.nodeType?b.parentNode:b},getEnd:function(){var b,a,d=this.getRng();return d.duplicate||d.item?d.item?d.item(0):(d=d.duplicate(),d.collapse(0),b=d.parentElement(),b&&"BODY"==b.nodeName?
b.lastChild||b:b):(b=d.endContainer,a=d.endOffset,1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[0<a?a-1:a]),b&&3==b.nodeType?b.parentNode:b)},getBookmark:function(b,a){function d(a,c){var b=0;return h(o.select(a),function(a,d){a==c&&(b=d)}),b}var f,g,c,i,j,k=this,o=k.dom;if(2==b){if(k.tridentSel)f=k.tridentSel.getBookmark(b);else{f=function(c,b){var d,e=c[b?"startContainer":"endContainer"],f=c[b?"startOffset":"endOffset"],g=[],i=0;if(3==e.nodeType){if(a)for(d=e.previousSibling;d&&3==d.nodeType;d=
d.previousSibling)f+=d.nodeValue.length;g.push(f)}else d=e.childNodes,f>=d.length&&d.length&&(i=1,f=Math.max(0,d.length-1)),g.push(k.dom.nodeIndex(d[f],a)+i);for(;e&&e!=r;e=e.parentNode)g.push(k.dom.nodeIndex(e,a));return g};c=k.getRng(!0);var r=o.doc.body;i={};f=(i.start=f(c,!0),k.isCollapsed()||(i.end=f(c)),i)}return f}if(b)return{rng:k.getRng()};if(f=k.getRng(),c=o.uniqueId(),i=tinyMCE.activeEditor.selection.isCollapsed(),f.duplicate||f.item){if(f.item)return j=f.item(0),g=j.nodeName,{name:g,index:d(g,
j)};g=f.duplicate();try{f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+c+'_start" style="overflow:hidden;line-height:0px">﻿</span>'),i||(g.collapse(!1),f.moveToElementText(g.parentElement()),0==f.compareEndPoints("StartToEnd",g)&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+c+'_end" style="overflow:hidden;line-height:0px">﻿</span>'))}catch(l){return null}}else{if(j=k.getNode(),g=j.nodeName,"IMG"==g)return{name:g,index:d(g,j)};g=f.cloneRange();i||(g.collapse(!1),
g.insertNode(o.create("span",{"data-mce-type":"bookmark",id:c+"_end",style:"overflow:hidden;line-height:0px"},"﻿")));f.collapse(!0);f.insertNode(o.create("span",{"data-mce-type":"bookmark",id:c+"_start",style:"overflow:hidden;line-height:0px"},"﻿"))}return k.moveToBookmark({id:c,keep:1}),{id:c}},moveToBookmark:function(b){function a(a){var d,e,f,i,h=b[a?"start":"end"];if(h){f=h[0];e=c;for(d=h.length-1;1<=d;d--){if(i=e.childNodes,h[d]>i.length-1)return;e=i[h[d]]}3===e.nodeType&&(f=Math.min(h[0],e.nodeValue.length));
1===e.nodeType&&(f=Math.min(h[0],e.childNodes.length));a?g.setStart(e,f):g.setEnd(e,f)}return!0}function e(a){var c,e,f,g=r.get(b.id+"_"+a);f=b.keep;if(g&&(c=g.parentNode,"start"==a?(f?(c=g.firstChild,e=1):e=r.nodeIndex(g),i=m=c,k=o=e):(f?(c=g.firstChild,e=1):e=r.nodeIndex(g),m=c,o=e),!f)){f=g.previousSibling;c=g.nextSibling;for(h(d.grep(g.childNodes),function(a){3==a.nodeType&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});g=r.get(b.id+"_"+a);)r.remove(g,1);f&&c&&f.nodeType==c.nodeType&&3==f.nodeType&&
!d.isOpera&&(e=f.nodeValue.length,f.appendData(c.nodeValue),r.remove(c),"start"==a?(i=m=f,k=o=e):(m=f,o=e))}}function f(a){return r.isBlock(a)&&!a.innerHTML&&(a.innerHTML=j?" ":'<br data-mce-bogus="1" />'),a}var g,c,i,m,k,o,r=this.dom;if(b)if(b.start){if(g=r.createRng(),c=r.doc.body,this.tridentSel)return this.tridentSel.moveToBookmark(b);a(!0)&&a()&&this.setRng(g)}else b.id?(e("start"),e("end"),i&&(g=r.createRng(),g.setStart(f(i),k),g.setEnd(f(m),o),this.setRng(g))):b.name?this.select(r.select(b.name)[b.index]):
b.rng&&this.setRng(b.rng)},select:function(b,a){function e(a,b){var e=new d.dom.TreeWalker(a,a);try{do{if(3==a.nodeType&&0!=d.trim(a.nodeValue).length)return void(b?c.setStart(a,0):c.setEnd(a,a.nodeValue.length));if("BR"==a.nodeName)return void(b?c.setStartBefore(a):c.setEndBefore(a))}while(a=b?e.next():e.prev())}catch(f){AJS.log("Error in Selection.js: select : setPoint: "+f)}}var f,g=this.dom,c=g.createRng();return b&&(f=g.nodeIndex(b),c.setStart(b.parentNode,f),c.setEnd(b.parentNode,f+1),a&&(e(b,
1),e(b)),this.setRng(c)),b},isCollapsed:function(){var b=this.getRng(),a=this.getSel();return!(!b||b.item)&&(b.compareEndPoints?0===b.compareEndPoints("StartToEnd",b):!a||b.collapsed)},collapse:function(b){var a,d=this.getRng();d.item&&(a=d.item(0),d=this.win.document.body.createTextRange(),d.moveToElementText(a));d.collapse(!!b);this.setRng(d)},getSel:function(){var b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var a,e,f,g=this.win.document;if(b&&this.tridentSel)return this.tridentSel.getRangeAt(0);
try{(a=this.getSel())&&(e=0<a.rangeCount?a.getRangeAt(0):a.createRange?a.createRange():g.createRange())}catch(c){}try{d.isIE&&e&&e.setStart&&g.selection&&g.selection.createRange().item&&(f=g.selection.createRange().item(0),e=g.createRange(),e.setStartBefore(f),e.setEndAfter(f))}catch(i){}return e||(e=g.createRange?g.createRange():g.body.createTextRange()),this.selectedRange&&this.explicitRange&&(0===e.compareBoundaryPoints(e.START_TO_START,this.selectedRange)&&0===e.compareBoundaryPoints(e.END_TO_END,
this.selectedRange)?e=this.explicitRange:(this.selectedRange=null,this.explicitRange=null)),e},setRng:function(b){var a;if(this.tridentSel){if(b.cloneRange)try{return void this.tridentSel.addRange(b)}catch(d){AJS.logError("Exception occurred at tinymce setRng() - tridentSel.addRange(): "+d)}try{b.select()}catch(f){AJS.logError("Exception occurred at tinymce setRng() - select(): "+f)}}else if(a=this.getSel()){this.explicitRange=b;try{a.removeAllRanges()}catch(g){AJS.logError("Exception occurred at tinymce setRng() - removeAllRanges(): "+
g)}try{a.addRange(b)}catch(c){AJS.logError("Exception occurred at tinymce setRng() - addRange(): "+c)}this.selectedRange=0<a.rangeCount?a.getRangeAt(0):null}},setNode:function(b){return this.setContent(this.dom.getOuterHTML(b)),b},getNode:function(){function b(a,b){for(var d=a;a&&3===a.nodeType&&0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||d}var a,d=this.getRng(),f=(this.getSel(),d.startContainer),g=d.endContainer;return d?d.setStart?(a=d.commonAncestorContainer,!d.collapsed&&(d.startContainer==
d.endContainer&&2>d.endOffset-d.startOffset&&d.startContainer.hasChildNodes()&&(a=d.startContainer.childNodes[d.startOffset]),3===f.nodeType&&3===g.nodeType&&(f=f.length===d.startOffset?b(f.nextSibling,!0):f.parentNode,g=0===d.endOffset?b(g.previousSibling,!1):g.parentNode,f&&f===g))?f:a&&3==a.nodeType?a.parentNode:a):d.item?d.item(0):d.parentElement():this.dom.getRoot()},getSelectedBlocks:function(b,a){var e,f,g,c=this.dom,i=[];if(e=c.getParent(b||this.getStart(),c.isBlock),f=c.getParent(a||this.getEnd(),
c.isBlock),e&&i.push(e),e&&f&&e!=f){g=e;for(var h=new d.dom.TreeWalker(e,c.getRoot());(g=h.next())&&g!=f;)c.isBlock(g)&&i.push(g)}return f&&e!=f&&i.push(f),i},normalize:function(){function b(b){var c,i,h,j,o=f.dom;h=o.getRoot();if(c=a[(b?"start":"end")+"Container"],i=a[(b?"start":"end")+"Offset"],9===c.nodeType&&(c=c.body,i=0),c===h&&c.hasChildNodes()){if(c=c.childNodes[Math.min(!b&&0<i?i-1:i,c.childNodes.length-1)],i=0,"TABLE"===c.nodeName)return;if(c.hasChildNodes()){j=c;h=new d.dom.TreeWalker(c,
h);do{if(3===j.nodeType){i=b?0:j.nodeValue.length-1;c=j;e=!0;break}if(/^(BR|IMG)$/.test(j.nodeName)){i=o.nodeIndex(j);c=j.parentNode;"IMG"!=j.nodeName||b||i++;e=!0;break}}while(j=b?h.next():h.prev())}}e&&a["set"+(b?"Start":"End")](c,i)}var a,e,f=this;d.isIE||(a=f.getRng(),b(!0),a.collapsed&&e&&b(),e&&f.setRng(a))},destroy:function(b){this.win=null;b||d.removeUnload(this.destroy)},_fixIESelection:function(){function b(a,c){var b=j.createTextRange();try{b.moveToPoint(a,c)}catch(d){b=null}return b}function a(a){var c;
a.button?(c=b(a.x,a.y),c&&(0<c.compareEndPoints("StartToStart",g)?c.setEndPoint("StartToStart",g):c.setEndPoint("EndToEnd",g),c.select())):d()}function d(){var c=h.selection?h.selection.createRange():tinyMCE.activeEditor.getBody().createTextRange();g&&!c.item&&0===c.compareEndPoints("StartToEnd",c)&&g.select();i.unbind(h,"mouseup",d);i.unbind(h,"mousemove",a);g=f=0}var f,g,c,i=this.dom,h=i.doc,j=h.body;h.documentElement.unselectable=!0;i.bind(h,["mousedown","contextmenu"],function(o){if("HTML"===
o.target.nodeName&&!(f&&d(),c=h.documentElement,c.scrollHeight>c.clientHeight))f=1,(g=b(o.x,o.y))&&(i.bind(h,"mouseup",d),i.bind(h,"mousemove",a),i.win.focus(),g.select())})}})})(tinymce);
(function(d){d.dom.Serializer=function(k,j,h){var b,a,e,f=(d.isIE,d.each);return k.apply_source_formatting||(k.indent=!1),j=j||d.DOM,h=h||new d.html.Schema(k),k.entity_encoding=k.entity_encoding||"named",k.remove_trailing_brs=!("remove_trailing_brs"in k)||k.remove_trailing_brs,b=new d.util.Dispatcher(self),a=new d.util.Dispatcher(self),e=new d.html.DomParser(k,h),e.addAttributeFilter("src,href,style",function(a,c){for(var b,d,e=a.length,f="data-mce-"+c,h=k.url_converter,l=k.url_converter_scope;e--;)b=
a[e],d=b.attributes.map[f],void 0!==d?(b.attr(c,0<d.length?d:null),b.attr(f,null)):(d=b.attributes.map[c],"style"===c?d=j.serializeStyle(j.parseStyle(d),b.name):h&&(d=h.call(l,d,c,b.name)),b.attr(c,0<d.length?d:null))}),e.addAttributeFilter("class",function(a){for(var c,b,d=a.length;d--;)c=a[d],b=c.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),c.attr("class",0<b.length?b:null)}),e.addAttributeFilter("data-mce-type",function(a,c,b){for(var d=a.length;d--;)c=a[d],"bookmark"!==c.attributes.map["data-mce-type"]||
b.cleanup||c.remove()}),e.addNodeFilter("script,style",function(a,c){function b(a){return a.replace(/(<\!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<\!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<\!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<\!--|\/\*\s*<\!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\>)?|\s*\/\/\s*\]\]>(--\>)?|\/\/\s*(--\>)?|\]\]>|\/\*\s*--\>\s*\*\/|\s*--\>\s*)\s*$/g,"")}for(var d,e,f=a.length;f--;)d=a[f],e=d.firstChild?d.firstChild.value:"",
"script"===c?(d.attr("type",(d.attr("type")||"text/javascript").replace(/^mce\-/,"")),0<e.length&&(d.firstChild.value="// <![CDATA[\n"+b(e)+"\n// ]]\>")):0<e.length&&(d.firstChild.value="<\!--\n"+b(e)+"\n--\>")}),e.addNodeFilter("#comment",function(a){for(var c,b=a.length;b--;)c=a[b],0===c.value.indexOf("[CDATA[")?(c.name="#cdata",c.type=4,c.value=c.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===c.value.indexOf("mce:protected ")&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(c.value).substr(14))}),
e.addNodeFilter("xml:namespace,input",function(a,c){for(var b,d=a.length;d--;)b=a[d],7===b.type?b.remove():1===b.type&&("input"!==c||"type"in b.attributes.map||b.attr("type","text"))}),k.fix_list_elements&&e.addNodeFilter("ul,ol",function(a){for(var c,b,d=a.length;d--;)c=a[d],b=c.parent,"ul"!==b.name&&"ol"!==b.name||c.prev&&"li"===c.prev.name&&c.prev.append(c)}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,c){for(var b=a.length;b--;)a[b].attr(c,null)}),{schema:h,addNodeFilter:e.addNodeFilter,
addAttributeFilter:e.addAttributeFilter,onPreProcess:b,onPostProcess:a,serialize:function(g,c){var i,m,q,o;return g=g.cloneNode(!0),i=g.ownerDocument.implementation,i.createHTMLDocument&&(m=i.createHTMLDocument(""),f("BODY"==g.nodeName?g.childNodes:[g],function(a){m.body.appendChild(m.importNode(a,!0))}),g="BODY"!=g.nodeName?m.body.firstChild:m.body,q=j.doc,j.doc=m),c=c||{},c.format=c.format||"html",c.no_events||(c.node=g,b.dispatch(self,c)),o=new d.html.Serializer(k,h),c.content=o.serialize(e.parse(c.getInner?
g.innerHTML:d.trim(j.getOuterHTML(g),c),c)),c.cleanup||(c.content=c.content.replace(/\uFEFF|\u200B/g,"")),c.no_events||a.dispatch(self,c),q&&(j.doc=q),c.node=null,c.content},addRules:function(a){h.addValidElements(a)},setRules:function(a){h.setValidElements(a)}}}})(tinymce);
(function(d){d.dom.ScriptLoader=function(){var k={},j=[],h={},b=[],a=0;this.isDone=function(a){return 2==k[a]};this.markDone=function(a){k[a]=2};this.add=this.load=function(a,b,d){void 0==k[a]&&(j.push(a),k[a]=0);b&&(h[a]||(h[a]=[]),h[a].push({func:b,scope:d||this}))};this.loadQueue=function(a,b){this.loadScripts(j,a,b)};this.loadScripts=function(e,f,g){function c(a){d.each(h[a],function(a){a.func.call(a.scope)});h[a]=void 0}var i;b.push({func:f,scope:g||this});(i=function(){var f=d.grep(e);e.length=
0;d.each(f,function(b){var e;if(2==k[b])e=void c(b);else{if(1!=k[b]){k[b]=1;a++;var f=function(){t.remove(m);g&&(g.onreadystatechange=g.onload=g=null);k[b]=2;a--;c(b);i()};e=function(){AJS.log("Failed to load: "+b)};var g,h,j,m,t=d.DOM;m=t.uniqueId();d.isIE6&&(h=new d.util.URI(b),j=location,h.host==j.hostname&&h.port==j.port&&h.protocol+":"==j.protocol&&"file"!=h.protocol.toLowerCase())?d.util.XHR.send({url:d._addVer(h.getURI()),success:function(a){var c=t.create("script",{type:"text/javascript"});
c.text=a;document.getElementsByTagName("head")[0].appendChild(c);t.remove(c);f()},error:e}):(g=t.create("script",{id:m,type:"text/javascript",src:d._addVer(b)}),d.isIE||(g.onload=f),g.onerror=e,d.isOpera||(g.onreadystatechange=function(){var a=g.readyState;"complete"!=a&&"loaded"!=a||f()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(g))}e=void 0}return e});a||(d.each(b,function(a){a.func.call(a.scope)}),b.length=0)})()}};d.ScriptLoader=new d.dom.ScriptLoader})(tinymce);
tinymce.dom.TreeWalker=function(d,k){function j(b,a,d,f){if(b){if(!f&&b[a])return b[a];if(b!=k){if(a=b[d])return a;for(b=b.parentNode;b&&b!=k;b=b.parentNode)if(a=b[d])return a}}}var h=d;this.current=function(){return h};this.next=function(b){return h=j(h,"firstChild","nextSibling",b)};this.prev=function(b){return h=j(h,"lastChild","previousSibling",b)}};
(function(d){d.dom.RangeUtils=function(k){this.walk=function(j,h){function b(a){var c;return c=a[0],3===c.nodeType&&c===o&&r>=c.nodeValue.length&&a.splice(0,1),c=a[a.length-1],0===p&&0<a.length&&c===l&&3===c.nodeType&&a.splice(a.length-1,1),a}function a(a,c,b){for(var d=[];a&&a!=b;a=a[c])d.push(a);return d}function e(a,c){do{if(a.parentNode==c)return a;a=a.parentNode}while(a)}function f(c,d,e){var f=e?"nextSibling":"previousSibling";i=c;for(m=i.parentNode;i&&i!=d;i=m)m=i.parentNode,q=a(i==c?i:i[f],
f),q.length&&(e||q.reverse(),h(b(q)))}var g,c,i,m,q,o=j.startContainer,r=j.startOffset,l=j.endContainer,p=j.endOffset;if(c=k.select("td.mceSelected,th.mceSelected"),0<c.length)return void d.each(c,function(a){h([a])});if(1==o.nodeType&&o.hasChildNodes()&&(o=o.childNodes[r]),1==l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[Math.min(p-1,l.childNodes.length-1)]),o==l)return h(b([o]));g=k.findCommonAncestor(o,l);for(i=o;i;i=i.parentNode){if(i===l)return f(o,g,!0);if(i===g)break}for(i=l;i;i=i.parentNode){if(i===
o)return f(l,g);if(i===g)break}c=e(o,g)||o;g=e(l,g)||l;f(o,c,!0);q=a(c==o?c:c.nextSibling,"nextSibling",g==l?g.nextSibling:g);q.length&&h(b(q));f(l,g)};this.split=function(d){var h=d.startContainer,b=d.startOffset,a=d.endContainer,d=d.endOffset;return h==a&&3==h.nodeType?0<b&&b<h.nodeValue.length&&(a=h.splitText(b),h=a.previousSibling,d>b?(d-=b,h=a=a.splitText(d).previousSibling,d=a.nodeValue.length,b=0):d=0):(3==h.nodeType&&0<b&&b<h.nodeValue.length&&(h=h.splitText(b),b=0),3==a.nodeType&&0<d&&d<
a.nodeValue.length&&(a=a.splitText(d).previousSibling,d=a.nodeValue.length)),{startContainer:h,startOffset:b,endContainer:a,endOffset:d}}};d.dom.RangeUtils.compareRanges=function(d,j){if(d&&j){if(!d.item&&!d.duplicate)return d.startContainer==j.startContainer&&d.startOffset==j.startOffset;if(d.item&&j.item&&d.item(0)===j.item(0)||d.isEqual&&j.isEqual&&j.isEqual(d))return!0}return!1}})(tinymce);
(function(d){var k=d.dom.Event,j=d.each;d.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(h,b){var a,e,f,g,c,i=this,m=h.root,q=h.items,o=h.enableUpDown,r=h.enableLeftRight||!h.enableUpDown,l=h.excludeFromTabOrder,b=b||d.DOM;a=function(a){c=a.target.id};e=function(a){b.setAttrib(a.target.id,"tabindex","-1")};g=function(){var a=b.get(c);b.setAttrib(a,"tabindex","0");a.focus()};i.focus=function(){b.get(c).focus()};i.destroy=function(){j(q,function(c){b.unbind(b.get(c.id),"focus",
a);b.unbind(b.get(c.id),"blur",e)});b.unbind(b.get(m),"focus",g);b.unbind(b.get(m),"keydown",f);q=b=m=i.focus=a=e=f=g=null;i.destroy=function(){}};i.moveFocus=function(a,d){var e,f=-1;i.controls;c&&(j(q,function(a,b){if(a.id===c)return f=b,!1}),f+=a,0>f?f=q.length-1:f>=q.length&&(f=0),e=q[f],b.setAttrib(c,"tabindex","-1"),b.setAttrib(e.id,"tabindex","0"),b.get(e.id).focus(),h.actOnFocus&&h.onAction(e.id),d&&k.cancel(d))};f=function(a){switch(a.keyCode){case 37:r&&i.moveFocus(-1);break;case 39:r&&
i.moveFocus(1);break;case 38:o&&i.moveFocus(-1);break;case 40:o&&i.moveFocus(1);break;case 27:h.onCancel&&(h.onCancel(),k.cancel(a));break;case 14:case 13:case 32:h.onAction&&(h.onAction(c),k.cancel(a))}};j(q,function(c,d){var f;c.id||(c.id=b.uniqueId("_mce_item_"));l?(b.bind(c.id,"blur",e),f="-1"):f=0===d?"0":"-1";b.setAttrib(c.id,"tabindex",f);b.bind(b.get(c.id),"focus",a)});q[0]&&(c=q[0].id);b.setAttrib(m,"tabindex","-1");b.bind(b.get(m),"focus",g);b.bind(b.get(m),"keydown",f)}})})(tinymce);
(function(d){var k=d.DOM,j=d.is;d.create("tinymce.ui.Control",{Control:function(h,b,a){this.id=h;this.settings=b=b||{};this.rendered=!1;this.onRender=new d.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.active=this.disabled=0;this.editor=a},setAriaProperty:function(d,b){var a=k.get(this.id+"_aria")||k.get(this.id);a&&k.setAttrib(a,"aria-"+d,!!b)},focus:function(){k.get(this.id).focus()},setDisabled:function(d){d!=this.disabled&&(this.setAriaProperty("disabled",d),this.setState("Disabled",
d),this.setState("Enabled",!d),this.disabled=d)},isDisabled:function(){return this.disabled},setActive:function(d){d!=this.active&&(this.setState("Active",d),this.active=d,this.setAriaProperty("pressed",d))},isActive:function(){return this.active},setState:function(d,b){var a=k.get(this.id),d=this.classPrefix+d;b?k.addClass(a,d):k.removeClass(a,d)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){k.setHTML(d,this.renderHTML())},postRender:function(){var d;j(this.disabled)&&
(d=this.disabled,this.disabled=-1,this.setDisabled(d));j(this.active)&&(d=this.active,this.active=-1,this.setActive(d))},remove:function(){k.remove(this.id);this.destroy()},destroy:function(){d.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(d,k,j){this.parent(d,k,j);this.controls=[];this.lookup={}},add:function(d){return this.lookup[d.id]=d,this.controls.push(d),d},get:function(d){return this.lookup[d]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(d,k){this.parent(d,k);this.classPrefix="mceSeparator";this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
(function(d){var k=d.is;d.DOM;d.each;d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(d,h){this.parent(d,h);this.classPrefix="mceMenuItem"},setSelected:function(d){this.setState("Selected",d);this.setAriaProperty("checked",!!d);this.selected=d},isSelected:function(){return this.selected},postRender:function(){this.parent();k(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(d){var k=(d.is,d.DOM),j=(d.each,d.walk);d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,b){this.parent(h,b);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new d.util.Dispatcher(this)},expand:function(d){d&&j(this,function(b){b.expand&&b.expand()},"items",this);this.collapsed=!1},collapse:function(d){d&&j(this,function(b){b.collapse&&b.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(h){return h.settings||
(h=new d.ui.MenuItem(h.id||k.uniqueId(),h)),this.onAddItem.dispatch(this,h),this.items[h.id]=h},addSeparator:function(){return this.add({separator:!0})},addMenu:function(d){return d.collapse||(d=this.createMenu(d)),this.menuCount++,this.add(d)},hasMenus:function(){return 0!==this.menuCount},remove:function(d){delete this.items[d.id]},removeAll:function(){j(this,function(d){d.removeAll?d.removeAll():d.remove();d.destroy()},"items",this);this.items={}},createMenu:function(h){h=new d.ui.Menu(h.id||k.uniqueId(),
h);return h.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),h}})})(tinymce);
(function(d){var k=d.is,j=d.DOM,h=d.each,b=d.dom.Event,a=d.dom.Element;d.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||j.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;k(b.icons)&&!b.icons&&(b["class"]+=" mceNoIcons");this.parent(a,b);this.onShowMenu=new d.util.Dispatcher(this);this.onHideMenu=new d.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var b,
g=this.settings;return a.container=a.container||g.container,a.parent=this,a.constrain=a.constrain||g.constrain,a["class"]=a["class"]||g["class"],a.vp_offset_x=a.vp_offset_x||g.vp_offset_x,a.vp_offset_y=a.vp_offset_y||g.vp_offset_y,a.keyboard_focus=g.keyboard_focus,b=new d.ui.DropMenu(a.id||j.uniqueId(),a),b.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),b},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var a,b,d=this.settings,c=j.get("menu_"+this.id+"_tbl"),
i=j.get("menu_"+this.id+"_co");a=d.max_width?Math.min(c.clientWidth,d.max_width):c.clientWidth;b=d.max_height?Math.min(c.clientHeight,d.max_height):c.clientHeight;j.boxModel?this.element.setStyles({width:a,height:b}):this.element.setStyles({width:a+2,height:b+2});d.max_width&&j.setStyle(i,"width",a);d.max_height&&(j.setStyle(i,"height",b),c.clientHeight<d.max_height&&j.setStyle(i,"overflow","hidden"))},showMenu:function(e,f,g){var c,i,k,q,o,r,l=this,p=l.settings,s=j.getViewPort(),v=l.classPrefix;
l.collapse(1);l.isMenuVisible||(l.rendered?c=j.get("menu_"+l.id):(c=j.add(l.settings.container,l.renderNode()),h(l.items,function(a){a.postRender()}),l.element=new a("menu_"+l.id,{blocker:1,container:p.container})),d.isOpera||j.setStyles(c,{left:-65535,top:-65535}),j.show(c),l.update(),e+=p.offset_x||0,f+=p.offset_y||0,s.w-=4,s.h-=4,p.constrain&&(i=c.clientWidth-2,k=c.clientHeight-2,q=s.x+s.w,o=s.y+s.h,e+p.vp_offset_x+i>q&&(e=g?g-i:Math.max(0,q-p.vp_offset_x-i)),f+p.vp_offset_y+k>o&&(f=Math.max(0,
o-p.vp_offset_y-k))),j.setStyles(c,{left:e,top:f}),l.element.update(),l.isMenuVisible=1,l.mouseClickFunc=b.add(c,"click",function(a){var c;if(a=a.target,a&&(a=j.getParent(a,"tr"))&&!j.hasClass(a,v+"ItemSub"))if(!(c=l.items[a.id],c.isDisabled())){for(r=l;r;)r.hideMenu&&r.hideMenu(),r=r.settings.parent;return c.settings.onclick&&c.settings.onclick(a),b.cancel(a)}}),l.hasMenus()&&(l.mouseOverFunc=b.add(c,"mouseover",function(a){var c,b;if(a=a.target,a&&(a=j.getParent(a,"tr")))if(!(c=l.items[a.id],l.lastMenu&&
l.lastMenu.collapse(1),c.isDisabled()))a&&j.hasClass(a,v+"ItemSub")&&(b=j.getRect(a),c.showMenu(b.x+b.w-2,b.y-2,b.x),l.lastMenu=c,j.addClass(j.get(c.id).firstChild,v+"ItemActive"))})),b.add(c,"keydown",l._keyHandler,l),l.onShowMenu.dispatch(l),p.keyboard_focus&&l._setupKeyboardNav())},hideMenu:function(a){var d,g=j.get("menu_"+this.id);this.isMenuVisible&&(this.keyboardNav&&this.keyboardNav.destroy(),b.remove(g,"mouseover",this.mouseOverFunc),b.remove(g,"click",this.mouseClickFunc),b.remove(g,"keydown",
this._keyHandler),j.hide(g),this.isMenuVisible=0,a||this.collapse(1),this.element&&this.element.hide(),(d=j.get(this.id))&&j.removeClass(d.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this))},add:function(a){var b;return a=this.parent(a),this.isRendered&&(b=j.get("menu_"+this.id))&&this._add(j.select("tbody",b)[0],a),a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){return j.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=j.get("menu_"+
this.id);this.keyboardNav&&this.keyboardNav.destroy();b.remove(a,"mouseover",this.mouseOverFunc);b.remove(j.select("a",a),"focus",this.mouseOverFunc);b.remove(a,"click",this.mouseClickFunc);b.remove(a,"keydown",this._keyHandler);this.element&&this.element.remove();j.remove(a)},renderNode:function(){var b,d,g,c,i=this,k=i.settings;return c=j.create("div",{role:"listbox",id:"menu_"+i.id,"class":k["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),i.settings.parent&&j.setAttrib(c,
"aria-parent","menu_"+i.settings.parent.id),g=j.add(c,"div",{role:"presentation",id:"menu_"+i.id+"_co","class":i.classPrefix+(k["class"]?" "+k["class"]:"")}),i.element=new a("menu_"+i.id,{blocker:1,container:k.container}),k.menu_line&&j.add(g,"span",{"class":i.classPrefix+"Line"}),b=j.add(g,"table",{role:"presentation",id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),d=j.add(b,"tbody"),h(i.items,function(a){i._add(d,a)}),i.rendered=!0,c},_setupKeyboardNav:function(){var a,b,g=this;a=
j.get("menu_"+g.id);b=j.select("a[role=option]","menu_"+g.id);b.splice(0,0,a);g.keyboardNav=new d.ui.KeyboardNavigation({root:"menu_"+g.id,items:b,onCancel:function(){g.hideMenu()},enableUpDown:!0});a.focus()},_keyHandler:function(a){switch(a.keyCode){case 37:this.settings.parent&&(this.hideMenu(),this.settings.parent.focus(),b.cancel(a));break;case 39:this.mouseOverFunc&&this.mouseOverFunc(a)}},_add:function(a,b){var d,c,i,h,k,o=b.settings,r=this.classPrefix;return o.separator?(i=j.add(a,"tr",{id:b.id,
"class":r+"ItemSeparator"}),j.add(i,"td",{"class":r+"ItemSeparator"}),void((d=i.previousSibling)&&j.addClass(d,"mceLast"))):(d=i=j.add(a,"tr",{id:b.id,"class":r+"Item "+r+"ItemEnabled"}),d=h=j.add(d,o.titleItem?"th":"td"),d=c=j.add(d,"a",{id:b.id+"_aria",role:o.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),o.parent&&(j.setAttrib(c,"aria-haspopup","true"),j.setAttrib(c,"aria-owns","menu_"+b.id)),j.addClass(h,o["class"]),k=j.add(d,"span",
{"class":"mceIcon"+(o.icon?" mce_"+o.icon:"")}),o.icon_src&&j.add(k,"img",{src:o.icon_src}),d=j.add(d,o.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&j.setAttrib(d,"style",b.settings.style),1==a.childNodes.length&&j.addClass(i,"mceFirst"),(d=i.previousSibling)&&j.hasClass(d,r+"ItemSeparator")&&j.addClass(i,"mceFirst"),b.collapse&&j.addClass(i,r+"ItemSub"),(d=i.previousSibling)&&j.removeClass(d,"mceLast"),void j.addClass(i,"mceLast"))}})})(tinymce);
(function(d){var k=d.DOM;d.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(d,h,b){this.parent(d,h,b);this.classPrefix="mceButton"},renderHTML:function(){var d,h,b=this.classPrefix,a=this.settings;return h=k.encode(a.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+b+" "+b+"Enabled "+a["class"]+(h?" "+b+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+k.encode(a.title)+'">',d+=!a.image||this.editor&&
this.editor.forcedHighContrastMode?'<span class="mceIcon '+a["class"]+'"></span>'+(h?'<span class="'+b+'Label">'+h+"</span>":""):'<img class="mceIcon" src="'+a.image+'" alt="'+k.encode(a.title)+'" />'+h,d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+a.title+"</span>",d+"</a>"},postRender:function(){var j,h=this,b=h.settings;d.isIE&&h.editor&&d.dom.Event.add(h.id,"mousedown",function(){j="IMG"===h.editor.selection.getNode().nodeName?h.editor.selection.getBookmark():
null});d.dom.Event.add(h.id,"click",function(a){if(!h.isDisabled())return d.isIE&&h.editor&&null!==j&&h.editor.selection.moveToBookmark(j),b.onclick.call(b.scope,a)});d.dom.Event.add(h.id,"keyup",function(a){if(!h.isDisabled()&&a.keyCode==d.VK.SPACEBAR)return b.onclick.call(b.scope,a)})}})})(tinymce);
(function(d){var k=d.DOM,j=d.dom.Event,h=d.each,b=d.util.Dispatcher;d.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,e,f){this.parent(a,e,f);this.items=[];this.onChange=new b(this);this.onPostRender=new b(this);this.onAdd=new b(this);this.onRenderMenu=new d.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var b,d,g=this;return void 0==a?g.selectByIndex(-1):(d=a&&"function"==typeof a?a:function(c){return c==a},void(a!=g.selectedValue&&(h(g.items,function(a,
i){if(d(a.value))return b=1,g.selectByIndex(i),!1}),b||g.selectByIndex(-1))))},selectByIndex:function(a){var b,d,g;a!=this.selectedIndex&&(b=k.get(this.id+"_text"),g=k.get(this.id+"_voiceDesc"),d=this.items[a],d?(this.selectedValue=d.value,this.selectedIndex=a,k.setHTML(b,k.encode(d.title)),k.setHTML(g,this.settings.title+" - "+d.title),k.removeClass(b,"mceTitle"),k.setAttrib(this.id,"aria-valuenow",d.title)):(k.setHTML(b,k.encode(this.settings.title)),k.setHTML(g,k.encode(this.settings.title)),k.addClass(b,
"mceTitle"),this.selectedValue=this.selectedIndex=null,k.setAttrib(this.id,"aria-valuenow",this.settings.title)))},add:function(a,b,f){f=f||{};f=d.extend(f,{title:a,value:b});this.items.push(f);this.onAdd.dispatch(this,f)},getLength:function(){return this.items.length},renderHTML:function(){var a="",b=this.settings,d=this.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+this.id+'_voiceDesc" aria-describedby="'+this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+
this.id+'" cellpadding="0" cellspacing="0" class="'+d+" "+d+"Enabled"+(b["class"]?" "+b["class"]:"")+'"><tbody><tr>',a+="<td>"+k.createHTML("span",{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title),a+=k.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},k.encode(this.settings.title))+"</td>",a+="<td>"+k.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",
onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+"</tr></tbody></table></span>"},showMenu:function(){var a,b,f=this,g=k.get(this.id);if(!f.isDisabled()&&0!=f.items.length){if(f.menu&&f.menu.isMenuVisible)return f.hideMenu();f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0);a=k.getPos(g);b=f.menu;b.settings.offset_x=a.x;b.settings.offset_y=a.y;b.settings.keyboard_focus=!d.isOpera;f.oldID&&
b.items[f.oldID].setSelected(0);h(f.items,function(a){a.value===f.selectedValue&&(b.items[a.id].setSelected(1),f.oldID=a.id)});b.showMenu(0,g.clientHeight);j.add(k.doc,"mousedown",f.hideMenu,f);k.addClass(f.id,f.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible&&!(k.removeClass(this.id,this.classPrefix+"Selected"),a&&"mousedown"==a.type&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open")))a&&k.getParent(a.target,".mceMenu")||(k.removeClass(this.id,this.classPrefix+
"Selected"),j.remove(k.doc,"mousedown",this.hideMenu,this),this.menu.hideMenu())},renderMenu:function(){var a,b=this;a=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,"class":b.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});a.onHideMenu.add(function(){b.hideMenu();b.focus()});a.add({title:b.settings.title,"class":"mceMenuItemTitle",onclick:function(){!1!==b.settings.onselect("")&&b.select("")}});h(b.items,function(d){void 0===d.value?a.add({title:d.title,role:"option",
"class":"mceMenuItemTitle",onclick:function(){!1!==b.settings.onselect("")&&b.select("")}}):(d.id=k.uniqueId(),d.role="option",d.onclick=function(){!1!==b.settings.onselect(d.value)&&b.select(d.value)},a.add(d))});b.onRenderMenu.dispatch(b,a);b.menu=a},postRender:function(){var a=this,b=a.classPrefix;j.add(a.id,"click",a.showMenu,a);j.add(a.id,"keydown",function(b){32==b.keyCode&&(a.showMenu(b),j.cancel(b))});j.add(a.id,"focus",function(){a._focused||(a.keyDownHandler=j.add(a.id,"keydown",function(b){40==
b.keyCode&&(a.showMenu(),j.cancel(b))}),a.keyPressHandler=j.add(a.id,"keypress",function(b){var d;13==b.keyCode&&(d=a.selectedValue,a.selectedValue=null,j.cancel(b),a.settings.onselect(d))}));a._focused=1});j.add(a.id,"blur",function(){j.remove(a.id,"keydown",a.keyDownHandler);j.remove(a.id,"keypress",a.keyPressHandler);a._focused=0});!d.isIE6&&k.boxModel||(j.add(a.id,"mouseover",function(){k.hasClass(a.id,b+"Disabled")||k.addClass(a.id,b+"Hover")}),j.add(a.id,"mouseout",function(){k.hasClass(a.id,
b+"Disabled")||k.removeClass(a.id,b+"Hover")}));a.onPostRender.dispatch(a,k.get(a.id))},destroy:function(){this.parent();j.clear(this.id+"_text");j.clear(this.id+"_open")}})})(tinymce);
(function(d){var k=d.DOM,j=d.dom.Event,h=d.each;d.util.Dispatcher;d.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(b,a){this.parent(b,a);this.classPrefix="mceNativeListBox"},setDisabled:function(b){k.get(this.id).disabled=b;this.setAriaProperty("disabled",b)},isDisabled:function(){return k.get(this.id).disabled},select:function(b){var a,d,f=this;return void 0==b?f.selectByIndex(-1):(d=b&&"function"==typeof b?b:function(a){return a==b},void(b!=f.selectedValue&&(h(f.items,
function(b,c){if(d(b.value))return a=1,f.selectByIndex(c),!1}),a||f.selectByIndex(-1))))},selectByIndex:function(b){k.get(this.id).selectedIndex=b+1;this.selectedValue=this.items[b]?this.items[b].value:null},add:function(b,a,d){d=d||{};d.value=a;this.isRendered()&&k.add(k.get(this.id),"option",d,b);b={title:b,value:a,attribs:d};this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var b;return b=k.createHTML("option",{value:""},"-- "+
this.settings.title+" --"),h(this.items,function(a){b+=k.createHTML("option",{value:a.value},a.title)}),b=k.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},b),b+=k.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title)},postRender:function(){function b(b){(b=a.items[b.target.selectedIndex-1])&&(b=b.value)&&(a.onChange.dispatch(a,b),a.settings.onselect&&a.settings.onselect(b))}var a=this,e=!0;a.rendered=!0;j.add(a.id,"change",
b);j.add(a.id,"keydown",function(f){var g;return j.remove(a.id,"change",void 0),e=!1,g=j.add(a.id,"blur",function(){e||(e=!0,j.add(a.id,"change",b),j.remove(a.id,"blur",g))}),!d.isWebKit||37!=f.keyCode&&39!=f.keyCode?13==f.keyCode||32==f.keyCode?(b(f),j.cancel(f)):void 0:j.prevent(f)});a.onPostRender.dispatch(a,k.get(a.id))}})})(tinymce);
(function(d){var k=d.DOM,j=d.dom.Event;d.each;d.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(h,b,a){this.parent(h,b,a);this.onRenderMenu=new d.util.Dispatcher(this);b.menu_container=b.menu_container||k.doc.body},showMenu:function(){var d,b,a=k.get(this.id);if(!this.isDisabled()){if(this.isMenuRendered||(this.renderMenu(),this.isMenuRendered=!0),this.isMenuVisible)return this.hideMenu();k.getPos(this.settings.menu_container);d=k.getPos(a);b=this.menu;b.settings.offset_x=d.x;
b.settings.offset_y=d.y;b.settings.vp_offset_x=d.x;b.settings.vp_offset_y=d.y;b.settings.keyboard_focus=this._focused;b.showMenu(0,a.clientHeight);j.add(k.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var d,b=this;d=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:b.settings.icons});d.onHideMenu.add(function(){b.hideMenu();b.focus()});b.onRenderMenu.dispatch(b,d);b.menu=d},hideMenu:function(d){var b=
this;d&&"mousedown"==d.type&&k.getParent(d.target,function(a){return a.id===b.id||a.id===b.id+"_open"})||(d&&k.getParent(d.target,".mceMenu")||(b.setState("Selected",0),j.remove(k.doc,"mousedown",b.hideMenu,b),b.menu&&b.menu.hideMenu()),b.isMenuVisible=0)},postRender:function(){var d=this,b=d.settings;j.add(d.id,"click",function(){d.isDisabled()||(b.onclick&&b.onclick(d.value),d.showMenu())})}})})(tinymce);
(function(d){var k=d.DOM,j=d.dom.Event;d.each;d.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(d,b,a){this.parent(d,b,a);this.classPrefix="mceSplitButton"},renderHTML:function(){var d,b,a=this.settings;return d="<tbody><tr>",b=a.image?k.createHTML("img ",{src:a.image,role:"presentation","class":"mceAction "+a["class"]}):k.createHTML("span",{"class":"mceAction "+a["class"]},""),b+=k.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},
a.title),d+="<td >"+k.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+a["class"],onclick:"return false;",onmousedown:"return false;",title:a.title},b)+"</td>",b=k.createHTML("span",{"class":"mceOpen "+a["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),d+="<td >"+k.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+a["class"],onclick:"return false;",onmousedown:"return false;",
title:a.title},b)+"</td>",d+="</tr></tbody>",d=k.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+a["class"],cellpadding:"0",cellspacing:"0",title:a.title},d),k.createHTML("div",{id:this.id,role:"button",tabindex:"0","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},d)},postRender:function(){var h,b=this,a=b.settings;a.onclick&&(h=function(d){b.isDisabled()||(a.onclick(b.value),j.cancel(d))},j.add(b.id+"_action","click",h),j.add(b.id,["click","keydown"],
function(a){32!==a.keyCode&&13!==a.keyCode&&14!==a.keyCode||a.altKey||a.ctrlKey||a.metaKey?"click"!==a.type&&40!==a.keyCode||(b.showMenu(),j.cancel(a)):(h(),j.cancel(a))}));j.add(b.id+"_open","click",function(a){b.showMenu();j.cancel(a)});j.add([b.id,b.id+"_open"],"focus",function(){b._focused=1});j.add([b.id,b.id+"_open"],"blur",function(){b._focused=0});!d.isIE6&&k.boxModel||(j.add(b.id,"mouseover",function(){k.hasClass(b.id,"mceSplitButtonDisabled")||k.addClass(b.id,"mceSplitButtonHover")}),j.add(b.id,
"mouseout",function(){k.hasClass(b.id,"mceSplitButtonDisabled")||k.removeClass(b.id,"mceSplitButtonHover")}))},destroy:function(){this.parent();j.clear(this.id+"_action");j.clear(this.id+"_open");j.clear(this.id)}})})(tinymce);
(function(d){var k=d.DOM,j=d.dom.Event,h=d.is,b=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b,f){this.parent(a,b,f);this.settings=b=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new d.util.Dispatcher(this);this.onHideMenu=new d.util.Dispatcher(this);this.value=b.default_color},showMenu:function(){var a,b,d=this;if(!d.isDisabled()){if(d.isMenuRendered||(d.renderMenu(),d.isMenuRendered=!0),d.isMenuVisible)return d.hideMenu();a=k.get(d.id);k.show(d.id+"_menu");k.addClass(a,"mceSplitButtonSelected");b=k.getPos(a);k.setStyles(d.id+"_menu",{left:b.x,top:b.y+a.clientHeight,zIndex:2E5});a=0;j.add(k.doc,"mousedown",d.hideMenu,d);d.onShowMenu.dispatch(d);
d._focused&&(d._keyHandler=j.add(d.id+"_menu","keydown",function(a){27==a.keyCode&&d.hideMenu()}),k.select("a",d.id+"_menu")[0].focus());d.isMenuVisible=1}},hideMenu:function(a){var b=this;if(b.isMenuVisible&&(!a||!("mousedown"==a.type&&k.getParent(a.target,function(a){return a.id===b.id+"_open"}))))a&&k.getParent(a.target,".mceSplitButtonMenu")||(k.removeClass(b.id,"mceSplitButtonSelected"),j.remove(k.doc,"mousedown",b.hideMenu,b),j.remove(b.id+"_menu","keydown",b._keyHandler),k.hide(b.id+"_menu")),
b.isMenuVisible=0,b.onHideMenu.dispatch()},renderMenu:function(){var a,e,f,g,c,i,m=this,q=0,o=m.settings;return c=k.add(o.menu_container,"div",{role:"listbox",id:m.id+"_menu","class":o.menu_class+" "+o["class"],style:"position:absolute;left:0;top:-1000px;"}),a=k.add(c,"div",{"class":o["class"]+" mceSplitButtonMenu"}),k.add(a,"span",{"class":"mceMenuLine"}),e=k.add(a,"table",{role:"presentation","class":"mceColorSplitMenu"}),f=k.add(e,"tbody"),q=0,b(h(o.colors,"array")?o.colors:o.colors.split(","),
function(a){a=a.replace(/^#/,"");q--||(g=k.add(f,"tr"),q=o.grid_width-1);e=k.add(g,"td");var b={href:"javascript:;",style:{backgroundColor:"#"+a},title:m.editor.getLang("colors."+a,a),"data-mce-color":"#"+a};d.isIE||(b.role="option");e=k.add(e,"a",b);m.editor.forcedHighContrastMode&&(e=k.add(e,"canvas",{width:16,height:16,"aria-hidden":"true"}),e.getContext&&(i=e.getContext("2d"))?(i.fillStyle="#"+a,i.fillRect(0,0,16,16)):k.remove(e))}),o.more_colors_func&&(e=k.add(f,"tr"),e=k.add(e,"td",{colspan:o.grid_width,
"class":"mceMoreColors"}),e=k.add(e,"a",{role:"option",id:m.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},o.more_colors_title),j.add(e,"click",function(a){return o.more_colors_func.call(o.more_colors_scope||this),j.cancel(a)})),k.addClass(a,"mceColorSplitMenu"),new d.ui.KeyboardNavigation({root:m.id+"_menu",items:k.select("a",m.id+"_menu"),onCancel:function(){m.hideMenu();m.focus()}}),j.add(m.id+"_menu","mousedown",function(a){return j.cancel(a)}),j.add(m.id+"_menu",
"click",function(a){var b;return a=k.getParent(a.target,"a",f),a&&"a"==a.nodeName.toLowerCase()&&(b=a.getAttribute("data-mce-color"))&&m.setColor(b),j.cancel(a)}),c},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){k.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();k.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});k.setStyle(this.id+"_preview","backgroundColor",
this.value)},destroy:function(){this.parent();j.clear(this.id+"_menu");j.clear(this.id+"_more");k.remove(this.id+"_menu")}})})(tinymce);
(function(d){var k=d.DOM,j=d.each,h=d.dom.Event;d.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var b=[],a=this.controls,e=d.each,f=this.settings;return b.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">'),b.push("<span role='application'>"),b.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+k.encode(f.name)+"</span>"),e(a,function(a){b.push(a.renderHTML())}),b.push("</span>"),b.push("</div>"),b.join("")},
focus:function(){k.get(this.id).focus()},postRender:function(){var b=this,a=[];j(b.controls,function(b){j(b.controls,function(b){b.id&&a.push(b)})});b.keyNav=new d.ui.KeyboardNavigation({root:b.id,items:a,onCancel:function(){d.isWebKit&&k.get(b.editor.id+"_ifr").focus();b.editor.focus()},excludeFromTabOrder:!b.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();h.clear(this.id)}})})(tinymce);
(function(d){var k=d.DOM;d.each;d.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var d,h,b,a,e,f,g="",c=this.settings;f=this.controls;for(b=0;b<f.length;b++)h=f[b],a=f[b-1],e=f[b+1],0===b&&(d="mceToolbarStart",h.Button?d+=" mceToolbarStartButton":h.SplitButton?d+=" mceToolbarStartSplitButton":h.ListBox&&(d+=" mceToolbarStartListBox"),g+=k.createHTML("td",{"class":d},k.createHTML("span",null,"<\!-- IE --\>"))),a&&h.ListBox&&(a.Button||a.SplitButton)&&(g+=k.createHTML("td",
{"class":"mceToolbarEnd"},k.createHTML("span",null,"<\!-- IE --\>"))),g+=k.stdMode?'<td style="position: relative">'+h.renderHTML()+"</td>":"<td>"+h.renderHTML()+"</td>",e&&h.ListBox&&(e.Button||e.SplitButton)&&(g+=k.createHTML("td",{"class":"mceToolbarStart"},k.createHTML("span",null,"<\!-- IE --\>")));return d="mceToolbarEnd",h.Button?d+=" mceToolbarEndButton":h.SplitButton?d+=" mceToolbarEndSplitButton":h.ListBox&&(d+=" mceToolbarEndListBox"),g+=k.createHTML("td",{"class":d},k.createHTML("span",
null,"<\!-- IE --\>")),k.createHTML("table",{id:this.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+g+"</tr></tbody>")}})})(tinymce);
(function(d){var k=d.util.Dispatcher;d.each;d.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new k(this)},get:function(d){return this.lookup[d]?this.lookup[d].instance:void 0},dependencies:function(d){var h;return this.lookup[d]&&(h=this.lookup[d].dependencies),h||[]},requireLangPack:function(k){var h=d.settings;h&&h.language&&!1!==h.language_load&&d.ScriptLoader.add(this.urls[k]+"/langs/"+h.language+".js")},add:function(d,h,b){return this.items.push(h),
this.lookup[d]={instance:h,dependencies:b},this.onAdd.dispatch(this,d,h),h},createUrl:function(d,h){return"object"==typeof h?h:{prefix:d.prefix,resource:h,suffix:d.suffix}},addComponents:function(k,h){var b=this.urls[k];d.each(h,function(a){d.ScriptLoader.add(b+"/"+a)})},load:function(k,h,b,a){function e(){var c=f.dependencies(k);d.each(c,function(a){a=f.createUrl(h,a);f.load(a.resource,a,void 0,void 0)});b&&(a?b.call(a):b.call(d.ScriptLoader))}var f=this,g=h;f.urls[k]||("object"==typeof h&&(g=h.prefix+
h.resource+h.suffix),0!=g.indexOf("/")&&-1==g.indexOf("://")&&(g=d.baseURL+"/"+g),f.urls[k]=g.substring(0,g.lastIndexOf("/")),d.settings.atlassian||(f.lookup[k]?e():d.ScriptLoader.add(g,e,a)))}});d.PluginManager=new d.AddOnManager;d.ThemeManager=new d.AddOnManager})(tinymce);
(function(d){var k=d.each,j=d.extend,h=d.DOM,b=d.dom.Event,a=(d.ThemeManager,d.PluginManager,d.explode),e=d.util.Dispatcher,f=0;d.documentBaseURL=d.baseURL;AJS.log("tinymce.documentBaseURL = "+d.documentBaseURL);/[\/\\]$/.test(d.documentBaseURL)||(d.documentBaseURL+="/");d.baseURL=(new d.util.URI(d.documentBaseURL)).toAbsolute(d.baseURL);d.baseURI=new d.util.URI(d.baseURL);d.onBeforeUnload=new e(d);b.add(window,"beforeunload",function(a){d.onBeforeUnload.dispatch(d,a)});d.onAddEditor=new e(d);d.onRemoveEditor=
new e(d);d.EditorManager=j(d,{editors:[],i18n:{},activeEditor:null,init:function(e){function c(a,b,c){var e=a[b];if(e)return d.is(e,"string")&&(c=e.replace(/\.\w+$/,""),c=c?d.resolve(c):0,e=d.resolve(e)),e.apply(c||this,Array.prototype.slice.call(arguments,2))}function i(){var b,i;switch(c(e,"onpageload"),e.mode){case "exact":b=e.elements||"";0<b.length&&k(a(b),function(a){h.get(a)?(q=new d.Editor(a,e),r.push(q),q.render(1)):k(document.forms,function(b){k(b.elements,function(b){b.name===a&&(a="mce_editor_"+
f++,h.setAttrib(b,"id",a),q=new d.Editor(a,e),r.push(q),q.render(1))})})});break;case "textareas":case "specific_textareas":k(h.select("textarea"),function(a){e.editor_deselector&&(e.editor_deselector.constructor===RegExp?e.editor_deselector.test(a.className):h.hasClass(a,e.editor_deselector))||e.editor_selector&&!(e.editor_selector.constructor===RegExp?e.editor_selector.test(a.className):h.hasClass(a,e.editor_selector))||(m=h.get(a.name),a.id||m||(a.id=a.name),a.id&&!o.get(a.id)||(a.id=h.uniqueId()),
q=new d.Editor(a.id,e),r.push(q),q.render(1))})}e.oninit&&(b=i=0,k(r,function(a){i++;a.initialized?b++:a.onInit.add(function(){b++;b==i&&c(e,"oninit")});b==i&&c(e,"oninit")}))}var m,q,o=this,r=(d.ScriptLoader,[]),e=j({theme:"simple",language:"en"},e);o.settings=e;e.atlassian?i():b.add(document,"init",i)},get:function(a){return void 0===a?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this.editors;return b[a.id]=a,b.push(a),this._setActive(a),this.onAddEditor.dispatch(this,
a),d.adapter&&d.adapter.patchEditor(a),a},remove:function(a){var b,d=this.editors;if(!d[a.id])return null;delete d[a.id];for(b=0;b<d.length;b++)if(d[b]==a){d.splice(b,1);break}return this.activeEditor==a&&this._setActive(d[0]),a.destroy(),this.onRemoveEditor.dispatch(this,a),a},execCommand:function(a,b,e){function f(){o.destroy();h.detachEvent("onunload",f);h=h.tinyMCE=h.tinymce=null}var h,o=this.get(e);switch(a){case "mceFocus":return o.focus(),!0;case "mceAddEditor":case "mceAddControl":return this.get(e)||
(new d.Editor(e,this.settings)).render(),!0;case "mceAddFrameControl":return h=e.window,h.tinyMCE=tinyMCE,h.tinymce=d,d.DOM.doc=h.document,d.DOM.win=h,o=new d.Editor(e.element_id,e),o.render(),d.isIE&&h.attachEvent("onunload",f),e.page_window=null,!0;case "mceRemoveEditor":case "mceRemoveControl":return o&&o.remove(),!0;case "mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(this.execCommand("mceAddControl",0,e),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(a,b,e)},execInstanceCommand:function(a,
b,d,e){a=this.get(a);return!!a&&a.execCommand(b,d,e)},triggerSave:function(){k(this.editors,function(a){a.save()})},addI18n:function(a,b){var e=this.i18n;d.is(a,"string")?k(b,function(b,c){e[a+"."+c]=b}):k(a,function(a,b){k(a,function(a,c){k(a,function(a,d){"common"===c?e[b+"."+d]=a:e[b+"."+c+"."+d]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);
(function(d){var k=d.DOM,j=d.dom.Event,h=d.extend,b=d.util.Dispatcher,a=d.each,e=d.isGecko,f=d.isIE,g=(d.isWebKit,d.is),c=d.ThemeManager,i=d.PluginManager,m=(d.inArray,d.grep,d.explode),q=d.VK;d.create("tinymce.Editor",{Editor:function(c,e){var f=this;f.id=f.editorId=c;f.execCommands={};f.queryStateCommands={};f.queryValueCommands={};f.isNotDirty=!1;f.plugins={};a("onPreInit onBeforeRenderUI onPostRender onLoad onInit onRemove onActivate onDeactivate onClick onEvent onMouseUp onMouseDown onDblClick onKeyDown onKeyUp onKeyPress onContextMenu onSubmit onReset onPaste onPreProcess onPostProcess onBeforeSetContent onBeforeGetContent onSetContent onGetContent onLoadContent onSaveContent onNodeChange onChange onBeforeExecCommand onExecCommand onUndo onRedo onVisualAid onSetProgressState onSetAttrib".split(" "),
function(a){f[a]=new b(f)});f.settings=e=h({id:c,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:d.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,
doctype:d.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE html>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,
convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:f.convertURL,url_converter_scope:f,ie7_compat:!0},e);f.documentBaseURI=new d.util.URI(e.document_base_url||d.documentBaseURL,{base_uri:tinyMCE.baseURI});f.baseURI=d.baseURI;f.contentCSS=
[];f.execCallback("setup",f)},render:function(){var b=this,e=b.settings,f=b.id,g=d.ScriptLoader;if(e.atlassian||j.domLoaded){tinyMCE.settings=e;if(b.getElement()&&(!d.isIDevice||d.isIOS5))!/TEXTAREA|INPUT/i.test(b.getElement().nodeName)&&e.hidden_input&&k.getParent(f,"form")&&k.insertAfter(k.create("input",{type:"hidden",name:f}),f),d.WindowManager&&(b.windowManager=new d.WindowManager(b)),"xml"==e.encoding&&b.onGetContent.add(function(a,b){b.save&&(b.content=k.encode(b.content))}),e.add_form_submit_trigger&&
b.onSubmit.addToTop(function(){b.initialized&&(b.save(),b.isNotDirty=1)}),e.add_unload_trigger&&(b._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!b.initialized||b.destroyed||b.isHidden()||b.save({format:"raw",no_events:!0})})),d.addUnload(b.destroy,b),e.submit_patch&&b.onBeforeRenderUI.add(function(){var a=b.getElement().form;a&&(a._mceOldSubmit||(a.submit.nodeType||a.submit.length||(b.formElement=a,a._mceOldSubmit=a.submit,a.submit=function(){return d.triggerSave(),b.isNotDirty=1,b.formElement._mceOldSubmit(b.formElement)}),
a=null))}),f=function(){b.removed||b.init()},e.theme&&"-"!=e.theme.charAt(0)&&!c.urls[e.theme]&&c.load(e.theme,"themes/"+e.theme+"/editor_template"+d.suffix+".js"),a(m(e.plugins),function(b){b&&!i.urls[b]&&("-"==b.charAt(0)?(b=b.substr(1,b.length),b=i.dependencies(b),a(b,function(a){a=i.createUrl({prefix:"plugins/",resource:a,suffix:"/editor_plugin"+d.suffix+".js"},a);i.load(a.resource,a)})):"safari"!=b&&i.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+d.suffix+".js"}))}),e.atlassian?
f():g.loadQueue(f);e=void 0}else e=void j.add(document,"init",function(){b.render()});return e},init:function(){function b(c){var e,f=i.get(c),g=i.urls[c]||d.documentBaseURL.replace(/\/$/,"");f&&-1===d.inArray(C,c)&&(a(i.dependencies(c),function(a){b(a)}),e=new f(n,g),n.plugins[c]=e,e.init&&(e.init(n,g),C.push(c)),AJS.log("initPlugin: "+c+" initialised"))}function g(a,b){b&&b.initial||n.execCommand("mceRepaint")}var l,p,j,v,q,n=this,y=n.settings,x=n.getElement(),C=[];if(d.add(n),y.aria_label=y.aria_label||
k.getAttrib(x,"aria-label",n.getLang("aria.rich_text_area")),y.theme&&(y.theme=y.theme.replace(/-/,""),j=c.get(y.theme),n.theme=new j,n.theme.init&&y.init_theme&&n.theme.init(n,c.urls[y.theme]||d.documentBaseURL.replace(/\/$/,""))),a(m(y.plugins.replace(/\-/g,"")),b),!1!==y.popup_css&&(y.popup_css?y.popup_css=n.documentBaseURI.toAbsolute(y.popup_css):y.popup_css=n.baseURI.toAbsolute("themes/"+y.theme+"/skins/"+y.skin+"/dialog.css")),y.popup_css_add&&(y.popup_css+=","+n.documentBaseURI.toAbsolute(y.popup_css_add)),
n.controlManager=new d.ControlManager(n),y.custom_undo_redo&&(n.onBeforeExecCommand.add(function(a,b,c,d,e){"Undo"==b||"Redo"==b||"mceRepaint"==b||e&&e.skip_undo||n.undoManager.beforeChange()}),n.onExecCommand.add(function(a,b,c,d,e){"Undo"==b||"Redo"==b||"mceRepaint"==b||e&&e.skip_undo||n.undoManager.add()})),n.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||n.nodeChanged()}),e&&(n.onUndo.add(g),n.onRedo.add(g),n.onSetContent.add(g)),n.onBeforeRenderUI.dispatch(n,n.controlManager),
y.render_ui&&(l=y.width||x.style.width||x.offsetWidth,p=y.height||x.style.height||x.offsetHeight,n.orgDisplay=x.style.display,q=/^[0-9\.]+(|px)$/i,q.test(""+l)&&(l=Math.max(parseInt(l)+(j.deltaWidth||0),100)),q.test(""+p)&&(p=Math.max(parseInt(p)+(j.deltaHeight||0),100)),j=n.theme.renderUI({targetNode:x,width:l,height:p,deltaWidth:y.delta_width,deltaHeight:y.delta_height}),n.editorContainer=j.editorContainer),y.content_editable)return x=j=null,n.setupContentEditable();document.domain&&location.hostname!=
document.domain&&(d.relaxedDomain=document.domain);k.setStyles(j.sizeContainer||j.editorContainer,{width:l,height:p});y.content_css&&d.each(m(y.content_css),function(a){n.contentCSS.push(n.documentBaseURI.toAbsolute(a))});100>p&&(p=100);n.iframeHTML=y.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';y.ie7_compat?n.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':n.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />';n.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';
for(l=0;l<n.contentCSS.length;l++)n.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+n.contentCSS[l]+'" />';y.contentCssTags&&(n.iframeHTML+=y.contentCssTags);n.contentCSS=[];l=y.body_id||"tinymce";-1!=l.indexOf("=")&&(l=n.getParam("body_id","","hash"),l=l[n.id]||l);q=y.body_class||"";-1!=q.indexOf("=")&&(q=n.getParam("body_class","","hash"),q=q[n.id]||"");n.iframeHTML+='</head><body id="'+l+'" class="mceContentBody aui-theme-default '+q+'" onload="window.parent.tinyMCE.get(\''+n.id+"').onLoad.dispatch();\"><br></body></html>";
d.relaxedDomain&&(f||d.isOpera&&11>parseFloat(opera.version()))&&(v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()');y.iframe_attr=y.iframe_attr||{};y.iframe_attr=h(y.iframe_attr,{id:n.id+"_ifr",src:v||'javascript:""',frameBorder:"0",allowTransparency:"true",title:y.aria_label,style:{width:"100%",height:p,display:"block"}});k.add(j.iframeContainer,"iframe",
y.iframe_attr);n.contentAreaContainer=j.iframeContainer;k.get(j.editorContainer).style.display=n.orgDisplay;k.get(n.id).style.display="none";k.setAttrib(n.id,"aria-hidden",!0);d.relaxedDomain&&v||n.setupIframe();x=j=null},setupIframe:function(){function b(c){a(c.dom.select("a"),function(a){var b=a.parentNode;c.dom.isBlock(b)&&b.lastChild===a&&c.dom.add(b,"br",{"data-mce-bogus":1})})}var c,g=this,i=g.settings;k.get(g.id);c=g.getDoc();f&&d.relaxedDomain||(c.open(),c.write(g.iframeHTML),c.close(),d.relaxedDomain&&
(c.domain=d.relaxedDomain));c=g.getBody();c.disabled=!0;i.readonly||(c.contentEditable=!0);c.disabled=!1;g.schema=new d.html.Schema(i);g.dom=new d.dom.DOMUtils(g.getDoc(),{keep_values:!0,url_converter:g.convertURL,url_converter_scope:g,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:g.schema});g.parser=new d.html.DomParser(i,g.schema);g.settings.allow_html_in_named_anchor||g.parser.addAttributeFilter("name",function(a){for(var b,c,d,e,g=a.length;g--;)if(e=
a[g],"a"===e.name&&e.firstChild){d=e.parent;b=e.lastChild;do c=b.prev,d.insert(b,e),b=c;while(b)}});g.parser.addAttributeFilter("src,href,style",function(a,b){for(var c,d,e,f=a.length,i=g.dom;f--;)c=a[f],d=c.attr(b),e="data-mce-"+b,c.attributes.map[e]||("style"===b?c.attr(e,i.serializeStyle(i.parseStyle(d),c.name)):c.attr(e,g.convertURL(d,b,c.name)))});g.parser.addNodeFilter("script",function(a){for(var b,c=a.length;c--;)b=a[c],b.attr("type","mce-"+(b.attr("type")||"text/javascript"))});g.parser.addNodeFilter("#cdata",
function(a){for(var b,c=a.length;c--;)b=a[c],b.type=8,b.name="#comment",b.value="[CDATA["+b.value+"]]"});g.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(a){var b,c=a.length;for(g.schema.getNonEmptyElements();c--;)b=a[c],b.isEmpty(g.schema)&&(b.empty().append(new d.html.Node("br",1)).shortEnded=!0)});g.serializer=new d.dom.Serializer(i,g.dom,g.schema);g.selection=new d.dom.Selection(g.dom,g.getWin(),g.serializer);g.formatter=new d.Formatter(this);g.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",
styles:{textAlign:"left"}},{selector:"img.confluence-embedded-image",classes:"image-left"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img.confluence-embedded-image",classes:"image-center"},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img.confluence-embedded-image",
classes:"image-right"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"s",
remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},
onformat:function(b,c,d){a(d,function(a,c){g.dom.setAttrib(b,c,a)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){g.formatter.register(a,{block:a,remove:"all"})});g.formatter.register(g.settings.formats);
g.undoManager=new d.UndoManager(g);g.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return g.onChange.dispatch(g,b,a)});g.undoManager.onUndo.add(function(a,b){return g.onUndo.dispatch(g,b,a)});g.undoManager.onRedo.add(function(a,b){return g.onRedo.dispatch(g,b,a)});g.forceBlocks=new d.ForceBlocks(g,{forced_root_block:i.forced_root_block});g.editorCommands=new d.EditorCommands(g);g.serializer.onPreProcess.add(function(a,b){return g.onPreProcess.dispatch(g,b,a)});g.serializer.onPostProcess.add(function(a,
b){return g.onPostProcess.dispatch(g,b,a)});AJS.log("Editor:setupIframe: dispatch onPreInit");g.onPreInit.dispatch(g);i.gecko_spellcheck||(g.getBody().spellcheck=0);i.readonly||g._addEvents();AJS.log("Editor:setupIframe: dispatch controlManager onPostRender");g.controlManager.onPostRender.dispatch(g,g.controlManager);AJS.log("Editor:setupIframe: dispatch onPostRender");g.onPostRender.dispatch(g);g.quirks=new d.util.Quirks(this);i.directionality&&(g.getBody().dir=i.directionality);i.nowrap&&(g.getBody().style.whiteSpace=
"nowrap");i.handle_node_change_callback&&g.onNodeChange.add(function(a,b,c){g.execCallback("handle_node_change_callback",g.id,c,-1,-1,!0,g.selection.isCollapsed())});i.save_callback&&g.onSaveContent.add(function(a,b){var c=g.execCallback("save_callback",g.id,b.content,g.getBody());c&&(b.content=c)});i.onchange_callback&&g.onChange.add(function(a,b){g.execCallback("onchange_callback",g,b)});i.protect&&g.onBeforeSetContent.add(function(b,c){i.protect&&a(i.protect,function(a){c.content=c.content.replace(a,
function(a){return"<\!--mce:protected "+escape(a)+"--\>"})})});i.convert_newlines_to_brs&&g.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))});i.preformatted&&g.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,"");b.content=b.content.replace(/<\/pre>\s*$/,"");b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")});i.verify_css_classes&&(g.serializer.attribValueFilter=function(b,c){var d,e;return"class"==b?(g.classesRE||
(e=g.dom.getClasses(),0<e.length&&(d="",a(e,function(a){d+=(d?"|":"")+a["class"]}),g.classesRE=RegExp("("+d+")","gi"))),!g.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(c)||g.classesRE.test(c)?c:""):c});i.cleanup_callback&&(g.onBeforeSetContent.add(function(a,b){b.content=g.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),g.onPreProcess.add(function(a,b){b.set&&g.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b);b.get&&g.execCallback("cleanup_callback","get_from_editor_dom",
b.node,b)}),g.onPostProcess.add(function(a,b){b.set&&(b.content=g.execCallback("cleanup_callback","insert_to_editor",b.content,b));b.get&&(b.content=g.execCallback("cleanup_callback","get_from_editor",b.content,b))}));i.save_callback&&g.onGetContent.add(function(a,b){b.save&&(b.content=g.execCallback("save_callback",g.id,b.content,g.getBody()))});i.handle_event_callback&&g.onEvent.add(function(a,b,c){!1===g.execCallback("handle_event_callback",b,a,c)&&j.cancel(b)});g.onSetContent.add(function(){g.addVisual(g.getBody())});
i.padd_empty_editor&&g.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});e&&(g.onExecCommand.add(function(a,c){"CreateLink"===c&&b(a)}),g.onSetContent.add(g.selection.onSetContent.add(b)));g.load({initial:!0,format:"html"});g.startContent=g.getContent({format:"raw"});g.undoManager.add();g.initialized=!0;AJS.log("Editor:setupIframe: dispatch onInit");g.onInit.dispatch(g);AJS.log("Editor:setupIframe: Callback setupcontent_callback");
g.execCallback("setupcontent_callback",g.id,g.getBody(),g.getDoc());AJS.log("Editor:setupIframe: Completed setupcontent_callback");AJS.log("Editor:setupIframe: Callback init_instance_callback");g.execCallback("init_instance_callback",g);AJS.log("Editor:setupIframe: Completed init_instance_callback");g.focus(!0);g.nodeChanged({initial:1});a(g.contentCSS,function(a){g.dom.loadCSS(a)});i.auto_focus&&setTimeout(function(){var a=d.get(i.auto_focus);a.selection.select(a.getBody(),1);a.selection.collapse(1);
a.getBody().focus();a.getWin().focus()},100)},setupContentEditable:function(){var b=this,c=b.settings,e=b.getElement();b.contentDocument=c.content_document||document;b.contentWindow=c.content_window||window;b.bodyElement=e;c.content_document=c.content_window=null;k.hide(e);e.contentEditable=b.getParam("content_editable_state",!0);k.show(e);c.gecko_spellcheck||(b.getDoc().body.spellcheck=0);b.dom=new d.dom.DOMUtils(b.getDoc(),{keep_values:!0,url_converter:b.convertURL,url_converter_scope:b,hex_colors:c.force_hex_style_colors,
class_filter:c.class_filter,root_element:b.id,fix_ie_paragraphs:1,update_styles:1});b.serializer=new d.dom.Serializer(c,b.dom,schema);b.selection=new d.dom.Selection(b.dom,b.getWin(),b.serializer);b.forceBlocks=new d.ForceBlocks(b,{forced_root_block:c.forced_root_block});b.editorCommands=new d.EditorCommands(b);b.serializer.onPreProcess.add(function(a,c){return b.onPreProcess.dispatch(b,c,a)});b.serializer.onPostProcess.add(function(a,c){return b.onPostProcess.dispatch(b,c,a)});b.onPreInit.dispatch(b);
b._addEvents();b.controlManager.onPostRender.dispatch(b,b.controlManager);b.onPostRender.dispatch(b);b.onSetContent.add(function(){b.addVisual(b.getBody())});b.startContent=b.getContent({format:"raw"});b.undoManager.add({initial:!0});b.initialized=!0;b.onInit.dispatch(b);b.focus(!0);b.nodeChanged({initial:1});c.content_css&&a(m(c.content_css),function(a){b.dom.loadCSS(b.documentBaseURI.toAbsolute(a))});f&&(b.dom.bind(b.getElement(),"beforedeactivate",function(){b.lastSelectionBookmark=b.selection.getBookmark(1)}),
b.onBeforeExecCommand.add(function(a,b,c,d,e){k.getParent(a.selection.getStart(),function(b){return b==a.getBody()})||(e.terminate=1);k.getParent(a.selection.getEnd(),function(b){return b==a.getBody()})||(e.terminate=1)}));e=null},focus:function(a){var b,c,e,g,f,i=this.selection,h=this.settings.content_editable,j=this.getDoc();if(!a){if(c=i.getRng(),c.item&&(e=c.item(0)),this._refreshContentEditable(),!h)if(d.isIE)try{g=this.getWin(),f=k.getViewPort(g),this.dom.getRoot().focus(),g.scrollTo(f.x,f.y)}catch(m){}else this.getWin().focus();
d.isGecko&&this.getBody().focus();e&&e.ownerDocument==j&&(c=j.body.createControlRange(),c.addElement(e),c.select());h&&(d.isWebKit?this.getWin().focus():d.isIE?this.getElement().setActive():this.getElement().focus())}d.activeEditor!=this&&(null!=(b=d.activeEditor)&&b.onDeactivate.dispatch(b,this),this.onActivate.dispatch(this,b));d._setActive(this)},execCallback:function(a){var b,c=this.settings[a];if(c)return this.callbackLookup&&(b=this.callbackLookup[a])&&(c=b.func,b=b.scope),g(c,"string")&&(b=
c.replace(/\.\w+$/,""),b=b?d.resolve(b):0,c=d.resolve(c),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:c,scope:b}),c.apply(b||this,Array.prototype.slice.call(arguments,1))},translate:function(a){var b=this.settings.language||"en",c=d.i18n;return a?c[b+"."+a]||a.replace(/{\#([^}]+)\}/g,function(a,d){return c[b+"."+d]||"{#"+d+"}"}):""},getLang:function(a,b){return d.i18n[(this.settings.language||"en")+"."+a]||(g(b)?b:"{#"+a+"}")},getParam:function(b,c,e){var f,i=d.trim,b=
g(this.settings[b])?this.settings[b]:c;return"hash"===e?(f={},g(b,"string")?a(0<b.indexOf("=")?b.split(/[;,](?![^=;,]*(?:[;,]|$))/):b.split(","),function(a){a=a.split("=");1<a.length?f[i(a[0])]=i(a[1]):f[i(a[0])]=i(a)}):f=b,f):b},nodeChanged:function(a){var b=this.selection,c=b.getStart()||this.getBody();this.initialized&&(a=a||{},c=f&&c.ownerDocument!=this.getDoc()?this.getBody():c,a.parents=[],this.dom.getParent(c,function(b){return"BODY"==b.nodeName||void a.parents.push(b)}),this.onNodeChange.dispatch(this,
a?a.controlManager||this.controlManager:this.controlManager,c,b.isCollapsed(),a))},addButton:function(a,b){this.buttons=this.buttons||{};this.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(b,c,d,e){var f,i=this;return!!i.settings.custom_shortcuts&&(i.shortcuts=i.shortcuts||
{},g(d,"string")&&(f=d,d=function(){i.execCommand(f,!1,null)}),g(d,"object")&&(f=d,d=function(){i.execCommand(f[0],f[1],f[2])}),a(m(b),function(b){var f={func:d,scope:e||this,desc:c,alt:!1,ctrl:!1,shift:!1};a(m(b,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":f[a]=!0;break;default:f.charCode=a.charCodeAt(0),f.keyCode=a.toUpperCase().charCodeAt(0)}});i.shortcuts[(f.ctrl?"ctrl":"")+","+(f.alt?"alt":"")+","+(f.shift?"shift":"")+","+f.keyCode]=f}),!0)},execCommand:function(b,c,d,e){var f,
g,i=this,k=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(b)||e&&e.skip_focus||i.focus(),e=h({},e),i.onBeforeExecCommand.dispatch(i,b,c,d,e),!e.terminate&&(i.execCallback("execcommand_callback",i.id,i.selection.getNode(),b,c,d)?(i.onExecCommand.dispatch(i,b,c,d,e),!0):(f=i.execCommands[b])&&(g=f.func.call(f.scope,c,d),!0!==g)?(i.onExecCommand.dispatch(i,b,c,d,e),g):(a(i.plugins,function(a){if(a.execCommand&&a.execCommand(b,c,d))return i.onExecCommand.dispatch(i,
b,c,d,e),k=1,!1}),!!k||(i.theme&&i.theme.execCommand&&i.theme.execCommand(b,c,d)?(i.onExecCommand.dispatch(i,b,c,d,e),!0):i.editorCommands.execCommand(b,c,d)?(i.onExecCommand.dispatch(i,b,c,d,e),!0):(i.getDoc().execCommand(b,c,d),void i.onExecCommand.dispatch(i,b,c,d,e)))))},queryCommandState:function(a){var b,c;if(!this._isHidden()){if((b=this.queryStateCommands[a])&&(c=b.func.call(b.scope),!0!==c))return c;if(b=this.editorCommands.queryCommandState(a),-1!==b)return b;try{return this.getDoc().queryCommandState(a)}catch(d){}}},
queryCommandValue:function(a){var b,c;if(!this._isHidden()){if((b=this.queryValueCommands[a])&&(c=b.func.call(b.scope),!0!==c))return c;if(b=this.editorCommands.queryCommandValue(a),g(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(d){}}},show:function(){k.show(this.getContainer());k.hide(this.id);this.load()},hide:function(){var a=this.getDoc();f&&a&&a.execCommand("SelectAll");this.save();k.hide(this.getContainer());k.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!k.isHidden(this.id)},
setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b,c=this.getElement();if(c)return a=a||{},a.load=!0,b=this.setContent(g(c.value)?c.value:c.innerHTML,a),a.element=c,a.no_events||this.onLoadContent.dispatch(this,a),a.element=null,b},save:function(b){var c,d,e=this,f=e.getElement();if(f&&e.initialized){b=b||{};b.save=!0;try{b.no_events||(e.undoManager.typing=!1,e.undoManager.add())}catch(g){AJS.logError("editor.save() : "+g)}return b.element=
f,c=b.content=e.getContent(b),b.no_events||e.onSaveContent.dispatch(e,b),c=b.content,/TEXTAREA|INPUT/i.test(f.nodeName)?f.value=c:(f.innerHTML=c,(d=k.getParent(e.id,"form"))&&a(d.elements,function(a){if(a.name==e.id)return a.value=c,!1})),b.element=f=null,c}},setContent:function(a,b){var c,e=this.getBody();return b=b||{},b.format=b.format||"html",b.set=!0,b.content=a,b.no_events||this.onBeforeSetContent.dispatch(this,b),a=b.content,d.isIE||0!==a.length&&!/^\s+$/.test(a)||(c=this.settings.forced_root_block,
a=c?"<"+c+'><br data-mce-bogus="1"></'+c+">":'<br data-mce-bogus="1">',e.innerHTML=a,this.selection.select(e,!0),this.selection.collapse(!0)),"raw"!==b.format&&(a=(new d.html.Serializer({},this.schema)).serialize(this.parser.parse(a))),b.content=d.trim(a),this.dom.setHTML(e,b.content),b.no_events||this.onSetContent.dispatch(this,b),this.selection.normalize(),b.content},getContent:function(a){var b;return a=a||{},a.format=a.format||"html",a.get=!0,a.no_events||this.onBeforeGetContent.dispatch(this,
a),b="raw"==a.format?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),a),a.content=d.trim(b),a.no_events||this.onGetContent.dispatch(this,a),a.content},isDirty:function(){return d.trim(this.startContent)!=d.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},setDirty:function(a){this.isNotDirty=a?0:1},getContainer:function(){return this.container||(this.container=k.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},
getElement:function(){return k.get(this.settings.content_element||this.id)},getWin:function(){var a;return this.contentWindow||(a=k.get(this.id+"_ifr"),a&&(this.contentWindow=a.contentWindow)),this.contentWindow},getDoc:function(){var a;return this.contentDocument||(a=this.getWin(),a&&(this.contentDocument=a.document)),this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this.settings;return d.urlconverter_callback?this.execCallback("urlconverter_callback",
a,c,!0,b):!d.convert_urls||c&&"LINK"==c.nodeName||0===a.indexOf("file:")?a:d.relative_urls?this.documentBaseURI.toRelative(a):this.documentBaseURI.toAbsolute(a,d.remove_script_host)},addVisual:function(b){var c=this,d=c.settings,b=b||c.getBody();g(c.hasVisual)||(c.hasVisual=d.visual);a(c.dom.select("table,a",b),function(a){var b;switch(a.nodeName){case "TABLE":return b=c.dom.getAttrib(a,"border"),void(b&&"0"!=b||(c.hasVisual?c.dom.addClass(a,d.visual_table_class):c.dom.removeClass(a,d.visual_table_class)));
case "A":return b=c.dom.getAttrib(a,"name"),void(b&&(c.hasVisual?c.dom.addClass(a,"mceItemAnchor"):c.dom.removeClass(a,"mceItemAnchor")))}});c.onVisualAid.dispatch(c,b,c.hasVisual)},remove:function(){var a=this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];d.remove(this);k.remove(a)},destroy:function(a){this.destroyed||(a||(d.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),
this.theme&&this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),this.selection.destroy(),this.dom.destroy(),this.settings.content_editable||(j.clear(this.getWin()),j.clear(this.getDoc())),j.clear(this.getBody()),j.clear(this.formElement)),this.formElement&&(this.formElement.submit=this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null),this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=
null,this.selection&&(this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null),this.destroyed=1)},_addEvents:function(){function b(a,c){a.type;n.removed||!1!==n.onEvent.dispatch(n,a,c)&&n[C[a.fakeType||a.type]].dispatch(n,a,c)}function c(){n.focus(!0)}function f(){var a=this.getDoc(),b=this.settings;if(e&&!b.readonly){this._refreshContentEditable();try{a.execCommand("styleWithCSS",0,!1)}catch(c){if(!this._isHidden())try{a.execCommand("useCSS",0,!0)}catch(d){}}if(!b.table_inline_editing)try{a.execCommand("enableInlineTableEditing",
!1,!1)}catch(g){}if(!b.object_resizing)try{a.execCommand("enableObjectResizing",!1,!1)}catch(i){}}}function g(b){var c=null;return b.altKey||b.ctrlKey||b.metaKey?(a(n.shortcuts,function(a){if((!d.isMac||a.ctrl==b.metaKey)&&(d.isMac||a.ctrl==b.ctrlKey)&&a.alt==b.altKey&&a.shift==b.shiftKey)return b.keyCode==a.keyCode||b.charCode&&b.charCode==a.charCode?(c=a,!1):void 0}),c):c}function i(){n.undoManager.typing=!1;n.undoManager.add()}function h(){var b=n.dom.getAttribs(n.selection.getStart().cloneNode(!1));
return function(){var c=n.selection.getStart();c!==n.getBody()&&(n.dom.setAttrib(c,"style",null),a(b,function(a){c.setAttributeNode(a.cloneNode(!0))}))}}function m(){var a=n.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}var n=this,y=n.settings,x=n.dom,C={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};if(a(C,function(a,
c){switch(c){case "contextmenu":x.bind(n.getDoc(),c,b);break;case "paste":x.bind(n.getBody(),c,function(a){b(a)});break;case "submit":case "reset":x.bind(n.getElement().form||k.getParent(n.id,"form"),c,b);break;default:x.bind(y.content_editable?n.getBody():n.getDoc(),c,b)}}),x.bind(y.content_editable?n.getBody():e?n.getDoc():n.getWin(),"focus",function(){n.focus(!0)}),y.content_editable&&d.isOpera&&(x.bind(n.getBody(),"click",c),x.bind(n.getBody(),"keydown",c)),d.isGecko&&x.bind(n.getDoc(),"DOMNodeInserted",
function(a){var b,a=a.target;1===a.nodeType&&"IMG"===a.nodeName&&(b=a.getAttribute("data-mce-src"))&&(a.src=n.documentBaseURI.toAbsolute(b))}),e&&(n.onBeforeExecCommand.add(f),n.onMouseDown.add(f)),n.onMouseUp.add(n.nodeChanged),n.onKeyUp.add(function(a,b){var c=b.keyCode;(33<=c&&36>=c||37<=c&&40>=c||13==c||45==c||46==c||8==c||d.isMac&&(91==c||93==c)||b.ctrlKey)&&n.nodeChanged()}),n.onKeyDown.add(function(a,b){if(b.keyCode==q.BACKSPACE){var c=a.selection.getRng(!0);if(c.collapsed){for(var d=c.startContainer,
e=c.startOffset;d&&d.nodeType&&1!=d.nodeType&&d.parentNode;)d=d.parentNode;d&&d.parentNode&&"BLOCKQUOTE"===d.parentNode.tagName&&d.parentNode.firstChild==d&&0===e&&(a.formatter.toggle("blockquote",null,d.parentNode),c.setStart(d,0),c.setEnd(d,0),a.selection.setRng(c),a.selection.collapse(!1))}}}),n.onReset.add(function(){n.setContent(n.startContent,{format:"raw"})}),y.custom_shortcuts&&(y.custom_undo_redo_keyboard_shortcuts&&(n.addShortcut("ctrl+z",n.getLang("undo_desc"),"Undo"),n.addShortcut("ctrl+y",
n.getLang("redo_desc"),"Redo")),n.addShortcut("ctrl+b",n.getLang("bold_desc"),"Bold"),n.addShortcut("ctrl+i",n.getLang("italic_desc"),"Italic"),n.addShortcut("ctrl+u",n.getLang("underline_desc"),"Underline"),n.onKeyUp.add(function(a,b){if(g(b))return j.cancel(b)}),n.onKeyPress.add(function(a,b){if(g(b))return j.cancel(b)}),n.onKeyDown.add(function(a,b){var c=g(b);if(c)return c.func.call(c.scope),j.cancel(b)})),d.isIE&&x.bind(n.getDoc(),"controlselect",function(a){var b,c=n.resizeInfo,a=a.target;"IMG"===
a.nodeName&&(c&&x.unbind(c.node,c.ev,c.cb),x.hasClass(a,"mceItemNoResize")?(ev="resizestart",b=x.bind(a,"resizestart",j.cancel,j)):(ev="resizeend",b=x.bind(a,ev,function(a){var b,a=a.target;(b=x.getStyle(a,"width"))&&(x.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),x.setStyle(a,"width",""));(b=x.getStyle(a,"height"))&&(x.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),x.setStyle(a,"height",""))})),c=n.resizeInfo={node:a,ev:ev,cb:b})}),d.isOpera&&n.onClick.add(function(a,b){j.prevent(b)}),y.custom_undo_redo){var B=
d.isGecko?"blur":"focusout";x.bind(n.getDoc(),B,function(){!n.removed&&n.undoManager.typing&&i()});n.dom.bind(n.dom.getRoot(),"dragend",function(){i()});n.onKeyUp.add(function(a,b){var c=b.keyCode;(33<=c&&36>=c||37<=c&&40>=c||13==c||45==c||b.ctrlKey)&&i()});n.onKeyDown.add(function(a,b){var c,e=b.keyCode;return 8==e&&(c=n.getDoc().selection,c&&c.createRange&&c.createRange().item)?(n.undoManager.beforeChange(),a.dom.remove(c.createRange().item(0)),i(),j.cancel(b)):33<=e&&36>=e||37<=e&&40>=e||13==e||
45==e?(d.isIE&&13==e&&n.undoManager.beforeChange(),void(n.undoManager.typing&&i())):void((16>e||20<e)&&224!=e&&91!=e&&!n.undoManager.typing&&(n.undoManager.beforeChange(),n.undoManager.typing=!0,n.undoManager.add()))});n.onMouseDown.add(function(){n.undoManager.typing&&i()})}d.isGecko&&(n.onKeyPress.add(function(a,b){var c;if((8==b.keyCode||46==b.keyCode)&&m())return c=h(),n.getDoc().execCommand("delete",!1,null),c(),j.cancel(b)}),n.dom.bind(n.getDoc(),"cut",function(){var a;m()&&(a=h(),n.onKeyUp.addToTop(j.cancel,
j),setTimeout(function(){a();n.onKeyUp.remove(j.cancel,j)},0))}))},_refreshContentEditable:function(){var a,b;this._isHidden()&&(a=this.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;return e?(a=this.selection.getSel(),!a||!a.rangeCount||0==a.rangeCount):0}})})(tinymce);
(function(d){var k=d.each,j=!0,h=!1;d.EditorCommands=function(b){function a(a,b,c){var d;return a=a.toLowerCase(),(d=o.exec[a])?(d(a,b,c),j):h}function e(a){var b;return a=a.toLowerCase(),(b=o.state[a])?b(a):-1}function f(a,b){b=b||"exec";k(a,function(a,c){k(c.toLowerCase().split(","),function(c){o[b][c]=a})})}function g(a,c,d){return void 0===c&&(c=h),void 0===d&&(d=null),b.getDoc().execCommand(a,c,d)}function c(a,b){l.toggle(a,b?{value:b}:void 0)}var i,m=b.dom,q=b.selection,o={state:{},exec:{},
value:{}},r=b.settings,l=b.formatter;d.extend(this,{execCommand:a,queryCommandState:e,queryCommandValue:function(a){var b;return a=a.toLowerCase(),(b=o.value[a])?b(a):h},addCommands:f});f({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){b.undoManager.add()},"Cut,Copy,Paste":function(a){var c,e=b.getDoc();try{g(a)}catch(f){c=j}!c&&e.queryCommandSupported(a)||(d.isGecko?b.windowManager.confirm(b.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html",
"_blank")}):b.windowManager.alert(b.getLang("clipboard_no_support")))},unlink:function(a){q.isCollapsed()&&q.select(q.getNode());g(a);q.collapse(h)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(d){var e=d.substring(7);b.undoManager.add();var f=q.getRng(),g=q.getNode();k(["left","center","right","full"],function(a){e!=a&&l.remove("align"+a);tinyMCE.isIE||"IMG"!=g.nodeName||"#document"!=q.getRng().startContainer.nodeName&&"#text"!=q.getRng().startContainer.nodeName||q.setRng(f)});c("align"+
e);a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b;g(a);if(a=m.getParent(q.getNode(),"ol,ul"))b=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(b.nodeName)&&(i=q.getBookmark(void 0),m.split(b,a),q.moveToBookmark(i))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){c(a)},"ForeColor,HiliteColor,FontName":function(a,b,d){c(a,d)},FontSize:function(a,b,e){var f,g;1<=e&&7>=e&&(g=d.explode(r.font_size_style_values),f=d.explode(r.font_size_classes),e=f?f[e-
1]||e:g[e-1]||e);c(a,e)},RemoveFormat:function(a){l.remove(a)},mceBlockQuote:function(){c("blockquote")},FormatBlock:function(a,b,d){return c(d||"p")},mceCleanup:function(){var a=q.getBookmark();b.setContent(b.getContent({cleanup:j}),{cleanup:j});q.moveToBookmark(a)},mceRemoveNode:function(a,c,d){a=d||q.getNode();a!=b.getBody()&&(i=q.getBookmark(void 0),b.dom.remove(a,j),q.moveToBookmark(i))},mceSelectNodeDepth:function(a,c,d){var e=0;m.getParent(q.getNode(),function(a){if(1==a.nodeType&&e++==d)return q.select(a),
h},b.getBody())},mceSelectNode:function(a,b,c){q.select(c)},mceInsertContent:function(a,c,e){var f,g,i,h,k,j,l;if(f=b.parser,g=new d.html.Serializer({},b.schema),k={content:e,format:"html"},q.onBeforeSetContent.dispatch(q,k),e=k.content,-1==e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">﻿</span>'),!q.isCollapsed()&&q.getContent().length&&b.execCommand("mceDelete",!1,null,{skip_undo:!0}),i=q.getNode(),k={context:i.nodeName.toLowerCase()},
h=f.parse(e,k),j=h.lastChild,"mce_marker"==j.attr("id")){e=j;for(j=j.prev;j;j=j.walk(!0))if(3==j.type||!m.isBlock(j.name)){j.parent.insert(e,j,"br"===j.name);break}}if(k.invalid){q.setContent('<span id="mce_marker" data-mce-type="bookmark">﻿</span>');i=b.selection.getNode();a=b.getBody();for(9==i.nodeType?i=j=a:j=i;j!==a;)i=j,j=j.parentNode;e=i==a?a.innerHTML:m.getOuterHTML(i);e=g.serialize(f.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(h)})));
i==a?m.setHTML(a,e):m.setOuterHTML(i,e)}else e=g.serialize(h),j=i.firstChild,f=i.lastChild,!j||j===f&&"BR"===j.nodeName?m.setHTML(i,e):q.setContent(e);e=m.get("mce_marker");j=m.getRect(e);i=m.getViewPort(b.getWin());(j.y+j.h>i.y+i.h||j.y<i.y||j.x>i.x+i.w||j.x<i.x)&&(l=d.isIE?b.getDoc().documentElement:b.getBody(),l.scrollLeft=j.x,l.scrollTop=j.y-i.h+25);l=m.createRng();(j=e.previousSibling)&&3==j.nodeType?l.setStart(j,j.nodeValue.length):(l.setStartBefore(e),l.setEndBefore(e));m.remove(e);q.setRng(l);
q.onSetContent.dispatch(q,k);b.addVisual()},mceInsertRawHTML:function(a,c,d){q.setContent("tiny_mce_marker");b.setContent(b.getContent().replace(/tiny_mce_marker/g,function(){return d}))},mceSetContent:function(a,c,d){b.setContent(d)},"Indent,Outdent":function(a){var b,c,d;b=r.indentation;c=/[a-z%]+$/i.exec(b);b=parseInt(b);e("InsertUnorderedList")||e("InsertOrderedList")||e("InsertInlineTaskList")?g(a):k(q.getSelectedBlocks(),function(e){"outdent"==a?(d=Math.max(0,parseInt(e.style.paddingLeft||0)-
b),m.setStyle(e,"paddingLeft",d?d+c:"")):m.setStyle(e,"paddingLeft",parseInt(e.style.paddingLeft||0)+b+c)})},mceRepaint:function(){if(d.isGecko)try{i=q.getBookmark(j),q.getSel()&&q.getSel().selectAllChildren(b.getBody()),q.collapse(j),q.moveToBookmark(i)}catch(a){}},mceToggleFormat:function(a,b,c){l.toggle(c)},InsertHorizontalRule:function(){b.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){b.hasVisual=!b.hasVisual;b.addVisual()},mceReplaceContent:function(a,c,d){b.execCommand("mceInsertContent",
!1,d.replace(/\{\$selection\}/g,q.getContent({format:"text"})))},mceInsertLink:function(a,b,c){"string"==typeof c&&(c={href:c});a=m.getParent(q.getNode(),"a");c.href=c.href.replace(" ","%20");a&&c.href||l.remove("link");c.href&&l.apply("link",c,a)},selectAll:function(){var a=m.getRoot(),c=m.createRng();c.setStart(a,0);c.setEnd(a,a.childNodes.length);b.selection.setRng(c)}});f({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var b="align"+a.substring(7),a=q.isCollapsed()?[q.getNode()]:
q.getSelectedBlocks(),a=d.map(a,function(a){return!!l.matchNode(a,b)});return-1!==d.inArray(a,j)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return l.match(a)},mceBlockQuote:function(){return l.match("blockquote")},Outdent:function(){var a;return r.inline_styles&&((a=m.getParent(q.getStart(),m.isBlock))&&0<parseInt(a.style.paddingLeft)||(a=m.getParent(q.getEnd(),m.isBlock))&&0<parseInt(a.style.paddingLeft))?j:e("InsertUnorderedList")||e("InsertOrderedList")||e("InsertInlineTaskList")||
!r.inline_styles&&!!m.getParent(q.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList,InsertInlineTaskList":function(a){var b,c=m.getParent(q.getNode(),"ul,ol");return!!c&&(b=c.tagName,"OL"===b&&"insertorderedlist"===a||"UL"===b&&!m.hasClass(c,"inline-task-list")&&"insertunorderedlist"===a||"UL"===b&&m.hasClass(c,"inline-task-list")&&"insertinlinetasklist"===a)}},"state");f({"FontSize,FontName":function(a){var b;return(b=m.getParent(q.getNode(),"span"))&&("fontsize"==a||b.style.fontFamily.replace(/, /g,
",").replace(/[\'\"]/g,"").toLowerCase()),0}},"value");r.custom_undo_redo&&f({Undo:function(){b.undoManager.undo()},Redo:function(){b.undoManager.redo()}})}})(tinymce);
(function(d){var k=d.util.Dispatcher;d.UndoManager=function(j){var h,b,a=0,e=[];return h={typing:!1,onAdd:new k(h),onUndo:new k(h),onRedo:new k(h),beforeChange:function(){b=j.selection.getBookmark(2,!0)},add:function(f){var g,c=j.settings;if(f=f||{},f.content=d.trim(j.getContent({format:"raw",no_events:1})),g=e[a],g&&g.content==f.content)return null;if(e[a]&&(e[a].beforeBookmark=b),c.custom_undo_redo_levels&&e.length>c.custom_undo_redo_levels){for(g=0;g<e.length-1;g++)e[g]=e[g+1];e.length--;a=e.length}return f.bookmark=
j.selection.getBookmark(2,!0),a<e.length-1&&(e.length=a+1),e.push(f),a=e.length-1,h.onAdd.dispatch(h,f),j.isNotDirty=0,f},undo:function(){var b;return h.typing&&(h.add(),h.typing=!1),0<a&&(b=e[--a],j.setContent(b.content,{format:"raw"}),j.selection.moveToBookmark(b.beforeBookmark),h.onUndo.dispatch(h,b)),b},redo:function(){var b;return a<e.length-1&&(b=e[++a],j.setContent(b.content,{format:"raw"}),j.selection.moveToBookmark(b.bookmark),h.onRedo.dispatch(h,b)),b},clear:function(){e=[];a=0;h.typing=
!1},hasUndo:function(){return 0<a||this.typing},hasRedo:function(){return a<e.length-1&&!this.typing},ignore:function(a,b){var c=e.slice();a.call(b||j);e=c}}}})(tinymce);
(function(d){var k=d.dom.Event,j=d.isIE,h=d.isGecko,b=d.isOpera,a=d.each,e=(d.extend,!0),f=!1;d.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b,d=a.settings;this.editor=a;this.dom=a.dom;b=(d.forced_root_block||"p").toLowerCase();d.element=b.toUpperCase();a.onPreInit.add(this.setup,this)},setup:function(){function a(){var b,c,d,e,g,h,k,j=o.getStart(),C=q.getRoot(),B=f.getDoc().body;if(j&&1===j.nodeType){for(;j!=C;){if(!(j&&1===j.nodeType)||r[j.nodeName])return;j=j.parentNode}b=o.getRng();
b.setStart?(c=b.startContainer,d=b.startOffset,e=b.endContainer,g=b.endOffset):(b.item&&(b=f.getDoc().body.createTextRange(),b.moveToElementText(b.item(0))),tmpRng=b.duplicate(),tmpRng.collapse(!0),d=-1*tmpRng.move("character",-16777215),tmpRng.collapsed||(tmpRng=b.duplicate(),tmpRng.collapse(!1),g=-1*tmpRng.move("character",-16777215)-d));for(j=C.firstChild;j;j)3===j.nodeType||1==j.nodeType&&!r[j.nodeName]?(h||(h=q.create(m.forced_root_block),j.parentNode.insertBefore(h,j)),k=j,j=j.nextSibling,h.appendChild(k)):
(h=null,j=j.nextSibling);if(b.setStart)b.setStart(c,d),b.setEnd(e,g),o.setRng(b);else try{b=B.createTextRange(),b.moveToElementText(B),b.move("character",-16777215),b.collapse(!0),b.moveStart("character",d),0<g&&b.moveEnd("character",g),b.select()}catch(A){}f.nodeChanged()}}var b=this,f=b.editor,m=f.settings,q=f.dom,o=f.selection,r=f.schema.getBlockElements();m.forced_root_block&&(f.onKeyUp.add(a),f.onKeyDown.add(a),f.onClick.add(a));m.force_br_newlines&&j&&f.onKeyPress.add(function(a,b){var c;if(13==
b.keyCode&&"LI"!=o.getNode().nodeName)return o.setContent('<br id="__" /> ',{format:"raw"}),c=q.get("__"),c.removeAttribute("id"),o.select(c),o.collapse(),k.cancel(b)});m.force_p_newlines&&(j||f.onKeyPress.add(function(a,d){13!=d.keyCode||d.shiftKey||b.insertPara(d)||k.cancel(d)}),h&&f.onKeyDown.add(function(a,d){8!=d.keyCode&&46!=d.keyCode||d.shiftKey||b.backspaceDelete(d,8==d.keyCode)}));d.isWebKit&&f.onKeyPress.add(function(a,b){if(13==b.keyCode&&(b.shiftKey||m.force_br_newlines&&!q.getParent(o.getNode(),
"h1,h2,h3,h4,h5,h6,ol,ul"))){var c,d;d=o.getRng();var f=q.create("div",null," "),g=q.getViewPort(a.getWin());d.insertNode(c=q.create("br"));d.setStartAfter(c);d.setEndAfter(c);o.setRng(d);o.getSel().focusNode==c.previousSibling&&(o.select(q.insertAfter(q.doc.createTextNode(" "),c)),o.collapse(e));q.insertAfter(f,c);c=q.getPos(f).y;d=q.getSize(f).h;q.remove(f);f=c+d;f>g.y+g.h&&a.getWin().scrollTo(0,f-g.h);k.cancel(b)}});j&&"P"!=m.element&&(f.onKeyPress.add(function(){b.lastElm=o.getNode().nodeName}),
f.onKeyUp.add(function(a,d){var e,f=o.getNode();1===a.getBody().childNodes.length&&"P"==f.nodeName?(f=q.rename(f,m.element),o.select(f),o.collapse(),a.nodeChanged()):13!=d.keyCode||d.shiftKey||"P"==b.lastElm||(e=q.getParent(f,"p"),e&&(q.rename(e,m.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(){function g(a,c){var d,e,g=[];if(a.innerHTML="",A.keep_styles){e=c;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&
(d=e.cloneNode(f),C.setAttrib(d,"id",""),g.push(d));while(e=e.parentNode)}if(0<g.length){e=g.length-1;for(d=a;0<=e;e--)d=d.appendChild(g[e]);return g[0].innerHTML=b?" ":"<br />",g[0]}a.innerHTML=b?" ":"<br />"}var c,i,h,j,k,r,l,p,s,v,t,n,y,x=this.editor,C=x.dom,B=x.getDoc(),A=x.settings,u=x.selection.getSel(),z=u.getRangeAt(0),F=B.body,G=C.getViewPort(x.getWin());x.undoManager.beforeChange();c=B.createRange();c.setStart(u.anchorNode,u.anchorOffset);c.collapse(e);i=B.createRange();i.setStart(u.focusNode,
u.focusOffset);i.collapse(e);j=(h=0>c.compareBoundaryPoints(c.START_TO_END,i))?u.anchorNode:u.focusNode;k=h?u.anchorOffset:u.focusOffset;r=h?u.focusNode:u.anchorNode;h=h?u.focusOffset:u.anchorOffset;if(d.isWebKit&&j===r&&1===j.nodeType&&0<j.childNodes.length&&x.dom.is(s=j.childNodes[0<k?k-1:0],"table"))return c=C.create("p",0,'<br data-mce-bogus="1" />'),C.insertAfter(c,s),z.setStart(c,0),x.selection.setRng(z),z=x.dom.getPos(c).y,z>G.y&&x.getWin().scrollTo(0,z),x.undoManager.add(),f;if(j===r&&/^(TD|TH)$/.test(j.nodeName)){if("BR"==
j.firstChild.nodeName&&C.remove(j.firstChild),0==j.childNodes.length)x.dom.add(j,A.element,null,"<br />"),p=x.dom.add(j,A.element,null,"<br />");else{var J=!1;a(j.childNodes,function(a){if(x.dom.isBlock(a))return J=!0,!1});J?(z=x.selection.getRng(),z.insertNode(x.dom.create(A.element,null,"<br />"))):(n=j.innerHTML,j.innerHTML="",x.dom.add(j,A.element,null,n),p=x.dom.add(j,A.element,null,"<br />"))}return p&&(z=B.createRange(),z.selectNodeContents(p),z.collapse(1),x.selection.setRng(z)),f}j==F&&r==
F&&F.firstChild&&x.dom.isBlock(F.firstChild)&&(j=r=j.firstChild,k=h=0,c=B.createRange(),c.setStart(j,0),i=B.createRange(),i.setStart(r,0));B.body.hasChildNodes()||B.body.appendChild(C.create("br"));j="HTML"==j.nodeName?B.body:j;j="BODY"==j.nodeName?j.firstChild:j;r="HTML"==r.nodeName?B.body:r;r="BODY"==r.nodeName?r.firstChild:r;p=x.dom.getRoot();if(j===p&&(j=j.firstChild,k=0),r===p&&(r=r.firstChild,h=0),l=this.getParentBlock(j),p=this.getParentBlock(r),s=l?l.nodeName:A.element,n=this.dom.getParent(l,
"li,pre"))return"LI"==n.nodeName?(G=x.selection,z=this.dom,c=n,G=z.isEmpty(c)?(v=z.getParent(c,"ul,ol"),z.getParent(v.parentNode,"ul,ol")||(z.split(v,c),t=z.create("p",0,'<br data-mce-bogus="1" />'),z.replace(t,c),G.select(t,1)),AJS.Rte.showSelection(),f):e):G=e,G;l&&("CAPTION"==l.nodeName||/absolute|relative|fixed/gi.test(C.getStyle(l,"position",1)))&&(s=A.element,l=null);p&&("CAPTION"==p.nodeName||/absolute|relative|fixed/gi.test(C.getStyle(l,"position",1)))&&(s=A.element,p=null);(/(TD|TABLE|TH|CAPTION)/.test(s)||
l&&"DIV"==s&&/left|right/gi.test(C.getStyle(l,"float",1)))&&(s=A.element,l=p=null);v=l&&l.nodeName==s?l.cloneNode(0):x.dom.create(s);p=p&&p.nodeName==s?p.cloneNode(0):x.dom.create(s);p.removeAttribute("id");/^(H[1-6])$/.test(s)&&(n=z,t=l,l=t.ownerDocument.createRange(),(l.setStart(n.endContainer,n.endOffset),l.setEndAfter(t),0==l.cloneContents().textContent.length)&&(p=x.dom.create(A.element)));n=t=j;do{if(n==F||9==n.nodeType||this.dom.isBlock(n)||/(TD|TABLE|TH|CAPTION)/.test(n.nodeName))break;t=
n}while(n=n.previousSibling?n.previousSibling:n.parentNode);n=l=r;do{if(n==F||9==n.nodeType||this.dom.isBlock(n)||/(TD|TABLE|TH|CAPTION)/.test(n.nodeName))break;l=n}while(n=n.nextSibling?n.nextSibling:n.parentNode);t.nodeName==s?c.setStart(t,0):c.setStartBefore(t);c.setEnd(j,k);v.appendChild(c.cloneContents()||B.createTextNode(""));try{i.setEndAfter(l)}catch(H){}return i.setStart(r,h),p.appendChild(i.cloneContents()||B.createTextNode("")),z=B.createRange(),t.previousSibling||t.parentNode.nodeName!=
s?c.startContainer.nodeName==s&&0==c.startOffset?z.setStartBefore(c.startContainer):z.setStart(c.startContainer,c.startOffset):z.setStartBefore(t.parentNode),l.nextSibling||l.parentNode.nodeName!=s?z.setEnd(i.endContainer,i.endOffset):z.setEndAfter(l.parentNode),z.deleteContents(),b&&x.getWin().scrollTo(0,G.y),v.firstChild&&v.firstChild.nodeName==s&&(v.innerHTML=v.firstChild.innerHTML),p.firstChild&&p.firstChild.nodeName==s&&(p.innerHTML=p.firstChild.innerHTML),C.isEmpty(v)&&g(v,j),C.isEmpty(p)&&
g(p,r),this.dom.removeClass(p,"auto-cursor-target"),b&&9.5>parseFloat(opera.version())?(z.insertNode(v),z.insertNode(p)):(z.insertNode(p),z.insertNode(v)),p.normalize(),v.normalize(),x.selection.select(p,!0),x.selection.collapse(!0),y=x.dom.getPos(p).y,(y<G.y||y+25>G.y+G.h)&&x.getWin().scrollTo(0,y<G.y?y:y-G.h+25),x.undoManager.add(),f},backspaceDelete:function(a,b){var e,h,j,o,r=this.editor;j=r.getBody();var l=(r.dom,r.selection),p=l.getRng(),s=p.startContainer;if(!(a.getPreventDefault?a.getPreventDefault():
a.defaultPrevented)){if(!b&&p.collapsed&&1==s.nodeType&&p.startOffset==s.childNodes.length){o=new d.dom.TreeWalker(s.lastChild,s);for(e=s.lastChild;e;e=o.prev())if(3==e.nodeType)return p.setStart(e,e.nodeValue.length),p.collapse(!0),void l.setRng(p)}if(s&&r.dom.isBlock(s)&&!/^(TD|TH)$/.test(s.nodeName)&&b&&(0==s.childNodes.length||1==s.childNodes.length&&"BR"==s.firstChild.nodeName)){for(e=s;(e=e.previousSibling)&&!r.dom.isBlock(e););if(e){if(s!=j.firstChild){for(h=r.dom.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,
null,f);j=h.nextNode();)e=j;p=r.getDoc().createRange();p.setStart(e,e.nodeValue?e.nodeValue.length:0);p.setEnd(e,e.nodeValue?e.nodeValue.length:0);l.setRng(p);r.dom.remove(s)}return k.cancel(a)}}if(!b&&p.collapsed&&/^(BODY)$/.test(s.nodeName)&&(s=s.childNodes[p.startOffset])&&r.dom.isBlock(s)&&!/^(TD|TH)$/.test(s.nodeName)&&(0==s.childNodes.length||1==s.childNodes.length&&"BR"==s.firstChild.nodeName)){e=s;for(var v;e=e.nextSibling;)if(r.dom.isBlock(e)){v=e;break}if(v&&s!=j.lastChild)return h=r.dom.doc.createTreeWalker(v,
NodeFilter.SHOW_TEXT,null,f),v=h.nextNode(),p=r.getDoc().createRange(),p.setStart(v,0),p.setEnd(v,0),l.setRng(p),r.dom.remove(s),k.cancel(a)}}}})})(tinymce);
(function(d){var k=(d.DOM,d.dom.Event),j=d.each,h=d.extend;d.create("tinymce.ControlManager",{ControlManager:function(b,a){var e=this,a=a||{};e.editor=b;e.controls={};e.onAdd=new d.util.Dispatcher(e);e.onPostRender=new d.util.Dispatcher(e);e.prefix=a.prefix||b.id+"_";e._cls={};e.onPostRender.add(function(){j(e.controls,function(a){a.postRender()})})},get:function(b){return this.controls[this.prefix+b]||this.controls[b]},setActive:function(b,a){var d=null;return(d=this.get(b))&&d.setActive(a),d},setDisabled:function(b,
a){var d=null;return(d=this.get(b))&&d.setDisabled(a),d},add:function(b){return b&&(this.controls[b.id]=b,this.onAdd.dispatch(b,this)),b},createControl:function(b){var a,d=this,f=d.editor;switch(j(f.plugins,function(f){if(f.createControl&&(a=f.createControl(b,d)))return!1}),b){case "|":case "separator":return d.createSeparator()}return!a&&f.buttons&&(a=f.buttons[b])?d.createButton(b,a):d.add(a)},createDropMenu:function(b,a,e){var f,g,c,i,j=this.editor;return a=h({"class":"mceDropDown",constrain:j.settings.constrain_menus},
a),a["class"]=a["class"]+" "+j.getParam("skin")+"Skin",(c=j.getParam("skin_variant"))&&(a["class"]+=" "+j.getParam("skin")+"Skin"+c.substring(0,1).toUpperCase()+c.substring(1)),b=this.prefix+b,i=e||this._cls.dropmenu||d.ui.DropMenu,f=this.controls[b]=new i(b,a),f.onAddItem.add(function(a,b){var c=b.settings;c.title=j.getLang(c.title,c.title);c.onclick||(c.onclick=function(){c.cmd&&j.execCommand(c.cmd,c.ui||!1,c.value)})}),j.onRemove.add(function(){f.destroy()}),d.isIE&&(f.onShowMenu.add(function(){j.focus();
g=j.selection.getBookmark(1)}),f.onHideMenu.add(function(){g&&(j.selection.moveToBookmark(g),g=0)})),this.add(f)},createListBox:function(b,a,e){var f,g,c=this.editor;return this.get(b)?null:(a.title=c.translate(a.title),a.scope=a.scope||c,a.onselect||(a.onselect=function(b){c.execCommand(a.cmd,a.ui||!1,b||a.value)}),a=h({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a),b=this.prefix+b,c.settings.use_native_selects||c.settings.use_accessible_selects&&!d.isGecko?f=new d.ui.NativeListBox(b,
a):(g=e||this._cls.listbox||d.ui.ListBox,f=new g(b,a,c)),this.controls[b]=f,d.isWebKit&&f.onPostRender.add(function(a,b){k.add(b,"mousedown",function(){c.bookmark=c.selection.getBookmark(1)});k.add(b,"focus",function(){c.selection.moveToBookmark(c.bookmark);c.bookmark=null})}),f.hideMenu&&c.onMouseDown.add(f.hideMenu,f),this.add(f))},createButton:function(b,a,e){var f,g,c=this.editor;return this.get(b)?null:(a.title=c.translate(a.title),a.label=c.translate(a.label),a.scope=a.scope||c,a.onclick||a.menu_button||
(a.onclick=function(){c.execCommand(a.cmd,a.ui||!1,a.value)}),a=h({title:a.title,"class":"mce_"+b,unavailable_prefix:c.getLang("unavailable",""),scope:a.scope,control_manager:this},a),b=this.prefix+b,a.menu_button?(g=e||this._cls.menubutton||d.ui.MenuButton,f=new g(b,a,c),c.onMouseDown.add(f.hideMenu,f)):(g=this._cls.button||d.ui.Button,f=new g(b,a,c)),this.add(f))},createMenuButton:function(b,a,d){return a=a||{},a.menu_button=1,this.createButton(b,a,d)},createSplitButton:function(b,a,e){var f,g,
c=this.editor;return this.get(b)?null:(a.title=c.translate(a.title),a.scope=a.scope||c,a.onclick||(a.onclick=function(b){c.execCommand(a.cmd,a.ui||!1,b||a.value)}),a.onselect||(a.onselect=function(b){c.execCommand(a.cmd,a.ui||!1,b||a.value)}),a=h({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a),b=this.prefix+b,g=e||this._cls.splitbutton||d.ui.SplitButton,f=this.add(new g(b,a,c)),c.onMouseDown.add(f.hideMenu,f),f)},createColorSplitButton:function(b,a,e){var f,g,c,i=this.editor;
return this.get(b)?null:(a.title=i.translate(a.title),a.scope=a.scope||i,a.onclick||(a.onclick=function(b){d.isIE&&(c=i.selection.getBookmark(1));i.execCommand(a.cmd,a.ui||!1,b||a.value)}),a.onselect||(a.onselect=function(b){i.execCommand(a.cmd,a.ui||!1,b||a.value)}),a=h({title:a.title,"class":"mce_"+b,menu_class:i.getParam("skin")+"Skin",scope:a.scope,more_colors_title:i.getLang("more_colors")},a),b=this.prefix+b,g=e||this._cls.colorsplitbutton||d.ui.ColorSplitButton,f=new g(b,a,i),i.onMouseDown.add(f.hideMenu,
f),i.onRemove.add(function(){f.destroy()}),d.isIE&&(f.onShowMenu.add(function(){i.focus();c=i.selection.getBookmark(1)}),f.onHideMenu.add(function(){c&&(i.selection.moveToBookmark(c),c=0)})),this.add(f))},createToolbar:function(b,a,e){var f,g;return b=this.prefix+b,g=e||this._cls.toolbar||d.ui.Toolbar,f=new g(b,a,this.editor),this.get(b)?null:this.add(f)},createToolbarGroup:function(b,a,e){var f,g;return b=this.prefix+b,g=e||this._cls.toolbarGroup||d.ui.ToolbarGroup,f=new g(b,a,this.editor),this.get(b)?
null:this.add(f)},createSeparator:function(b){return new (b||this._cls.separator||d.ui.Separator)},setControlType:function(b,a){return this._cls[b.toLowerCase()]=a},destroy:function(){j(this.controls,function(b){b.destroy()});this.controls=null}})})(tinymce);
(function(d){var k=d.util.Dispatcher,j=d.each,h=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new k(this);this.onClose=new k(this);this.params={};this.features={}},open:function(a,e){var f,g,c,i="",k="modal"==this.editor.settings.dialog_type;c=d.DOM.getViewPort();a=a||{};e=e||{};g=b?c.w:screen.width;c=b?c.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=!0;
a.left=a.left||parseInt(g/2)-a.width/2;a.top=a.top||parseInt(c/2)-a.height/2;e.inline=!1;e.mce_width=a.width;e.mce_height=a.height;e.mce_auto_focus=a.auto_focus;k&&h&&(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1);j(a,function(a,b){d.is(a,"boolean")&&(a=a?"yes":"no");/^(name|url)$/.test(b)||(i+=h&&k?(i?";":"")+b+":"+a:(i?",":"")+b+"="+a)});this.features=a;this.params=e;this.onOpen.dispatch(this,a,e);g=a.url||a.file;g=d._addVer(g);try{h&&k?
(f=1,window.showModalDialog(g,window,i)):f=window.open(g,a.name,i)}catch(q){}f||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,b,f,g,c,i){return new (d.resolve(a))(b,f,g,c,i)},confirm:function(a,b,d,g){g=g||window;b.call(d||this,g.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,d,g){g=g||window;g.alert(this._decode(this.editor.getLang(a,a)));b&&b.call(d||this)},resizeBy:function(a,b,d){d.resizeBy(a,
b)},_decode:function(a){return d.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
(function(d){d.Formatter=function(k){function j(a){return 1===a.nodeType&&"_mce_caret"===a.id}function h(a){return a?B[a]:B}function b(a,c){a&&("string"!=typeof a?A(a,function(a,c){b(c,a)}):(c=c.length?c:[c],A(c,function(a){a.deep===C&&(a.deep=!a.selector);a.split===C&&(a.split=!a.selector||a.inline);a.remove===C&&a.selector&&!a.inline&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"==typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),B[a]=c))}function a(a,b,e){function g(a,
c){c=c||K;a&&(c.onformat&&c.onformat(a,c,b,e),A(c.styles,function(c,d){u.setStyle(a,d,q(c,b))}),A(c.attributes,function(c,d){u.setAttrib(a,d,q(c,b))}),A(c.classes,function(c){c=q(c,b);u.hasClass(a,c)||u.addClass(a,c)}))}function m(){var a=k.selection.getRng(),b=a.startContainer,c=a.endContainer;if(b!=c&&0==a.endOffset){a:{c=new F(c);for(e=c.current();e;e=c.prev())if(1<e.childNodes.length||e==b){b=e;break a}b=void 0}a.setEnd(b,3==b.nodeType?b.length:b.childNodes.length)}return a}function r(e,h,k){var m,
l,n=[];m=K.inline||K.block;l=u.create(m);g(l);G.walk(e,function(c){function e(c){var o,p=c.nodeName.toLowerCase(),r=c.parentNode.nodeName.toLowerCase();return i(p,"br")?(h=0,void(K.block&&u.remove(c))):K.wrapper&&f(c,a,b)?void(h=0):K.block&&!K.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(p)?(c=u.rename(c,m),g(c),n.push(c),void(h=0)):K.selector&&(A(B,function(a){"collapsed"in a&&a.collapsed!==C||u.is(c,a.selector)&&!j(c)&&(g(c,a),o=!0)}),!K.inline||o)?void(h=0):void(J(m,p)&&J(r,m)&&(k||3!==
c.nodeType||1!==c.nodeValue.length||65279!==c.nodeValue.charCodeAt(0))&&!j(c)?(h||(h=l.cloneNode(D),c.parentNode.insertBefore(h,c),n.push(h)),h.appendChild(c)):(h=0,A(d.grep(c.childNodes),e),h=0))}var h;A(c,e)});!1===K.wrap_links&&A(n,function(a){function b(a){var c,e,f;if("A"===a.nodeName){e=l.cloneNode(D);n.push(e);f=d.grep(a.childNodes);for(c=0;c<f.length;c++)e.appendChild(f[c]);a.appendChild(e)}A(d.grep(a.childNodes),b)}b(a)});A(n,function(d){var e,i=0;if(e=(A(d.childNodes,function(a){o(a)||v(a)||
i++}),i),(1<n.length||!H(d))&&0===e)return void u.remove(d,1);if(K.inline||K.wrapper){if(!K.exact&&1===e){e=d;var h,k,d=(A(e.childNodes,function(a){if(1==a.nodeType&&!v(a)&&!j(a))return h=a,D}),h&&c(h,K)&&(k=h.cloneNode(D),g(k),u.replace(k,e,E),u.remove(h,1)),k||e)}if(A(B,function(a){A(u.select(a.inline,d),function(c){var d;if(!1===a.wrap_links){d=c.parentNode;do if("A"===d.nodeName)return;while(d=d.parentNode)}p(a,b,c,a.exact?c:null)})}),f(d.parentNode,a,b))return u.remove(d,1),d=0,E;K.merge_with_parents&&
u.getParent(d.parentNode,function(c){if(f(c,a,b))return u.remove(d,1),d=0,E});d&&!1!==K.merge_siblings&&(d=t(s(d),d),d=t(d,s(d,E)))}})}var n,B=h(a),K=B[0],C=z.isCollapsed();if(K)if(e)e.nodeType?(n=u.createRng(),n.setStartBefore(e),n.setEndAfter(e),r(l(n,B),null,!0)):r(e,null,!0);else if(C&&K.inline&&!u.select("td.mceSelected,th.mceSelected").length)y("apply",a,b);else if(!u.select("td.mceSelected.numberingColumn").length){var Q=k.selection.getNode();k.selection.setRng(m());n=z.getBookmark();r(l(z.getRng(E),
B),n);K.styles&&(K.styles.color||K.styles.textDecoration)&&(d.walk(Q,O,"childNodes"),O(Q));z.moveToBookmark(n);x(z.getRng(E));k.nodeChanged()}}function e(a,b,c){function e(a){var c,f,g;c=d.grep(a.childNodes);f=0;for(g=s.length;f<g&&!p(s[f],b,a,a);f++);if(t.deep){f=0;for(g=c.length;f<g;f++)e(c[f])}}function i(c){var d;return A(u.getParents(c.parentNode,void 0,u.getRoot()).reverse(),function(c){var e;d||"_start"==c.id||"_end"==c.id||(e=f(c,a,b),e&&!1!==e.split&&(d=c))}),d}function j(a,c,d,e){var f,
g,i,h,k,m;if(a){m=a.parentNode;for(f=c.parentNode;f&&f!=m;f=f.parentNode){g=f.cloneNode(D);for(k=0;k<s.length;k++)if(p(s[k],b,g,g)){g=0;break}g&&(i&&g.appendChild(i),h||(h=g),i=g)}!e||t.mixed&&H(a)||(c=u.split(a,c));i&&(d.parentNode.insertBefore(i,d),h.appendChild(d))}return c}function m(a){var b=u.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return v(c)&&(c=c[a?"firstChild":"lastChild"]),u.remove(b,!0),c}function o(a){var b,c,d,a=l(a,s,E);t.split&&(b=n(a,E),c=n(a),b!=c?(d=b.firstChild,
"TD"==b.nodeName&&d&&(b=d),b=r(b,"span",{id:"_start","data-mce-type":"bookmark"}),c=r(c,"span",{id:"_end","data-mce-type":"bookmark"}),j(i(b),b,b,!0),j(i(c),c,c,!0),b=m(E),c=m()):b=c=j(i(b),b,b,!0),a.startContainer=b.parentNode,a.startOffset=I(b),a.endContainer=c.parentNode,a.endOffset=I(c)+1);G.walk(a,function(a){A(a,function(a){e(a);1===a.nodeType&&"underline"===k.dom.getStyle(a,"text-decoration")&&a.parentNode&&"underline"===P(a.parentNode)&&p({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},
null,a)})})}var q,s=h(a),t=s[0];if(c)return void(c.nodeType?(q=u.createRng(),q.setStartBefore(c),q.setEndAfter(c),o(q)):o(c));z.isCollapsed()&&t.inline&&!u.select("td.mceSelected,th.mceSelected").length?y("remove",a,b):u.select("td.mceSelected.numberingColumn").length||(c=z.getBookmark(),o(z.getRng(E)),z.moveToBookmark(c),t.inline&&g(a,b,z.getStart())&&x(z.getRng(!0)),k.nodeChanged())}function f(a,b,d,e){function f(a,b,c){var g,h,j=b[c];if(b.onmatch)return b.onmatch(a,b,c);if(j)if(j.length===C)for(g in j){if(j.hasOwnProperty(g)&&
((h="attributes"===c?u.getAttrib(a,g):m(a,g),e&&!h&&!b.exact)||(!e||b.exact)&&!i(h,q(j[g],d))))return}else for(g=0;g<j.length&&!("attributes"===c?u.getAttrib(a,j[g]):m(a,j[g]));g++);return b}var g,j;if((j=h(b))&&a)for(b=0;b<j.length;b++)if(g=j[b],c(a,g)&&f(a,g,"attributes")&&f(a,g,"styles")){if(j=g.classes)for(b=0;b<j.length;b++)if(!u.hasClass(a,j[b]))return;return g}}function g(a,b,c){function d(c){return c=u.getParent(c,function(c){return!!f(c,a,b,!0)}),f(c,a,b)}var e;return c?d(c):(c=z.getNode(),
d(c)?E:(e=z.getStart(),e!=c&&d(e)?E:D))}function c(a,b){return i(a,b.inline)?E:i(a,b.block)?E:b.selector?u.is(a,b.selector):void 0}function i(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function m(a,b){var c=u.getStyle(a,b);return"color"!=b&&"backgroundColor"!=b||(c=u.toHex(c)),"fontWeight"==b&&700==c&&(c="bold"),""+c}function q(a,b){return"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function o(a){return a&&
3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function r(a,b,c){b=u.create(b,c);return a.parentNode.insertBefore(b,a),b.appendChild(a),b}function l(a,b,c){function d(a){var c,e,f;if(c=e=a?p:n,f=a?"previousSibling":"nextSibling",root=u.getRoot(),3==c.nodeType&&!o(c)&&(a?0<r:q<c.nodeValue.length))return c;for(;;){if(!b[0].block_expand&&H(e))return e;for(a=e[f];a;a=a[f])if(!v(a)&&!o(a))return e;if(e.parentNode==root){c=e;break}e=e.parentNode}return c}function e(a,b){for(b===C&&(b=3===a.nodeType?
a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}}function f(a,b,d){function e(a,b){var f,g,i=a.nodeValue;return"undefined"==typeof b&&(b=d?i.length:0),d?(f=i.lastIndexOf(" ",b),g=i.lastIndexOf(" ",b),f=f>g?f:g,-1===f||c||f++):(f=i.indexOf(" ",b),g=i.indexOf(" ",b),f=-1!==f&&(-1===g||f<g)?f:g),f}var g,i,h;if(3===a.nodeType){if(i=e(a,b),-1!==i)return{container:a,offset:i};h=a}for(a=new F(a,u.getParent(a,
H)||k.getBody());g=a[d?"prev":"next"]();)if(3===g.nodeType){if(h=g,i=e(g),-1!==i)return{container:g,offset:i}}else if(H(g))break;if(h)return b=d?0:h.length,{container:h,offset:b}}function g(c,d){var e,f,i,h;3==c.nodeType&&0==c.nodeValue.length&&c[d]&&(c=c[d]);e=u.getParents(c,void 0,u.getRoot());for(f=0;f<e.length;f++)for(i=0;i<b.length;i++)if(h=b[i],!("collapsed"in h&&h.collapsed!==a.collapsed)&&u.is(e[f],h.selector))return e[f];return c}function j(a,c){var d;if(a==u.getRoot())return a;if(b[0].wrapper||
(d=u.getParent(a,b[0].block)),d||(d=u.getParent(3==a.nodeType?a.parentNode:a,H)),d&&b[0].wrapper&&(d=u.getParents(d,"ul,ol",u.getRoot()).reverse()[0]||d),!d)for(d=a;d[c]&&!H(d[c])&&(d=d[c],!i(d,"br")););return d||a}var h,m,l,p=a.startContainer,r=a.startOffset,n=a.endContainer,q=a.endOffset;if(1==p.nodeType&&p.hasChildNodes()&&(h=p.childNodes.length-1,p=p.childNodes[r>h?h:r],3==p.nodeType&&(r=0)),1==n.nodeType&&n.hasChildNodes()&&(h=n.childNodes.length-1,n=n.childNodes[q>h?h:q-1],3==n.nodeType&&(q=
n.nodeValue.length)),(v(p.parentNode)||v(p))&&(p=v(p)?p:p.parentNode,p=p.nextSibling||p,3==p.nodeType&&(r=0)),(v(n.parentNode)||v(n))&&(n=v(n)?n:n.parentNode,n=n.previousSibling||n,3==n.nodeType&&(q=n.length)),b[0].inline&&(a.collapsed&&(l=f(p,r,!0),l&&(p=l.container,r=l.offset),l=f(n,q),l&&(n=l.container,q=l.offset)),m=e(n,q),m.node)){for(;m.node&&0===m.offset&&m.node.previousSibling;)m=e(m.node.previousSibling);m.node&&0<m.offset&&3===m.node.nodeType&&" "===m.node.nodeValue.charAt(m.offset-1)&&
(1<m.offset?(n=m.node,n.splitText(m.offset-1)):m.node.previousSibling)}return(b[0].inline||b[0].block_expand)&&(b[0].inline&&3==p.nodeType&&0!==r||(p=d(!0)),b[0].inline&&3==n.nodeType&&q!==n.nodeValue.length||(n=d())),b[0].selector&&b[0].expand!==D&&!b[0].inline&&(p=g(p,"previousSibling"),n=g(n,"nextSibling")),(b[0].block||b[0].selector)&&(p=j(p,"previousSibling"),n=j(n,"nextSibling"),b[0].block&&(H(p)||(p=d(!0)),H(n)||(n=d()))),1==p.nodeType&&(r=I(p),p=p.parentNode),1==n.nodeType&&(q=I(n)+1,n=n.parentNode),
{startContainer:p,startOffset:r,endContainer:n,endOffset:q}}function p(a,b,e,f){var g,h,j;if(!c(e,a))return D;if("all"!=a.remove){A(a.styles,function(a,c){a=q(a,b);"number"==typeof c&&(c=a,f=0);f&&!i(m(f,c),a)||u.setStyle(e,c,"");j=1});j&&""==u.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"));A(a.attributes,function(a,c){var d;if(a=q(a,b),"number"==typeof c&&(c=a,f=0),!f||i(u.getAttrib(f,c),a)){if("class"==c&&(a=u.getAttrib(e,c),a&&(d="",A(a.split(/\s+/),function(a){/mce\w+/.test(a)&&
(d+=(d?" ":"")+a)}),d)))return void u.setAttrib(e,c,d);"class"==c&&e.removeAttribute("className");N.test(c)&&e.removeAttribute("data-mce-"+c);e.removeAttribute(c)}});A(a.classes,function(a){a=q(a,b);f&&!u.hasClass(f,a)||u.removeClass(e,a)});h=u.getAttribs(e);for(g=0;g<h.length;g++)if(0!==h[g].nodeName.indexOf("_"))return D}if("none"!=a.remove){g=function(a,b,c){return a=s(a,b,c),!a||"BR"==a.nodeName||H(a)};var k;h=e.parentNode;a.block&&(L?h==u.getRoot()&&(a.list_block&&i(e,a.list_block)||A(d.grep(e.childNodes),
function(a){J(L,a.nodeName.toLowerCase())?k?k.appendChild(a):k=r(a,L):k=0})):H(e)&&!H(h)&&(g(e,D)||g(e.firstChild,E,1)||e.insertBefore(u.create("br"),e.firstChild),g(e,E)||g(e.lastChild,D,1)||e.appendChild(u.create("br"))));a.selector&&a.inline&&!i(a.inline,e)||u.remove(e,1);a=E}else a=void 0;return a}function s(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(1==a.nodeType||!o(a))return a}}function v(a){return a&&1==a.nodeType&&"bookmark"==a.getAttribute("data-mce-type")}
function t(a,b){function c(a,b){for(e=a;e&&!(3==e.nodeType&&0!==e.nodeValue.length);e=e[b])if(1==e.nodeType&&!v(e))return e;return a}var e,f;if(f=a)if(f=b){a=c(a,"previousSibling");b=c(b,"nextSibling");f=a;var g=b,i=function(a){var b={};return A(u.getAttribs(a),function(c){c=c.nodeName.toLowerCase();0!==c.indexOf("_")&&"style"!==c&&(b[c]=u.getAttrib(a,c))}),b},h=function(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){if((c=b[d],c===C)||a[d]!=c)return D;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return D;
return E};f=f.nodeName!=g.nodeName?D:h(i(f),i(g))&&h(u.parseStyle(u.getAttrib(f,"style")),u.parseStyle(u.getAttrib(g,"style")))?E:D}if(f){for(e=a.nextSibling;e&&e!=b;)f=e,e=e.nextSibling,a.appendChild(f);return u.remove(b),A(d.grep(b.childNodes),function(b){a.appendChild(b)}),a}return b}function n(a,b){var c,d,e;return c=a[b?"startContainer":"endContainer"],d=a[b?"startOffset":"endOffset"],1==c.nodeType&&(e=c.childNodes.length-1,!b&&d&&d--,c=c.childNodes[d>e?e:d]),3===c.nodeType&&b&&d>=c.nodeValue.length&&
(c=(new F(c,k.getBody())).next()||c),3!==c.nodeType||b||0!=d||(c=(new F(c,k.getBody())).prev()||c),c}function y(b,c,g){function i(a){var b=u.create("span",{id:r,"data-mce-bogus":!0,style:q?"color:red":""});return a&&b.appendChild(k.getDoc().createTextNode(o)),b}function j(a,b){for(;a;){if(3===a.nodeType&&a.nodeValue!==o||1<a.childNodes.length)return!1;b&&1===a.nodeType&&b.push(a);a=a.firstChild}return!0}function m(a){for(;a;){if(a.id===r)return a;a=a.parentNode}}function p(a){var b;if(a){b=new F(a,
a);for(a=b.current();a;a=b.next())if(3===a.nodeType)return a}}function n(a,b){var c,d;if(a)d=z.getRng(!0),j(a)?(!1!==b&&(d.setStartBefore(a),d.setEndBefore(a)),u.remove(a)):(c=p(a),c.nodeValue.charAt(0)===M&&c.deleteData(0,1),u.remove(a,1)),z.setRng(d);else if(a=m(z.getStart()),!a)for(;a=u.get(r);)n(a,!1)}var o,r="_mce_caret",q=k.settings.caret_debug;o=d.isGecko?"​":M;self._hasCaretEvents||(k.onBeforeGetContent.addToTop(function(){var a,b=[];if(j(m(z.getStart()),b))for(a=b.length;a--;)u.setAttrib(b[a],
"data-mce-bogus","1")}),d.each(["onMouseUp","onKeyUp"],function(a){k[a].addToTop(function(){n()})}),k.onKeyDown.addToTop(function(a,b){var c=b.keyCode;8!=c&&37!=c&&39!=c||n(m(z.getStart()))}),self._hasCaretEvents=!0);if("apply"==b){var s,t,v,y,x;s=z.getRng(!0);b=s.startOffset;x=s.startContainer.nodeValue;(t=m(z.getStart()))&&(v=p(t));x&&0<b&&b<x.length&&/\w/.test(x.charAt(b))&&/\w/.test(x.charAt(b-1))?(y=z.getBookmark(),s.collapse(!0),s=l(s,h(c)),s=G.split(s),a(c,g,s),z.moveToBookmark(y)):(t&&v.nodeValue===
o?a(c,g,t):(t=i(!0),v=t.firstChild,s.insertNode(t),b=1,a(c,g,t)),z.setCursorLocation(v,b))}else{var A,b=z.getRng(!0);y=[];x=b.startContainer;A=b.startOffset;v=x;for(3==x.nodeType&&(A==x.nodeValue.length&&x.nodeValue!==o||(t=!0),v=v.parentNode);v;){if(f(v,c,g)){s=v;break}v.nextSibling&&(t=!0);y.push(v);v=v.parentNode}if(s)if(t)s=z.getBookmark(),b.collapse(!0),b=l(b,h(c),!0),b=G.split(b),e(c,g,b),z.moveToBookmark(s);else{v=g=i();for(c=y.length-1;0<=c;c--)v.appendChild(y[c].cloneNode(!1)),v=v.firstChild;
v.appendChild(u.doc.createTextNode(o));v=v.firstChild;u.insertAfter(g,s);z.setCursorLocation(v,1)}}}function x(a){var b,c,d;b=a.startContainer;var e=a.startOffset;if(3==b.nodeType&&e>=b.nodeValue.length&&(b=b.parentNode,e=I(b)+1),1==b.nodeType){c=b.childNodes;b=c[Math.min(e,c.length-1)];b=new F(b,u.getParent(b,u.isBlock));e>c.length-1&&b.next();for(c=b.current();c;c=b.next())if(3==c.nodeType&&!o(c))return d=u.create("a",null,M),c.parentNode.insertBefore(d,c),a.setStart(c,0),z.setRng(a),void u.remove(d)}}
var C,B={},A=d.each,u=k.dom,z=k.selection,F=d.dom.TreeWalker,G=new d.dom.RangeUtils(u),J=k.schema.isValidChild,H=u.isBlock,L=k.settings.forced_root_block,I=u.nodeIndex,M="﻿",N=/^(src|href|style)$/,D=!1,E=!0,P=function(a){var b;return k.dom.getParent(a,function(a){return b=k.dom.getStyle(a,"text-decoration"),b&&"none"!==b}),b},O=function(a){var b;1===a.nodeType&&a.parentNode&&1===a.parentNode.nodeType&&(b=P(a.parentNode),k.dom.getStyle(a,"color")&&b?k.dom.setStyle(a,"text-decoration",b):k.dom.getStyle(a,
"textdecoration")===b&&k.dom.setStyle(a,"text-decoration",null))};d.extend(this,{get:h,register:b,apply:a,remove:e,toggle:function(b,c,d){var f=h(b);!g(b,c,d)||"toggle"in f[0]&&!f[0].toggle?a(b,c,d):e(b,c,d)},match:g,matchAll:function(a,b){var c,d=[],e={};return c=z.getStart(),u.getParent(c,function(c){var g,i;for(g=0;g<a.length;g++)i=a[g],!e[i]&&f(c,i,b)&&(e[i]=!0,d.push(i))}),d},matchNode:f,canApply:function(a){var b,c,d,e;if(a=h(a)){b=z.getStart();b=u.getParents(b,void 0,u.getRoot());for(d=a.length-
1;0<=d;d--){if(e=a[d].selector,!e)return E;for(c=b.length-1;0<=c;c--)if(u.is(b[c],e))return E}}return D}})}})(tinymce);
tinymce.onAddEditor.add(function(d,k){function j(a,b){d.each(b,function(b,c){b&&e.setStyle(a,c,b)});e.rename(a,"span")}function h(a,c){e=a.dom;f.convert_fonts_to_spans&&d.each(e.select("font,strike",c.node),function(a){b[a.nodeName.toLowerCase()](k.dom,a)})}var b,a,e,f=k.settings;f.inline_styles&&(a=d.explode(f.font_size_legacy_values),b={font:function(b,c){j(c,{backgroundColor:c.style.backgroundColor,color:c.color,fontFamily:c.face,fontSize:a[parseInt(c.size)-1]})},strike:function(a,b){j(b,{textDecoration:"line-through"})}},
k.onPreProcess.add(h),k.onSetContent.add(h),k.onInit.add(function(){k.selection.onSetContent.add(h)}))});
define("atlassian-editor-plugins/paste/repairer-util",function(d,k){k.getBrAndContents=function(d){return $("<br>").add(d.contents())};k.isEmptyLine=function(d){return""===d.text()};k.isNodeContainingText=function(d){return(d.nodeType===Node.ELEMENT_NODE||d.nodeType===Node.TEXT_NODE)&&$.trim(d.textContent)};k.isFirstTextContentInParent=function(d){var h=!1;return d.parent().contents().each(function(){if(k.isNodeContainingText(this))return this===d[0]&&(h=!0,!1)}),h};k.replaceWithP=function(d){var h=
d.attr("style"),b=$("<p></p>").append(d.contents());h&&b.attr("style",h);d.replaceWith(b)};k.appendContentsToPreviousContentOrP=function(d){var h=d.prev("p");h.length?(h.append(k.getBrAndContents(d)),d.remove()):k.isFirstTextContentInParent(d)?k.replaceWithP(d):d.replaceWith(k.getBrAndContents(d))};k.createMacro=function(d,h){var b=$('<table class="wysiwyg-macro" data-macro-name="'+d+'" data-macro-body-type="RICH_TEXT"><tbody><tr><td class="wysiwyg-macro-body"></td></tr></tbody></table>');return b.find(".wysiwyg-macro-body").append(h),
b}});
define("atlassian-editor-plugins/paste/repairer",["atlassian-editor-plugins/paste/repairer-util"],function(d){var k=[function(j){j.find(".expand-container").replaceWith(function(){var h=$(this).find(".expand-content").first().contents();return h.length?d.createMacro("expand",h):""})},function(d){d.find("span:empty").remove()},function(d){d.find("p + br").remove()},function(j){var h=!1;j.find("div:not(.content-wrapper)").each(function(){var b=$(this);d.isEmptyLine(b)?(b.remove(),h=!0):b.find("div, p, pre").length?b.replaceWith(b.contents()):
(h?d.replaceWithP(b):d.appendContentsToPreviousContentOrP(b),h=!1)})}];return{repair:function(d){var h=$("<div></div>").html(d);return k.forEach(function(b){b(h)}),h.html()}}});
(function(d){function k(a,b){return a.getParam(b,e[b])}function j(a,b){a.is("ul.inline-task-list")?b.each(function(){var a=d(this);a.attr("data-inline-task-id")||a.attr("data-inline-task-id","")}):b.removeAttr("data-inline-task-id").removeAttr("data-pasted-task")}function h(a){var b=a.filter("ol,ul").length;return a.length===b}var b,a=tinymce.each,e={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",
paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!1,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]},f=function(a,b){if(!b.collapsed||0!=b.startOffset)return!1;
var e=d(b.startContainer).closest("ol, ul",a.getBody());if(0===e.length)return!1;e=(new tinymce.dom.TreeWalker(b.startContainer,e[0])).prev(!0);return void 0===e||d(e).is("li")},g=function(a){a=3===a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer;return tinymce.isIE?"LI"===a.nodeName&&0===a.childNodes.length:"LI"===a.nodeName&&1===a.childNodes.length&&"BR"===a.firstChild.nodeName};tinymce.create("tinymce.plugins.AtlassianEditorPaste",{init:function(c,e){function f(a,b){var d,
e=c.dom;j.onPreProcess.dispatch(j,a);l&&(a.content=l.repair(a.content));a.node=e.create("div",0,a.content);tinymce.isGecko&&(d=c.selection.getRng(!0),d.startContainer==d.endContainer&&3===d.startContainer.nodeType&&1===a.node.childNodes.length&&/^(p|h[1-6]|pre)$/i.test(a.node.firstChild.nodeName)&&-1===a.content.indexOf("__MCE_ITEM__")&&e.remove(a.node.firstChild,!0));j.onPostProcess.dispatch(j,a);a.content=c.serializer.serialize(a.node,{getInner:1,forced_root_block:""});!b&&c.pasteAsPlainText?(j._insertPlainText(a.content),
k(c,"paste_text_sticky")||(c.pasteAsPlainText=!1,c.controlManager.setActive("pastetext",!1))):j._insert(a.content);tinymce.isGecko&&c.dom.getRoot().focus()}function g(b){if(b){var d=b.firstChild;d&&"DIV"===d.nodeName&&d.style.marginTop&&d.style.backgroundColor&&c.dom.remove(d,1);tinymce.isWebKit&&a(c.dom.select("span.Apple-style-span",b),function(a){c.dom.removeClass(a,"Apple-style-span")});tinymce.isWebKit&&a(c.dom.select("br.Apple-interchange-newline",b),function(a){c.dom.remove(a)});a(c.dom.select("br[data-mce-bogus]",
b),function(a){c.dom.remove(a)});a(c.dom.select("meta[charset]",b),function(a){c.dom.remove(a)})}}function h(b){function e(a){a.preventDefault()}var i,k,l,o,x,C,B,A=c.selection,u=c.dom,z=c.getBody();c.undoManager.add();var F;if(!b.clipboardData||-1==d.inArray("text/html",b.clipboardData.types||[]))F=!1;else{var G=b.clipboardData.getData("text/html");!G||!d.browser.webkit||(F=j.repair(G),F==G)?F=!1:(F=j.parse(F,c.getDoc()),G=d("<div></div>"),F=(G.append(F),g(G[0]),f({content:G.html()}),!0))}if(F)return void d.Event(b).preventDefault();
if((b.clipboardData||u.doc.dataTransfer)&&(C=(b.clipboardData||u.doc.dataTransfer).getData("Text"),c.pasteAsPlainText))return b.preventDefault(),void f({content:u.encode(C).replace(/\r?\n/g,"<br />")});if(!u.get("_mcePaste"))return B=d(c.selection.getStart()).closest("[data-macro-body-type='PLAIN_TEXT']").length,F=z,"true"!=z.contentEditable&&(F=u.getParent(c.selection.getStart(),'[contenteditable="true"]',z)),i=u.add(F,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"﻿﻿"),z!=c.getDoc().body?
z=u.getPos(c.selection.getStart(),z).y:(z=u.getViewPort(c.getWin()),z=z.y+parseInt(z.h/2,10)),x=z,u.setStyles(i,{position:"absolute",left:tinymce.isGecko?-40:0,top:x-25,width:1,height:1,overflow:"hidden"}),tinymce.isIE?(o=A.getRng(),l=u.doc.body.createTextRange(),l.moveToElementText(i),l.execCommand("Paste"),u.remove(i),"﻿﻿"===i.innerHTML?(c.execCommand("mcePasteWord"),void b.preventDefault()):(A.setRng(o),A.setContent(""),setTimeout(function(){f({content:i.innerHTML})},0),tinymce.dom.Event.cancel(b))):
(u.bind(c.getDoc(),"mousedown",e),u.bind(c.getDoc(),"keydown",e),k=A.getBookmark(),i=i.firstChild,l=c.getDoc().createRange(),l.setStart(i,0),l.setEnd(i,2),A.setRng(l),window.setTimeout(function(){var b,d="";u.select("div.mcePaste > div.mcePaste").length?d=B?"<p>"+u.encode(C).replace(/\r?\n/g,"<br />")+"</p>":"<p>"+u.encode(C).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>":(b=u.select("div.mcePaste"),a(b,function(a){g(a);"mcePaste"!=a.parentNode.className&&(d=d+a.innerHTML)}));
a(u.select("div.mcePaste"),function(a){u.remove(a)});k&&A.moveToBookmark(k);f({content:d});u.unbind(c.getDoc(),"mousedown",e);u.unbind(c.getDoc(),"keydown",e)},0),void 0)}var j=this;j.editor=c;j.url=e;j.onPreProcess=new tinymce.util.Dispatcher(j);j.onPostProcess=new tinymce.util.Dispatcher(j);j.onPreProcess.add(j._preProcess);j.onPostProcess.add(j._postProcess);j.onPreProcess.add(function(a,b){c.execCallback("paste_preprocess",a,b)});j.onPostProcess.add(function(a,b){c.execCallback("paste_postprocess",
a,b)});b=[{repair:function(a){var b=/<meta charset='utf-8'>(<td.*<\/td>)<br class="Apple-interchange-newline">/.exec(a);return b?'<table class="confluenceTable"><tbody><tr>'+b[1]+"</tr></tbody></table>":a}},{repair:function(a){var b=/<meta charset='utf-8'>(<tr.*<\/tr>)<br class="Apple-interchange-newline">/.exec(a);return b?'<table class="confluenceTable"><tbody>'+b[1]+"</tbody></table>":a}}];c.onKeyDown.addToTop(function(a,b){if((tinymce.isMac?b.metaKey:b.ctrlKey)&&!b.shiftKey&&86===b.keyCode||b.shiftKey&&
45===b.keyCode)return!1});c.pasteAsPlainText=k(c,"paste_text_sticky_default");var l=null;AJS&&AJS.DarkFeatures&&!AJS.DarkFeatures.isEnabled("editor.advanced.paste.disable")&&require(["atlassian-editor-plugins/paste/repairer"],function(a){l=a});c.addCommand("mceInsertClipboardContent",function(a,b){f(b,!0)});k(c,"paste_text_use_dialog")||c.addCommand("mcePasteText",function(){var a=tinymce.util.Cookie;c.pasteAsPlainText=!c.pasteAsPlainText;c.controlManager.setActive("pastetext",c.pasteAsPlainText);
c.pasteAsPlainText&&!a.get("tinymcePasteText")&&(k(c,"paste_text_sticky")?c.windowManager.alert(c.translate("paste.plaintext_mode_sticky")):c.windowManager.alert(c.translate("paste.plaintext_mode")),k(c,"paste_text_notifyalways")||a.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))});c.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});c.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});k(c,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||
/Firefox\/2/.test(navigator.userAgent)?c.onKeyDown.addToTop(function(a,b){((tinymce.isMac?b.metaKey:b.ctrlKey)&&86===b.keyCode||b.shiftKey&&45===b.keyCode)&&h(b)}):c.onPaste.addToTop(function(a,b){return h(b)}));c.onInit.add(function(){c.controlManager.setActive("pastetext",c.pasteAsPlainText);k(c,"paste_block_drop")&&c.dom.bind(c.getBody(),"dragend dragover draggesture dragdrop drop drag".split(" "),function(a){return a.preventDefault(),a.stopPropagation(),false})});c.onSaveContent.add(function(a,
b){var c=d("<div/>").html(b.content);d('ul.inline-task-list > li[data-pasted-task="true"]',c).each(function(){var a=d(this),b=a.attr("data-inline-task-id");b&&1<c.find('ul.inline-task-list > li[data-inline-task-id="'+b+'"]').size()&&a.attr("data-inline-task-id","")});b.content=c.html()});j._legacySupport()},getInfo:function(){return{longname:"AtlassianEditorPaste",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}},
_preProcess:function(b,d){function e(b){a(b,function(a){p=a.constructor==RegExp?p.replace(a,""):p.replace(a[0],a[1])})}function f(a,b){if("all"===h)return"";var c=s(v(b.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return c.length?' class="'+c.join(" ")+'"':""}var g,h,j=this.editor,p=d.content,s=tinymce.grep,v=tinymce.explode,t=tinymce.trim;if(0!=j.settings.paste_enable_default_filters){if(tinymce.isIE&&9<=document.documentMode&&(e([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,
"$1"]]),e([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])),/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(p)||d.wordContent){d.wordContent=!0;e([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);k(j,"paste_convert_headers_to_strong")&&(p=p.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>"));k(j,"paste_convert_middot_lists")&&e([[/<\!--\[if !supportLists\]--\>/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],
[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]);e([/<\!--[\s\S]+?--\>/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "]]);do g=p.length,p=p.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(g!=p.length);0===k(j,"paste_retain_style_properties").replace(/^none$/i,"").length?p=p.replace(/<\/?span[^>]*>/gi,""):e([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,
function(a,b){return 0<b.length?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join(" "):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(b,c,d){var e=[],f=0,b=v(t(d).replace(/&quot;/gi,"'"),";");return a(b,function(a){function b(a){return a+("0"!==a&&/\d$/.test(a))?"px":""}var c,d=v(a,":");if(2===d.length){switch(c=d[0].toLowerCase(),a=d[1].toLowerCase(),c){case "mso-padding-alt":case "mso-padding-top-alt":case "mso-padding-right-alt":case "mso-padding-bottom-alt":case "mso-padding-left-alt":case "mso-margin-alt":case "mso-margin-top-alt":case "mso-margin-right-alt":case "mso-margin-bottom-alt":case "mso-margin-left-alt":case "mso-table-layout-alt":case "mso-height":case "mso-width":case "mso-vertical-align-alt":return void(e[f++]=
c.replace(/^mso-|-alt$/g,"")+":"+b(a));case "horiz-align":return void(e[f++]="text-align:"+a);case "vert-align":return void(e[f++]="vertical-align:"+a);case "font-color":case "mso-foreground":return void(e[f++]="color:"+a);case "mso-background":case "mso-highlight":return void(e[f++]="background:"+a);case "mso-default-height":return void(e[f++]="min-height:"+b(a));case "mso-default-width":return void(e[f++]="min-width:"+b(a));case "mso-padding-between-alt":return void(e[f++]="border-collapse:separate;border-spacing:"+
b(a));case "text-line-through":return void("single"!=a&&"double"!=a||(e[f++]="text-decoration:line-through"));case "mso-zero-height":return void("yes"==a&&(e[f++]="display:none"))}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(c)||(e[f++]=c+":"+d[1])}}),0<f?c+' style="'+e.join(";")+'"':c}]])}k(j,"paste_convert_headers_to_strong")&&e([[/<h[1-6][^>]*>/gi,"<p><strong>"],
[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]);e([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);h=k(j,"paste_strip_class_attributes");"none"!==h&&(p=p.replace(/ class="([^"]+)"/gi,f),p=p.replace(/ class=([\-\w]+)/gi,f));k(j,"paste_remove_spans")&&(p=p.replace(/<\/?span[^>]*>/gi,""));d.content=p}},_postProcess:function(b,d){var e,f=this.editor,g=f.dom;0!=f.settings.paste_enable_default_filters&&(d.wordContent&&(a(g.select("a",d.node),function(a){a.href&&-1===a.href.indexOf("#_Toc")||
g.remove(a,1)}),k(f,"paste_convert_middot_lists")&&this._convertLists(b,d),e=k(f,"paste_retain_style_properties"),tinymce.is(e,"string")&&"all"!==e&&"*"!==e&&(e=tinymce.explode(e.replace(/^none$/i,"")),a(g.select("*",d.node),function(a){var b,c,d,f={},i=0;if(e)for(b=0;b<e.length;b++)c=e[b],(d=g.getStyle(a,c))&&(f[c]=d,i++);g.setAttrib(a,"style","");e&&0<i?g.setStyles(a,f):"SPAN"!==a.nodeName||a.className||g.remove(a,!0)}))),k(f,"paste_remove_styles")||k(f,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?
a(g.select("*[style]",d.node),function(a){a.removeAttribute("style");a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&a(g.select("*",d.node),function(a){a.removeAttribute("data-mce-style")}))},_convertLists:function(b,d){var e,f,g,h,j,k=b.editor.dom,s=-1,v=[];a(k.select("p",d.node),function(b){var c,d,i,j,l,A="";for(c=b.firstChild;c&&3===c.nodeType;c=c.nextSibling)A+=c.nodeValue;A=b.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," ");/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(A)&&
(d="ul");/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(A)&&(d="ol");d?(g=parseFloat(b.style.marginLeft||0),g>s&&v.push(g),e&&d==h?g>s?e=f.appendChild(k.create(d)):g<s&&(j=tinymce.inArray(v,g),l=k.getParents(e.parentNode,d),e=l[l.length-1-j]||e):(e=k.create(d),k.insertAfter(e,b)),a(k.select("span",b),function(a){var b=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");"ul"==d&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(b)?k.remove(a):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(b)&&k.remove(a)}),
i=b.innerHTML,i="ul"==d?b.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,""):b.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,""),f=e.appendChild(k.create("li",0,i)),k.remove(b),s=g,h=d):e=s=0});j=d.node.innerHTML;-1!==j.indexOf("__MCE_ITEM__")&&(d.node.innerHTML=j.replace(/__MCE_ITEM__/g,""))},_insert:function(a,b){var d,e,f=this.editor,g=f.selection.getRng(!0),a=this._applyOnBeforeSetContentListeners(f,a);e=
this.parse(a,f.getDoc());(d=this._getClipboardInserter(f,g,e))?(d.insert(f,g,e),f.selection.onSetContent.dispatch(f.selection,{content:a,format:"html"}),f.addVisual()):(f.selection.isCollapsed()||g.startContainer==g.endContainer||f.execCommand("mceDelete",!1,null,{skip_undo:!0}),f.execCommand("mceInsertContent",!1,a,{skip_undo:b}))},_getClipboardInserter:function(a,b,e){var f;return d.each(this.clipboardInserters,function(d,g){if(g.shouldInsert(a,b,e))return f=g,!1}),f},clipboardInserters:[{shouldInsert:function(a,
b,d){a=g(b);return a=a&&h(d),a&&0<d.children("li").length},insert:function(a,b,e){b=d(3===b.startContainer.nodeType?b.startContainer.parentNode:b.startContainer);e=e.children();a.undoManager.beforeChange();a.undoManager.add();j(b.parent(),e);b.replaceWith(e);a.selection.select(e.last()[0],!0);a.selection.collapse();a.undoManager.add()}},{shouldInsert:function(a,b,d){a=f(a,b);return a=a&&h(d),a&&0<d.children("li").length},insert:function(a,b,e){b=d(b.startContainer).closest("li",a.getBody());e=e.children();
a.undoManager.beforeChange();a.undoManager.add();j(b.parent(),e);b.before(e);a.selection.select(b[0],!0);a.selection.collapse(!0);a.undoManager.add()}},{shouldInsert:function(a,b,e){!b.collapsed||3===b.startContainer.nodeType&&b.startOffset!=b.startContainer.nodeValue.length||1===b.startContainer.nodeType&&b.startOffset!=b.startContainer.childNodes.length?b=!1:(a=d(b.startContainer).closest("ol, ul",a.getBody()),0===a.length?b=!1:(b=(new tinymce.dom.TreeWalker(b.startContainer,a[0])).next(!0),b=void 0===
b||d(b).is("li")));return b&&e.length===e.filter("ol,ul").length&&0<e.children("li").length},insert:function(a,b,e){b=d(b.startContainer).closest("li",a.getBody());e=e.children();a.undoManager.beforeChange();a.undoManager.add();j(b.parent(),e);b.after(e);a.selection.select(e.last()[0],!0);a.selection.collapse(!1);a.undoManager.add()}},{shouldInsert:function(a,b,d){var e=1<d.length;if(a=e=(e=e&&!g(b))&&f(a,b))a=d.filter("ol,ul"),d=d[d.length-1],a=1===a.length&&a[0]===d;return a},insert:function(a,
b,e){b=d(b.startContainer).closest("li",a.getBody());a.undoManager.beforeChange();a.undoManager.add();j(b.parent(),e.children("li"));e=d("<li></li>").append(e);b.before(e);a.undoManager.add()}},{shouldInsert:function(a,b,e){return!b.collapsed&&!!d(b.commonAncestorContainer).is("table.confluenceTable > tbody, table.confluenceTable > tbody > tr")&&e.is("table:not(.wysiwyg-macro)")},insert:function(a,b,e){function f(a,b){for(var c=a.shift(),e=b.shift();c&&e;c=a.shift(),e=b.shift())d(e).html(d(c).html())}
var g,e=0<e.children("tbody").length?e.children("tbody").children("tr"):e.children("tr"),h=e.children("td, th"),j=d(".mceSelected",a.getDoc());g=j.parent();if(a.undoManager.beforeChange(),a.undoManager.add(),1===g.length)f(d.makeArray(h),d.makeArray(j));else{e=d.makeArray(e);g=d.makeArray(g);h=e.shift();for(j=g.shift();h&&j;h=e.shift(),j=g.shift())f(d.makeArray(d(h).children()),d.makeArray(d(j).children()))}a.selection.setRng(b);a.undoManager.add()}},{shouldInsert:function(a,b,e){a=d(b.startContainer).closest("td.confluenceTd, th.confluenceTh",
".mceContent");if(0===a.length)return!1;a=a.closest("table.confluenceTable",".mceContent");if(0!==a.length&&0!==a.children("tbody").length){if(!e.is("table:not(.wysiwyg-macro)"))return!1;var f=!1;return a.find("*[colspan], *[rowspan]").each(function(a,b){if(1<d(b).attr("rowspan")||1<d(b).attr("colspan"))return f=!0,!1}),!f}},insert:function(a,b,e){var b=d(b.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent"),f=b.closest("table.confluenceTable",".mceContent"),e=0<e.children("tbody").length?
e.children("tbody").children("tr"):e.children("tr"),g=f.children("tbody").children("tr"),h=e.length,j=e.first().children("td, th").length,k=g.length,s=g.first().children("td, th").length,v=b.parent().index(),t=b.index();a.undoManager.beforeChange();a.undoManager.add();var n=t+j-s,h=v+h-k,n=0>n?0:n,h=0>h?0:h;g.each(function(a,b){for(var c=d(b),e=c.children().last(),f=0;f<n;f++)c.append(e.clone().html(tinymce.isIE?"":"<br/>"))});j=g.last();for(g=0;g<h;g++){j=d("<tr></tr>").insertAfter(j);for(k=0;k<
s+n;k++)j.append('<td class="confluenceTd">'+(tinymce.isIE?"":"<br/>")+"</td>")}var y=[];f.children("tbody").children("tr").slice(v).each(function(a,b){y.push(d.makeArray(d(b).children("th, td").slice(t)))});var x=[];e.each(function(a,b){x.push(d.makeArray(d(b).children("th, td")))});f=x.shift();for(e=y.shift();f&&e;f=x.shift(),e=y.shift()){s=f.shift();for(v=e.shift();s&&v;s=f.shift(),v=e.shift())d(v).html(d(s).html())}a.selection.select(b[0],1);a.selection.collapse(!0);a.undoManager.add()}}],_applyOnBeforeSetContentListeners:function(a,
b){var d={content:b,format:"html"};return a.selection.onBeforeSetContent.dispatch(a.selection,d),d.content},_insertPlainText:function(b){function d(e){a(e,function(a){b=a.constructor==RegExp?b.replace(a,""):b.replace(a[0],a[1])})}var e=this.editor,f=k(e,"paste_text_linebreaktype"),g=k(e,"paste_text_replacements"),h=tinymce.is;"string"==typeof b&&0<b.length&&(d(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(b)?[/[\n\r]+/g]:[/\r+/g]),d([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,
"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]),b=e.dom.decode(tinymce.html.Entities.encodeRaw(b)),h(g,"array")?d(g):h(g,"string")&&d(RegExp(g,"gi")),d("none"==f?[[/\n+/g," "]]:"br"==f?[[/\n/g,"<br />"]]:"p"==f?[[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]:[[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),e.execCommand("mceInsertContent",!1,b))},_legacySupport:function(){var a=
this,b=a.editor;b.addCommand("mcePasteWord",function(){b.windowManager.open({file:a.url+"/pasteword.htm",width:parseInt(k(b,"paste_dialog_width")),height:parseInt(k(b,"paste_dialog_height")),inline:1})});k(b,"paste_text_use_dialog")&&b.addCommand("mcePasteText",function(){b.windowManager.open({file:a.url+"/pastetext.htm",width:parseInt(k(b,"paste_dialog_width")),height:parseInt(k(b,"paste_dialog_height")),inline:1})});b.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})},parse:function(a,
b){return"<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?d(a,b||document):d("<div>"+a+"</div>",b||document).contents()},repair:function(a){return a?(d.each(b,function(b,d){a=d.repair(a)}),a):a}});tinymce.PluginManager.add("aePaste",tinymce.plugins.AtlassianEditorPaste)})($);