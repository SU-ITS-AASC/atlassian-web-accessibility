("undefined"===typeof window?global:window).__c35ee65482ba222c97e480e4544e6569=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=f(__922acd0053a6de3ea4c53d8902766ab6),g=f(__e3ce9f42f29f6bd2118d84461512f4a4),i=f(__4d02fe17b8e885a34493e34af3d145dd),h=g.default.Collection.extend({initialize:function(a,b){b||(b={});b.matcher&&(this.matcher=b.matcher);b.model&&(this.model=b.model);this._idAttribute=(new this.model).idAttribute;
this._maxResults=b.maxResults||5;this._queryData=b.queryData||{};this._queryParamKey=b.queryParamKey||"q";this._queryEndpoint=b.queryEndpoint||"";this.value=null;this.queryCache={};this.activeQueryCount=0;c.default.bindAll(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(a){var b,d;this.value=a;d=this.getFilteredResults(a);this.respond(a,d);a&&(this._queryEndpoint&&!this.hasQueryCache(a)&&this.shouldGetMoreResults(d))&&(b=this.fetch(a),this.activeQueryCount++,this.trigger("activity",
{activity:!0}),b.always(c.default.bind(function(){this.activeQueryCount--;this.trigger("activity",{activity:!!this.activeQueryCount})},this)),b.done(c.default.bind(function(b,d,c){this.addQueryCache(a,b,c)},this)),b.done(c.default.bind(function(){a=this.value;d=this.getFilteredResults(a);this.respond(a,d)},this)))},getQueryData:function(a){var b=c.default.isFunction(this._queryData)?this._queryData(a):this._queryData,b=c.default.extend({},b);b[this._queryParamKey]=a;return b},fetch:function(a){a=
{add:!0,update:!0,remove:!1,data:this.getQueryData(a)};return g.default.Collection.prototype.fetch.call(this,a)},respond:function(a,b){this.trigger("respond",{query:a,results:b});return b},matcher:function(){},getFilteredResults:function(a){var b=[];if(!a)return b;b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&(b=c.default.first(b,this._maxResults));return b},addQueryCache:function(a,b,d){var e=this.queryCache,b=this.parse(b,d);e[a]=c.default.pluck(b,this._idAttribute)},
hasQueryCache:function(a){return this.queryCache.hasOwnProperty(a)},findQueryCache:function(a){return this.queryCache[a]},shouldGetMoreResults:function(a){return a.length<this._maxResults},setMaxResults:function(a){this._maxResults=a;this.value&&this.respond(this.value,this.getFilteredResults(this.value))}});(0,i.default)("ProgressiveDataSet",h);e.default=h;return e=e["default"]}.call(this);