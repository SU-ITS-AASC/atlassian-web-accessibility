define("confluence-dashboard/modules/recently-worked/recently-worked-collection",["module","exports","backbone","configuration","confluence-dashboard/utils/date-utils","../../core/shared/base-collection-with-function","underscore","ajs"],function(e,t,n,a,r,o,d,l){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var i=n.Model,u=(a.apiLimit,a.endpoints),c=s(r).default,f=s(o).default,m=s(d).default,p=s(l).default.contextPath(),g=i.extend({parse:function(e,t){var n=e.metadata.currentuser.lastcontributed&&e.metadata.currentuser.lastcontributed.when||null,a=e.metadata.currentuser.lastmodified&&e.metadata.currentuser.lastmodified.version&&e.metadata.currentuser.lastmodified.version.when||null,r=new Date(n||0),o=new Date(a||0),d=r>o?r:o,l=r>o?n:a,s=d.getTime();return m.extend(e,{url:"draft"===e.status?p+e._links.edit:p+e._links.webui,date:l,timestamp:s,lastContributedISO:c.toISODate(d),friendlyDate:"Updated "+l,updated:l,icon:"page"===e.type?"page-default":"page-blogpost"}),e}});t.default=f.extend({model:g,comparator:function(e,t){return-c.compareTimestamps(e.get("timestamp"),t.get("timestamp"))},apiParams:function(e){var t={url:u.RECENTLY_WORKED,expansions:["container","metadata.currentuser.lastcontributed","metadata.currentuser.lastmodified"],cql:"type in (page,blogpost) and id in recentlyModifiedPagesAndBlogPostsByUser(currentUser(), "+this.getPageOffset(e)+", "+this.getPageLimit(e)+")"};return t.cqlcontext='{"contentStatuses":["current","draft"]}',t},groupMethod:function(e){return e.get("lastContributedISO")}}),e.exports=t.default}),define("confluence-dashboard/modules/recently-worked/recently-worked-controller",["module","exports","./recently-worked-collection","../../core/content/content-as-grouped-list-discovery-view","confluence-dashboard/core/content/content-controller","confluence-dashboard/soy-templates","ajs"],function(e,t,n,a,r,o,d){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var s=l(n).default,i=l(a).default,u=l(r).default,c=l(o).default,f=l(d).default;t.default=u.extend({actionsToFilter:["recentWorked"],recentWorked:function(){this.view=new i({collection:new s,templateHelpers:{title:f.I18n.getText("recently.worked.title"),contentType:this.options.name},emptyViewOptions:{template:c.RecentWorked.blank},className:"default-list-view starred-list"}),this.view.collection.fetch()}}),e.exports=t.default});