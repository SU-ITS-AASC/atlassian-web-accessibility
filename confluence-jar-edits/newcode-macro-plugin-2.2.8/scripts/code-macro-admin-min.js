(AJS.toInit(function(a){a("#add-language").click(function(b){var j=30;var c=new AJS.Dialog(600,450);c.addHeader(AJS.I18n.getText("newcode.config.language.add.link"));c.addPanel("",Confluence.Templates.NewCode.addLanguageDialog({token:AJS.Meta.get("atl-token")}),"panel-body");c.addButton(AJS.I18n.getText("newcode.config.language.add.add"),g);c.addCancel(AJS.I18n.getText("newcode.config.language.add.cancel"),m);c.show();var f=a("#languageFile");var i=a("#newLanguageName");var d=a("#addLanguageForm");function h(){var p=true;var o=e(f);if(f.val()==""){o.text(AJS.I18n.getText("newcode.config.language.add.filename.required"));o.removeClass("hidden");p=false}else{o.addClass("hidden")}var n=e(i);if(i.val()==""){n.text(AJS.I18n.getText("newcode.config.language.add.friendlyname.required"));n.removeClass("hidden");p=false}else{if(i.val().length>j){n.text(AJS.I18n.getText("newcode.config.language.add.friendlyname.length"));n.removeClass("hidden");p=false}else{n.addClass("hidden")}}return p}function g(){if(h()){d.submit();k();c.remove()}}function m(){k();c.remove()}function e(n){return a(".error",n.parent())}var l=function(){errorDiv=e(a(this));if(!errorDiv.hasClass("hidden")){errorDiv.addClass("hidden")}};f.change(l);i.focus(l);function k(){f.unbind("change",l);i.unbind("focus",l)}})}))(AJS.$);